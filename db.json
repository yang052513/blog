{"meta":{"version":1,"warehouse":"3.0.2"},"models":{"Asset":[{"_id":"themes/yun/source/Yun.png","path":"Yun.png","modified":1,"renderable":1},{"_id":"themes/yun/source/yun-favicon.ico","path":"yun-favicon.ico","modified":1,"renderable":1},{"_id":"themes/yun/source/yun.svg","path":"yun.svg","modified":1,"renderable":1},{"_id":"themes/yun/source/css/hexo-theme-yun.styl","path":"css/hexo-theme-yun.styl","modified":1,"renderable":1},{"_id":"themes/yun/source/data/sentences.json","path":"data/sentences.json","modified":1,"renderable":1},{"_id":"themes/yun/source/js/hexo-theme-yun.js","path":"js/hexo-theme-yun.js","modified":1,"renderable":1},{"_id":"themes/yun/source/js/pjax.js","path":"js/pjax.js","modified":1,"renderable":1},{"_id":"themes/yun/source/js/say.js","path":"js/say.js","modified":1,"renderable":1},{"_id":"themes/yun/source/js/gallery-decrypt.js","path":"js/gallery-decrypt.js","modified":1,"renderable":1},{"_id":"themes/yun/source/js/sidebar.js","path":"js/sidebar.js","modified":1,"renderable":1},{"_id":"themes/yun/source/js/utils.js","path":"js/utils.js","modified":1,"renderable":1},{"_id":"themes/yun/source/js/search/algolia-search.js","path":"js/search/algolia-search.js","modified":1,"renderable":1},{"_id":"themes/yun/source/js/ui/banner.js","path":"js/ui/banner.js","modified":1,"renderable":1},{"_id":"themes/yun/source/js/ui/fireworks.js","path":"js/ui/fireworks.js","modified":1,"renderable":1},{"_id":"themes/yun/source/js/search/local-search.js","path":"js/search/local-search.js","modified":1,"renderable":1},{"_id":"themes/yun/source/kirito.png","path":"kirito.png","modified":1,"renderable":1},{"_id":"themes/yun/source/yang.jpg","path":"yang.jpg","modified":1,"renderable":1},{"_id":"themes/yun/source/yang-favicon.png","path":"yang-favicon.png","modified":1,"renderable":1}],"Cache":[{"_id":"themes/yun/.gitignore","hash":"38be463b1bf715e7c5a8664acfbe0ad0adf0332d","modified":1590408109384},{"_id":"themes/yun/_config.yml","hash":"607442efdabdbe569a9644ef34d8b485520308a3","modified":1591154215179},{"_id":"themes/yun/package.json","hash":"4973200b5b49c4dd40296506cfc2fec858ee1826","modified":1590408109418},{"_id":"themes/yun/README.md","hash":"d3e560bbe8f0948bb2e67b573b90b3294e330f7e","modified":1590408109385},{"_id":"themes/yun/LICENSE","hash":"fa221ceba871b104543fa698b80750fc19552fd2","modified":1590408109384},{"_id":"source/_posts/01 firebase.md","hash":"6450dfd692fe017f7be320b4d04fe3f3f90adcd4","modified":1591679635708},{"_id":"source/_posts/02 study.md","hash":"98101d653881952ad81f6577dc7c7f8e3499996e","modified":1591679621384},{"_id":"source/_posts/03 event-target.md","hash":"b2c990211922a0c18f169d1d14870b281941ac38","modified":1591679604860},{"_id":"source/_posts/04 router.md","hash":"4c025df5243f2426263ad44e6e178da9c2c4ea26","modified":1591159100593},{"_id":"source/about/index.md","hash":"32eb39a217c0b41a02dc148d0a45a10d0312bcf0","modified":1590408109327},{"_id":"source/about/site.md","hash":"1280b7a7de7cb8ed730f6851c14957b055bea7a1","modified":1590408109328},{"_id":"source/albums/index.md","hash":"8d0674933590be17af3ef22eef46ab8e4a2237ef","modified":1590408109328},{"_id":"source/categories/index.md","hash":"27f94a3c8fa908bac5b2d0c879e080d0d9151f0c","modified":1590408109328},{"_id":"source/girls/index.md","hash":"ba3960df8886258d9b681be12103bcd69c4d1e39","modified":1590408109329},{"_id":"source/links/index.md","hash":"edb053c1fecadbd47ed37bcf987d7556430b3978","modified":1590408109329},{"_id":"themes/yun/docs/README.md","hash":"37a84b6e762153c176e6380f5c3ee478d394278e","modified":1590408109387},{"_id":"themes/yun/docs/about.md","hash":"7a8dc9e09a962083d5341e0ffc33affd4bb870ed","modified":1590408109387},{"_id":"themes/yun/docs/demo.md","hash":"56fc428cfe85014c1cb6a41ce36b95525c7e736f","modified":1590408109388},{"_id":"themes/yun/languages/default.yml","hash":"e56bebd19d2abd1698e9aa87d337941957977468","modified":1590408109396},{"_id":"themes/yun/languages/en.yml","hash":"734bd23194d32354c2275ac7ed798f741e8c4edc","modified":1590408109397},{"_id":"themes/yun/languages/ja.yml","hash":"8a3a181d032b730132c5ae4320606e36bc373db9","modified":1590408109397},{"_id":"themes/yun/languages/zh-CN.yml","hash":"0d15fcf3d76f15d808d35bf3d4e728eb37ca44b8","modified":1590408109397},{"_id":"themes/yun/docs/sponsor.md","hash":"02d6159e56945406506d0c39873576d881a5a125","modified":1590408109396},{"_id":"themes/yun/layout/404.pug","hash":"eeb41a1a7cda23266425dd596ed010b6ec1e4827","modified":1590408109398},{"_id":"themes/yun/layout/archive.pug","hash":"46222776ce32ef385456c971fc1bc8d1af7656f1","modified":1590408109415},{"_id":"themes/yun/layout/category.pug","hash":"b8f68e0c9214274701d442a37b5c5e1915de1ecd","modified":1590408109416},{"_id":"themes/yun/layout/gallery.pug","hash":"b49fd9ae0c2bcbdaf7fb932102b07a3fa356ec16","modified":1590408109416},{"_id":"themes/yun/layout/girls.pug","hash":"8e73302a159fd5dbaf0bc2f9110a5aa8dab28902","modified":1590408109416},{"_id":"themes/yun/layout/index.pug","hash":"72ce130efc06d107d5244e54d62bd533abe88bff","modified":1590408109416},{"_id":"themes/yun/layout/links.pug","hash":"ce9fcdd9a1bd46623e4440aabe2a70be4910253a","modified":1590408109417},{"_id":"themes/yun/layout/page.pug","hash":"053f84c82b3c744eb00b80d45e44669276ae021e","modified":1590408109417},{"_id":"themes/yun/layout/post.pug","hash":"d3b15b34ff8a546722d99f88da607ea578d9ab44","modified":1590408109417},{"_id":"themes/yun/layout/tag.pug","hash":"25d78324e3b293f2fcd23b81c3f0e052b2a36210","modified":1590408109418},{"_id":"themes/yun/source/Yun.png","hash":"b8ae426fa5dd7579d23d189c222641d812c51c0a","modified":1590408109421},{"_id":"themes/yun/source/yun-favicon.ico","hash":"80866f3f79840bd9426a8fee84e3ea19ef20c88b","modified":1590408109458},{"_id":"themes/yun/source/yun.svg","hash":"640f53d7a83557d91ae19b8436c7e5f19da64e3d","modified":1590408109459},{"_id":"themes/yun/docs/.vuepress/config.js","hash":"3a5de34e19592e535dc7d22f0ba118512ba7635e","modified":1590408109386},{"_id":"themes/yun/docs/en/README.md","hash":"5c8ae9a27daea4f11a569e95c0221732383ba9b7","modified":1590408109388},{"_id":"themes/yun/docs/en/about.md","hash":"1b71b8d738902c31de70943f021a8dc6aa208602","modified":1590408109389},{"_id":"themes/yun/docs/guide/Todo.md","hash":"9baefd7a58bf26f9d0ce71ed5e26d1b4a5d02783","modified":1590408109393},{"_id":"themes/yun/docs/guide/README.md","hash":"61e43c3444a0eb83e9571e6725cf605ed3813ee0","modified":1590408109393},{"_id":"themes/yun/docs/guide/icon.md","hash":"34ee6247384a4db1cb5fdfeee437b3a29e60ffb6","modified":1590408109395},{"_id":"themes/yun/docs/guide/config.md","hash":"67821fefabe8783cbc12e50507baf278a774a9b3","modified":1590408109394},{"_id":"themes/yun/docs/guide/additional-package-support.md","hash":"86ad625ab3538701fb122946ff8b75abbc7217af","modified":1590408109393},{"_id":"themes/yun/docs/guide/faq.md","hash":"f87a095156185a6cc665c80029cfe652e5f647ef","modified":1590408109394},{"_id":"themes/yun/docs/guide/page.md","hash":"ca35b205d9fca0cb40fcb87a9194489d257b8731","modified":1590408109395},{"_id":"themes/yun/layout/_mixin/icon.pug","hash":"18ee2c33b4e6ef71c31d7955f9a20789fe6aa9e4","modified":1590408109398},{"_id":"themes/yun/layout/_mixin/index.pug","hash":"3c6964b4594e842e2aefcd316bdd0184750b40f1","modified":1590408109398},{"_id":"themes/yun/docs/guide/third-party-support.md","hash":"446031e4ab4f421d7f1cd104c043513c6108568c","modified":1590408109395},{"_id":"themes/yun/layout/_mixin/page-header.pug","hash":"4110b4c87a09d67a2edf86321a1e84ef88572d09","modified":1590408109399},{"_id":"themes/yun/layout/_mixin/post-collapse.pug","hash":"f4437f71f0ccc511e4cfa5de4257fd703f46530b","modified":1590408109399},{"_id":"themes/yun/layout/_partial/background.pug","hash":"209a66219f24749677522931bcf73462510e21fa","modified":1590408109399},{"_id":"themes/yun/layout/_partial/banner.pug","hash":"391cf2b3344d513fc3ad026bf2bd8f4ed7e30958","modified":1590408109399},{"_id":"themes/yun/layout/_partial/footer.pug","hash":"ae84ed01dc0f0419714f8e581e58706da6a92687","modified":1590408109400},{"_id":"themes/yun/layout/_partial/head.pug","hash":"f9f4fac30534d4a23b7d5f2306fd7442a31e227a","modified":1590408109400},{"_id":"themes/yun/layout/_partial/layout.pug","hash":"45757edbb2dd13c6eae6e43c893a4ebcd847a306","modified":1590408109400},{"_id":"themes/yun/layout/_partial/pagination.pug","hash":"b55b6a99b105447b4a6c982fa258680a2a9a34a9","modified":1590408109401},{"_id":"themes/yun/layout/_partial/recent-posts.pug","hash":"0f7eb2abb0479c83c917aa51091b71b2493d9a25","modified":1590408109403},{"_id":"themes/yun/layout/_partial/sidebar.pug","hash":"f365b6dd2842de8b31c4a6ada8ced82f39c91123","modified":1590408109403},{"_id":"themes/yun/layout/_third-party/aplayer.pug","hash":"93d2be35ae9731056563d3cbdbf7b13b1933c80c","modified":1590408109407},{"_id":"themes/yun/layout/_third-party/cdn.pug","hash":"ef602e091b2f8595d3198106d05065b85de773cf","modified":1590408109407},{"_id":"themes/yun/layout/_third-party/katex.pug","hash":"782255a8ed7fa4e396b2df0313e541d445b0d777","modified":1590408109410},{"_id":"themes/yun/layout/_third-party/lightgallery.pug","hash":"c1596d4e3172e44454624b47cb8237ae9c6bc1e4","modified":1590408109410},{"_id":"themes/yun/layout/_third-party/pjax.pug","hash":"f72620c6b56183d1061295b881b4738eeb49ab7f","modified":1590408109411},{"_id":"themes/yun/layout/_widget/aplayer.pug","hash":"daf51021671e02ce7dbc7d36bf065f09928ad218","modified":1590408109411},{"_id":"themes/yun/layout/_widget/back-to-top.pug","hash":"d5a24af60ce7d1283f10878ca1e1c88d0e09e4cd","modified":1590408109412},{"_id":"themes/yun/layout/_widget/cloud.pug","hash":"eb3185db30fef0303b667e50b96a7d85edda8006","modified":1590408109412},{"_id":"themes/yun/layout/_widget/index.pug","hash":"96d4a92e258688b17328d4470bacaabaccace67c","modified":1590408109412},{"_id":"themes/yun/layout/_widget/mourn.pug","hash":"7b94847cf8b456558c6b91312092d269586831e1","modified":1590408109412},{"_id":"themes/yun/layout/_widget/notice.pug","hash":"346ada39ba6586cb631ac5b1f129683f3ee015f4","modified":1590408109414},{"_id":"themes/yun/layout/_widget/say.pug","hash":"80da86582d27c1078b8a6096c78ad11b462472ee","modified":1590408109414},{"_id":"themes/yun/layout/_widget/tag-cloud.pug","hash":"9c818d42a4310151c43336e895509fba4e29196d","modified":1590408109415},{"_id":"themes/yun/scripts/events/config.js","hash":"f57208b6fa7bc068ef0e9adb3a76b1ba63879f8c","modified":1590408109418},{"_id":"themes/yun/scripts/events/index.js","hash":"5e9e1ea1d196e3eb31c288060a62345d34984283","modified":1590408109419},{"_id":"themes/yun/scripts/filters/index.js","hash":"b0ec6551d78076c55f516bc04544f258c564aa62","modified":1590408109419},{"_id":"themes/yun/scripts/helpers/encrypt.js","hash":"bad32d8e5f37bd07d5c61a36a74372875a8c3047","modified":1590408109419},{"_id":"themes/yun/scripts/helpers/engine.js","hash":"dda789bf09c0fb0e87a257a0b5f0cb9cb1fbee5a","modified":1590408109420},{"_id":"themes/yun/scripts/helpers/index.js","hash":"a08f8643c80b27b892ea1e27c428298d712ab178","modified":1590408109420},{"_id":"themes/yun/scripts/helpers/yun-config.js","hash":"31fc0a38348dc95d7d505da7dd6650a7dab981dc","modified":1590408109420},{"_id":"themes/yun/source/css/hexo-theme-yun.styl","hash":"fdbcb870e06d21c50372e624d4aa91d246702f5a","modified":1590408109435},{"_id":"themes/yun/source/data/sentences.json","hash":"9ac2f33d4af28f7dac62ffa1bd3b7e5e53d54e93","modified":1590408109436},{"_id":"themes/yun/source/js/hexo-theme-yun.js","hash":"6d3ab3ecc775f0e49ee864b1d9e071793c25a477","modified":1590408109436},{"_id":"themes/yun/source/js/pjax.js","hash":"fc8eb1e16b8b7d73dabd0b5d69f3d83ed578f3e2","modified":1590408109436},{"_id":"themes/yun/source/js/say.js","hash":"b39c0a0be7fe77713a2a40cf36c6fa1fc9fdd554","modified":1590408109437},{"_id":"themes/yun/source/js/gallery-decrypt.js","hash":"893047d65e3696f49f84150832a41e46ab29d9d2","modified":1590408109436},{"_id":"themes/yun/source/js/sidebar.js","hash":"97f1bf5c4ad87a0ab22d5c0a6086b27b8c87d411","modified":1590408109438},{"_id":"themes/yun/source/js/utils.js","hash":"40667a17cd9bd3576b3a1959c25440231d0f1e61","modified":1590408109439},{"_id":"themes/yun/docs/.vuepress/styles/index.styl","hash":"cac594929f2331640666e50d6e4533d5718abaf9","modified":1590408109386},{"_id":"themes/yun/docs/.vuepress/styles/palette.styl","hash":"25a57ac820b471bc91c151347a1c1d0cc62767d6","modified":1590408109387},{"_id":"themes/yun/docs/en/guide/README.md","hash":"257ae08a8abaf64caf8230d92344f4cc568be819","modified":1590408109389},{"_id":"themes/yun/docs/en/guide/additional-package-support.md","hash":"731a14e4273bbe1bec622edf37ad2552e995db44","modified":1590408109390},{"_id":"themes/yun/docs/en/guide/Todo.md","hash":"4eaefddef5514de480846be4cb30f240361587cd","modified":1590408109389},{"_id":"themes/yun/docs/en/guide/config.md","hash":"fe3034a9dbd52554d9d5370d7cfb9a0772379dd5","modified":1590408109390},{"_id":"themes/yun/docs/en/guide/icon.md","hash":"3d3fa6cbf9c60140c9ea8c2b85dea60d0731e4c4","modified":1590408109391},{"_id":"themes/yun/docs/en/guide/faq.md","hash":"4adca9209ee319a687b00a2f1a1656591d2f5ab7","modified":1590408109391},{"_id":"themes/yun/docs/en/guide/page.md","hash":"1114e38a96442a6179161848a2f1e8f9070e74d2","modified":1590408109392},{"_id":"themes/yun/docs/en/guide/third-party-support.md","hash":"c47f3a550df3a3aff7bb3d158cbe68aa249c104d","modified":1590408109392},{"_id":"themes/yun/layout/_partial/post/post-classify.pug","hash":"b4c86904eecf74e1f34cdc42e4fed6ec3a954444","modified":1590408109401},{"_id":"themes/yun/layout/_partial/post/post-copyright.pug","hash":"b01c70d2fe59bc8cbdb82c626fc679663f1104cd","modified":1590408109401},{"_id":"themes/yun/layout/_partial/post/post-edit.pug","hash":"2b7d4c210815ddc63c5b6fc5b5fd6a348e75093f","modified":1590408109402},{"_id":"themes/yun/layout/_partial/post/post-meta.pug","hash":"5203249e547c85e7dd5d880b3252fedc1bc3d905","modified":1590408109402},{"_id":"themes/yun/layout/_partial/post/post-nav.pug","hash":"ea351236ab82ff43b66272de1baade70d868131f","modified":1590408109402},{"_id":"themes/yun/layout/_partial/post/post-schema.pug","hash":"ec85079174da20c9f608b142e7fda2c28a9b1dac","modified":1590408109403},{"_id":"themes/yun/layout/_partial/post/reward.pug","hash":"d4b9081fc4b2bf3bc364511cbc2eec5136dcc720","modified":1590408109403},{"_id":"themes/yun/layout/_third-party/adsense/google-adsense.pug","hash":"c8ba58ed3d2895d0eb7ad913f3919256f7fa8490","modified":1590408109406},{"_id":"themes/yun/layout/_third-party/analytics/busuanzi.pug","hash":"d606071c4c4f1e0df9f55fa6c8e248eb2591c484","modified":1590408109406},{"_id":"themes/yun/layout/_third-party/analytics/google-analytics.pug","hash":"581497ecca3e002ddf017a5dea1c66f237a98f0c","modified":1590408109407},{"_id":"themes/yun/layout/_third-party/comments/disqus.pug","hash":"387e65a6292c4fd6d866e5dc14e3a95fa39782a5","modified":1590408109408},{"_id":"themes/yun/layout/_third-party/comments/disqusjs.pug","hash":"a73d062565c3af29083371de7d4665fb82a05358","modified":1590408109408},{"_id":"themes/yun/layout/_third-party/comments/gitalk.pug","hash":"938787a70bb8431ee02e98f45fcbc4fbd6502e3d","modified":1590408109408},{"_id":"themes/yun/layout/_third-party/comments/github-issues.pug","hash":"2772d0e44da12c261e695e35f265af05f2cd75dc","modified":1590408109409},{"_id":"themes/yun/layout/_third-party/comments/index.pug","hash":"c0f58f204d854e9234d8983396ea3a4a7894e0b9","modified":1590408109409},{"_id":"themes/yun/layout/_third-party/comments/livere.pug","hash":"f565efde0ee74d69555e8b5c959c96e0f1ae61fb","modified":1590408109409},{"_id":"themes/yun/layout/_third-party/comments/minivaline.pug","hash":"821618e31ab70761a3e0d26c596ee402131d00ee","modified":1590408109409},{"_id":"themes/yun/layout/_third-party/comments/valine.pug","hash":"faa3e75ba743eedaaa26c8e9b8fe05c68596ded9","modified":1590408109410},{"_id":"themes/yun/layout/_third-party/seo/baidu-push.pug","hash":"5b08e856a6c75a9b4a5aafccf52b1b418dac0e38","modified":1590408109411},{"_id":"themes/yun/layout/_widget/search/algolia-search.pug","hash":"e15f78a38d386d57c1a19b4a760115bd14edbb0d","modified":1590408109414},{"_id":"themes/yun/layout/_widget/search/index.pug","hash":"a1dd964e05b5412c3fc446d80576e51b37926b87","modified":1590408109415},{"_id":"themes/yun/layout/_widget/search/local-search.pug","hash":"d2ba600623043b2410f379fd7ba3cc75329ff408","modified":1590408109415},{"_id":"themes/yun/source/css/_components/button.styl","hash":"afc6d348f837e87c25f65904d3d2cfa56e332d74","modified":1590408109422},{"_id":"themes/yun/source/css/_components/card.styl","hash":"8e959430b3c05ef8dfb9143c05fadf1ce247a9c7","modified":1590408109422},{"_id":"themes/yun/source/css/_components/menu.styl","hash":"c6d35dbc05af9c672ebaca1d62f79f76fbfa9a38","modified":1590408109423},{"_id":"themes/yun/source/css/_components/scrollbar.styl","hash":"3e332ae27d3aeab1496079cd509649ceccc0f4b5","modified":1590408109425},{"_id":"themes/yun/source/css/_components/ui.styl","hash":"82b8f4ad20baa5b8173b84fd8381cbf89338428b","modified":1590408109427},{"_id":"themes/yun/source/css/_extend/albums.styl","hash":"b0f703fc6e279844b75797edf714cce2135704ed","modified":1590408109428},{"_id":"themes/yun/source/css/_extend/girls.styl","hash":"0b0f22213c02131bb12392dd804d1eea5fb6b25b","modified":1590408109428},{"_id":"themes/yun/source/css/_global/index.styl","hash":"86d224d552b85ad5963a358913c2f41ee9f4b464","modified":1590408109428},{"_id":"themes/yun/source/css/_global/reset.styl","hash":"f253d07739ef1b6b31eed2c205413df51bf13083","modified":1590408109429},{"_id":"themes/yun/source/css/_layout/banner.styl","hash":"eeb4da5108348b0e06fa1a0a8639e3f966f57615","modified":1590408109429},{"_id":"themes/yun/source/css/_layout/footer.styl","hash":"d2637ffc451bc8f2667495a19528f0b7786c361d","modified":1590408109429},{"_id":"themes/yun/source/css/_layout/grid.styl","hash":"21155945048d3395051175cd0e842b7b642dbc5d","modified":1590408109430},{"_id":"themes/yun/source/css/_layout/links.styl","hash":"f1b03e0da25b79741be5c0455c08c29c6e8e6a54","modified":1590408109430},{"_id":"themes/yun/source/css/_layout/main.styl","hash":"96a036061872efe46c0876b22d8803fab6ccb6ce","modified":1590408109430},{"_id":"themes/yun/source/css/_layout/page.styl","hash":"652b2e4417b5ab7f333953e29f1cf53ceca6611f","modified":1590408109430},{"_id":"themes/yun/source/css/_layout/pagination.styl","hash":"ba775b5bd3e6c35118fecceb286d86ae5293e668","modified":1590408109431},{"_id":"themes/yun/source/css/_layout/post.styl","hash":"f442a455618c63e68dfb86847ab4b1b9152b4e09","modified":1590408109431},{"_id":"themes/yun/source/css/_mixins/base.styl","hash":"9a227ede3cd5a9829b31f6450dd37c21e00bdaf1","modified":1590408109431},{"_id":"themes/yun/source/css/_mixins/helper.styl","hash":"80fcaab47d6a1d202745342e3fc3ee5bf18f39b2","modified":1590408109432},{"_id":"themes/yun/source/css/_variables/_base.styl","hash":"d94e4e978e4d9cdb361a906f2f417787ed86f86a","modified":1590408109432},{"_id":"themes/yun/source/css/_variables/_colors.styl","hash":"1f71dd5fc633ed5b4f04392bb0d96bf358ad435c","modified":1590408109432},{"_id":"themes/yun/source/css/_widget/back-to-top.styl","hash":"ef5911aadaef439021823917b19eaef85e426fd2","modified":1590408109433},{"_id":"themes/yun/source/css/_widget/comment.styl","hash":"31c27799dfad61c98e872e79b4411a5c568ff793","modified":1590408109433},{"_id":"themes/yun/source/css/_widget/index.styl","hash":"640fea56a013989f5878334d09f3f9b716865c8c","modified":1590408109433},{"_id":"themes/yun/source/css/_widget/notice.styl","hash":"8b1ca54535311f38b91433e5beadbeed02ecd28b","modified":1590408109434},{"_id":"themes/yun/source/css/_widget/say.styl","hash":"36b6680657267e1223bb74b04568a34563887bff","modified":1590408109434},{"_id":"themes/yun/source/js/search/algolia-search.js","hash":"a53109a5d3ac566050e0897765d24574e3e7e860","modified":1590408109437},{"_id":"themes/yun/source/js/ui/banner.js","hash":"17573fe09c65f02dbe5a785c8abe1dbe2f2bfaa6","modified":1590408109438},{"_id":"themes/yun/source/js/ui/fireworks.js","hash":"01e7b0fce3891f88b5f274f610e5e3ac50d1ac34","modified":1590408109439},{"_id":"themes/yun/source/js/search/local-search.js","hash":"39bb514361a7c56dea96310fe79d6b53440de241","modified":1590408109438},{"_id":"themes/yun/source/css/_components/post/post-collapse.styl","hash":"b4177dd52f17eb289ebaa2b82d9bc10897a53629","modified":1590408109424},{"_id":"themes/yun/source/css/_components/post/post-header.styl","hash":"3be5d23cda0020365dbfb39ca35eb00aef65e7cd","modified":1590408109424},{"_id":"themes/yun/source/css/_components/post/post-markdown.styl","hash":"87655e0cb46a05cb41c8cf2cd5a0ea249661fa9a","modified":1590408109424},{"_id":"themes/yun/source/css/_components/post/post-nav.styl","hash":"5143932ebfa835d168a766d6770f6239c2b516e8","modified":1590408109424},{"_id":"themes/yun/source/css/_components/post/post-card.styl","hash":"b37640d07040bac74bc37d10638f7a6a6e886098","modified":1590408109423},{"_id":"themes/yun/source/css/_components/post/post-reward.styl","hash":"508fe878ef756ebb38bc4930103b03b949df8ee4","modified":1590408109425},{"_id":"themes/yun/source/css/_components/post/post-table.styl","hash":"d46aaf30fec5a49d1cb37d21ee9a3a03fe24aac1","modified":1590408109425},{"_id":"themes/yun/source/css/_components/sidebar/sidebar-nav.styl","hash":"24e0782c0ef99fd50b7eb5fe6e2ce2230bc97964","modified":1590408109426},{"_id":"themes/yun/source/css/_components/sidebar/sidebar-toc.styl","hash":"b680aa6e74e2918c9d9fa94ce9088f472a73e708","modified":1590408109426},{"_id":"themes/yun/source/css/_components/sidebar/sidebar.styl","hash":"42b719a3efb284ba886c64aa4020301c1146f191","modified":1590408109427},{"_id":"themes/yun/source/css/_components/sidebar/site-overview.styl","hash":"286ede113625b7087ca7bdbf967b3ddcef87e56c","modified":1590408109427},{"_id":"themes/yun/source/css/_widget/search/local-search.styl","hash":"06468fd1f85390134d4cf034dc5abcc114018257","modified":1590408109435},{"_id":"themes/yun/source/css/_components/sidebar/hamburger.styl","hash":"0fa240e8a71fdad14d3fd6b3fd49cf697d4c8153","modified":1590408109426},{"_id":"themes/yun/source/css/_widget/search/index.styl","hash":"243ec574c6777e015455856e6d60c0e5bc8e0f76","modified":1590408109435},{"_id":"themes/yun/source/css/_widget/search/algolia-search.styl","hash":"1075be47f725d513c1b9db3233c7458b382e9b13","modified":1590408109434},{"_id":"themes/yun/source/kirito.png","hash":"b31e47cba5984ffa7fc6257c6f363716dc66efb1","modified":1590408109442},{"_id":"themes/yun/source/yang.jpg","hash":"63aa7525e1697a0fe02204f90e723f55cc931efc","modified":1590408109458},{"_id":"themes/yun/source/yang-favicon.png","hash":"7fa03977f80bb51cb6ea188f011634eeaf4d11e6","modified":1590408109452},{"_id":"public/about/index.html","hash":"4d57bbeb6e70df104ecc7109a7f870f72ad4b0b7","modified":1591679704037},{"_id":"public/about/site.html","hash":"01887ed9f7d03b8d5c5c94a38c8d6fc4e3d7db55","modified":1591679704037},{"_id":"public/albums/index.html","hash":"abd6b03fda8ef79c7994fdde2faf9b7ea0d766ac","modified":1591679704037},{"_id":"public/categories/index.html","hash":"19669ceb173c3ab8f19f54106159638cf6d79880","modified":1591679704037},{"_id":"public/girls/index.html","hash":"fead4102bf37bc2291e58418fb13323cb42a4993","modified":1591679704037},{"_id":"public/links/index.html","hash":"7e3e47b29b707b6d446fcdd8683c02638cf223f7","modified":1591679704037},{"_id":"public/categories/笔记/index.html","hash":"57250ccacdf6cbffc431d085b610fda6a1c1dd07","modified":1591679704037},{"_id":"public/archives/index.html","hash":"6454e32e15697263b22cadbe567d5f9abc2cacc8","modified":1591679704037},{"_id":"public/archives/2020/index.html","hash":"54669d3db6b5ea8b0b96a5d73c0406164c6c19fc","modified":1591679704037},{"_id":"public/archives/2020/05/index.html","hash":"07383b20412f4a1e0d3333ec2e5674761b72fe04","modified":1591679704037},{"_id":"public/archives/2020/06/index.html","hash":"ee4881ef5c53268cec25b0057e112116b498cbb8","modified":1591679704037},{"_id":"public/tags/firebase/index.html","hash":"61b4d57519c5bc67e55ababbd6d939c1dd31555d","modified":1591679704037},{"_id":"public/tags/database/index.html","hash":"343c879e9b1d580489831cca196cf430e97dca14","modified":1591679704037},{"_id":"public/tags/web/index.html","hash":"6fbd72d67b152a89099db0d89723e3e429b6c02c","modified":1591679704037},{"_id":"public/tags/firestore/index.html","hash":"d052ea2127a3359807cd63ffab1c53322a72b068","modified":1591679704037},{"_id":"public/tags/cloudstorage/index.html","hash":"acb16d8f49ca797b98959581426846f5143ff36b","modified":1591679704037},{"_id":"public/tags/笔记/index.html","hash":"c580f2b69c0f3da5b75949cbbc7026c75d6c71df","modified":1591679704037},{"_id":"public/tags/git/index.html","hash":"27a2a95ef4abd79557b51f634d13f2adba0f13a7","modified":1591679704037},{"_id":"public/tags/javascript/index.html","hash":"153e1d2a754655d0a559b21fb27bfb0a09837a4b","modified":1591679704037},{"_id":"public/tags/react/index.html","hash":"a766534135f8a99017ab90cec908af8c4b8925c2","modified":1591679704037},{"_id":"public/2020/06/02/04 router/index.html","hash":"8f6703eb2a731e29109d24763d92dc62230c7055","modified":1591679704037},{"_id":"public/2020/05/28/03 event-target/index.html","hash":"5003ce9d5f2471f4e051137aec400ddba94185c5","modified":1591679704037},{"_id":"public/2020/05/25/02 study/index.html","hash":"5a256eddac3b47cc9ea410f0ec4c2924fc1913df","modified":1591679704037},{"_id":"public/2020/05/23/01 firebase/index.html","hash":"90abf7961676c103accc9061251cd9fc70fdd4fc","modified":1591679704037},{"_id":"public/index.html","hash":"dae448d1cc811c4cbf9691526ca098e9b94445ba","modified":1591679704037},{"_id":"public/tags/react-router/index.html","hash":"1867b7abebab936124d15aefd1370768c1a81903","modified":1591679704037},{"_id":"public/Yun.png","hash":"b8ae426fa5dd7579d23d189c222641d812c51c0a","modified":1591679704037},{"_id":"public/yun-favicon.ico","hash":"80866f3f79840bd9426a8fee84e3ea19ef20c88b","modified":1591679704037},{"_id":"public/yun.svg","hash":"640f53d7a83557d91ae19b8436c7e5f19da64e3d","modified":1591679704037},{"_id":"public/css/prism-duotone-dark.css","hash":"77e93ecd6bc9648e1f00432b3770f18dbcf6aa28","modified":1591679704037},{"_id":"public/data/sentences.json","hash":"e4c057beac39fab25fd50ccd2f08ddb59cd42eb7","modified":1591679704037},{"_id":"public/js/hexo-theme-yun.js","hash":"a7ead628335524a6cd0aee0ce42e3fce76e35b9e","modified":1591679704037},{"_id":"public/js/pjax.js","hash":"f61ac34cc2fb99ed53c4feb9a46500dfbd525e24","modified":1591679704037},{"_id":"public/js/say.js","hash":"fb33bdeb4f54e1437aa8c652c403e6529cad7606","modified":1591679704037},{"_id":"public/js/utils.js","hash":"a1b8a0a1e3dd980a6f56c8dc04edbbe6799f69a6","modified":1591679704037},{"_id":"public/js/gallery-decrypt.js","hash":"ca4ef5872c326944645c9af0dec273af3c33f211","modified":1591679704037},{"_id":"public/js/sidebar.js","hash":"068a893a78b65388c97dd2dc4d38f5acf9601e79","modified":1591679704037},{"_id":"public/js/ui/banner.js","hash":"465fec3955f6a2addfa026429c5df062c23859b1","modified":1591679704037},{"_id":"public/js/search/algolia-search.js","hash":"c5574f50fdb3410ddac133a3fd90fa20839c9656","modified":1591679704037},{"_id":"public/js/search/local-search.js","hash":"3c06972bfb70a496b2aaeeb6c57878fd226f80b7","modified":1591679704037},{"_id":"public/js/ui/fireworks.js","hash":"3b4e5e029a35f5d58a30a1fd2350e77241720674","modified":1591679704037},{"_id":"public/css/hexo-theme-yun.css","hash":"8245b252db2fe361d559d46b86560e6c64577434","modified":1591679704037},{"_id":"public/kirito.png","hash":"b31e47cba5984ffa7fc6257c6f363716dc66efb1","modified":1591679704037},{"_id":"public/yang.jpg","hash":"63aa7525e1697a0fe02204f90e723f55cc931efc","modified":1591679704037},{"_id":"public/yang-favicon.png","hash":"7fa03977f80bb51cb6ea188f011634eeaf4d11e6","modified":1591679704037}],"Category":[{"name":"笔记","_id":"ckb7h00ss0004i0uib3sf0fzm"}],"Data":[],"Page":[{"title":"关于","date":"2020-05-24T05:03:31.000Z","_content":"\n你好啊","source":"about/index.md","raw":"---\ntitle: 关于\ndate: 2020-05-23 22:03:31\n---\n\n你好啊","updated":"2020-05-25T12:01:49.327Z","path":"about/index.html","comments":1,"layout":"page","_id":"ckb7h00so0001i0ui0kmg1dl4","content":"<p>你好啊</p>\n","site":{"data":{}},"excerpt":"","more":"<p>你好啊</p>\n"},{"title":"关于博客","date":"2020-05-24T05:03:31.000Z","_content":"\n博客介绍","source":"about/site.md","raw":"---\ntitle: 关于博客\ndate: 2020-05-23 22:03:31\n---\n\n博客介绍","updated":"2020-05-25T12:01:49.328Z","path":"about/site.html","comments":1,"layout":"page","_id":"ckb7h00sr0003i0uigz8uf233","content":"<p>博客介绍</p>\n","site":{"data":{}},"excerpt":"","more":"<p>博客介绍</p>\n"},{"title":"albums","date":"2020-05-24T05:21:22.000Z","type":"albums","albums":[{"caption":"夕阳西下","url":"/albums/sunset.html","cover":"https://interactive-examples.mdn.mozilla.net/media/examples/elephant-660-480.jpg","desc":"我想起那天夕阳下的奔跑"}],"_content":"\n\n\n","source":"albums/index.md","raw":"---\ntitle: albums\ndate: 2020-05-23 22:21:22\ntype: albums\nalbums:\n  - caption: 夕阳西下\n    url: /albums/sunset.html\n    cover: https://interactive-examples.mdn.mozilla.net/media/examples/elephant-660-480.jpg\n    desc: 我想起那天夕阳下的奔跑\n---\n\n\n\n","updated":"2020-05-25T12:01:49.328Z","path":"albums/index.html","comments":1,"layout":"page","_id":"ckb7h00su0007i0uiddgddso9","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"categories","date":"2020-05-24T05:02:51.000Z","comments":0,"type":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2020-05-23 22:02:51\ncomments: false\ntype: categories\n---\n","updated":"2020-05-25T12:01:49.328Z","path":"categories/index.html","layout":"page","_id":"ckb7h00sv0009i0uifnw5e5vi","content":"","site":{"data":{}},"excerpt":"","more":""},{"layout":"girls","title":"可爱的女孩子","banner":"<span title=\"大家都是我的天使！\">排名不分先后</span>","girls":[{"name":"名称","avatar":"头像图片链接","from":"出自什么作品","url":"人物百科链接","reason":"喜欢的理由"}],"_content":"","source":"girls/index.md","raw":"---\nlayout: girls\ntitle: 可爱的女孩子\nbanner: <span title=\"大家都是我的天使！\">排名不分先后</span>\ngirls:\n  - name: 名称\n    avatar: 头像图片链接\n    from: 出自什么作品\n    url: 人物百科链接\n    reason: 喜欢的理由\n---\n","date":"2020-05-25T12:01:49.329Z","updated":"2020-05-25T12:01:49.329Z","path":"girls/index.html","comments":1,"_id":"ckb7h00sx000ci0uib9rlhfcf","content":"","site":{"data":{}},"excerpt":"","more":""},{"layout":"links","title":"我的小伙伴们","date":"2020-05-23T20:06:06.000Z","keywords":"链接","description":"云游的小伙伴们","comments":1,"links":[{"url":"https://yunyoujun.cn","avatar":"https://cdn.jsdelivr.net/gh/YunYouJun/yunyoujun.github.io/images/avatar.jpg","name":"云游君","blog":"云游君的小站","desc":"All at sea.","color":"#0078e7","email":null}],"placeholder":"还没想好说些什么","tip":"友链加载中～如失败请刷新重试～","_content":"","source":"links/index.md","raw":"---\nlayout: links\ntitle: 我的小伙伴们\ndate: 2020-05-23 13:06:06\nkeywords: 链接\ndescription: 云游的小伙伴们\ncomments: true\nlinks:\n  - url: https://yunyoujun.cn\n    avatar: https://cdn.jsdelivr.net/gh/YunYouJun/yunyoujun.github.io/images/avatar.jpg\n    name: 云游君\n    blog: 云游君的小站\n    desc: All at sea.\n    color: \"#0078e7\" # 代表色\n    email: # 非必须\nplaceholder: 还没想好说些什么 # 默认对友链的描述\ntip: 友链加载中～如失败请刷新重试～\n---\n","updated":"2020-05-25T12:01:49.329Z","path":"links/index.html","_id":"ckb7h00tk0014i0ui6vww6agl","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"Firebase Datbase","date":"2020-05-24T01:49:19.000Z","comments":1,"_content":"\n> 主要列出常用的数据库方法。例如 Cloud firestore 实时侦察和读写数据，用户认证，更改筛选以及删除数据和 Storage 存储文件。\n\n<!-- more -->\n\n# Firestore\n\n## 更改文档的信息 Set\n\n`set`每次都会对文档进行覆盖重新。比如以下代码，每次用户登录都会重写用户名为注册的用户名\n\n```js\nconst db = firebase.firestore()\nfirebase.auth().onAuthStateChanged(user => {\n    db.collection(\"user\")\n        .doc(user.uid)\n        .set({\n            //设置用户名和邮箱为注册时的内容\n            name: user.displayName,\n            email: user.email,\n        }), {\n            merge: true,\n        })\n})\n```\n\n## 更新文档的信息 Update\n\n如果要更改单个文档内容可以用`update`\n\n```js\ndb.collection('user').doc(user.uid).update({\n  Profile: profile_url,\n  Name: 'Yang',\n})\n```\n\n## 写入一个文档到用户 .add()\n\n以下代码会写入一个文档(随机生成`uid`)到`Expense`的集合中，\n\n```js\nlet docData = {\n    Category: category\n    Value: parseFloat(amount).toFixed(2),\n    Date: date,\n    Description: note\n}\n\ndb.collection(\"user\").doc(user.uid).collection(\"Expense\").add(docData)\n```\n\n> 写入的时候要注意 number 会自动转化为 string, 所以要先改格式`parseInt`再写入到对象里\n\n## 实时读取 onSnapShot\n\n### 单个文档侦查\n\n`onSnapShot`可以实时侦查并返回数据库文档的内容\n\n```js\ndb.collection('user')\n  .doc(user.uid)\n  .onSnapShot((snap) => {\n    if (snap.data().count > 5) {\n      alert('超过5啦！')\n    }\n  })\n```\n\n### 集合实时侦查 change.type\n\n如果要实时侦查一个集合，需要添加判断条件`change.type`来判断是否文档是新添加的或者修改的。不然会一直循环（雾)\n\n```js\ndb.collection('chatRoom')\n  .orderBy('Date', 'desc')\n  .onSnapShot((snap) => {\n    snap.docChanges().forEach((change) => {\n      if (change.type == 'added') {\n        console.log('对新添加的文档操作')\n      } else if (change.type == 'modified') {\n        console.log('对被修改过的文档操作')\n      }\n    })\n  })\n```\n\n## 读取一个集合中的所有文档 .get()\n\n```js\ndb.collection('user')\n  .doc(user.uid)\n  .collection('Expenses')\n  .orderBy('Date', 'desc')\n  .get()\n  .then((query) => {\n    query.forEach((doc) => {\n      console.log(doc.data().Category)\n    })\n  })\n```\n\n## 删除一个集合中的所有文档\n\n一般用来 reset 用户数据之类的\n\n```js\ndb.collection('user')\n  .doc(user.uid)\n  .collection('Expense')\n  .get()\n  .then((querySnapShot) => {\n    querySnapShot.forEach((doc) => {\n      doc.ref\n        .delete()\n        .then(() => {\n          console.log('删除成功')\n        })\n        .catch((error) => {\n          console.log('错误', error)\n        })\n    })\n  })\n```\n\n# Cloud Storage\n\nCloud storage 可以用于用户上传头像，然后存储在 firebase storage 分区。\n\n## 上传图片\n\n```js\n   const db = firebase.firestore()\n    const storageRef = firebase.storage().ref()\n    let file = $(\"#profile-input\").prop(\"files\")[0]\n    if (file) {\n      let metadata = {\n        contentType: file.type,\n      }\n\n      let task = storageRef.child(file.name).put(file, metadata)\n      task\n        .then((snapshot) => snapshot.ref.getDownloadURL())\n        .then((url) => {\n          console.log(\"用户头像上传成功 链接为: \" + url)\n          firebase.auth().onAuthStateChanged((user) => {\n            db.collection(\"user\").doc(user.uid).update({\n              Profile: url,\n            })\n          })\n          setLoading(false)\n          setShow(true)\n        })\n    } else {\n      setLoading(false)\n      setError(true)\n    }\n  }\n```\n","source":"_posts/01 firebase.md","raw":"---\ntitle: Firebase Datbase\ndate: 2020-05-23 18:49:19\ntags: [firebase, database, web, firestore, cloudstorage]\ncomments: true\ncategories: '笔记'\n# description: Firebase常用的一些例句和用法\n---\n\n> 主要列出常用的数据库方法。例如 Cloud firestore 实时侦察和读写数据，用户认证，更改筛选以及删除数据和 Storage 存储文件。\n\n<!-- more -->\n\n# Firestore\n\n## 更改文档的信息 Set\n\n`set`每次都会对文档进行覆盖重新。比如以下代码，每次用户登录都会重写用户名为注册的用户名\n\n```js\nconst db = firebase.firestore()\nfirebase.auth().onAuthStateChanged(user => {\n    db.collection(\"user\")\n        .doc(user.uid)\n        .set({\n            //设置用户名和邮箱为注册时的内容\n            name: user.displayName,\n            email: user.email,\n        }), {\n            merge: true,\n        })\n})\n```\n\n## 更新文档的信息 Update\n\n如果要更改单个文档内容可以用`update`\n\n```js\ndb.collection('user').doc(user.uid).update({\n  Profile: profile_url,\n  Name: 'Yang',\n})\n```\n\n## 写入一个文档到用户 .add()\n\n以下代码会写入一个文档(随机生成`uid`)到`Expense`的集合中，\n\n```js\nlet docData = {\n    Category: category\n    Value: parseFloat(amount).toFixed(2),\n    Date: date,\n    Description: note\n}\n\ndb.collection(\"user\").doc(user.uid).collection(\"Expense\").add(docData)\n```\n\n> 写入的时候要注意 number 会自动转化为 string, 所以要先改格式`parseInt`再写入到对象里\n\n## 实时读取 onSnapShot\n\n### 单个文档侦查\n\n`onSnapShot`可以实时侦查并返回数据库文档的内容\n\n```js\ndb.collection('user')\n  .doc(user.uid)\n  .onSnapShot((snap) => {\n    if (snap.data().count > 5) {\n      alert('超过5啦！')\n    }\n  })\n```\n\n### 集合实时侦查 change.type\n\n如果要实时侦查一个集合，需要添加判断条件`change.type`来判断是否文档是新添加的或者修改的。不然会一直循环（雾)\n\n```js\ndb.collection('chatRoom')\n  .orderBy('Date', 'desc')\n  .onSnapShot((snap) => {\n    snap.docChanges().forEach((change) => {\n      if (change.type == 'added') {\n        console.log('对新添加的文档操作')\n      } else if (change.type == 'modified') {\n        console.log('对被修改过的文档操作')\n      }\n    })\n  })\n```\n\n## 读取一个集合中的所有文档 .get()\n\n```js\ndb.collection('user')\n  .doc(user.uid)\n  .collection('Expenses')\n  .orderBy('Date', 'desc')\n  .get()\n  .then((query) => {\n    query.forEach((doc) => {\n      console.log(doc.data().Category)\n    })\n  })\n```\n\n## 删除一个集合中的所有文档\n\n一般用来 reset 用户数据之类的\n\n```js\ndb.collection('user')\n  .doc(user.uid)\n  .collection('Expense')\n  .get()\n  .then((querySnapShot) => {\n    querySnapShot.forEach((doc) => {\n      doc.ref\n        .delete()\n        .then(() => {\n          console.log('删除成功')\n        })\n        .catch((error) => {\n          console.log('错误', error)\n        })\n    })\n  })\n```\n\n# Cloud Storage\n\nCloud storage 可以用于用户上传头像，然后存储在 firebase storage 分区。\n\n## 上传图片\n\n```js\n   const db = firebase.firestore()\n    const storageRef = firebase.storage().ref()\n    let file = $(\"#profile-input\").prop(\"files\")[0]\n    if (file) {\n      let metadata = {\n        contentType: file.type,\n      }\n\n      let task = storageRef.child(file.name).put(file, metadata)\n      task\n        .then((snapshot) => snapshot.ref.getDownloadURL())\n        .then((url) => {\n          console.log(\"用户头像上传成功 链接为: \" + url)\n          firebase.auth().onAuthStateChanged((user) => {\n            db.collection(\"user\").doc(user.uid).update({\n              Profile: url,\n            })\n          })\n          setLoading(false)\n          setShow(true)\n        })\n    } else {\n      setLoading(false)\n      setError(true)\n    }\n  }\n```\n","slug":"01 firebase","published":1,"updated":"2020-06-09T05:13:55.708Z","layout":"post","photos":[],"link":"","_id":"ckb7h00si0000i0ui00uj0vl4","content":"<blockquote>\n<p>主要列出常用的数据库方法。例如 Cloud firestore 实时侦察和读写数据，用户认证，更改筛选以及删除数据和 Storage 存储文件。</p>\n</blockquote>\n<a id=\"more\"></a>\n\n<h1 id=\"Firestore\"><a href=\"#Firestore\" class=\"headerlink\" title=\"Firestore\"></a>Firestore</h1><h2 id=\"更改文档的信息-Set\"><a href=\"#更改文档的信息-Set\" class=\"headerlink\" title=\"更改文档的信息 Set\"></a>更改文档的信息 Set</h2><p><code>set</code>每次都会对文档进行覆盖重新。比如以下代码，每次用户登录都会重写用户名为注册的用户名</p>\n<pre class=\" language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> db <span class=\"token operator\">=</span> firebase<span class=\"token punctuation\">.</span><span class=\"token function\">firestore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nfirebase<span class=\"token punctuation\">.</span><span class=\"token function\">auth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">onAuthStateChanged</span><span class=\"token punctuation\">(</span>user <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    db<span class=\"token punctuation\">.</span><span class=\"token function\">collection</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">doc</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>uid<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token keyword\">set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n            <span class=\"token comment\" spellcheck=\"true\">//设置用户名和邮箱为注册时的内容</span>\n            name<span class=\"token punctuation\">:</span> user<span class=\"token punctuation\">.</span>displayName<span class=\"token punctuation\">,</span>\n            email<span class=\"token punctuation\">:</span> user<span class=\"token punctuation\">.</span>email<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n            merge<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"更新文档的信息-Update\"><a href=\"#更新文档的信息-Update\" class=\"headerlink\" title=\"更新文档的信息 Update\"></a>更新文档的信息 Update</h2><p>如果要更改单个文档内容可以用<code>update</code></p>\n<pre class=\" language-js\"><code class=\"language-js\">db<span class=\"token punctuation\">.</span><span class=\"token function\">collection</span><span class=\"token punctuation\">(</span><span class=\"token string\">'user'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">doc</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>uid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  Profile<span class=\"token punctuation\">:</span> profile_url<span class=\"token punctuation\">,</span>\n  Name<span class=\"token punctuation\">:</span> <span class=\"token string\">'Yang'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"写入一个文档到用户-add\"><a href=\"#写入一个文档到用户-add\" class=\"headerlink\" title=\"写入一个文档到用户 .add()\"></a>写入一个文档到用户 .add()</h2><p>以下代码会写入一个文档(随机生成<code>uid</code>)到<code>Expense</code>的集合中，</p>\n<pre class=\" language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> docData <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    Category<span class=\"token punctuation\">:</span> category\n    Value<span class=\"token punctuation\">:</span> <span class=\"token function\">parseFloat</span><span class=\"token punctuation\">(</span>amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    Date<span class=\"token punctuation\">:</span> date<span class=\"token punctuation\">,</span>\n    Description<span class=\"token punctuation\">:</span> note\n<span class=\"token punctuation\">}</span>\n\ndb<span class=\"token punctuation\">.</span><span class=\"token function\">collection</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">doc</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>uid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">collection</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Expense\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>docData<span class=\"token punctuation\">)</span></code></pre>\n<blockquote>\n<p>写入的时候要注意 number 会自动转化为 string, 所以要先改格式<code>parseInt</code>再写入到对象里</p>\n</blockquote>\n<h2 id=\"实时读取-onSnapShot\"><a href=\"#实时读取-onSnapShot\" class=\"headerlink\" title=\"实时读取 onSnapShot\"></a>实时读取 onSnapShot</h2><h3 id=\"单个文档侦查\"><a href=\"#单个文档侦查\" class=\"headerlink\" title=\"单个文档侦查\"></a>单个文档侦查</h3><p><code>onSnapShot</code>可以实时侦查并返回数据库文档的内容</p>\n<pre class=\" language-js\"><code class=\"language-js\">db<span class=\"token punctuation\">.</span><span class=\"token function\">collection</span><span class=\"token punctuation\">(</span><span class=\"token string\">'user'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">doc</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>uid<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">onSnapShot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>snap<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>snap<span class=\"token punctuation\">.</span><span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>count <span class=\"token operator\">></span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'超过5啦！'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"集合实时侦查-change-type\"><a href=\"#集合实时侦查-change-type\" class=\"headerlink\" title=\"集合实时侦查 change.type\"></a>集合实时侦查 change.type</h3><p>如果要实时侦查一个集合，需要添加判断条件<code>change.type</code>来判断是否文档是新添加的或者修改的。不然会一直循环（雾)</p>\n<pre class=\" language-js\"><code class=\"language-js\">db<span class=\"token punctuation\">.</span><span class=\"token function\">collection</span><span class=\"token punctuation\">(</span><span class=\"token string\">'chatRoom'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">orderBy</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Date'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'desc'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">onSnapShot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>snap<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    snap<span class=\"token punctuation\">.</span><span class=\"token function\">docChanges</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>change<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>change<span class=\"token punctuation\">.</span>type <span class=\"token operator\">==</span> <span class=\"token string\">'added'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'对新添加的文档操作'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>change<span class=\"token punctuation\">.</span>type <span class=\"token operator\">==</span> <span class=\"token string\">'modified'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'对被修改过的文档操作'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"读取一个集合中的所有文档-get\"><a href=\"#读取一个集合中的所有文档-get\" class=\"headerlink\" title=\"读取一个集合中的所有文档 .get()\"></a>读取一个集合中的所有文档 .get()</h2><pre class=\" language-js\"><code class=\"language-js\">db<span class=\"token punctuation\">.</span><span class=\"token function\">collection</span><span class=\"token punctuation\">(</span><span class=\"token string\">'user'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">doc</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>uid<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">collection</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Expenses'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">orderBy</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Date'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'desc'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>query<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    query<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>doc<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>doc<span class=\"token punctuation\">.</span><span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>Category<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"删除一个集合中的所有文档\"><a href=\"#删除一个集合中的所有文档\" class=\"headerlink\" title=\"删除一个集合中的所有文档\"></a>删除一个集合中的所有文档</h2><p>一般用来 reset 用户数据之类的</p>\n<pre class=\" language-js\"><code class=\"language-js\">db<span class=\"token punctuation\">.</span><span class=\"token function\">collection</span><span class=\"token punctuation\">(</span><span class=\"token string\">'user'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">doc</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>uid<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">collection</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Expense'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>querySnapShot<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    querySnapShot<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>doc<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n      doc<span class=\"token punctuation\">.</span>ref\n        <span class=\"token punctuation\">.</span><span class=\"token keyword\">delete</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n          console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'删除成功'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n          console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'错误'</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n<h1 id=\"Cloud-Storage\"><a href=\"#Cloud-Storage\" class=\"headerlink\" title=\"Cloud Storage\"></a>Cloud Storage</h1><p>Cloud storage 可以用于用户上传头像，然后存储在 firebase storage 分区。</p>\n<h2 id=\"上传图片\"><a href=\"#上传图片\" class=\"headerlink\" title=\"上传图片\"></a>上传图片</h2><pre class=\" language-js\"><code class=\"language-js\">   <span class=\"token keyword\">const</span> db <span class=\"token operator\">=</span> firebase<span class=\"token punctuation\">.</span><span class=\"token function\">firestore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> storageRef <span class=\"token operator\">=</span> firebase<span class=\"token punctuation\">.</span><span class=\"token function\">storage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">ref</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">let</span> file <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#profile-input\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">prop</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"files\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">let</span> metadata <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        contentType<span class=\"token punctuation\">:</span> file<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">let</span> task <span class=\"token operator\">=</span> storageRef<span class=\"token punctuation\">.</span><span class=\"token function\">child</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">,</span> metadata<span class=\"token punctuation\">)</span>\n      task\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>snapshot<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> snapshot<span class=\"token punctuation\">.</span>ref<span class=\"token punctuation\">.</span><span class=\"token function\">getDownloadURL</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n          console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"用户头像上传成功 链接为: \"</span> <span class=\"token operator\">+</span> url<span class=\"token punctuation\">)</span>\n          firebase<span class=\"token punctuation\">.</span><span class=\"token function\">auth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">onAuthStateChanged</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n            db<span class=\"token punctuation\">.</span><span class=\"token function\">collection</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">doc</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>uid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n              Profile<span class=\"token punctuation\">:</span> url<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n          <span class=\"token function\">setLoading</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n          <span class=\"token function\">setShow</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setLoading</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n      <span class=\"token function\">setError</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span></code></pre>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p>主要列出常用的数据库方法。例如 Cloud firestore 实时侦察和读写数据，用户认证，更改筛选以及删除数据和 Storage 存储文件。</p>\n</blockquote>","more":"<h1 id=\"Firestore\"><a href=\"#Firestore\" class=\"headerlink\" title=\"Firestore\"></a>Firestore</h1><h2 id=\"更改文档的信息-Set\"><a href=\"#更改文档的信息-Set\" class=\"headerlink\" title=\"更改文档的信息 Set\"></a>更改文档的信息 Set</h2><p><code>set</code>每次都会对文档进行覆盖重新。比如以下代码，每次用户登录都会重写用户名为注册的用户名</p>\n<pre><code class=\"js\">const db = firebase.firestore()\nfirebase.auth().onAuthStateChanged(user =&gt; {\n    db.collection(&quot;user&quot;)\n        .doc(user.uid)\n        .set({\n            //设置用户名和邮箱为注册时的内容\n            name: user.displayName,\n            email: user.email,\n        }), {\n            merge: true,\n        })\n})</code></pre>\n<h2 id=\"更新文档的信息-Update\"><a href=\"#更新文档的信息-Update\" class=\"headerlink\" title=\"更新文档的信息 Update\"></a>更新文档的信息 Update</h2><p>如果要更改单个文档内容可以用<code>update</code></p>\n<pre><code class=\"js\">db.collection(&#39;user&#39;).doc(user.uid).update({\n  Profile: profile_url,\n  Name: &#39;Yang&#39;,\n})</code></pre>\n<h2 id=\"写入一个文档到用户-add\"><a href=\"#写入一个文档到用户-add\" class=\"headerlink\" title=\"写入一个文档到用户 .add()\"></a>写入一个文档到用户 .add()</h2><p>以下代码会写入一个文档(随机生成<code>uid</code>)到<code>Expense</code>的集合中，</p>\n<pre><code class=\"js\">let docData = {\n    Category: category\n    Value: parseFloat(amount).toFixed(2),\n    Date: date,\n    Description: note\n}\n\ndb.collection(&quot;user&quot;).doc(user.uid).collection(&quot;Expense&quot;).add(docData)</code></pre>\n<blockquote>\n<p>写入的时候要注意 number 会自动转化为 string, 所以要先改格式<code>parseInt</code>再写入到对象里</p>\n</blockquote>\n<h2 id=\"实时读取-onSnapShot\"><a href=\"#实时读取-onSnapShot\" class=\"headerlink\" title=\"实时读取 onSnapShot\"></a>实时读取 onSnapShot</h2><h3 id=\"单个文档侦查\"><a href=\"#单个文档侦查\" class=\"headerlink\" title=\"单个文档侦查\"></a>单个文档侦查</h3><p><code>onSnapShot</code>可以实时侦查并返回数据库文档的内容</p>\n<pre><code class=\"js\">db.collection(&#39;user&#39;)\n  .doc(user.uid)\n  .onSnapShot((snap) =&gt; {\n    if (snap.data().count &gt; 5) {\n      alert(&#39;超过5啦！&#39;)\n    }\n  })</code></pre>\n<h3 id=\"集合实时侦查-change-type\"><a href=\"#集合实时侦查-change-type\" class=\"headerlink\" title=\"集合实时侦查 change.type\"></a>集合实时侦查 change.type</h3><p>如果要实时侦查一个集合，需要添加判断条件<code>change.type</code>来判断是否文档是新添加的或者修改的。不然会一直循环（雾)</p>\n<pre><code class=\"js\">db.collection(&#39;chatRoom&#39;)\n  .orderBy(&#39;Date&#39;, &#39;desc&#39;)\n  .onSnapShot((snap) =&gt; {\n    snap.docChanges().forEach((change) =&gt; {\n      if (change.type == &#39;added&#39;) {\n        console.log(&#39;对新添加的文档操作&#39;)\n      } else if (change.type == &#39;modified&#39;) {\n        console.log(&#39;对被修改过的文档操作&#39;)\n      }\n    })\n  })</code></pre>\n<h2 id=\"读取一个集合中的所有文档-get\"><a href=\"#读取一个集合中的所有文档-get\" class=\"headerlink\" title=\"读取一个集合中的所有文档 .get()\"></a>读取一个集合中的所有文档 .get()</h2><pre><code class=\"js\">db.collection(&#39;user&#39;)\n  .doc(user.uid)\n  .collection(&#39;Expenses&#39;)\n  .orderBy(&#39;Date&#39;, &#39;desc&#39;)\n  .get()\n  .then((query) =&gt; {\n    query.forEach((doc) =&gt; {\n      console.log(doc.data().Category)\n    })\n  })</code></pre>\n<h2 id=\"删除一个集合中的所有文档\"><a href=\"#删除一个集合中的所有文档\" class=\"headerlink\" title=\"删除一个集合中的所有文档\"></a>删除一个集合中的所有文档</h2><p>一般用来 reset 用户数据之类的</p>\n<pre><code class=\"js\">db.collection(&#39;user&#39;)\n  .doc(user.uid)\n  .collection(&#39;Expense&#39;)\n  .get()\n  .then((querySnapShot) =&gt; {\n    querySnapShot.forEach((doc) =&gt; {\n      doc.ref\n        .delete()\n        .then(() =&gt; {\n          console.log(&#39;删除成功&#39;)\n        })\n        .catch((error) =&gt; {\n          console.log(&#39;错误&#39;, error)\n        })\n    })\n  })</code></pre>\n<h1 id=\"Cloud-Storage\"><a href=\"#Cloud-Storage\" class=\"headerlink\" title=\"Cloud Storage\"></a>Cloud Storage</h1><p>Cloud storage 可以用于用户上传头像，然后存储在 firebase storage 分区。</p>\n<h2 id=\"上传图片\"><a href=\"#上传图片\" class=\"headerlink\" title=\"上传图片\"></a>上传图片</h2><pre><code class=\"js\">   const db = firebase.firestore()\n    const storageRef = firebase.storage().ref()\n    let file = $(&quot;#profile-input&quot;).prop(&quot;files&quot;)[0]\n    if (file) {\n      let metadata = {\n        contentType: file.type,\n      }\n\n      let task = storageRef.child(file.name).put(file, metadata)\n      task\n        .then((snapshot) =&gt; snapshot.ref.getDownloadURL())\n        .then((url) =&gt; {\n          console.log(&quot;用户头像上传成功 链接为: &quot; + url)\n          firebase.auth().onAuthStateChanged((user) =&gt; {\n            db.collection(&quot;user&quot;).doc(user.uid).update({\n              Profile: url,\n            })\n          })\n          setLoading(false)\n          setShow(true)\n        })\n    } else {\n      setLoading(false)\n      setError(true)\n    }\n  }</code></pre>"},{"title":"Git Notes","date":"2020-05-26T03:10:15.000Z","comments":1,"_content":"\n> 平时总结的一些 git command 以及常用的命令\n\n<!-- more -->\n\n# Command\n\n## 配置\n\n### 设置用户名到 Github Commit\n\n没有设置 git user name 之前，所有的 commit 的都会显示为提交 commit 用户的 admin 名称。要想显示提交记录者的 github 信息，需要在用 git 前添加以下两条信息\n\n`git config --global user.name`\n`git config --global user.email`\n\n> `global`将会用于所有 git。输入后会弹出 github 登录窗口。MacOS 会在 terminal 里输入用户名和密码\n\n## 分支\n\n### 常用的一些指令\n\n```\ngit branch 显示repo中所有的branch\ngit branch friend_feature 创建一个名为friend_feature的分支\ngit swicth feature_mainfeature 切换当前分支到feature_mainfeature\ngit merge feature_mainfeature 将feature_mainfeature与当前分支merge\ngit branch -d friend_feature 删除名为friend_feature的分支\ngit branch -m social_feature 更改当前分支名为social_feature\n```\n\n## Commit\n\n### 流程\n\nGitflow Workflow 一般为常用的开发方式。即每个功能有自己的分支，分支完成后先 merge 到 dev 分支上。如果 dev 分支没有任何问题就可以 merge 到 master 上。因为 master 分支是要确保为最稳定可用的代码\n\n```\n递交内容到feature_home分支\ngit add .\ngit commit -m\"home component done\"\ngit push origin feature_home\n\n切换到dev分支 并merge feature_home到dev分支上\ngit switch dev\ngit merge feature_home\ngit push origin dev\n\n之后创建一个pull request就可以了\n```\n","source":"_posts/02 study.md","raw":"---\ntitle: Git Notes\ndate: 2020-05-25 20:10:15\ntags: ['笔记', 'git']\ncomments: true\ncategories: '笔记'\n---\n\n> 平时总结的一些 git command 以及常用的命令\n\n<!-- more -->\n\n# Command\n\n## 配置\n\n### 设置用户名到 Github Commit\n\n没有设置 git user name 之前，所有的 commit 的都会显示为提交 commit 用户的 admin 名称。要想显示提交记录者的 github 信息，需要在用 git 前添加以下两条信息\n\n`git config --global user.name`\n`git config --global user.email`\n\n> `global`将会用于所有 git。输入后会弹出 github 登录窗口。MacOS 会在 terminal 里输入用户名和密码\n\n## 分支\n\n### 常用的一些指令\n\n```\ngit branch 显示repo中所有的branch\ngit branch friend_feature 创建一个名为friend_feature的分支\ngit swicth feature_mainfeature 切换当前分支到feature_mainfeature\ngit merge feature_mainfeature 将feature_mainfeature与当前分支merge\ngit branch -d friend_feature 删除名为friend_feature的分支\ngit branch -m social_feature 更改当前分支名为social_feature\n```\n\n## Commit\n\n### 流程\n\nGitflow Workflow 一般为常用的开发方式。即每个功能有自己的分支，分支完成后先 merge 到 dev 分支上。如果 dev 分支没有任何问题就可以 merge 到 master 上。因为 master 分支是要确保为最稳定可用的代码\n\n```\n递交内容到feature_home分支\ngit add .\ngit commit -m\"home component done\"\ngit push origin feature_home\n\n切换到dev分支 并merge feature_home到dev分支上\ngit switch dev\ngit merge feature_home\ngit push origin dev\n\n之后创建一个pull request就可以了\n```\n","slug":"02 study","published":1,"updated":"2020-06-09T05:13:41.384Z","layout":"post","photos":[],"link":"","_id":"ckb7h00sq0002i0uid9yzh9ku","content":"<blockquote>\n<p>平时总结的一些 git command 以及常用的命令</p>\n</blockquote>\n<a id=\"more\"></a>\n\n<h1 id=\"Command\"><a href=\"#Command\" class=\"headerlink\" title=\"Command\"></a>Command</h1><h2 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h2><h3 id=\"设置用户名到-Github-Commit\"><a href=\"#设置用户名到-Github-Commit\" class=\"headerlink\" title=\"设置用户名到 Github Commit\"></a>设置用户名到 Github Commit</h3><p>没有设置 git user name 之前，所有的 commit 的都会显示为提交 commit 用户的 admin 名称。要想显示提交记录者的 github 信息，需要在用 git 前添加以下两条信息</p>\n<p><code>git config --global user.name</code><br><code>git config --global user.email</code></p>\n<blockquote>\n<p><code>global</code>将会用于所有 git。输入后会弹出 github 登录窗口。MacOS 会在 terminal 里输入用户名和密码</p>\n</blockquote>\n<h2 id=\"分支\"><a href=\"#分支\" class=\"headerlink\" title=\"分支\"></a>分支</h2><h3 id=\"常用的一些指令\"><a href=\"#常用的一些指令\" class=\"headerlink\" title=\"常用的一些指令\"></a>常用的一些指令</h3><pre><code>git branch 显示repo中所有的branch\ngit branch friend_feature 创建一个名为friend_feature的分支\ngit swicth feature_mainfeature 切换当前分支到feature_mainfeature\ngit merge feature_mainfeature 将feature_mainfeature与当前分支merge\ngit branch -d friend_feature 删除名为friend_feature的分支\ngit branch -m social_feature 更改当前分支名为social_feature</code></pre><h2 id=\"Commit\"><a href=\"#Commit\" class=\"headerlink\" title=\"Commit\"></a>Commit</h2><h3 id=\"流程\"><a href=\"#流程\" class=\"headerlink\" title=\"流程\"></a>流程</h3><p>Gitflow Workflow 一般为常用的开发方式。即每个功能有自己的分支，分支完成后先 merge 到 dev 分支上。如果 dev 分支没有任何问题就可以 merge 到 master 上。因为 master 分支是要确保为最稳定可用的代码</p>\n<pre><code>递交内容到feature_home分支\ngit add .\ngit commit -m&quot;home component done&quot;\ngit push origin feature_home\n\n切换到dev分支 并merge feature_home到dev分支上\ngit switch dev\ngit merge feature_home\ngit push origin dev\n\n之后创建一个pull request就可以了</code></pre>","site":{"data":{}},"excerpt":"<blockquote>\n<p>平时总结的一些 git command 以及常用的命令</p>\n</blockquote>","more":"<h1 id=\"Command\"><a href=\"#Command\" class=\"headerlink\" title=\"Command\"></a>Command</h1><h2 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h2><h3 id=\"设置用户名到-Github-Commit\"><a href=\"#设置用户名到-Github-Commit\" class=\"headerlink\" title=\"设置用户名到 Github Commit\"></a>设置用户名到 Github Commit</h3><p>没有设置 git user name 之前，所有的 commit 的都会显示为提交 commit 用户的 admin 名称。要想显示提交记录者的 github 信息，需要在用 git 前添加以下两条信息</p>\n<p><code>git config --global user.name</code><br><code>git config --global user.email</code></p>\n<blockquote>\n<p><code>global</code>将会用于所有 git。输入后会弹出 github 登录窗口。MacOS 会在 terminal 里输入用户名和密码</p>\n</blockquote>\n<h2 id=\"分支\"><a href=\"#分支\" class=\"headerlink\" title=\"分支\"></a>分支</h2><h3 id=\"常用的一些指令\"><a href=\"#常用的一些指令\" class=\"headerlink\" title=\"常用的一些指令\"></a>常用的一些指令</h3><pre><code>git branch 显示repo中所有的branch\ngit branch friend_feature 创建一个名为friend_feature的分支\ngit swicth feature_mainfeature 切换当前分支到feature_mainfeature\ngit merge feature_mainfeature 将feature_mainfeature与当前分支merge\ngit branch -d friend_feature 删除名为friend_feature的分支\ngit branch -m social_feature 更改当前分支名为social_feature</code></pre><h2 id=\"Commit\"><a href=\"#Commit\" class=\"headerlink\" title=\"Commit\"></a>Commit</h2><h3 id=\"流程\"><a href=\"#流程\" class=\"headerlink\" title=\"流程\"></a>流程</h3><p>Gitflow Workflow 一般为常用的开发方式。即每个功能有自己的分支，分支完成后先 merge 到 dev 分支上。如果 dev 分支没有任何问题就可以 merge 到 master 上。因为 master 分支是要确保为最稳定可用的代码</p>\n<pre><code>递交内容到feature_home分支\ngit add .\ngit commit -m&quot;home component done&quot;\ngit push origin feature_home\n\n切换到dev分支 并merge feature_home到dev分支上\ngit switch dev\ngit merge feature_home\ngit push origin dev\n\n之后创建一个pull request就可以了</code></pre>"},{"title":"event.target与event.currentTarget","date":"2020-05-29T03:10:15.000Z","comments":1,"_content":"\n> JavaScript event.target 和 event.currentTarget 的区别。最近在写一个 react 的项目中，想要通过点击一个元素来触发事件并获得该元素的 key。\n\n<!-- more -->\n\n# event.target\n\nevent.target 一般我们可以用来绑定触发事件的元素。比如常用可以在`input`上来获取文本内容。\n\n比如我们有一个信息对象，可以用`event.target`来拿到`input`输入的值然后传到`useState`里\n\n```jsx\nfunction handleInput(event) {\n    const {name, value} = event.target\n    setInput(prevInput => {\n        ...prevInput,\n        [name, value]\n\n    })\n}\n\n```\n\n# event.currentTarget\n\n如果我们绑定的是一个元素，比如`<i>`或者`<button>`然后想返回触发事件元素的`id`或者`className`。\n\n我们可以用`event.currentTarget`因为这个可以监听当前被触发事件的元素\n\n```jsx\n;<i id=\"keyid\" onClick={handleEvent}></i>\n\nfunction handleEvent(event) {\n  console.log(event.currentTarget.id)\n}\n```\n\n> keyid\n","source":"_posts/03 event-target.md","raw":"---\ntitle: event.target与event.currentTarget\ndate: 2020-05-28 20:10:15\ntags: ['笔记', 'javascript']\ncomments: true\ncategories: '笔记'\n---\n\n> JavaScript event.target 和 event.currentTarget 的区别。最近在写一个 react 的项目中，想要通过点击一个元素来触发事件并获得该元素的 key。\n\n<!-- more -->\n\n# event.target\n\nevent.target 一般我们可以用来绑定触发事件的元素。比如常用可以在`input`上来获取文本内容。\n\n比如我们有一个信息对象，可以用`event.target`来拿到`input`输入的值然后传到`useState`里\n\n```jsx\nfunction handleInput(event) {\n    const {name, value} = event.target\n    setInput(prevInput => {\n        ...prevInput,\n        [name, value]\n\n    })\n}\n\n```\n\n# event.currentTarget\n\n如果我们绑定的是一个元素，比如`<i>`或者`<button>`然后想返回触发事件元素的`id`或者`className`。\n\n我们可以用`event.currentTarget`因为这个可以监听当前被触发事件的元素\n\n```jsx\n;<i id=\"keyid\" onClick={handleEvent}></i>\n\nfunction handleEvent(event) {\n  console.log(event.currentTarget.id)\n}\n```\n\n> keyid\n","slug":"03 event-target","published":1,"updated":"2020-06-09T05:13:24.860Z","layout":"post","photos":[],"link":"","_id":"ckb7h00st0006i0uigmxt6xvp","content":"<blockquote>\n<p>JavaScript event.target 和 event.currentTarget 的区别。最近在写一个 react 的项目中，想要通过点击一个元素来触发事件并获得该元素的 key。</p>\n</blockquote>\n<a id=\"more\"></a>\n\n<h1 id=\"event-target\"><a href=\"#event-target\" class=\"headerlink\" title=\"event.target\"></a>event.target</h1><p>event.target 一般我们可以用来绑定触发事件的元素。比如常用可以在<code>input</code>上来获取文本内容。</p>\n<p>比如我们有一个信息对象，可以用<code>event.target</code>来拿到<code>input</code>输入的值然后传到<code>useState</code>里</p>\n<pre class=\" language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">handleInput</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>target\n    <span class=\"token function\">setInput</span><span class=\"token punctuation\">(</span>prevInput <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>prevInput<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">]</span>\n\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h1 id=\"event-currentTarget\"><a href=\"#event-currentTarget\" class=\"headerlink\" title=\"event.currentTarget\"></a>event.currentTarget</h1><p>如果我们绑定的是一个元素，比如<code>&lt;i&gt;</code>或者<code>&lt;button&gt;</code>然后想返回触发事件元素的<code>id</code>或者<code>className</code>。</p>\n<p>我们可以用<code>event.currentTarget</code>因为这个可以监听当前被触发事件的元素</p>\n<pre class=\" language-jsx\"><code class=\"language-jsx\"><span class=\"token punctuation\">;</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>i</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>keyid<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">{</span>handleEvent<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>i</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">handleEvent</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>currentTarget<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<blockquote>\n<p>keyid</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p>JavaScript event.target 和 event.currentTarget 的区别。最近在写一个 react 的项目中，想要通过点击一个元素来触发事件并获得该元素的 key。</p>\n</blockquote>","more":"<h1 id=\"event-target\"><a href=\"#event-target\" class=\"headerlink\" title=\"event.target\"></a>event.target</h1><p>event.target 一般我们可以用来绑定触发事件的元素。比如常用可以在<code>input</code>上来获取文本内容。</p>\n<p>比如我们有一个信息对象，可以用<code>event.target</code>来拿到<code>input</code>输入的值然后传到<code>useState</code>里</p>\n<pre><code class=\"jsx\">function handleInput(event) {\n    const {name, value} = event.target\n    setInput(prevInput =&gt; {\n        ...prevInput,\n        [name, value]\n\n    })\n}\n</code></pre>\n<h1 id=\"event-currentTarget\"><a href=\"#event-currentTarget\" class=\"headerlink\" title=\"event.currentTarget\"></a>event.currentTarget</h1><p>如果我们绑定的是一个元素，比如<code>&lt;i&gt;</code>或者<code>&lt;button&gt;</code>然后想返回触发事件元素的<code>id</code>或者<code>className</code>。</p>\n<p>我们可以用<code>event.currentTarget</code>因为这个可以监听当前被触发事件的元素</p>\n<pre><code class=\"jsx\">;&lt;i id=&quot;keyid&quot; onClick={handleEvent}&gt;&lt;/i&gt;\n\nfunction handleEvent(event) {\n  console.log(event.currentTarget.id)\n}</code></pre>\n<blockquote>\n<p>keyid</p>\n</blockquote>"},{"title":"利用React Transition Group实现平滑的动画","date":"2020-06-03T03:19:38.000Z","comments":1,"_content":"\n> 通过利用 React Router 我们可以实现页面的跳转和切换。但默认 react router 的效果很生硬，我们可以通过利用 React Transition Group 来实现路由切换的平滑动画\n\n<!-- more -->\n\n# 配置\n\n## 安装\n\n使用 Transition 之前我们需要安装 React Transition Group\n\nnpm 下安装\n`npm install react-transition-group --save`\n\nyarn 下安装\n`yarn add react-transition-group`\n\n## 导入\n\n在组件中导入`react-transition-group`\n\n`import {TransitionGroup, CSSTransition} from 'react-transition-group'`\n\n# 路由\n\n假设我们已经建立了一个 setting 里的路由。现在我们可以通过不同的链接在 setting 组件中切换来渲染不同的组件，比如主题，语言，更新日志组件的切换。\n\n```js\n<Switch location={location}>\n  <Route exact path=\"/setting/profile\">\n    <Profile />\n  </Route>\n  <Route path=\"/setting/theme\">\n    <Apparence />\n  </Route>\n  <Route path=\"/setting/language\">\n    <Language />\n  </Route>\n  <Route path=\"/setting/about\">\n    <About />\n  </Route>\n  <Route path=\"/setting/changelog\">\n    <ChangeLog />\n  </Route>\n</Switch>\n```\n\n然后我们添加 TransitionGroup 和 CSSTransition 到 Switch 组件的外层\n\n```js\n<TransitionGroup>\n  <CSSTransition\n    key={location.key}\n    timeout={{ enter: 1000, exit: 1000 }}\n    classNames=\"fade\"\n  ></CSSTransition>\n</TransitionGroup>\n```\n\nReact 每一个组件都应该有自己独立的 key，我们可以用 router 的 location 来添加到 CSSTransition 做 key\n`timeout`用来设置我们动画的时长。`classNames`用来作为前缀在 css 中写每个状态的动画。比如我们在上面添加了`fade`，我们在 css 中就可以写`fade-enter`, `fade-enter-active`, `fade-exit`, `fade-exit-active`来根据 state 的状态管理动画。以下是一个 slide 加透明度时长 1s 的动画。\n\n```css\n//在动画开始前，我们设置组件的透明度为0并向左偏移50像素\n.fade-enter {\n  opacity: 0;\n  transform: translateX(-50px);\n}\n\n//当被active的时候，我们将要跳转的router透明度设置为1并为正常位置\n.fade-enter-active {\n  opacity: 1;\n  transform: translateX(0px);\n  transition: all 1s;\n}\n\n//退出动画起始设置为默认\n.fade-exit {\n  opacity: 1;\n  transform: translateX(0px);\n}\n\n//退出动画开始 向右偏移并透明度变为0\n.fade-exit-active {\n  opacity: 0;\n  transform: translateX(50px);\n  transition: all 1s;\n}\n```\n","source":"_posts/04 router.md","raw":"---\ntitle: 利用React Transition Group实现平滑的动画\ndate: 2020-06-02 20:19:38\ntags: ['笔记', 'react', 'react-router']\ncomments: true\ncategories: '笔记'\n---\n\n> 通过利用 React Router 我们可以实现页面的跳转和切换。但默认 react router 的效果很生硬，我们可以通过利用 React Transition Group 来实现路由切换的平滑动画\n\n<!-- more -->\n\n# 配置\n\n## 安装\n\n使用 Transition 之前我们需要安装 React Transition Group\n\nnpm 下安装\n`npm install react-transition-group --save`\n\nyarn 下安装\n`yarn add react-transition-group`\n\n## 导入\n\n在组件中导入`react-transition-group`\n\n`import {TransitionGroup, CSSTransition} from 'react-transition-group'`\n\n# 路由\n\n假设我们已经建立了一个 setting 里的路由。现在我们可以通过不同的链接在 setting 组件中切换来渲染不同的组件，比如主题，语言，更新日志组件的切换。\n\n```js\n<Switch location={location}>\n  <Route exact path=\"/setting/profile\">\n    <Profile />\n  </Route>\n  <Route path=\"/setting/theme\">\n    <Apparence />\n  </Route>\n  <Route path=\"/setting/language\">\n    <Language />\n  </Route>\n  <Route path=\"/setting/about\">\n    <About />\n  </Route>\n  <Route path=\"/setting/changelog\">\n    <ChangeLog />\n  </Route>\n</Switch>\n```\n\n然后我们添加 TransitionGroup 和 CSSTransition 到 Switch 组件的外层\n\n```js\n<TransitionGroup>\n  <CSSTransition\n    key={location.key}\n    timeout={{ enter: 1000, exit: 1000 }}\n    classNames=\"fade\"\n  ></CSSTransition>\n</TransitionGroup>\n```\n\nReact 每一个组件都应该有自己独立的 key，我们可以用 router 的 location 来添加到 CSSTransition 做 key\n`timeout`用来设置我们动画的时长。`classNames`用来作为前缀在 css 中写每个状态的动画。比如我们在上面添加了`fade`，我们在 css 中就可以写`fade-enter`, `fade-enter-active`, `fade-exit`, `fade-exit-active`来根据 state 的状态管理动画。以下是一个 slide 加透明度时长 1s 的动画。\n\n```css\n//在动画开始前，我们设置组件的透明度为0并向左偏移50像素\n.fade-enter {\n  opacity: 0;\n  transform: translateX(-50px);\n}\n\n//当被active的时候，我们将要跳转的router透明度设置为1并为正常位置\n.fade-enter-active {\n  opacity: 1;\n  transform: translateX(0px);\n  transition: all 1s;\n}\n\n//退出动画起始设置为默认\n.fade-exit {\n  opacity: 1;\n  transform: translateX(0px);\n}\n\n//退出动画开始 向右偏移并透明度变为0\n.fade-exit-active {\n  opacity: 0;\n  transform: translateX(50px);\n  transition: all 1s;\n}\n```\n","slug":"04 router","published":1,"updated":"2020-06-03T04:38:20.593Z","layout":"post","photos":[],"link":"","_id":"ckb7h00sv0008i0uiazn3f30k","content":"<blockquote>\n<p>通过利用 React Router 我们可以实现页面的跳转和切换。但默认 react router 的效果很生硬，我们可以通过利用 React Transition Group 来实现路由切换的平滑动画</p>\n</blockquote>\n<a id=\"more\"></a>\n\n<h1 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h1><h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><p>使用 Transition 之前我们需要安装 React Transition Group</p>\n<p>npm 下安装<br><code>npm install react-transition-group --save</code></p>\n<p>yarn 下安装<br><code>yarn add react-transition-group</code></p>\n<h2 id=\"导入\"><a href=\"#导入\" class=\"headerlink\" title=\"导入\"></a>导入</h2><p>在组件中导入<code>react-transition-group</code></p>\n<p><code>import {TransitionGroup, CSSTransition} from &#39;react-transition-group&#39;</code></p>\n<h1 id=\"路由\"><a href=\"#路由\" class=\"headerlink\" title=\"路由\"></a>路由</h1><p>假设我们已经建立了一个 setting 里的路由。现在我们可以通过不同的链接在 setting 组件中切换来渲染不同的组件，比如主题，语言，更新日志组件的切换。</p>\n<pre class=\" language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>Switch location<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>location<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>Route exact path<span class=\"token operator\">=</span><span class=\"token string\">\"/setting/profile\"</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>Profile <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Route<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>Route path<span class=\"token operator\">=</span><span class=\"token string\">\"/setting/theme\"</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>Apparence <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Route<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>Route path<span class=\"token operator\">=</span><span class=\"token string\">\"/setting/language\"</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>Language <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Route<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>Route path<span class=\"token operator\">=</span><span class=\"token string\">\"/setting/about\"</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>About <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Route<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>Route path<span class=\"token operator\">=</span><span class=\"token string\">\"/setting/changelog\"</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>ChangeLog <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Route<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Switch<span class=\"token operator\">></span></code></pre>\n<p>然后我们添加 TransitionGroup 和 CSSTransition 到 Switch 组件的外层</p>\n<pre class=\" language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>TransitionGroup<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>CSSTransition\n    key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>location<span class=\"token punctuation\">.</span>key<span class=\"token punctuation\">}</span>\n    timeout<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> enter<span class=\"token punctuation\">:</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> exit<span class=\"token punctuation\">:</span> <span class=\"token number\">1000</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    classNames<span class=\"token operator\">=</span><span class=\"token string\">\"fade\"</span>\n  <span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>CSSTransition<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>TransitionGroup<span class=\"token operator\">></span></code></pre>\n<p>React 每一个组件都应该有自己独立的 key，我们可以用 router 的 location 来添加到 CSSTransition 做 key<br><code>timeout</code>用来设置我们动画的时长。<code>classNames</code>用来作为前缀在 css 中写每个状态的动画。比如我们在上面添加了<code>fade</code>，我们在 css 中就可以写<code>fade-enter</code>, <code>fade-enter-active</code>, <code>fade-exit</code>, <code>fade-exit-active</code>来根据 state 的状态管理动画。以下是一个 slide 加透明度时长 1s 的动画。</p>\n<pre class=\" language-css\"><code class=\"language-css\"><span class=\"token selector\">//在动画开始前，我们设置组件的透明度为0并向左偏移50像素\n<span class=\"token class\">.fade-enter</span> </span><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">translateX</span><span class=\"token punctuation\">(</span>-<span class=\"token number\">50</span>px<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">//当被active的时候，我们将要跳转的router透明度设置为1并为正常位置\n<span class=\"token class\">.fade-enter-active</span> </span><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">translateX</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span>px<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">transition</span><span class=\"token punctuation\">:</span> all <span class=\"token number\">1</span>s<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">//退出动画起始设置为默认\n<span class=\"token class\">.fade-exit</span> </span><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">translateX</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span>px<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">//退出动画开始 向右偏移并透明度变为0\n<span class=\"token class\">.fade-exit-active</span> </span><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">translateX</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span>px<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">transition</span><span class=\"token punctuation\">:</span> all <span class=\"token number\">1</span>s<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p>通过利用 React Router 我们可以实现页面的跳转和切换。但默认 react router 的效果很生硬，我们可以通过利用 React Transition Group 来实现路由切换的平滑动画</p>\n</blockquote>","more":"<h1 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h1><h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><p>使用 Transition 之前我们需要安装 React Transition Group</p>\n<p>npm 下安装<br><code>npm install react-transition-group --save</code></p>\n<p>yarn 下安装<br><code>yarn add react-transition-group</code></p>\n<h2 id=\"导入\"><a href=\"#导入\" class=\"headerlink\" title=\"导入\"></a>导入</h2><p>在组件中导入<code>react-transition-group</code></p>\n<p><code>import {TransitionGroup, CSSTransition} from &#39;react-transition-group&#39;</code></p>\n<h1 id=\"路由\"><a href=\"#路由\" class=\"headerlink\" title=\"路由\"></a>路由</h1><p>假设我们已经建立了一个 setting 里的路由。现在我们可以通过不同的链接在 setting 组件中切换来渲染不同的组件，比如主题，语言，更新日志组件的切换。</p>\n<pre><code class=\"js\">&lt;Switch location={location}&gt;\n  &lt;Route exact path=&quot;/setting/profile&quot;&gt;\n    &lt;Profile /&gt;\n  &lt;/Route&gt;\n  &lt;Route path=&quot;/setting/theme&quot;&gt;\n    &lt;Apparence /&gt;\n  &lt;/Route&gt;\n  &lt;Route path=&quot;/setting/language&quot;&gt;\n    &lt;Language /&gt;\n  &lt;/Route&gt;\n  &lt;Route path=&quot;/setting/about&quot;&gt;\n    &lt;About /&gt;\n  &lt;/Route&gt;\n  &lt;Route path=&quot;/setting/changelog&quot;&gt;\n    &lt;ChangeLog /&gt;\n  &lt;/Route&gt;\n&lt;/Switch&gt;</code></pre>\n<p>然后我们添加 TransitionGroup 和 CSSTransition 到 Switch 组件的外层</p>\n<pre><code class=\"js\">&lt;TransitionGroup&gt;\n  &lt;CSSTransition\n    key={location.key}\n    timeout={{ enter: 1000, exit: 1000 }}\n    classNames=&quot;fade&quot;\n  &gt;&lt;/CSSTransition&gt;\n&lt;/TransitionGroup&gt;</code></pre>\n<p>React 每一个组件都应该有自己独立的 key，我们可以用 router 的 location 来添加到 CSSTransition 做 key<br><code>timeout</code>用来设置我们动画的时长。<code>classNames</code>用来作为前缀在 css 中写每个状态的动画。比如我们在上面添加了<code>fade</code>，我们在 css 中就可以写<code>fade-enter</code>, <code>fade-enter-active</code>, <code>fade-exit</code>, <code>fade-exit-active</code>来根据 state 的状态管理动画。以下是一个 slide 加透明度时长 1s 的动画。</p>\n<pre><code class=\"css\">//在动画开始前，我们设置组件的透明度为0并向左偏移50像素\n.fade-enter {\n  opacity: 0;\n  transform: translateX(-50px);\n}\n\n//当被active的时候，我们将要跳转的router透明度设置为1并为正常位置\n.fade-enter-active {\n  opacity: 1;\n  transform: translateX(0px);\n  transition: all 1s;\n}\n\n//退出动画起始设置为默认\n.fade-exit {\n  opacity: 1;\n  transform: translateX(0px);\n}\n\n//退出动画开始 向右偏移并透明度变为0\n.fade-exit-active {\n  opacity: 0;\n  transform: translateX(50px);\n  transition: all 1s;\n}</code></pre>"}],"PostAsset":[],"PostCategory":[{"post_id":"ckb7h00sv0008i0uiazn3f30k","category_id":"ckb7h00ss0004i0uib3sf0fzm","_id":"ckb7h00sz000di0ui9iaf81es"},{"post_id":"ckb7h00si0000i0ui00uj0vl4","category_id":"ckb7h00ss0004i0uib3sf0fzm","_id":"ckb7h00t0000gi0ui0j07gct2"},{"post_id":"ckb7h00sq0002i0uid9yzh9ku","category_id":"ckb7h00ss0004i0uib3sf0fzm","_id":"ckb7h00t0000hi0uidp7p8zcy"},{"post_id":"ckb7h00st0006i0uigmxt6xvp","category_id":"ckb7h00ss0004i0uib3sf0fzm","_id":"ckb7h00t0000ji0ui2ob02gwm"}],"PostTag":[{"post_id":"ckb7h00si0000i0ui00uj0vl4","tag_id":"ckb7h00st0005i0uidroa31ma","_id":"ckb7h00t1000mi0ui759lbft1"},{"post_id":"ckb7h00si0000i0ui00uj0vl4","tag_id":"ckb7h00sw000bi0uibvy92wjb","_id":"ckb7h00t2000ni0uiby1460pv"},{"post_id":"ckb7h00si0000i0ui00uj0vl4","tag_id":"ckb7h00sz000fi0uiarao3122","_id":"ckb7h00t2000pi0uif9m69hlo"},{"post_id":"ckb7h00si0000i0ui00uj0vl4","tag_id":"ckb7h00t0000ii0uid1yk5mkd","_id":"ckb7h00t2000qi0ui4fi5egz4"},{"post_id":"ckb7h00si0000i0ui00uj0vl4","tag_id":"ckb7h00t1000ki0uibvajdgxo","_id":"ckb7h00t3000si0ui1m2hfm3g"},{"post_id":"ckb7h00sq0002i0uid9yzh9ku","tag_id":"ckb7h00t1000li0ui405fhlhl","_id":"ckb7h00t3000ti0uihie3e9z4"},{"post_id":"ckb7h00sq0002i0uid9yzh9ku","tag_id":"ckb7h00t2000oi0ui05pr9qci","_id":"ckb7h00t3000vi0ui300x32c5"},{"post_id":"ckb7h00st0006i0uigmxt6xvp","tag_id":"ckb7h00t1000li0ui405fhlhl","_id":"ckb7h00t4000xi0ui3v934m5n"},{"post_id":"ckb7h00st0006i0uigmxt6xvp","tag_id":"ckb7h00t3000ui0ui49122oze","_id":"ckb7h00t4000yi0uickdzeibb"},{"post_id":"ckb7h00sv0008i0uiazn3f30k","tag_id":"ckb7h00t1000li0ui405fhlhl","_id":"ckb7h00t50011i0uifkxd328h"},{"post_id":"ckb7h00sv0008i0uiazn3f30k","tag_id":"ckb7h00t4000zi0ui5syj7gck","_id":"ckb7h00t50012i0uihcpv0096"},{"post_id":"ckb7h00sv0008i0uiazn3f30k","tag_id":"ckb7h00t50010i0ui12zxao6h","_id":"ckb7h00t50013i0ui5j8vhjuk"}],"Tag":[{"name":"firebase","_id":"ckb7h00st0005i0uidroa31ma"},{"name":"database","_id":"ckb7h00sw000bi0uibvy92wjb"},{"name":"web","_id":"ckb7h00sz000fi0uiarao3122"},{"name":"firestore","_id":"ckb7h00t0000ii0uid1yk5mkd"},{"name":"cloudstorage","_id":"ckb7h00t1000ki0uibvajdgxo"},{"name":"笔记","_id":"ckb7h00t1000li0ui405fhlhl"},{"name":"git","_id":"ckb7h00t2000oi0ui05pr9qci"},{"name":"javascript","_id":"ckb7h00t3000ui0ui49122oze"},{"name":"react","_id":"ckb7h00t4000zi0ui5syj7gck"},{"name":"react-router","_id":"ckb7h00t50010i0ui12zxao6h"}]}}