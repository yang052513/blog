{"meta":{"version":1,"warehouse":"3.0.2"},"models":{"Asset":[{"_id":"themes/butterfly/source/css/index.styl","path":"css/index.styl","modified":1,"renderable":1},{"_id":"themes/butterfly/source/css/var.styl","path":"css/var.styl","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/404.jpg","path":"img/404.jpg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/algolia.svg","path":"img/algolia.svg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/favicon.png","path":"img/favicon.png","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/icp.png","path":"img/icp.png","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/loading.gif","path":"img/loading.gif","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/main.js","path":"js/main.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/tw_cn.js","path":"js/tw_cn.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/utils.js","path":"js/utils.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/friend_404.gif","path":"img/friend_404.gif","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/search/algolia.js","path":"js/search/algolia.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/search/local-search.js","path":"js/search/local-search.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/third-party/ClickShowText.js","path":"js/third-party/ClickShowText.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/third-party/activate-power-mode.js","path":"js/third-party/activate-power-mode.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/third-party/canvas-nest.js","path":"js/third-party/canvas-nest.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/third-party/canvas-ribbon.js","path":"js/third-party/canvas-ribbon.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/third-party/click_heart.js","path":"js/third-party/click_heart.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/third-party/fireworks.js","path":"js/third-party/fireworks.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/third-party/piao.js","path":"js/third-party/piao.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/friend_2.jpg","path":"img/friend_2.jpg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/categories.jpg","path":"img/categories.jpg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/yang-favicon.png","path":"img/yang-favicon.png","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/friend_1.jpg","path":"img/friend_1.jpg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/about.jpg","path":"img/about.jpg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/yang.jpg","path":"img/yang.jpg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/archive.jpg","path":"img/archive.jpg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/tag.jpg","path":"img/tag.jpg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/banner.jpg","path":"img/banner.jpg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/friend.jpg","path":"img/friend.jpg","modified":1,"renderable":1}],"Cache":[{"_id":"themes/butterfly/LICENSE","hash":"c372b56b7553dafd2d8a8abf12d0dd71b4e2bfc0","modified":1592634453075},{"_id":"themes/butterfly/README.md","hash":"111662216ce7d1ea63d7072aaea2a612543c19a1","modified":1592634453075},{"_id":"themes/butterfly/README_CN.md","hash":"6c17872d3bbd147a86f53a7de7ee193dfd1a9000","modified":1592634453075},{"_id":"themes/butterfly/_config.yml","hash":"9388ad1d32903f28a450a7fd7205af88b9ea6ba5","modified":1595357205990},{"_id":"themes/butterfly/package.json","hash":"f92db754486cb1cfaaa4b03b869877c922974bee","modified":1592634453106},{"_id":"source/_asset/array.png","hash":"756c24837ed0ee9c5d28da813e1a088156e475ae","modified":1595097943834},{"_id":"source/_data/link.yml","hash":"7db0a276b64e994155f19c99b9e345b4ce50cc4e","modified":1592635144544},{"_id":"source/_posts/01-firebase-note.md","hash":"7658f0720a3b5cf69e5a295380937190ea08c010","modified":1592637397619},{"_id":"source/_posts/02-git-command.md","hash":"8e572da8e3d6685b560257c1c20da96462e13597","modified":1592637381484},{"_id":"source/_posts/03-js-event-target.md","hash":"520978553dd63de6caeb467f399e4bf1539d84a6","modified":1592637359593},{"_id":"source/_posts/04-react-css-transition.md","hash":"045629e2357afa4f033b7aa1b289f4987b54222a","modified":1592637317902},{"_id":"source/_posts/05-javascript.md","hash":"ab28df2a347885aa10f91d0488712a0a00672413","modified":1592637261244},{"_id":"source/_posts/06-sass-cheat-sheet.md","hash":"e8abcffcfe51ac9ffc4aa90c9e7531cfcd38bdf5","modified":1592637244136},{"_id":"source/_posts/07-typescript.md","hash":"fe068ce913693f4fd8f9575941c59999ecb285ca","modified":1592637120855},{"_id":"source/_posts/08-your-first-npm-package.md","hash":"9aae8ccfc7d00e3cd8b49ba2b27f7b1799cc8085","modified":1592637028240},{"_id":"source/_posts/09-customize-powershell.md","hash":"e519062563c52ec93ede0ef519d0fef80fa2d52c","modified":1592769445124},{"_id":"source/_posts/10-common-algo-review.md","hash":"6ebf33211ba30ff4100ad7784bd86ffe6ba8eb40","modified":1595365357480},{"_id":"source/_posts/11-es6-notes.md","hash":"b47453bd6ea305a36d99431be36f1e0c803808ea","modified":1592636894125},{"_id":"source/_posts/12-intermediate-powerlifting.md","hash":"a35e0fd8cd1018c5c002aedd7f5070a63a7cd375","modified":1592769462115},{"_id":"source/_posts/13-userRef-useReduce.md","hash":"eeed274b5fda1fc66f5d4a717639600fca8dbe78","modified":1594969437689},{"_id":"source/_posts/14-regular-expression.md","hash":"8489d76e260ad9785dfd695fa89a45f89fc24c65","modified":1593587711854},{"_id":"source/_posts/15-data-comm.md","hash":"112ea94ef4f3a0b471ab894e84095b419dae1bc7","modified":1593804706476},{"_id":"source/_posts/17-python-request.md","hash":"75b2b79c798925dc0b2d08176d1754d1eca023bc","modified":1594942411630},{"_id":"source/_posts/18-vuepress-doc.md","hash":"d74c87a9c4961fee3e66d2347b2986b40ad085fc","modified":1593804924210},{"_id":"source/_posts/19-python-bs4.md","hash":"046c2429f3bb83d81cd2abfbbfa94b32e7271dbe","modified":1593805087308},{"_id":"source/_posts/16-angular.md","hash":"a9081ff6c5beb5aee296b74ebcdc1efbe18ef8df","modified":1593804858519},{"_id":"source/_posts/20-python-selenium.md","hash":"c1fe836749672d1c539848e93938d2d62df49705","modified":1593927004361},{"_id":"source/_posts/21-python-fillder.md","hash":"50016b64b75ca126dcf8b36e3a00ef4083ef5156","modified":1594751139735},{"_id":"source/_posts/22-what-i-learn-summer.md","hash":"bca5ce9a9ec6e7b065e55f23bbf694a34b545c5b","modified":1594231400463},{"_id":"source/_posts/24-my-sass-mixin.md","hash":"aca4b8852c2071fba8f2355776f4c6682278c74e","modified":1594021283930},{"_id":"source/_posts/23-styled-components.md","hash":"64be529c738bfb15ed6f6e083da42ad03fdfa921","modified":1594753408753},{"_id":"source/_posts/25-create-your-first-blog.md","hash":"843bdb802fc6f820c5522a0029a24de332cb74da","modified":1594706281751},{"_id":"source/_posts/26-python-mongodb.md","hash":"27f23b33cc71209688973fb59e94cf1edc5e78f5","modified":1594494980724},{"_id":"source/_posts/27-vim.md","hash":"25d17b236cf6af7f073967688c885ee885932140","modified":1595377044756},{"_id":"source/_posts/28-react-mern.md","hash":"456b96d81bd3bee1b780f9e10f81e5c4974e1697","modified":1594704228341},{"_id":"source/_posts/29-react-component-lifecycle.md","hash":"ec391890a7597cd056c6f5b52c118df49da78815","modified":1594883502413},{"_id":"source/_posts/30-d3-react.md","hash":"fdfb87485f8c2781d15813778fe86e59f257d1b5","modified":1596510458749},{"_id":"source/_posts/31-react-redux.md","hash":"f36bcf5d5d8612b6ae52e2d1be525aa21682df83","modified":1596756699824},{"_id":"source/_posts/32-react-native.md","hash":"4cc41ab5b8ca87fdd214cae5085ad927f0c05b5a","modified":1597010506564},{"_id":"source/about/index.md","hash":"669f02ebf74c12c01be7f7eae5b8b5b3aa76a6f6","modified":1592768775256},{"_id":"source/about/site.md","hash":"1280b7a7de7cb8ed730f6851c14957b055bea7a1","modified":1590408109328},{"_id":"source/albums/index.md","hash":"8d0674933590be17af3ef22eef46ab8e4a2237ef","modified":1590408109328},{"_id":"source/categories/index.md","hash":"0fb00bfe60d329c783a91ea59a9037217e2a4419","modified":1592768438486},{"_id":"source/girls/index.md","hash":"6de0168aaa519b027d3903ddc8447dfab5674d56","modified":1592466407440},{"_id":"source/link/index.md","hash":"a14644a846a5c0f8d0798186da906d1821f4e4ca","modified":1593800767211},{"_id":"source/tags/index.md","hash":"fa213c41ba9a1ce94b38954d6e5da1d882d9b0a4","modified":1592767918176},{"_id":"themes/butterfly/languages/default.yml","hash":"730a00d41d0cb7b6ad768a9f91889307ffeffc23","modified":1592634453076},{"_id":"themes/butterfly/languages/en.yml","hash":"730a00d41d0cb7b6ad768a9f91889307ffeffc23","modified":1592634453077},{"_id":"themes/butterfly/languages/zh-CN.yml","hash":"e7d642fe6ed909c6552accd919a812c9ae86df7d","modified":1592634453077},{"_id":"themes/butterfly/languages/zh-TW.yml","hash":"582d4800d33209f4612f48f25f69e8d952aeabfe","modified":1592634453077},{"_id":"themes/butterfly/layout/404.pug","hash":"9ba3cea0f61ad5d0f6cb782fd3da9cf7b4077ae4","modified":1592634453078},{"_id":"themes/butterfly/layout/archive.pug","hash":"bd62286afb64a51c97e800c5945620d51605d5fa","modified":1592634453078},{"_id":"themes/butterfly/layout/category.pug","hash":"d014234c26d2c07caaea6703f7b48cb69c51907d","modified":1592634453079},{"_id":"themes/butterfly/layout/flink.pug","hash":"12571e3b98651d655cab29c01a33663393c66056","modified":1592634453079},{"_id":"themes/butterfly/layout/index.pug","hash":"e1c3146834c16e6077406180858add0a8183875a","modified":1592634453105},{"_id":"themes/butterfly/layout/page.pug","hash":"130ab657a6acfe149dbc59e481dc05d4d7d926a3","modified":1592634453105},{"_id":"themes/butterfly/layout/post.pug","hash":"2e34fd65d36508faec9fd015d6cdb108d4c29b58","modified":1592634453105},{"_id":"themes/butterfly/layout/tag.pug","hash":"3bb2a700c6d709d2757d55d357eed1fca5644e24","modified":1592634453105},{"_id":"themes/butterfly/layout/includes/additional-js.pug","hash":"06ff82eaedfbc5cc9a65e34eaa063cebfb942a93","modified":1592634453079},{"_id":"themes/butterfly/layout/includes/footer.pug","hash":"f41c3cdf1a6c6cfd06a69a5ba7a14b3730ee6127","modified":1592634453085},{"_id":"themes/butterfly/layout/includes/head.pug","hash":"5f3a4c030a5f27d890089737f3fd4c58a1154c1f","modified":1592634453085},{"_id":"themes/butterfly/layout/includes/layout.pug","hash":"e764e4ecceb04e11e2bfef84e72b4529bdc2362b","modified":1592634453092},{"_id":"themes/butterfly/layout/includes/pagination.pug","hash":"29c6e5f8b82de38f61b53decfa9e0e9831b188f8","modified":1592634453095},{"_id":"themes/butterfly/layout/includes/rightside.pug","hash":"71960ea57a3f241c80e7701f2decbf4ba9736ba0","modified":1592634453097},{"_id":"themes/butterfly/layout/includes/sidebar.pug","hash":"158e49e0466e71e4d2cc7087a3ac5e703b3e13e4","modified":1592634453100},{"_id":"themes/butterfly/scripts/events/404.js","hash":"3c30dbd8b910ce7d8d7d8353cf2266cbc5d8775d","modified":1592634453106},{"_id":"themes/butterfly/scripts/events/replace_config.js","hash":"537e556e76760ce2103f359d5a424c6e2b9a0710","modified":1592634453107},{"_id":"themes/butterfly/scripts/filters/post_lazyload.js","hash":"e6db030700cefcd79e7a826b04e2a7172d53428e","modified":1592634453107},{"_id":"themes/butterfly/scripts/filters/random_cover.js","hash":"0b4775aaa955b75f03648fc1957fb88a6d440803","modified":1592634453107},{"_id":"themes/butterfly/scripts/helpers/aside_archives.js","hash":"fb394ffd0ec61fe50ff992fdf11356312ca2ccfb","modified":1592634453108},{"_id":"themes/butterfly/scripts/helpers/aside_categories.js","hash":"11aabab0092a3f2258c1fa931e74a7796074c515","modified":1592634453108},{"_id":"themes/butterfly/scripts/helpers/page.js","hash":"729a9f40c5bf603036f6e9443db93b1704cf17d9","modified":1592634453109},{"_id":"themes/butterfly/scripts/helpers/related_post.js","hash":"64b13aeb4f49609529be6f9060797bafc8a6f9bc","modified":1592634453110},{"_id":"themes/butterfly/scripts/tags/button.js","hash":"bae84b36b58572112047c3b02e975c1e762de56b","modified":1592634453110},{"_id":"themes/butterfly/scripts/tags/gallery.js","hash":"2fad0a9e6645613631aad36dc3473fe8e032809b","modified":1592634453110},{"_id":"themes/butterfly/scripts/tags/hide.js","hash":"a32e4166b6cbbc1c2bdecaa74662a12cdb98f4ce","modified":1592634453111},{"_id":"themes/butterfly/scripts/tags/mermaid.js","hash":"53eaff19d8da32e04e2c871300ea495356d633cd","modified":1592634453111},{"_id":"themes/butterfly/scripts/tags/note.js","hash":"c739846637c48b4779df2f62effb78e15100fd9f","modified":1592634453111},{"_id":"themes/butterfly/scripts/tags/tabs.js","hash":"526c2ea5da98635e21a896a074de28b3a0294ba7","modified":1592634453111},{"_id":"themes/butterfly/source/css/index.styl","hash":"8d908c4bc856f9369e8148e7b8dd7fb968fbf66c","modified":1592634453124},{"_id":"themes/butterfly/source/css/var.styl","hash":"3c20dbec8e323628f17a8510f6ef8bba6f00db2a","modified":1592634453124},{"_id":"themes/butterfly/source/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1592634453125},{"_id":"themes/butterfly/source/img/algolia.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1592634453125},{"_id":"themes/butterfly/source/img/favicon.png","hash":"3cf89864b4f6c9b532522a4d260a2e887971c92d","modified":1592634453125},{"_id":"themes/butterfly/source/img/icp.png","hash":"cb1fd69b38ec23ce8366668ddffbbd0160de0104","modified":1592634453126},{"_id":"themes/butterfly/source/img/loading.gif","hash":"5f0287fb8fb98872fe1998c6f781111819e71806","modified":1592634453127},{"_id":"themes/butterfly/source/js/main.js","hash":"ef820beebcc1e74de7ca2956a8a4807622be204b","modified":1592634453128},{"_id":"themes/butterfly/source/js/tw_cn.js","hash":"030ad26843c22f6a5f91a40200c65d079a4f8475","modified":1592634453132},{"_id":"themes/butterfly/source/js/utils.js","hash":"43da5a9129aa827dc5c311b0e5e3a12ccc61b488","modified":1592634453132},{"_id":"themes/butterfly/source/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1592634453126},{"_id":"themes/butterfly/layout/includes/chat/chatra.pug","hash":"77ec360f1f9fd702be540b0542449705828a77da","modified":1592634453080},{"_id":"themes/butterfly/layout/includes/chat/daovoice.pug","hash":"ab96a70b0a65a7fae094d426beba7433f60f4a5a","modified":1592634453081},{"_id":"themes/butterfly/layout/includes/chat/gitter.pug","hash":"ba9576ecba1a1768c25377e8b4fdb133982bd214","modified":1592634453081},{"_id":"themes/butterfly/layout/includes/chat/index.pug","hash":"da7412131e768e331a9f33804f2f5f7c5eeaa178","modified":1592634453081},{"_id":"themes/butterfly/layout/includes/chat/tidio.pug","hash":"208035fb6ae639653861d15c9a20e8d4bba2b02a","modified":1592634453081},{"_id":"themes/butterfly/layout/includes/comments/disqus.pug","hash":"821d968122bab8ce1ce04dc553b731eaf8e0d181","modified":1592634453082},{"_id":"themes/butterfly/layout/includes/comments/disqusjs.pug","hash":"751351eae0540651a5db865262ff4a6d40680715","modified":1592634453082},{"_id":"themes/butterfly/layout/includes/comments/facebook_comments.pug","hash":"7b7bb7d2b39b639cc8e1edf1274148460796662e","modified":1592634453082},{"_id":"themes/butterfly/layout/includes/comments/gitalk.pug","hash":"e98f5c199a76ad939a29a46c0dcbf7e85ec60ed2","modified":1592634453083},{"_id":"themes/butterfly/layout/includes/comments/index.pug","hash":"67cfc03939e08992ccb3a453d2b72458056535e9","modified":1592634453083},{"_id":"themes/butterfly/layout/includes/comments/livere.pug","hash":"9518b6e0c532af8ab0ae569ad795b769a2bd3040","modified":1592634453084},{"_id":"themes/butterfly/layout/includes/comments/utterances.pug","hash":"9427cb07bcfe2bc7198755eeebf60f9fe430a342","modified":1592634453084},{"_id":"themes/butterfly/layout/includes/comments/valine.pug","hash":"7b91be55c613f16bb2da9ab48aaf6e08781f563a","modified":1592634453084},{"_id":"themes/butterfly/layout/includes/head/Open_Graph.pug","hash":"a3c819238dceab080d5db0336ef07009ca216310","modified":1592634453086},{"_id":"themes/butterfly/layout/includes/head/analytics.pug","hash":"8ec0609f14c284c3e6120940d7c4d7f1f201cd67","modified":1592634453086},{"_id":"themes/butterfly/layout/includes/head/aplayer.pug","hash":"b24959f00ac75f12f66b445158aad143ee860795","modified":1592634453086},{"_id":"themes/butterfly/layout/includes/head/comment.pug","hash":"7de136bdce45afa81341b13e61b7a3926e15f03b","modified":1592634453086},{"_id":"themes/butterfly/layout/includes/head/config.pug","hash":"e8b774f88cc717371d2e31f5d532007d0b7b23ab","modified":1592634453087},{"_id":"themes/butterfly/layout/includes/head/config_site.pug","hash":"29d6ab8de6e355925e76d92862671ce48ddd6f12","modified":1592634453087},{"_id":"themes/butterfly/layout/includes/head/darkmode.pug","hash":"fa834037bf29843abd6b63fed3a868638b9875cd","modified":1592634453087},{"_id":"themes/butterfly/layout/includes/head/google_adsense.pug","hash":"ff4ceda534cdd711cfa2cb9e95e36258988674e1","modified":1592634453088},{"_id":"themes/butterfly/layout/includes/head/noscript.pug","hash":"0a23423304127c4ffa69310526aaa59830d12c78","modified":1592634453089},{"_id":"themes/butterfly/layout/includes/head/preconnect.pug","hash":"95affc2c333f27b968c47272277da712d13f2670","modified":1592634453089},{"_id":"themes/butterfly/layout/includes/head/pwa.pug","hash":"be1ff710e4381fc684243313dcadf0140d7469de","modified":1592634453089},{"_id":"themes/butterfly/layout/includes/head/site_verification.pug","hash":"f5c8ec73c797ff3455e732fa7c92c856692f3ce5","modified":1592634453089},{"_id":"themes/butterfly/layout/includes/head/subtitle.pug","hash":"bfbf1c850dcd825c2eb68bc74e9787a5fef9258b","modified":1592634453090},{"_id":"themes/butterfly/layout/includes/header/index.pug","hash":"12dc74a7370b8d00f010e6914c09b1b12343fd92","modified":1592634453090},{"_id":"themes/butterfly/layout/includes/header/menu_item.pug","hash":"c76b6236995f15e3cf5af376101c782a1078b845","modified":1592634453091},{"_id":"themes/butterfly/layout/includes/header/nav.pug","hash":"2ff93c4edc1e52f63f3cd5f90354683e933a299e","modified":1592634453091},{"_id":"themes/butterfly/layout/includes/header/post-info.pug","hash":"aa83c7e0dcaf60c85d44af32a7d2d20667a6893b","modified":1592634453091},{"_id":"themes/butterfly/layout/includes/header/social.pug","hash":"0d953e51d04a9294a64153c89c20f491a9ec42d4","modified":1592634453092},{"_id":"themes/butterfly/layout/includes/loading/loading-js.pug","hash":"3cf431a4f04997b55873f7099c1402155b19cc95","modified":1592634453092},{"_id":"themes/butterfly/layout/includes/loading/loading.pug","hash":"5276937fbcceb9d62879dc47be880cd469a27349","modified":1592634453092},{"_id":"themes/butterfly/layout/includes/math/index.pug","hash":"ec97f284626b67208370b5084e5c5822844fa30a","modified":1592634453093},{"_id":"themes/butterfly/layout/includes/math/katex.pug","hash":"73356f1068c7426597e268d6c4aefa2b0ac3a1d9","modified":1592634453093},{"_id":"themes/butterfly/layout/includes/math/mathjax.pug","hash":"6ccfaa776fc913ccf8b34825d918ab2b4d457434","modified":1592634453093},{"_id":"themes/butterfly/layout/includes/math/mermaid.pug","hash":"db848ff451d4c58670af415882ca6bb2e0da971b","modified":1592634453093},{"_id":"themes/butterfly/layout/includes/mixins/article-sort.pug","hash":"4736ea0dec5561f4f75d283be3629062b234af23","modified":1592634453094},{"_id":"themes/butterfly/layout/includes/mixins/post-ui.pug","hash":"c046c1b43ce9b5afe68b60c08230b843113a1561","modified":1592634453094},{"_id":"themes/butterfly/layout/includes/mobile-sidebar/index.pug","hash":"d12fab033fb32b55abbc9be9b04cc6ab6465b98e","modified":1592634453095},{"_id":"themes/butterfly/layout/includes/mobile-sidebar/mobile-menus.pug","hash":"e7ee2593788c6614b9f41f0789ef7166fe73a707","modified":1592634453095},{"_id":"themes/butterfly/layout/includes/post/post-copyright.pug","hash":"8efc0b7886bdb5959e173b5e11f5ffb8d1c5230e","modified":1592634453097},{"_id":"themes/butterfly/layout/includes/post/reward.pug","hash":"3740cece6885c285351295612723fd66e0d5a4bf","modified":1592634453097},{"_id":"themes/butterfly/layout/includes/search/algolia.pug","hash":"518eec7302d4fad75be46486407a945b39833ff8","modified":1592634453098},{"_id":"themes/butterfly/layout/includes/search/index.pug","hash":"b01828b37d789797aeb5433f1705cff3c540a4d5","modified":1592634453098},{"_id":"themes/butterfly/layout/includes/search/local-search.pug","hash":"f8686264a4ff1d48961296f9949d705bc87de3ea","modified":1592634453098},{"_id":"themes/butterfly/layout/includes/share/add-this.pug","hash":"2980f1889226ca981aa23b8eb1853fde26dcf89a","modified":1592634453099},{"_id":"themes/butterfly/layout/includes/share/addtoany.pug","hash":"bbf5b70460b17c4fecb9ee6880aa71cdb2d807a8","modified":1592634453099},{"_id":"themes/butterfly/layout/includes/share/index.pug","hash":"c341aaa00113681b22f945f5004e6b22c8a0ca69","modified":1592634453099},{"_id":"themes/butterfly/layout/includes/share/share-js.pug","hash":"828a04c6e8e3a56c3c7f3c9bb1ecf4f99ed842fe","modified":1592634453100},{"_id":"themes/butterfly/layout/includes/third-party/canvas-nest.pug","hash":"3d7a3654ae03fd2665ea355ee9eac48af0ee82af","modified":1592634453100},{"_id":"themes/butterfly/layout/includes/third-party/canvas-ribbon-piao.pug","hash":"001f28c633d2ec2d5ef9ca047fb1fe61ffefd66f","modified":1592634453101},{"_id":"themes/butterfly/layout/includes/third-party/canvas-ribbon.pug","hash":"b4acf48c98ba2a6a5a5fb5387a0fd610bdfd55ef","modified":1592634453101},{"_id":"themes/butterfly/layout/includes/third-party/pangu.pug","hash":"8fdb96b8329e352ed691228767451b264151b3a6","modified":1592634453101},{"_id":"themes/butterfly/layout/includes/widget/card_ad.pug","hash":"2e940de1a6261fd378e16e4cd3362a9d69c12f50","modified":1592634453101},{"_id":"themes/butterfly/layout/includes/widget/card_announcement.pug","hash":"721b611fda6dcfca8f88b9c7b70fede7b69a516b","modified":1592634453102},{"_id":"themes/butterfly/layout/includes/widget/card_archives.pug","hash":"393a6f9a5dcabe8d96e9b6cb5620c12966dfd37f","modified":1592634453102},{"_id":"themes/butterfly/layout/includes/widget/card_author.pug","hash":"b5d73ceb54c43cc22e46b1cdcde24fcc8e420755","modified":1592634453102},{"_id":"themes/butterfly/layout/includes/widget/card_categories.pug","hash":"83cb6ba0d8c913570147b3871c7fc0674dac8cdf","modified":1592634453103},{"_id":"themes/butterfly/layout/includes/widget/card_recent_post.pug","hash":"355b50dd13471e00fbbfcf6519cf32a092c095b3","modified":1592634453104},{"_id":"themes/butterfly/layout/includes/widget/card_tags.pug","hash":"6a4c85a037c10e093f545d3167691c0b68634465","modified":1592634453104},{"_id":"themes/butterfly/layout/includes/widget/card_webinfo.pug","hash":"e0febc7eb43ceb21bb1607d4f2358b9b633cb2d2","modified":1592634453104},{"_id":"themes/butterfly/layout/includes/widget/index.pug","hash":"15fb3730f829e237c102a70ab9781178471fd786","modified":1592634453104},{"_id":"themes/butterfly/source/css/_global/function.styl","hash":"7f800733ca4e4ee4dd1e0ccaace274d1bc896539","modified":1592634453112},{"_id":"themes/butterfly/source/css/_global/index.styl","hash":"cd9580fdf3a138ca84504e1a8b3f4d633ccc7bd5","modified":1592634453113},{"_id":"themes/butterfly/source/css/_highlight/diff.styl","hash":"2d9820f9fc556855c9c26f9242adb1b29fe3c272","modified":1592634453113},{"_id":"themes/butterfly/source/css/_highlight/highlight.styl","hash":"f2884605b55dfb9575f9532d6ac568bc59d0c4ab","modified":1592634453113},{"_id":"themes/butterfly/source/css/_highlight/theme.styl","hash":"70ce4e354b03fe926fd06822e2a5f125e1cd3697","modified":1592634453114},{"_id":"themes/butterfly/source/css/_layout/404.styl","hash":"b766e536a7a558f4850b31464a284ce2384d79f6","modified":1592634453114},{"_id":"themes/butterfly/source/css/_layout/aside.styl","hash":"25c9a71043156adf67662d68b35d97d66f60a396","modified":1592634453114},{"_id":"themes/butterfly/source/css/_layout/category.styl","hash":"7267043e52a9e620adfa860bdb3e4de400ff2596","modified":1592634453115},{"_id":"themes/butterfly/source/css/_layout/chat.styl","hash":"29f48f9370f245e6e575b5836bccf47eb5688d8b","modified":1592634453116},{"_id":"themes/butterfly/source/css/_layout/flink.styl","hash":"079ed647f847cf2693928d358929b65ce67cb31b","modified":1592634453116},{"_id":"themes/butterfly/source/css/_layout/footer.styl","hash":"d8709e29efcfa0a7356384026dfbaac8861d3baa","modified":1592634453116},{"_id":"themes/butterfly/source/css/_layout/head.styl","hash":"f7038a0ac08396784e57bcd31f6431c92909f514","modified":1592634453117},{"_id":"themes/butterfly/source/css/_layout/loadding.styl","hash":"144ef01b03ae34d3ede4b9aa18f4c8cd3d6651ea","modified":1592634453117},{"_id":"themes/butterfly/source/css/_layout/mobile-sidebar.styl","hash":"d2d6b36f3bcbba35e1e63ac0d59879decf63cc1f","modified":1592634453117},{"_id":"themes/butterfly/source/css/_layout/page.styl","hash":"2fc2230d9a7117f6c5f7e484e2fbfc76e62fa8bc","modified":1592634453117},{"_id":"themes/butterfly/source/css/_layout/pagination.styl","hash":"8f44be6a866d11f6afabf8689d9ae7b65eee18ae","modified":1592634453118},{"_id":"themes/butterfly/source/css/_layout/post.styl","hash":"37a9832a6bc409947e85556b31f2adadf2f412ec","modified":1592634453118},{"_id":"themes/butterfly/source/css/_layout/relatedposts.styl","hash":"4825afd4f94f1481b5422072fa5e506e2a387247","modified":1592634453118},{"_id":"themes/butterfly/source/css/_layout/reward.styl","hash":"495da7b41a7909df989a5dcc13a29761ef23089b","modified":1592634453119},{"_id":"themes/butterfly/source/css/_layout/rightside.styl","hash":"971ddbf6084793b15221559183d20d1362630ee3","modified":1592634453119},{"_id":"themes/butterfly/source/css/_layout/sidebar.styl","hash":"33da3da65715ce1a85b8ecab92e0eab6ce620a58","modified":1592634453119},{"_id":"themes/butterfly/source/css/_layout/third-party.styl","hash":"e37b8b56dfdf1f8a4459d3ec5b8d274637221c2d","modified":1592634453120},{"_id":"themes/butterfly/source/css/_mode/darkmode.styl","hash":"35c0abf010c807b26736e08123e90eccd8324855","modified":1592634453120},{"_id":"themes/butterfly/source/css/_mode/readmode.styl","hash":"19cf99e6d6067eadf7e8abe6172a79344be5d82d","modified":1592634453120},{"_id":"themes/butterfly/source/css/_search/algolia.styl","hash":"641ef2bc7af135c17fd90f3f974e78ebbaf1ac13","modified":1592634453121},{"_id":"themes/butterfly/source/css/_search/index.styl","hash":"5bb29799d0168b1d68cfb8165a41b9d90f86eab7","modified":1592634453121},{"_id":"themes/butterfly/source/css/_search/local-search.styl","hash":"da791f46239eabbbf28eb30b9e441f1ac2a8ced1","modified":1592634453121},{"_id":"themes/butterfly/source/css/_tags/button.styl","hash":"40926b9d87e06d4679bd3c8542a7a3acd5d10cc1","modified":1592634453121},{"_id":"themes/butterfly/source/css/_tags/gallery.styl","hash":"0bc29278fbcf1aec15222ed10c58697da1a0d676","modified":1592634453122},{"_id":"themes/butterfly/source/css/_tags/hexo.styl","hash":"d0386ba6d8d63afc72b9673e8f3e89df6446ffc2","modified":1592634453122},{"_id":"themes/butterfly/source/css/_tags/hide.styl","hash":"10e925cf59748af445d3606d965731013f31827c","modified":1592634453122},{"_id":"themes/butterfly/source/css/_tags/note.styl","hash":"2f8d4043dedef70813493e43e4c158e16ccc3fc0","modified":1592634453123},{"_id":"themes/butterfly/source/css/_tags/tabs.styl","hash":"7e51aadf941a4742c6e438a419ef820e8765258f","modified":1592634453123},{"_id":"themes/butterfly/source/css/_third-party/normalize.min.css","hash":"001bd6d68a9b9af5dd0158fe116889434f36b1fd","modified":1592634453123},{"_id":"themes/butterfly/source/js/search/algolia.js","hash":"5ff5cb40d5ede73b48594d331244ada001154dac","modified":1592634453128},{"_id":"themes/butterfly/source/js/search/local-search.js","hash":"497993860b3c42bdc926a3bd83b4b8f480febd99","modified":1592634453129},{"_id":"themes/butterfly/source/js/third-party/ClickShowText.js","hash":"32864aee35b5d739a36702b8d916b17bac52b17e","modified":1592634453129},{"_id":"themes/butterfly/source/js/third-party/activate-power-mode.js","hash":"2c4ab494225b7d04eed934efc43a43791e596f4a","modified":1592634453130},{"_id":"themes/butterfly/source/js/third-party/canvas-nest.js","hash":"978402a16f3ceebe453806e3e25a5905a89776be","modified":1592634453130},{"_id":"themes/butterfly/source/js/third-party/canvas-ribbon.js","hash":"1ddf4f6896175e77518f0fbd45776132b2954fb6","modified":1592634453130},{"_id":"themes/butterfly/source/js/third-party/click_heart.js","hash":"004ea645ed8c5e354711b5fc0dbfe015e181916b","modified":1592634453131},{"_id":"themes/butterfly/source/js/third-party/fireworks.js","hash":"411ced4031a856a5b87f7c62d3800027d12bacec","modified":1592634453131},{"_id":"themes/butterfly/source/js/third-party/piao.js","hash":"05da3437664bb335e2336a52be8587e7719f7b89","modified":1592634453132},{"_id":"themes/butterfly/source/img/friend_2.jpg","hash":"92afb9536fe9fcc4ff604f50b99bf4f7e2451f9c","modified":1593800824228},{"_id":"themes/butterfly/source/img/categories.jpg","hash":"bafa52ecdf87c9e2af5a91fa2da75291fdfab2e9","modified":1593800503084},{"_id":"themes/butterfly/source/img/yang-favicon.png","hash":"e0f7668e625cdd3d89f5c24ecfba0f8c24e1e0e3","modified":1592593932528},{"_id":"themes/butterfly/source/img/friend_1.jpg","hash":"6ce3792e84a9ec95a6e76c0d61d604c8956c1ab4","modified":1593800715603},{"_id":"themes/butterfly/source/img/about.jpg","hash":"e36fa83d1b6d02a0b1cce3ff585e2fd058b6934e","modified":1593800880226},{"_id":"themes/butterfly/source/img/yang.jpg","hash":"63aa7525e1697a0fe02204f90e723f55cc931efc","modified":1590408109458},{"_id":"themes/butterfly/source/img/archive.jpg","hash":"21616eb7935bdddcc5c10907a82c2be3c1eb6a03","modified":1593801001203},{"_id":"themes/butterfly/source/img/tag.jpg","hash":"dfd22c79f3738de2e53556d9b0738778dcfaf2dd","modified":1593800938076},{"_id":"themes/butterfly/source/img/banner.jpg","hash":"521e103644cc0208faa6c99f06ee990a664d1617","modified":1593800410749},{"_id":"themes/butterfly/source/img/friend.jpg","hash":"9e8ae5a0934f6c3f23c6352660b1e474fb4933dc","modified":1592768619812},{"_id":"public/404.html","hash":"dce2e57965e7395d5c81b478079d424c6952bbb4","modified":1597010515950},{"_id":"public/about/index.html","hash":"b4b63d190338a727ae660632de6e05bc09c147bf","modified":1597010515950},{"_id":"public/about/site.html","hash":"dfc86f875c428b3a552fcd6e0dc0a57fd9431177","modified":1597010515950},{"_id":"public/albums/index.html","hash":"eebf2bae20dcd7971dccd4746d80e6a6091fcd09","modified":1597010515950},{"_id":"public/categories/index.html","hash":"cd6bf99667a2382e4e26f7e917c869b10bb2b2ef","modified":1597010515950},{"_id":"public/girls/index.html","hash":"d13bc4588d6ba87bdabe2f14ff8925fb81080e1c","modified":1597010515950},{"_id":"public/tags/index.html","hash":"f537176864509d702ac3f34d89c1c248ba44e287","modified":1597010515950},{"_id":"public/link/index.html","hash":"7d8b147d4cb3e7db5ba9cc805f9f34d183d1cd15","modified":1597010515950},{"_id":"public/2020/08/08/32-react-native/index.html","hash":"774d5dab32b511466de2e6fc7a179217b5fb2d35","modified":1597010515950},{"_id":"public/2020/08/04/31-react-redux/index.html","hash":"1b106d5fc32e8365fe627e33a80747f27cfd1b58","modified":1597010515950},{"_id":"public/2020/08/03/30-d3-react/index.html","hash":"6ed7daf66207e4538d3545e1e97c6807382ee42f","modified":1597010515950},{"_id":"public/2020/07/15/29-react-component-lifecycle/index.html","hash":"7bce8f66b18c7f2b1bbdb2e689453cb54aff9752","modified":1597010515950},{"_id":"public/2020/07/11/28-react-mern/index.html","hash":"172742773dfcd2ae84ea308145775e942d972f04","modified":1597010515950},{"_id":"public/2020/07/11/27-vim/index.html","hash":"a9ddf083ebbed122bb8df17dc643fe7a52a087d0","modified":1597010515950},{"_id":"public/2020/07/08/26-python-mongodb/index.html","hash":"e617934953234ed947b9e329bf77b74a2bd2cfae","modified":1597010515950},{"_id":"public/2020/07/06/25-create-your-first-blog/index.html","hash":"803fe640743943beb1d3542f41122d3ca0acb9a6","modified":1597010515950},{"_id":"public/2020/07/05/24-my-sass-mixin/index.html","hash":"8a207316f3a4fd183e038b31b73cb8f1ce17e292","modified":1597010515950},{"_id":"public/2020/07/04/23-styled-components/index.html","hash":"ea4cf2dee3841d6cb681966221cd195305f9f752","modified":1597010515950},{"_id":"public/2020/07/02/22-what-i-learn-summer/index.html","hash":"a402f06b6e10900efee911af350ca00e81d39488","modified":1597010515950},{"_id":"public/2020/07/01/21-python-fillder/index.html","hash":"061f5ac871065fc83051eee24bb5ffa97149add6","modified":1597010515950},{"_id":"public/2020/07/01/20-python-selenium/index.html","hash":"10e1d84a139c80b67563011231abedc13e25bdaf","modified":1597010515950},{"_id":"public/2020/07/01/19-python-bs4/index.html","hash":"e404e04c726a4c38010e12329a21b7eaa3669ecb","modified":1597010515950},{"_id":"public/2020/06/30/18-vuepress-doc/index.html","hash":"13410e34f33180297eadf53490eb4b0278d8155e","modified":1597010515950},{"_id":"public/2020/06/23/17-python-request/index.html","hash":"cc8696dbcc753b724ce02fec1f0f3fa1f568d0a8","modified":1597010515950},{"_id":"public/2020/06/20/16-angular/index.html","hash":"a84db9c20ab94ef369b199abe02b723fd754fd2c","modified":1597010515950},{"_id":"public/2020/06/20/15-data-comm/index.html","hash":"4f26c99dd1a803aa364676f026bb598b47b4746c","modified":1597010515950},{"_id":"public/2020/06/19/14-regular-expression/index.html","hash":"a378fe6e5e8d79b9b168d49bd7e5feecdf81344a","modified":1597010515950},{"_id":"public/2020/06/18/12-intermediate-powerlifting/index.html","hash":"24c79a084b1b5ad048747e105db096e0dfcd405c","modified":1597010515950},{"_id":"public/2020/06/18/13-userRef-useReduce/index.html","hash":"80693fda5da02ea232582edefcf8ade3e8457c5a","modified":1597010515950},{"_id":"public/2020/06/17/11-es6-notes/index.html","hash":"393f2642bd1a294108a3f64ddeab4ac50e29dece","modified":1597010515950},{"_id":"public/2020/06/15/10-common-algo-review/index.html","hash":"8cee32f0fb170c7eae747d620d498ce56e6a96bb","modified":1597010515950},{"_id":"public/2020/06/15/09-customize-powershell/index.html","hash":"cda710794a189f0b0700eaad78294f55b00e9443","modified":1597010515950},{"_id":"public/2020/06/14/08-your-first-npm-package/index.html","hash":"d85da6489abb3a621125106474b4842babb1a0ef","modified":1597010515950},{"_id":"public/2020/06/12/07-typescript/index.html","hash":"47e20dda70c136e63970c08b3cadd6f0e401d198","modified":1597010515950},{"_id":"public/2020/06/08/06-sass-cheat-sheet/index.html","hash":"923d20f0364a638e6a8ae04eabc2fd6f2008382e","modified":1597010515950},{"_id":"public/2020/06/08/05-javascript/index.html","hash":"bc8f8c291c6c5f0eab63a83293e90d72f752a858","modified":1597010515950},{"_id":"public/2020/06/02/04-react-css-transition/index.html","hash":"db73f595b621af187cc26119ea81b38bfea9a957","modified":1597010515950},{"_id":"public/2020/05/28/03-js-event-target/index.html","hash":"ca1f843f75a07704937f271a4648eee2242bfc25","modified":1597010515950},{"_id":"public/2020/05/25/02-git-command/index.html","hash":"a1999691c703ed629a2eec6d8ce4c08682ec8a23","modified":1597010515950},{"_id":"public/2020/05/23/01-firebase-note/index.html","hash":"ca2db5b93b7dffd596b5487ad74a6408b1ad6537","modified":1597010515950},{"_id":"public/archives/index.html","hash":"42343edbae405ab78b2774cf43952a6f49fd3d1e","modified":1597010515950},{"_id":"public/archives/page/2/index.html","hash":"3017cfed3483d38757b27cf32c93aaf30ba82a34","modified":1597010515950},{"_id":"public/archives/page/3/index.html","hash":"524e7a1e098dfc7d87266d67ec07b0e2dc52083d","modified":1597010515950},{"_id":"public/archives/page/4/index.html","hash":"6ab795a5936639364b4cddc406cd4f4813555faa","modified":1597010515950},{"_id":"public/archives/2020/index.html","hash":"d53f3e5043e9914543d3d5923808a4ca74584d41","modified":1597010515950},{"_id":"public/archives/2020/page/2/index.html","hash":"cdaacb83a4d9886a6653590e7ed3fb0dda334e75","modified":1597010515950},{"_id":"public/archives/2020/page/3/index.html","hash":"f4c885ab8da7ffa54c33d60f70df5683f530fa3f","modified":1597010515950},{"_id":"public/archives/2020/page/4/index.html","hash":"6851b3ee84d8ddfc69920fec41bd5ce28b58e632","modified":1597010515950},{"_id":"public/archives/2020/05/index.html","hash":"f7bbcf564530a4f051f40b7528900de2d02c5a66","modified":1597010515950},{"_id":"public/archives/2020/06/index.html","hash":"b9ca7fda4d19c539a762daf259c7455fb2d5df25","modified":1597010515950},{"_id":"public/archives/2020/06/page/2/index.html","hash":"14c9fff0b04fe88fff420b20ca181972187d9540","modified":1597010515950},{"_id":"public/archives/2020/07/index.html","hash":"b84009c6fce57c7c112ee6c92ce048973e3b7fd1","modified":1597010515950},{"_id":"public/archives/2020/07/page/2/index.html","hash":"a3d17d67428f8113c0c8ff501672e83a2ee77194","modified":1597010515950},{"_id":"public/archives/2020/08/index.html","hash":"7dfc1c256d8c7def2a622821750fcbe345d4ca12","modified":1597010515950},{"_id":"public/categories/笔记/index.html","hash":"1132af4fa6c2382904d54b4a43667f8a6a8e9947","modified":1597010515950},{"_id":"public/categories/笔记/page/2/index.html","hash":"26eaeb08e4188d36d316b703ed2170eb3e3e51f5","modified":1597010515950},{"_id":"public/categories/Articles/index.html","hash":"fab08c9c985ca6ad9116f9824d40c8c0fefd9df1","modified":1597010515950},{"_id":"public/categories/Notes/index.html","hash":"926dab3826c94a1c6558d7a61a62dbab493ffe1f","modified":1597010515950},{"_id":"public/categories/Python爬虫/index.html","hash":"f6528576fda7b60d177effa2cca7d4a1b866692a","modified":1597010515950},{"_id":"public/index.html","hash":"52b6c15735b4ca690d3730fad0cb0f7ac44ec208","modified":1597010515950},{"_id":"public/page/2/index.html","hash":"94928f580bd68eaa4398cd6ff7e626bae44a64ff","modified":1597010515950},{"_id":"public/page/3/index.html","hash":"782496b74d5ad6defabe378cdb948b522993870f","modified":1597010515950},{"_id":"public/page/4/index.html","hash":"e5ae298a62a280c9efc48d2450815392fb7f476b","modified":1597010515950},{"_id":"public/tags/firebase/index.html","hash":"4e094cb959ba6b6b8d085595890ee29371d8dba5","modified":1597010515950},{"_id":"public/tags/database/index.html","hash":"c6ee85bf0b775739e5dcc828149bf9634236efb1","modified":1597010515950},{"_id":"public/tags/web/index.html","hash":"af0ce3ce5cd0771087cf9976e6fc5cd10858babb","modified":1597010515950},{"_id":"public/tags/firestore/index.html","hash":"956115ba1746af8903805c184eff6f86a33c5381","modified":1597010515950},{"_id":"public/tags/cloudstorage/index.html","hash":"66d762e017ef04f92d68391e8467e0ec1b264c4a","modified":1597010515950},{"_id":"public/tags/笔记/index.html","hash":"c86f4d012a937bfe302bfbbe558c21cb8864858e","modified":1597010515950},{"_id":"public/tags/javascript/index.html","hash":"6d30aa4f73e7c075f9cdbbf117cc8910bde44529","modified":1597010515950},{"_id":"public/tags/git/index.html","hash":"46f72daed85b4b467d05119e7341ca90395979f9","modified":1597010515950},{"_id":"public/tags/react/index.html","hash":"1242c2e98a29c6967290d063275a83217058fc48","modified":1597010515950},{"_id":"public/tags/react-router/index.html","hash":"b9a04f4be61ed594691c6073dcc151df69c477f1","modified":1597010515950},{"_id":"public/tags/JavaScript/index.html","hash":"f29448f88126b3682be5dc8af0dbf9d426171e48","modified":1597010515950},{"_id":"public/tags/css/index.html","hash":"c2a00cbd9d10a719552bcd369469c4e9ed64c4d9","modified":1597010515950},{"_id":"public/tags/Sass/index.html","hash":"5c3ff31e52da66c9fe1cf23bc77aee8d9f617b67","modified":1597010515950},{"_id":"public/tags/note/index.html","hash":"9ef54af7a5cfc1bb1493d894cb20664519724098","modified":1597010515950},{"_id":"public/tags/tsx/index.html","hash":"2a0e2a14ef19ee11dcb29e248de938efe78065d4","modified":1597010515950},{"_id":"public/tags/typescript/index.html","hash":"3ca79b1b9ab4c98409ae40eed91beaf3bedca2b5","modified":1597010515950},{"_id":"public/tags/front-end/index.html","hash":"12b21c5f7b57f7ee2000db5e9b56fbad08bf565d","modified":1597010515950},{"_id":"public/tags/notes/index.html","hash":"8216b8925709547237173405c1226b0536532426","modified":1597010515950},{"_id":"public/tags/notes/page/2/index.html","hash":"3420378be805908d09131f766fa6dd3c0ffda7f4","modified":1597010515950},{"_id":"public/tags/npm/index.html","hash":"ce3cc952ba706d4bcdb3fd99331af9a8e3e9c0eb","modified":1597010515950},{"_id":"public/tags/node/index.html","hash":"2423e3a26c91577c75543bb48399e2e5ae2e2dc5","modified":1597010515950},{"_id":"public/tags/windows/index.html","hash":"4038aef7f03c53ee7a97542390ecb9fd461f9170","modified":1597010515950},{"_id":"public/tags/powershell/index.html","hash":"1b8a963b16eb7e52fdd43876da7cdd853de0696d","modified":1597010515950},{"_id":"public/tags/terminal/index.html","hash":"11397f62d84d72034a9d5aa8b8d656b8075f0255","modified":1597010515950},{"_id":"public/tags/es6/index.html","hash":"a8f504d93cebad037c328992da2cc202cca65e12","modified":1597010515950},{"_id":"public/tags/powerlifting/index.html","hash":"30667fa8ac24d98d03336e512a2b3aa8738eb355","modified":1597010515950},{"_id":"public/tags/routine/index.html","hash":"02c39b4987d93a9488364b79e71769ad7235c2ad","modified":1597010515950},{"_id":"public/tags/Big-three/index.html","hash":"e0c3c48fc2df6c2bd0a5515d145d6917d01d701c","modified":1597010515950},{"_id":"public/tags/rogue/index.html","hash":"16892dcb2d41d6ee70bfe3a4e6af7d360308f6c1","modified":1597010515950},{"_id":"public/tags/algorithim/index.html","hash":"4dfa05057e79f9e5eb8269491987436ed8470924","modified":1597010515950},{"_id":"public/tags/framework/index.html","hash":"485852bd358b05e7aefbe9b739825dd3abbac2bb","modified":1597010515950},{"_id":"public/tags/react-hooks/index.html","hash":"24af4bf02504d25673e76fd7d234c5acd7de4984","modified":1597010515950},{"_id":"public/tags/regular-expression/index.html","hash":"cfcc09eca9bc0677cd77a9b7ea30957f9314f798","modified":1597010515950},{"_id":"public/tags/learning-everyday/index.html","hash":"668fcd05646cc386b8429f00e4827b226ff7be8e","modified":1597010515950},{"_id":"public/tags/python/index.html","hash":"f2219f932debf1dfefa092d30f6f4fa696a140ed","modified":1597010515950},{"_id":"public/tags/web-crawler/index.html","hash":"280d158354cb341a4cd403f1c5bce716fba5f647","modified":1597010515950},{"_id":"public/tags/data-communication/index.html","hash":"d39ece08d2b720e80b8d2b5d8f27a2adb3c27b7a","modified":1597010515950},{"_id":"public/tags/BCIT/index.html","hash":"289e26ae3c2f7a6b2fa643453ca9da7f8b14cd33","modified":1597010515950},{"_id":"public/tags/vuepress/index.html","hash":"20a8e93d996224f7b55fb5a8f4b1829fe55bf77b","modified":1597010515950},{"_id":"public/tags/documentation/index.html","hash":"cfbe27ef4b263a980a4e76e49073468bf788b990","modified":1597010515950},{"_id":"public/tags/articles/index.html","hash":"46738316eb7894d761df9f6fa3f3f4465c4d71d7","modified":1597010515950},{"_id":"public/tags/python-crawler-series/index.html","hash":"a2219f2e1f9192978d60e8923344481bde69e2e5","modified":1597010515950},{"_id":"public/tags/frameword/index.html","hash":"d430dedce5126686b8c28f5674de3c48706021a5","modified":1597010515950},{"_id":"public/tags/angular/index.html","hash":"6623848655a58f267479000e1b14f6c4578ec8d7","modified":1597010515950},{"_id":"public/tags/article/index.html","hash":"6dfdb6bebe3997334f2cc55368be8e93073b06ff","modified":1597010515950},{"_id":"public/tags/fiddler/index.html","hash":"d806d9cc5d66bee6e4e3bc5613635fa3fc03b50b","modified":1597010515950},{"_id":"public/tags/reflection/index.html","hash":"550a6ffa660f815cc11b871f1fe8df6d42f4b9e4","modified":1597010515950},{"_id":"public/tags/sass/index.html","hash":"4c97af974f276ce848cb6b0d72f3610dba8f6c18","modified":1597010515950},{"_id":"public/tags/styled-components/index.html","hash":"59867c9c3136a9174afbecae35f193b0143583b8","modified":1597010515950},{"_id":"public/tags/hexo/index.html","hash":"8d74b164d88f4c323bf8d743f1a877d3b073f92f","modified":1597010515950},{"_id":"public/tags/editor/index.html","hash":"7036490df6fa2d9218c6dedff968b8ca3fa66814","modified":1597010515950},{"_id":"public/tags/mongoDB/index.html","hash":"0bd9f806694e598ea1a7efdfae8cbff91db9521b","modified":1597010515950},{"_id":"public/tags/MERN/index.html","hash":"e0ce1d77fe263113af9ce61d51c66d74ea843f07","modified":1597010515950},{"_id":"public/tags/express/index.html","hash":"b6091dcfed56040eb92015811613667708857e0d","modified":1597010515950},{"_id":"public/tags/API/index.html","hash":"7b767148fa33a13b695da9a4f3924c2c0d665655","modified":1597010515950},{"_id":"public/tags/data-visiualization/index.html","hash":"337bfbec276738a6ebc3fa69a3ff8746e6ce0e1b","modified":1597010515950},{"_id":"public/tags/redux/index.html","hash":"1f9f14c7a35bf5b0ba908ade8ca7677d14896722","modified":1597010515950},{"_id":"public/tags/react-native/index.html","hash":"12663f850bfb811eba2eca121ed46a8323699bfe","modified":1597010515950},{"_id":"public/img/algolia.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1597010515950},{"_id":"public/img/favicon.png","hash":"3cf89864b4f6c9b532522a4d260a2e887971c92d","modified":1597010515950},{"_id":"public/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1597010515950},{"_id":"public/img/icp.png","hash":"cb1fd69b38ec23ce8366668ddffbbd0160de0104","modified":1597010515950},{"_id":"public/img/loading.gif","hash":"5f0287fb8fb98872fe1998c6f781111819e71806","modified":1597010515950},{"_id":"public/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1597010515950},{"_id":"public/css/var.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1597010515950},{"_id":"public/js/utils.js","hash":"43da5a9129aa827dc5c311b0e5e3a12ccc61b488","modified":1597010515950},{"_id":"public/js/search/algolia.js","hash":"5ff5cb40d5ede73b48594d331244ada001154dac","modified":1597010515950},{"_id":"public/js/search/local-search.js","hash":"497993860b3c42bdc926a3bd83b4b8f480febd99","modified":1597010515950},{"_id":"public/js/third-party/ClickShowText.js","hash":"32864aee35b5d739a36702b8d916b17bac52b17e","modified":1597010515950},{"_id":"public/js/third-party/activate-power-mode.js","hash":"2c4ab494225b7d04eed934efc43a43791e596f4a","modified":1597010515950},{"_id":"public/js/third-party/canvas-ribbon.js","hash":"1ddf4f6896175e77518f0fbd45776132b2954fb6","modified":1597010515950},{"_id":"public/js/third-party/canvas-nest.js","hash":"978402a16f3ceebe453806e3e25a5905a89776be","modified":1597010515950},{"_id":"public/js/third-party/click_heart.js","hash":"004ea645ed8c5e354711b5fc0dbfe015e181916b","modified":1597010515950},{"_id":"public/js/third-party/fireworks.js","hash":"411ced4031a856a5b87f7c62d3800027d12bacec","modified":1597010515950},{"_id":"public/js/third-party/piao.js","hash":"05da3437664bb335e2336a52be8587e7719f7b89","modified":1597010515950},{"_id":"public/css/index.css","hash":"9303ff80e14178664a26bd54018d6edfcd21aafe","modified":1597010515950},{"_id":"public/js/tw_cn.js","hash":"030ad26843c22f6a5f91a40200c65d079a4f8475","modified":1597010515950},{"_id":"public/js/main.js","hash":"ef820beebcc1e74de7ca2956a8a4807622be204b","modified":1597010515950},{"_id":"public/img/friend_2.jpg","hash":"92afb9536fe9fcc4ff604f50b99bf4f7e2451f9c","modified":1597010515950},{"_id":"public/img/categories.jpg","hash":"bafa52ecdf87c9e2af5a91fa2da75291fdfab2e9","modified":1597010515950},{"_id":"public/img/yang-favicon.png","hash":"e0f7668e625cdd3d89f5c24ecfba0f8c24e1e0e3","modified":1597010515950},{"_id":"public/img/friend_1.jpg","hash":"6ce3792e84a9ec95a6e76c0d61d604c8956c1ab4","modified":1597010515950},{"_id":"public/img/about.jpg","hash":"e36fa83d1b6d02a0b1cce3ff585e2fd058b6934e","modified":1597010515950},{"_id":"public/img/yang.jpg","hash":"63aa7525e1697a0fe02204f90e723f55cc931efc","modified":1597010515950},{"_id":"public/img/tag.jpg","hash":"dfd22c79f3738de2e53556d9b0738778dcfaf2dd","modified":1597010515950},{"_id":"public/img/archive.jpg","hash":"21616eb7935bdddcc5c10907a82c2be3c1eb6a03","modified":1597010515950},{"_id":"public/img/banner.jpg","hash":"521e103644cc0208faa6c99f06ee990a664d1617","modified":1597010515950},{"_id":"public/img/friend.jpg","hash":"9e8ae5a0934f6c3f23c6352660b1e474fb4933dc","modified":1597010515950}],"Category":[{"name":"笔记","_id":"ckdnmttcr0004rwuibxfb2y9q"},{"name":"Articles","_id":"ckdnmttd5000nrwui0sc1412l"},{"name":"Notes","_id":"ckdnmttdc0014rwui0i6jadlu"},{"name":"Python爬虫","_id":"ckdnmttdf001erwui7oqr38bh"}],"Data":[{"_id":"link","data":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}],"Page":[{"title":"关于","date":"2020-05-24T05:03:31.000Z","type":"about","top_img":"/img/about.jpg","_content":"\n你好啊\n","source":"about/index.md","raw":"---\ntitle: 关于\ndate: 2020-05-23 22:03:31\ntype: 'about'\ntop_img: /img/about.jpg\n---\n\n你好啊\n","updated":"2020-06-21T19:46:15.256Z","path":"about/index.html","comments":1,"layout":"page","_id":"ckdnmttco0001rwui2qjk04p1","content":"<p>你好啊</p>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"cover":"/img/test.png","excerpt":"","more":"<p>你好啊</p>\n"},{"title":"关于博客","date":"2020-05-24T05:03:31.000Z","_content":"\n博客介绍","source":"about/site.md","raw":"---\ntitle: 关于博客\ndate: 2020-05-23 22:03:31\n---\n\n博客介绍","updated":"2020-05-25T12:01:49.328Z","path":"about/site.html","comments":1,"layout":"page","_id":"ckdnmttcq0003rwui4o3tc85e","content":"<p>博客介绍</p>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"cover":"/img/test.png","excerpt":"","more":"<p>博客介绍</p>\n"},{"title":"albums","date":"2020-05-24T05:21:22.000Z","type":"albums","albums":[{"caption":"夕阳西下","url":"/albums/sunset.html","cover":"https://interactive-examples.mdn.mozilla.net/media/examples/elephant-660-480.jpg","desc":"我想起那天夕阳下的奔跑"}],"_content":"\n\n\n","source":"albums/index.md","raw":"---\ntitle: albums\ndate: 2020-05-23 22:21:22\ntype: albums\nalbums:\n  - caption: 夕阳西下\n    url: /albums/sunset.html\n    cover: https://interactive-examples.mdn.mozilla.net/media/examples/elephant-660-480.jpg\n    desc: 我想起那天夕阳下的奔跑\n---\n\n\n\n","updated":"2020-05-25T12:01:49.328Z","path":"albums/index.html","comments":1,"layout":"page","_id":"ckdnmttcu0007rwuick35ece9","content":"","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"cover":"/img/test.png","excerpt":"","more":""},{"title":"categories","date":"2020-05-24T05:02:51.000Z","type":"categories","top_img":"/img/categories.jpg","_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2020-05-23 22:02:51\ntype: categories\ntop_img: /img/categories.jpg\n---\n","updated":"2020-06-21T19:40:38.486Z","path":"categories/index.html","comments":1,"layout":"page","_id":"ckdnmttcv0009rwui34os0nlj","content":"","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"cover":"/img/test.png","excerpt":"","more":""},{"layout":"girls","title":"可爱的女孩子","banner":"<span title=\"大家都是我的天使！\">排名不分先后</span>","girls":[{"name":"阿尔托莉雅·潘德拉贡","avatar":"https://n.sinaimg.cn/sinacn/w600h630/20180203/c36c-fyrcsrx3661271.jpg","from":"Fate Stay Night","url":"https://zh.moegirl.org/%E9%98%BF%E5%B0%94%E6%89%98%E8%8E%89%E9%9B%85%C2%B7%E6%BD%98%E5%BE%B7%E6%8B%89%E8%B4%A1","reason":"Saber最可爱了！"}],"_content":"","source":"girls/index.md","raw":"---\nlayout: girls\ntitle: 可爱的女孩子\nbanner: <span title=\"大家都是我的天使！\">排名不分先后</span>\ngirls:\n  - name: 阿尔托莉雅·潘德拉贡\n    avatar: https://n.sinaimg.cn/sinacn/w600h630/20180203/c36c-fyrcsrx3661271.jpg\n    from: Fate Stay Night\n    url: https://zh.moegirl.org/%E9%98%BF%E5%B0%94%E6%89%98%E8%8E%89%E9%9B%85%C2%B7%E6%BD%98%E5%BE%B7%E6%8B%89%E8%B4%A1\n    reason: Saber最可爱了！\n---\n","date":"2020-06-18T07:46:47.440Z","updated":"2020-06-18T07:46:47.440Z","path":"girls/index.html","comments":1,"_id":"ckdnmtuge007srwui8or9cfzb","content":"","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"cover":"/img/test.png","excerpt":"","more":""},{"title":"标签","date":"2020-06-19T07:00:00.000Z","type":"tags","top_img":"/img/tag.jpg","_content":"","source":"tags/index.md","raw":"---\ntitle: 标签\ndate: 2020-06-19 00:00:00\ntype: 'tags'\ntop_img: /img/tag.jpg\n---\n","updated":"2020-06-21T19:31:58.176Z","path":"tags/index.html","comments":1,"layout":"page","_id":"ckdnmtugf007trwui4w68gkua","content":"","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"cover":"/img/test.png","excerpt":"","more":""},{"title":"我的小伙伴们","date":"2020-05-23T20:06:06.000Z","type":"link","top_img":"/img/friend_2.jpg","_content":"","source":"link/index.md","raw":"---\ntitle: 我的小伙伴们\ndate: 2020-05-23 13:06:06\ntype: 'link'\ntop_img: /img/friend_2.jpg\n---\n","updated":"2020-07-03T18:26:07.211Z","path":"link/index.html","comments":1,"layout":"page","_id":"ckdnmtugg007urwui09tc07qh","content":"","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"cover":"/img/test.png","excerpt":"","more":""}],"Post":[{"title":"Firebase Datbase","date":"2020-05-24T01:49:19.000Z","comments":0,"cover":"https://firebase.google.com/images/social.png","_content":"\n> 主要列出常用的数据库方法。例如 Cloud firestore 实时侦察和读写数据，用户认证，更改筛选以及删除数据和 Storage 存储文件。\n\n<!-- more -->\n\n# Firestore\n\n## 更改文档的信息 Set\n\n`set`每次都会对文档进行覆盖重新。比如以下代码，每次用户登录都会重写用户名为注册的用户名\n\n```js\nconst db = firebase.firestore()\nfirebase.auth().onAuthStateChanged(user => {\n    db.collection(\"user\")\n        .doc(user.uid)\n        .set({\n            //设置用户名和邮箱为注册时的内容\n            name: user.displayName,\n            email: user.email,\n        }), {\n            merge: true,\n        })\n})\n```\n\n## 更新文档的信息 Update\n\n如果要更改单个文档内容可以用`update`\n\n```js\ndb.collection('user').doc(user.uid).update({\n  Profile: profile_url,\n  Name: 'Yang',\n})\n```\n\n## 写入一个文档到用户 .add()\n\n以下代码会写入一个文档(随机生成`uid`)到`Expense`的集合中，\n\n```js\nlet docData = {\n    Category: category\n    Value: parseFloat(amount).toFixed(2),\n    Date: date,\n    Description: note\n}\n\ndb.collection(\"user\").doc(user.uid).collection(\"Expense\").add(docData)\n```\n\n> 写入的时候要注意 number 会自动转化为 string, 所以要先改格式`parseInt`再写入到对象里\n\n## 实时读取 onSnapShot\n\n### 单个文档侦查\n\n`onSnapShot`可以实时侦查并返回数据库文档的内容\n\n```js\ndb.collection('user')\n  .doc(user.uid)\n  .onSnapShot(snap => {\n    if (snap.data().count > 5) {\n      alert('超过5啦！')\n    }\n  })\n```\n\n### 集合实时侦查 change.type\n\n如果要实时侦查一个集合，需要添加判断条件`change.type`来判断是否文档是新添加的或者修改的。不然会一直循环（雾)\n\n```js\ndb.collection('chatRoom')\n  .orderBy('Date', 'desc')\n  .onSnapShot(snap => {\n    snap.docChanges().forEach(change => {\n      if (change.type == 'added') {\n        console.log('对新添加的文档操作')\n      } else if (change.type == 'modified') {\n        console.log('对被修改过的文档操作')\n      }\n    })\n  })\n```\n\n## 读取一个集合中的所有文档 .get()\n\n```js\ndb.collection('user')\n  .doc(user.uid)\n  .collection('Expenses')\n  .orderBy('Date', 'desc')\n  .get()\n  .then(query => {\n    query.forEach(doc => {\n      console.log(doc.data().Category)\n    })\n  })\n```\n\n## 删除一个集合中的所有文档\n\n一般用来 reset 用户数据之类的\n\n```js\ndb.collection('user')\n  .doc(user.uid)\n  .collection('Expense')\n  .get()\n  .then(querySnapShot => {\n    querySnapShot.forEach(doc => {\n      doc.ref\n        .delete()\n        .then(() => {\n          console.log('删除成功')\n        })\n        .catch(error => {\n          console.log('错误', error)\n        })\n    })\n  })\n```\n\n# Cloud Storage\n\nCloud storage 可以用于用户上传头像，然后存储在 firebase storage 分区。\n\n## 上传图片\n\n```js\n   const db = firebase.firestore()\n    const storageRef = firebase.storage().ref()\n    let file = $(\"#profile-input\").prop(\"files\")[0]\n    if (file) {\n      let metadata = {\n        contentType: file.type,\n      }\n\n      let task = storageRef.child(file.name).put(file, metadata)\n      task\n        .then((snapshot) => snapshot.ref.getDownloadURL())\n        .then((url) => {\n          console.log(\"用户头像上传成功 链接为: \" + url)\n          firebase.auth().onAuthStateChanged((user) => {\n            db.collection(\"user\").doc(user.uid).update({\n              Profile: url,\n            })\n          })\n          setLoading(false)\n          setShow(true)\n        })\n    } else {\n      setLoading(false)\n      setError(true)\n    }\n  }\n```\n","source":"_posts/01-firebase-note.md","raw":"---\ntitle: Firebase Datbase\ndate: 2020-05-23 18:49:19\ntags: [firebase, database, web, firestore, cloudstorage]\ncomments: false\ncategories: '笔记'\ncover: 'https://firebase.google.com/images/social.png'\n# description: Firebase常用的一些例句和用法\n---\n\n> 主要列出常用的数据库方法。例如 Cloud firestore 实时侦察和读写数据，用户认证，更改筛选以及删除数据和 Storage 存储文件。\n\n<!-- more -->\n\n# Firestore\n\n## 更改文档的信息 Set\n\n`set`每次都会对文档进行覆盖重新。比如以下代码，每次用户登录都会重写用户名为注册的用户名\n\n```js\nconst db = firebase.firestore()\nfirebase.auth().onAuthStateChanged(user => {\n    db.collection(\"user\")\n        .doc(user.uid)\n        .set({\n            //设置用户名和邮箱为注册时的内容\n            name: user.displayName,\n            email: user.email,\n        }), {\n            merge: true,\n        })\n})\n```\n\n## 更新文档的信息 Update\n\n如果要更改单个文档内容可以用`update`\n\n```js\ndb.collection('user').doc(user.uid).update({\n  Profile: profile_url,\n  Name: 'Yang',\n})\n```\n\n## 写入一个文档到用户 .add()\n\n以下代码会写入一个文档(随机生成`uid`)到`Expense`的集合中，\n\n```js\nlet docData = {\n    Category: category\n    Value: parseFloat(amount).toFixed(2),\n    Date: date,\n    Description: note\n}\n\ndb.collection(\"user\").doc(user.uid).collection(\"Expense\").add(docData)\n```\n\n> 写入的时候要注意 number 会自动转化为 string, 所以要先改格式`parseInt`再写入到对象里\n\n## 实时读取 onSnapShot\n\n### 单个文档侦查\n\n`onSnapShot`可以实时侦查并返回数据库文档的内容\n\n```js\ndb.collection('user')\n  .doc(user.uid)\n  .onSnapShot(snap => {\n    if (snap.data().count > 5) {\n      alert('超过5啦！')\n    }\n  })\n```\n\n### 集合实时侦查 change.type\n\n如果要实时侦查一个集合，需要添加判断条件`change.type`来判断是否文档是新添加的或者修改的。不然会一直循环（雾)\n\n```js\ndb.collection('chatRoom')\n  .orderBy('Date', 'desc')\n  .onSnapShot(snap => {\n    snap.docChanges().forEach(change => {\n      if (change.type == 'added') {\n        console.log('对新添加的文档操作')\n      } else if (change.type == 'modified') {\n        console.log('对被修改过的文档操作')\n      }\n    })\n  })\n```\n\n## 读取一个集合中的所有文档 .get()\n\n```js\ndb.collection('user')\n  .doc(user.uid)\n  .collection('Expenses')\n  .orderBy('Date', 'desc')\n  .get()\n  .then(query => {\n    query.forEach(doc => {\n      console.log(doc.data().Category)\n    })\n  })\n```\n\n## 删除一个集合中的所有文档\n\n一般用来 reset 用户数据之类的\n\n```js\ndb.collection('user')\n  .doc(user.uid)\n  .collection('Expense')\n  .get()\n  .then(querySnapShot => {\n    querySnapShot.forEach(doc => {\n      doc.ref\n        .delete()\n        .then(() => {\n          console.log('删除成功')\n        })\n        .catch(error => {\n          console.log('错误', error)\n        })\n    })\n  })\n```\n\n# Cloud Storage\n\nCloud storage 可以用于用户上传头像，然后存储在 firebase storage 分区。\n\n## 上传图片\n\n```js\n   const db = firebase.firestore()\n    const storageRef = firebase.storage().ref()\n    let file = $(\"#profile-input\").prop(\"files\")[0]\n    if (file) {\n      let metadata = {\n        contentType: file.type,\n      }\n\n      let task = storageRef.child(file.name).put(file, metadata)\n      task\n        .then((snapshot) => snapshot.ref.getDownloadURL())\n        .then((url) => {\n          console.log(\"用户头像上传成功 链接为: \" + url)\n          firebase.auth().onAuthStateChanged((user) => {\n            db.collection(\"user\").doc(user.uid).update({\n              Profile: url,\n            })\n          })\n          setLoading(false)\n          setShow(true)\n        })\n    } else {\n      setLoading(false)\n      setError(true)\n    }\n  }\n```\n","slug":"01-firebase-note","published":1,"updated":"2020-06-20T07:16:37.619Z","layout":"post","photos":[],"link":"","_id":"ckdnmttcj0000rwui7y5c68fn","content":"<blockquote>\n<p>主要列出常用的数据库方法。例如 Cloud firestore 实时侦察和读写数据，用户认证，更改筛选以及删除数据和 Storage 存储文件。</p>\n</blockquote>\n<a id=\"more\"></a>\n\n<h1 id=\"Firestore\"><a href=\"#Firestore\" class=\"headerlink\" title=\"Firestore\"></a>Firestore</h1><h2 id=\"更改文档的信息-Set\"><a href=\"#更改文档的信息-Set\" class=\"headerlink\" title=\"更改文档的信息 Set\"></a>更改文档的信息 Set</h2><p><code>set</code>每次都会对文档进行覆盖重新。比如以下代码，每次用户登录都会重写用户名为注册的用户名</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> db = firebase.firestore()</span><br><span class=\"line\">firebase.auth().onAuthStateChanged(<span class=\"function\"><span class=\"params\">user</span> =&gt;</span> &#123;</span><br><span class=\"line\">    db.collection(<span class=\"string\">\"user\"</span>)</span><br><span class=\"line\">        .doc(user.uid)</span><br><span class=\"line\">        .set(&#123;</span><br><span class=\"line\">            <span class=\"comment\">//设置用户名和邮箱为注册时的内容</span></span><br><span class=\"line\">            name: user.displayName,</span><br><span class=\"line\">            email: user.email,</span><br><span class=\"line\">        &#125;), &#123;</span><br><span class=\"line\">            merge: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"更新文档的信息-Update\"><a href=\"#更新文档的信息-Update\" class=\"headerlink\" title=\"更新文档的信息 Update\"></a>更新文档的信息 Update</h2><p>如果要更改单个文档内容可以用<code>update</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">db.collection(<span class=\"string\">'user'</span>).doc(user.uid).update(&#123;</span><br><span class=\"line\">  Profile: profile_url,</span><br><span class=\"line\">  Name: <span class=\"string\">'Yang'</span>,</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"写入一个文档到用户-add\"><a href=\"#写入一个文档到用户-add\" class=\"headerlink\" title=\"写入一个文档到用户 .add()\"></a>写入一个文档到用户 .add()</h2><p>以下代码会写入一个文档(随机生成<code>uid</code>)到<code>Expense</code>的集合中，</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> docData = &#123;</span><br><span class=\"line\">    Category: category</span><br><span class=\"line\">    Value: <span class=\"built_in\">parseFloat</span>(amount).toFixed(<span class=\"number\">2</span>),</span><br><span class=\"line\">    <span class=\"built_in\">Date</span>: date,</span><br><span class=\"line\">    Description: note</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">db.collection(<span class=\"string\">\"user\"</span>).doc(user.uid).collection(<span class=\"string\">\"Expense\"</span>).add(docData)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>写入的时候要注意 number 会自动转化为 string, 所以要先改格式<code>parseInt</code>再写入到对象里</p>\n</blockquote>\n<h2 id=\"实时读取-onSnapShot\"><a href=\"#实时读取-onSnapShot\" class=\"headerlink\" title=\"实时读取 onSnapShot\"></a>实时读取 onSnapShot</h2><h3 id=\"单个文档侦查\"><a href=\"#单个文档侦查\" class=\"headerlink\" title=\"单个文档侦查\"></a>单个文档侦查</h3><p><code>onSnapShot</code>可以实时侦查并返回数据库文档的内容</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">db.collection(<span class=\"string\">'user'</span>)</span><br><span class=\"line\">  .doc(user.uid)</span><br><span class=\"line\">  .onSnapShot(<span class=\"function\"><span class=\"params\">snap</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (snap.data().count &gt; <span class=\"number\">5</span>) &#123;</span><br><span class=\"line\">      alert(<span class=\"string\">'超过5啦！'</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"集合实时侦查-change-type\"><a href=\"#集合实时侦查-change-type\" class=\"headerlink\" title=\"集合实时侦查 change.type\"></a>集合实时侦查 change.type</h3><p>如果要实时侦查一个集合，需要添加判断条件<code>change.type</code>来判断是否文档是新添加的或者修改的。不然会一直循环（雾)</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">db.collection(<span class=\"string\">'chatRoom'</span>)</span><br><span class=\"line\">  .orderBy(<span class=\"string\">'Date'</span>, <span class=\"string\">'desc'</span>)</span><br><span class=\"line\">  .onSnapShot(<span class=\"function\"><span class=\"params\">snap</span> =&gt;</span> &#123;</span><br><span class=\"line\">    snap.docChanges().forEach(<span class=\"function\"><span class=\"params\">change</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (change.type == <span class=\"string\">'added'</span>) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'对新添加的文档操作'</span>)</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (change.type == <span class=\"string\">'modified'</span>) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'对被修改过的文档操作'</span>)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"读取一个集合中的所有文档-get\"><a href=\"#读取一个集合中的所有文档-get\" class=\"headerlink\" title=\"读取一个集合中的所有文档 .get()\"></a>读取一个集合中的所有文档 .get()</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">db.collection(<span class=\"string\">'user'</span>)</span><br><span class=\"line\">  .doc(user.uid)</span><br><span class=\"line\">  .collection(<span class=\"string\">'Expenses'</span>)</span><br><span class=\"line\">  .orderBy(<span class=\"string\">'Date'</span>, <span class=\"string\">'desc'</span>)</span><br><span class=\"line\">  .get()</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">query</span> =&gt;</span> &#123;</span><br><span class=\"line\">    query.forEach(<span class=\"function\"><span class=\"params\">doc</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(doc.data().Category)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"删除一个集合中的所有文档\"><a href=\"#删除一个集合中的所有文档\" class=\"headerlink\" title=\"删除一个集合中的所有文档\"></a>删除一个集合中的所有文档</h2><p>一般用来 reset 用户数据之类的</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">db.collection(<span class=\"string\">'user'</span>)</span><br><span class=\"line\">  .doc(user.uid)</span><br><span class=\"line\">  .collection(<span class=\"string\">'Expense'</span>)</span><br><span class=\"line\">  .get()</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">querySnapShot</span> =&gt;</span> &#123;</span><br><span class=\"line\">    querySnapShot.forEach(<span class=\"function\"><span class=\"params\">doc</span> =&gt;</span> &#123;</span><br><span class=\"line\">      doc.ref</span><br><span class=\"line\">        .delete()</span><br><span class=\"line\">        .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">'删除成功'</span>)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        .catch(<span class=\"function\"><span class=\"params\">error</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">'错误'</span>, error)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Cloud-Storage\"><a href=\"#Cloud-Storage\" class=\"headerlink\" title=\"Cloud Storage\"></a>Cloud Storage</h1><p>Cloud storage 可以用于用户上传头像，然后存储在 firebase storage 分区。</p>\n<h2 id=\"上传图片\"><a href=\"#上传图片\" class=\"headerlink\" title=\"上传图片\"></a>上传图片</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">const</span> db = firebase.firestore()</span><br><span class=\"line\">  <span class=\"keyword\">const</span> storageRef = firebase.storage().ref()</span><br><span class=\"line\">  <span class=\"keyword\">let</span> file = $(<span class=\"string\">\"#profile-input\"</span>).prop(<span class=\"string\">\"files\"</span>)[<span class=\"number\">0</span>]</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (file) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> metadata = &#123;</span><br><span class=\"line\">      contentType: file.type,</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> task = storageRef.child(file.name).put(file, metadata)</span><br><span class=\"line\">    task</span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">snapshot</span>) =&gt;</span> snapshot.ref.getDownloadURL())</span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">url</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">\"用户头像上传成功 链接为: \"</span> + url)</span><br><span class=\"line\">        firebase.auth().onAuthStateChanged(<span class=\"function\">(<span class=\"params\">user</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          db.collection(<span class=\"string\">\"user\"</span>).doc(user.uid).update(&#123;</span><br><span class=\"line\">            Profile: url,</span><br><span class=\"line\">          &#125;)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        setLoading(<span class=\"literal\">false</span>)</span><br><span class=\"line\">        setShow(<span class=\"literal\">true</span>)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    setLoading(<span class=\"literal\">false</span>)</span><br><span class=\"line\">    setError(<span class=\"literal\">true</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"<blockquote>\n<p>主要列出常用的数据库方法。例如 Cloud firestore 实时侦察和读写数据，用户认证，更改筛选以及删除数据和 Storage 存储文件。</p>\n</blockquote>","more":"<h1 id=\"Firestore\"><a href=\"#Firestore\" class=\"headerlink\" title=\"Firestore\"></a>Firestore</h1><h2 id=\"更改文档的信息-Set\"><a href=\"#更改文档的信息-Set\" class=\"headerlink\" title=\"更改文档的信息 Set\"></a>更改文档的信息 Set</h2><p><code>set</code>每次都会对文档进行覆盖重新。比如以下代码，每次用户登录都会重写用户名为注册的用户名</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> db = firebase.firestore()</span><br><span class=\"line\">firebase.auth().onAuthStateChanged(<span class=\"function\"><span class=\"params\">user</span> =&gt;</span> &#123;</span><br><span class=\"line\">    db.collection(<span class=\"string\">\"user\"</span>)</span><br><span class=\"line\">        .doc(user.uid)</span><br><span class=\"line\">        .set(&#123;</span><br><span class=\"line\">            <span class=\"comment\">//设置用户名和邮箱为注册时的内容</span></span><br><span class=\"line\">            name: user.displayName,</span><br><span class=\"line\">            email: user.email,</span><br><span class=\"line\">        &#125;), &#123;</span><br><span class=\"line\">            merge: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"更新文档的信息-Update\"><a href=\"#更新文档的信息-Update\" class=\"headerlink\" title=\"更新文档的信息 Update\"></a>更新文档的信息 Update</h2><p>如果要更改单个文档内容可以用<code>update</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">db.collection(<span class=\"string\">'user'</span>).doc(user.uid).update(&#123;</span><br><span class=\"line\">  Profile: profile_url,</span><br><span class=\"line\">  Name: <span class=\"string\">'Yang'</span>,</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"写入一个文档到用户-add\"><a href=\"#写入一个文档到用户-add\" class=\"headerlink\" title=\"写入一个文档到用户 .add()\"></a>写入一个文档到用户 .add()</h2><p>以下代码会写入一个文档(随机生成<code>uid</code>)到<code>Expense</code>的集合中，</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> docData = &#123;</span><br><span class=\"line\">    Category: category</span><br><span class=\"line\">    Value: <span class=\"built_in\">parseFloat</span>(amount).toFixed(<span class=\"number\">2</span>),</span><br><span class=\"line\">    <span class=\"built_in\">Date</span>: date,</span><br><span class=\"line\">    Description: note</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">db.collection(<span class=\"string\">\"user\"</span>).doc(user.uid).collection(<span class=\"string\">\"Expense\"</span>).add(docData)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>写入的时候要注意 number 会自动转化为 string, 所以要先改格式<code>parseInt</code>再写入到对象里</p>\n</blockquote>\n<h2 id=\"实时读取-onSnapShot\"><a href=\"#实时读取-onSnapShot\" class=\"headerlink\" title=\"实时读取 onSnapShot\"></a>实时读取 onSnapShot</h2><h3 id=\"单个文档侦查\"><a href=\"#单个文档侦查\" class=\"headerlink\" title=\"单个文档侦查\"></a>单个文档侦查</h3><p><code>onSnapShot</code>可以实时侦查并返回数据库文档的内容</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">db.collection(<span class=\"string\">'user'</span>)</span><br><span class=\"line\">  .doc(user.uid)</span><br><span class=\"line\">  .onSnapShot(<span class=\"function\"><span class=\"params\">snap</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (snap.data().count &gt; <span class=\"number\">5</span>) &#123;</span><br><span class=\"line\">      alert(<span class=\"string\">'超过5啦！'</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"集合实时侦查-change-type\"><a href=\"#集合实时侦查-change-type\" class=\"headerlink\" title=\"集合实时侦查 change.type\"></a>集合实时侦查 change.type</h3><p>如果要实时侦查一个集合，需要添加判断条件<code>change.type</code>来判断是否文档是新添加的或者修改的。不然会一直循环（雾)</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">db.collection(<span class=\"string\">'chatRoom'</span>)</span><br><span class=\"line\">  .orderBy(<span class=\"string\">'Date'</span>, <span class=\"string\">'desc'</span>)</span><br><span class=\"line\">  .onSnapShot(<span class=\"function\"><span class=\"params\">snap</span> =&gt;</span> &#123;</span><br><span class=\"line\">    snap.docChanges().forEach(<span class=\"function\"><span class=\"params\">change</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (change.type == <span class=\"string\">'added'</span>) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'对新添加的文档操作'</span>)</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (change.type == <span class=\"string\">'modified'</span>) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'对被修改过的文档操作'</span>)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"读取一个集合中的所有文档-get\"><a href=\"#读取一个集合中的所有文档-get\" class=\"headerlink\" title=\"读取一个集合中的所有文档 .get()\"></a>读取一个集合中的所有文档 .get()</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">db.collection(<span class=\"string\">'user'</span>)</span><br><span class=\"line\">  .doc(user.uid)</span><br><span class=\"line\">  .collection(<span class=\"string\">'Expenses'</span>)</span><br><span class=\"line\">  .orderBy(<span class=\"string\">'Date'</span>, <span class=\"string\">'desc'</span>)</span><br><span class=\"line\">  .get()</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">query</span> =&gt;</span> &#123;</span><br><span class=\"line\">    query.forEach(<span class=\"function\"><span class=\"params\">doc</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(doc.data().Category)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"删除一个集合中的所有文档\"><a href=\"#删除一个集合中的所有文档\" class=\"headerlink\" title=\"删除一个集合中的所有文档\"></a>删除一个集合中的所有文档</h2><p>一般用来 reset 用户数据之类的</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">db.collection(<span class=\"string\">'user'</span>)</span><br><span class=\"line\">  .doc(user.uid)</span><br><span class=\"line\">  .collection(<span class=\"string\">'Expense'</span>)</span><br><span class=\"line\">  .get()</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">querySnapShot</span> =&gt;</span> &#123;</span><br><span class=\"line\">    querySnapShot.forEach(<span class=\"function\"><span class=\"params\">doc</span> =&gt;</span> &#123;</span><br><span class=\"line\">      doc.ref</span><br><span class=\"line\">        .delete()</span><br><span class=\"line\">        .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">'删除成功'</span>)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        .catch(<span class=\"function\"><span class=\"params\">error</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">'错误'</span>, error)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Cloud-Storage\"><a href=\"#Cloud-Storage\" class=\"headerlink\" title=\"Cloud Storage\"></a>Cloud Storage</h1><p>Cloud storage 可以用于用户上传头像，然后存储在 firebase storage 分区。</p>\n<h2 id=\"上传图片\"><a href=\"#上传图片\" class=\"headerlink\" title=\"上传图片\"></a>上传图片</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">const</span> db = firebase.firestore()</span><br><span class=\"line\">  <span class=\"keyword\">const</span> storageRef = firebase.storage().ref()</span><br><span class=\"line\">  <span class=\"keyword\">let</span> file = $(<span class=\"string\">\"#profile-input\"</span>).prop(<span class=\"string\">\"files\"</span>)[<span class=\"number\">0</span>]</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (file) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> metadata = &#123;</span><br><span class=\"line\">      contentType: file.type,</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> task = storageRef.child(file.name).put(file, metadata)</span><br><span class=\"line\">    task</span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">snapshot</span>) =&gt;</span> snapshot.ref.getDownloadURL())</span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">url</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">\"用户头像上传成功 链接为: \"</span> + url)</span><br><span class=\"line\">        firebase.auth().onAuthStateChanged(<span class=\"function\">(<span class=\"params\">user</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          db.collection(<span class=\"string\">\"user\"</span>).doc(user.uid).update(&#123;</span><br><span class=\"line\">            Profile: url,</span><br><span class=\"line\">          &#125;)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        setLoading(<span class=\"literal\">false</span>)</span><br><span class=\"line\">        setShow(<span class=\"literal\">true</span>)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    setLoading(<span class=\"literal\">false</span>)</span><br><span class=\"line\">    setError(<span class=\"literal\">true</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"event.target与event.currentTarget","date":"2020-05-29T03:10:15.000Z","comments":0,"cover":"https://i2.wp.com/storage.googleapis.com/blog-images-backup/1*hcws3Wa6u9IqaEZ_4X04uw.jpeg?ssl=1","_content":"\n> JavaScript event.target 和 event.currentTarget 的区别。最近在写一个 react 的项目中，想要通过点击一个元素来触发事件并获得该元素的 key。\n\n<!-- more -->\n\n# event.target\n\nevent.target 一般我们可以用来绑定触发事件的元素。比如常用可以在`input`上来获取文本内容。\n\n比如我们有一个信息对象，可以用`event.target`来拿到`input`输入的值然后传到`useState`里\n\n```jsx\nfunction handleInput(event) {\n    const {name, value} = event.target\n    setInput(prevInput => {\n        ...prevInput,\n        [name, value]\n\n    })\n}\n\n```\n\n# event.currentTarget\n\n如果我们绑定的是一个元素，比如`<i>`或者`<button>`然后想返回触发事件元素的`id`或者`className`。\n\n我们可以用`event.currentTarget`因为这个可以监听当前被触发事件的元素\n\n```jsx\n;<i id=\"keyid\" onClick={handleEvent}></i>\n\nfunction handleEvent(event) {\n  console.log(event.currentTarget.id)\n}\n```\n\n> keyid\n","source":"_posts/03-js-event-target.md","raw":"---\ntitle: event.target与event.currentTarget\ndate: 2020-05-28 20:10:15\ntags: ['笔记', 'javascript']\ncomments: false\ncategories: '笔记'\ncover: 'https://i2.wp.com/storage.googleapis.com/blog-images-backup/1*hcws3Wa6u9IqaEZ_4X04uw.jpeg?ssl=1'\n---\n\n> JavaScript event.target 和 event.currentTarget 的区别。最近在写一个 react 的项目中，想要通过点击一个元素来触发事件并获得该元素的 key。\n\n<!-- more -->\n\n# event.target\n\nevent.target 一般我们可以用来绑定触发事件的元素。比如常用可以在`input`上来获取文本内容。\n\n比如我们有一个信息对象，可以用`event.target`来拿到`input`输入的值然后传到`useState`里\n\n```jsx\nfunction handleInput(event) {\n    const {name, value} = event.target\n    setInput(prevInput => {\n        ...prevInput,\n        [name, value]\n\n    })\n}\n\n```\n\n# event.currentTarget\n\n如果我们绑定的是一个元素，比如`<i>`或者`<button>`然后想返回触发事件元素的`id`或者`className`。\n\n我们可以用`event.currentTarget`因为这个可以监听当前被触发事件的元素\n\n```jsx\n;<i id=\"keyid\" onClick={handleEvent}></i>\n\nfunction handleEvent(event) {\n  console.log(event.currentTarget.id)\n}\n```\n\n> keyid\n","slug":"03-js-event-target","published":1,"updated":"2020-06-20T07:15:59.593Z","layout":"post","photos":[],"link":"","_id":"ckdnmttcp0002rwui0x5aeykc","content":"<blockquote>\n<p>JavaScript event.target 和 event.currentTarget 的区别。最近在写一个 react 的项目中，想要通过点击一个元素来触发事件并获得该元素的 key。</p>\n</blockquote>\n<a id=\"more\"></a>\n\n<h1 id=\"event-target\"><a href=\"#event-target\" class=\"headerlink\" title=\"event.target\"></a>event.target</h1><p>event.target 一般我们可以用来绑定触发事件的元素。比如常用可以在<code>input</code>上来获取文本内容。</p>\n<p>比如我们有一个信息对象，可以用<code>event.target</code>来拿到<code>input</code>输入的值然后传到<code>useState</code>里</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleInput</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123;name, value&#125; = event.target</span><br><span class=\"line\">    setInput(<span class=\"function\"><span class=\"params\">prevInput</span> =&gt;</span> &#123;</span><br><span class=\"line\">        ...prevInput,</span><br><span class=\"line\">        [name, value]</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"event-currentTarget\"><a href=\"#event-currentTarget\" class=\"headerlink\" title=\"event.currentTarget\"></a>event.currentTarget</h1><p>如果我们绑定的是一个元素，比如<code>&lt;i&gt;</code>或者<code>&lt;button&gt;</code>然后想返回触发事件元素的<code>id</code>或者<code>className</code>。</p>\n<p>我们可以用<code>event.currentTarget</code>因为这个可以监听当前被触发事件的元素</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">id</span>=<span class=\"string\">\"keyid\"</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;handleEvent&#125;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleEvent</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(event.currentTarget.id)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>keyid</p>\n</blockquote>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"<blockquote>\n<p>JavaScript event.target 和 event.currentTarget 的区别。最近在写一个 react 的项目中，想要通过点击一个元素来触发事件并获得该元素的 key。</p>\n</blockquote>","more":"<h1 id=\"event-target\"><a href=\"#event-target\" class=\"headerlink\" title=\"event.target\"></a>event.target</h1><p>event.target 一般我们可以用来绑定触发事件的元素。比如常用可以在<code>input</code>上来获取文本内容。</p>\n<p>比如我们有一个信息对象，可以用<code>event.target</code>来拿到<code>input</code>输入的值然后传到<code>useState</code>里</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleInput</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123;name, value&#125; = event.target</span><br><span class=\"line\">    setInput(<span class=\"function\"><span class=\"params\">prevInput</span> =&gt;</span> &#123;</span><br><span class=\"line\">        ...prevInput,</span><br><span class=\"line\">        [name, value]</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"event-currentTarget\"><a href=\"#event-currentTarget\" class=\"headerlink\" title=\"event.currentTarget\"></a>event.currentTarget</h1><p>如果我们绑定的是一个元素，比如<code>&lt;i&gt;</code>或者<code>&lt;button&gt;</code>然后想返回触发事件元素的<code>id</code>或者<code>className</code>。</p>\n<p>我们可以用<code>event.currentTarget</code>因为这个可以监听当前被触发事件的元素</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">id</span>=<span class=\"string\">\"keyid\"</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;handleEvent&#125;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleEvent</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(event.currentTarget.id)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>keyid</p>\n</blockquote>"},{"title":"Git Notes","date":"2020-05-26T03:10:15.000Z","comments":0,"cover":"https://www.cloudsavvyit.com/thumbcache/0/0/5b8ff1fbf94a3ecddbaa8db6b389c09a/p/uploads/2019/10/e713ed70-1.png","_content":"\n> 平时总结的一些 git command 以及常用的命令\n\n<!-- more -->\n\n# Command\n\n## 配置\n\n### 设置用户名到 Github Commit\n\n没有设置 git user name 之前，所有的 commit 的都会显示为提交 commit 用户的 admin 名称。要想显示提交记录者的 github 信息，需要在用 git 前添加以下两条信息\n\n`git config --global user.name`\n`git config --global user.email`\n\n> `global`将会用于所有 git。输入后会弹出 github 登录窗口。MacOS 会在 terminal 里输入用户名和密码\n\n## 分支\n\n### 常用的一些指令\n\n```\ngit branch 显示repo中所有的branch\ngit branch friend_feature 创建一个名为friend_feature的分支\ngit swicth feature_mainfeature 切换当前分支到feature_mainfeature\ngit merge feature_mainfeature 将feature_mainfeature与当前分支merge\ngit branch -d friend_feature 删除名为friend_feature的分支\ngit branch -m social_feature 更改当前分支名为social_feature\n```\n\n## Commit\n\n### 流程\n\nGitflow Workflow 一般为常用的开发方式。即每个功能有自己的分支，分支完成后先 merge 到 dev 分支上。如果 dev 分支没有任何问题就可以 merge 到 master 上。因为 master 分支是要确保为最稳定可用的代码\n\n```\n递交内容到feature_home分支\ngit add .\ngit commit -m\"home component done\"\ngit push origin feature_home\n\n切换到dev分支 并merge feature_home到dev分支上\ngit switch dev\ngit merge feature_home\ngit push origin dev\n\n之后创建一个pull request就可以了\n```\n","source":"_posts/02-git-command.md","raw":"---\ntitle: Git Notes\ndate: 2020-05-25 20:10:15\ntags: ['笔记', 'git']\ncomments: false\ncategories: '笔记'\ncover: 'https://www.cloudsavvyit.com/thumbcache/0/0/5b8ff1fbf94a3ecddbaa8db6b389c09a/p/uploads/2019/10/e713ed70-1.png'\n---\n\n> 平时总结的一些 git command 以及常用的命令\n\n<!-- more -->\n\n# Command\n\n## 配置\n\n### 设置用户名到 Github Commit\n\n没有设置 git user name 之前，所有的 commit 的都会显示为提交 commit 用户的 admin 名称。要想显示提交记录者的 github 信息，需要在用 git 前添加以下两条信息\n\n`git config --global user.name`\n`git config --global user.email`\n\n> `global`将会用于所有 git。输入后会弹出 github 登录窗口。MacOS 会在 terminal 里输入用户名和密码\n\n## 分支\n\n### 常用的一些指令\n\n```\ngit branch 显示repo中所有的branch\ngit branch friend_feature 创建一个名为friend_feature的分支\ngit swicth feature_mainfeature 切换当前分支到feature_mainfeature\ngit merge feature_mainfeature 将feature_mainfeature与当前分支merge\ngit branch -d friend_feature 删除名为friend_feature的分支\ngit branch -m social_feature 更改当前分支名为social_feature\n```\n\n## Commit\n\n### 流程\n\nGitflow Workflow 一般为常用的开发方式。即每个功能有自己的分支，分支完成后先 merge 到 dev 分支上。如果 dev 分支没有任何问题就可以 merge 到 master 上。因为 master 分支是要确保为最稳定可用的代码\n\n```\n递交内容到feature_home分支\ngit add .\ngit commit -m\"home component done\"\ngit push origin feature_home\n\n切换到dev分支 并merge feature_home到dev分支上\ngit switch dev\ngit merge feature_home\ngit push origin dev\n\n之后创建一个pull request就可以了\n```\n","slug":"02-git-command","published":1,"updated":"2020-06-20T07:16:21.484Z","layout":"post","photos":[],"link":"","_id":"ckdnmttct0006rwuiez3gd5go","content":"<blockquote>\n<p>平时总结的一些 git command 以及常用的命令</p>\n</blockquote>\n<a id=\"more\"></a>\n\n<h1 id=\"Command\"><a href=\"#Command\" class=\"headerlink\" title=\"Command\"></a>Command</h1><h2 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h2><h3 id=\"设置用户名到-Github-Commit\"><a href=\"#设置用户名到-Github-Commit\" class=\"headerlink\" title=\"设置用户名到 Github Commit\"></a>设置用户名到 Github Commit</h3><p>没有设置 git user name 之前，所有的 commit 的都会显示为提交 commit 用户的 admin 名称。要想显示提交记录者的 github 信息，需要在用 git 前添加以下两条信息</p>\n<p><code>git config --global user.name</code><br><code>git config --global user.email</code></p>\n<blockquote>\n<p><code>global</code>将会用于所有 git。输入后会弹出 github 登录窗口。MacOS 会在 terminal 里输入用户名和密码</p>\n</blockquote>\n<h2 id=\"分支\"><a href=\"#分支\" class=\"headerlink\" title=\"分支\"></a>分支</h2><h3 id=\"常用的一些指令\"><a href=\"#常用的一些指令\" class=\"headerlink\" title=\"常用的一些指令\"></a>常用的一些指令</h3><figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"symbol\">git</span> <span class=\"keyword\">branch </span>显示repo中所有的<span class=\"keyword\">branch</span></span><br><span class=\"line\"><span class=\"keyword\">git </span><span class=\"keyword\">branch </span>friend_feature 创建一个名为friend_feature的分支</span><br><span class=\"line\"><span class=\"symbol\">git</span> <span class=\"keyword\">swicth </span>feature_mainfeature 切换当前分支到feature_mainfeature</span><br><span class=\"line\"><span class=\"symbol\">git</span> merge feature_mainfeature 将feature_mainfeature与当前分支merge</span><br><span class=\"line\"><span class=\"symbol\">git</span> <span class=\"keyword\">branch </span>-d friend_feature 删除名为friend_feature的分支</span><br><span class=\"line\"><span class=\"symbol\">git</span> <span class=\"keyword\">branch </span>-m social_feature 更改当前分支名为social_feature</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Commit\"><a href=\"#Commit\" class=\"headerlink\" title=\"Commit\"></a>Commit</h2><h3 id=\"流程\"><a href=\"#流程\" class=\"headerlink\" title=\"流程\"></a>流程</h3><p>Gitflow Workflow 一般为常用的开发方式。即每个功能有自己的分支，分支完成后先 merge 到 dev 分支上。如果 dev 分支没有任何问题就可以 merge 到 master 上。因为 master 分支是要确保为最稳定可用的代码</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">递交内容到feature_home分支</span></span><br><span class=\"line\"><span class=\"attr\">git</span> <span class=\"string\">add .</span></span><br><span class=\"line\"><span class=\"attr\">git</span> <span class=\"string\">commit -m\"home component done\"</span></span><br><span class=\"line\"><span class=\"attr\">git</span> <span class=\"string\">push origin feature_home</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">切换到dev分支</span> <span class=\"string\">并merge feature_home到dev分支上</span></span><br><span class=\"line\"><span class=\"attr\">git</span> <span class=\"string\">switch dev</span></span><br><span class=\"line\"><span class=\"attr\">git</span> <span class=\"string\">merge feature_home</span></span><br><span class=\"line\"><span class=\"attr\">git</span> <span class=\"string\">push origin dev</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">之后创建一个pull</span> <span class=\"string\">request就可以了</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"<blockquote>\n<p>平时总结的一些 git command 以及常用的命令</p>\n</blockquote>","more":"<h1 id=\"Command\"><a href=\"#Command\" class=\"headerlink\" title=\"Command\"></a>Command</h1><h2 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h2><h3 id=\"设置用户名到-Github-Commit\"><a href=\"#设置用户名到-Github-Commit\" class=\"headerlink\" title=\"设置用户名到 Github Commit\"></a>设置用户名到 Github Commit</h3><p>没有设置 git user name 之前，所有的 commit 的都会显示为提交 commit 用户的 admin 名称。要想显示提交记录者的 github 信息，需要在用 git 前添加以下两条信息</p>\n<p><code>git config --global user.name</code><br><code>git config --global user.email</code></p>\n<blockquote>\n<p><code>global</code>将会用于所有 git。输入后会弹出 github 登录窗口。MacOS 会在 terminal 里输入用户名和密码</p>\n</blockquote>\n<h2 id=\"分支\"><a href=\"#分支\" class=\"headerlink\" title=\"分支\"></a>分支</h2><h3 id=\"常用的一些指令\"><a href=\"#常用的一些指令\" class=\"headerlink\" title=\"常用的一些指令\"></a>常用的一些指令</h3><figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"symbol\">git</span> <span class=\"keyword\">branch </span>显示repo中所有的<span class=\"keyword\">branch</span></span><br><span class=\"line\"><span class=\"keyword\">git </span><span class=\"keyword\">branch </span>friend_feature 创建一个名为friend_feature的分支</span><br><span class=\"line\"><span class=\"symbol\">git</span> <span class=\"keyword\">swicth </span>feature_mainfeature 切换当前分支到feature_mainfeature</span><br><span class=\"line\"><span class=\"symbol\">git</span> merge feature_mainfeature 将feature_mainfeature与当前分支merge</span><br><span class=\"line\"><span class=\"symbol\">git</span> <span class=\"keyword\">branch </span>-d friend_feature 删除名为friend_feature的分支</span><br><span class=\"line\"><span class=\"symbol\">git</span> <span class=\"keyword\">branch </span>-m social_feature 更改当前分支名为social_feature</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Commit\"><a href=\"#Commit\" class=\"headerlink\" title=\"Commit\"></a>Commit</h2><h3 id=\"流程\"><a href=\"#流程\" class=\"headerlink\" title=\"流程\"></a>流程</h3><p>Gitflow Workflow 一般为常用的开发方式。即每个功能有自己的分支，分支完成后先 merge 到 dev 分支上。如果 dev 分支没有任何问题就可以 merge 到 master 上。因为 master 分支是要确保为最稳定可用的代码</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">递交内容到feature_home分支</span></span><br><span class=\"line\"><span class=\"attr\">git</span> <span class=\"string\">add .</span></span><br><span class=\"line\"><span class=\"attr\">git</span> <span class=\"string\">commit -m\"home component done\"</span></span><br><span class=\"line\"><span class=\"attr\">git</span> <span class=\"string\">push origin feature_home</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">切换到dev分支</span> <span class=\"string\">并merge feature_home到dev分支上</span></span><br><span class=\"line\"><span class=\"attr\">git</span> <span class=\"string\">switch dev</span></span><br><span class=\"line\"><span class=\"attr\">git</span> <span class=\"string\">merge feature_home</span></span><br><span class=\"line\"><span class=\"attr\">git</span> <span class=\"string\">push origin dev</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">之后创建一个pull</span> <span class=\"string\">request就可以了</span></span><br></pre></td></tr></table></figure>"},{"title":"利用React Transition Group实现平滑的动画","date":"2020-06-03T03:19:38.000Z","comments":0,"cover":"https://miro.medium.com/max/681/1*heU2x0fIJHE9Fsy1Fn1Hjw.png","_content":"\n> 通过利用 React Router 我们可以实现页面的跳转和切换。但默认 react router 的效果很生硬，我们可以通过利用 React Transition Group 来实现路由切换的平滑动画\n\n<!-- more -->\n\n# 配置\n\n## 安装\n\n使用 Transition 之前我们需要安装 React Transition Group\n\nnpm 下安装\n`npm install react-transition-group --save`\n\nyarn 下安装\n`yarn add react-transition-group`\n\n## 导入\n\n在组件中导入`react-transition-group`\n\n`import {TransitionGroup, CSSTransition} from 'react-transition-group'`\n\n# 路由\n\n假设我们已经建立了一个 setting 里的路由。现在我们可以通过不同的链接在 setting 组件中切换来渲染不同的组件，比如主题，语言，更新日志组件的切换。\n\n```js\n<Switch location={location}>\n  <Route exact path=\"/setting/profile\">\n    <Profile />\n  </Route>\n  <Route path=\"/setting/theme\">\n    <Apparence />\n  </Route>\n  <Route path=\"/setting/language\">\n    <Language />\n  </Route>\n  <Route path=\"/setting/about\">\n    <About />\n  </Route>\n  <Route path=\"/setting/changelog\">\n    <ChangeLog />\n  </Route>\n</Switch>\n```\n\n然后我们添加 TransitionGroup 和 CSSTransition 到 Switch 组件的外层\n\n```js\n<TransitionGroup>\n  <CSSTransition\n    key={location.key}\n    timeout={{ enter: 1000, exit: 1000 }}\n    classNames=\"fade\"\n  ></CSSTransition>\n</TransitionGroup>\n```\n\nReact 每一个组件都应该有自己独立的 key，我们可以用 router 的 location 来添加到 CSSTransition 做 key\n`timeout`用来设置我们动画的时长。`classNames`用来作为前缀在 css 中写每个状态的动画。比如我们在上面添加了`fade`，我们在 css 中就可以写`fade-enter`, `fade-enter-active`, `fade-exit`, `fade-exit-active`来根据 state 的状态管理动画。以下是一个 slide 加透明度时长 1s 的动画。\n\n```css\n//在动画开始前，我们设置组件的透明度为0并向左偏移50像素\n.fade-enter {\n  opacity: 0;\n  transform: translateX(-50px);\n}\n\n//当被active的时候，我们将要跳转的router透明度设置为1并为正常位置\n.fade-enter-active {\n  opacity: 1;\n  transform: translateX(0px);\n  transition: all 1s;\n}\n\n//退出动画起始设置为默认\n.fade-exit {\n  opacity: 1;\n  transform: translateX(0px);\n}\n\n//退出动画开始 向右偏移并透明度变为0\n.fade-exit-active {\n  opacity: 0;\n  transform: translateX(50px);\n  transition: all 1s;\n}\n```\n","source":"_posts/04-react-css-transition.md","raw":"---\ntitle: 利用React Transition Group实现平滑的动画\ndate: 2020-06-02 20:19:38\ntags: ['笔记', 'react', 'react-router']\ncomments: false\ncategories: '笔记'\ncover: 'https://miro.medium.com/max/681/1*heU2x0fIJHE9Fsy1Fn1Hjw.png'\n---\n\n> 通过利用 React Router 我们可以实现页面的跳转和切换。但默认 react router 的效果很生硬，我们可以通过利用 React Transition Group 来实现路由切换的平滑动画\n\n<!-- more -->\n\n# 配置\n\n## 安装\n\n使用 Transition 之前我们需要安装 React Transition Group\n\nnpm 下安装\n`npm install react-transition-group --save`\n\nyarn 下安装\n`yarn add react-transition-group`\n\n## 导入\n\n在组件中导入`react-transition-group`\n\n`import {TransitionGroup, CSSTransition} from 'react-transition-group'`\n\n# 路由\n\n假设我们已经建立了一个 setting 里的路由。现在我们可以通过不同的链接在 setting 组件中切换来渲染不同的组件，比如主题，语言，更新日志组件的切换。\n\n```js\n<Switch location={location}>\n  <Route exact path=\"/setting/profile\">\n    <Profile />\n  </Route>\n  <Route path=\"/setting/theme\">\n    <Apparence />\n  </Route>\n  <Route path=\"/setting/language\">\n    <Language />\n  </Route>\n  <Route path=\"/setting/about\">\n    <About />\n  </Route>\n  <Route path=\"/setting/changelog\">\n    <ChangeLog />\n  </Route>\n</Switch>\n```\n\n然后我们添加 TransitionGroup 和 CSSTransition 到 Switch 组件的外层\n\n```js\n<TransitionGroup>\n  <CSSTransition\n    key={location.key}\n    timeout={{ enter: 1000, exit: 1000 }}\n    classNames=\"fade\"\n  ></CSSTransition>\n</TransitionGroup>\n```\n\nReact 每一个组件都应该有自己独立的 key，我们可以用 router 的 location 来添加到 CSSTransition 做 key\n`timeout`用来设置我们动画的时长。`classNames`用来作为前缀在 css 中写每个状态的动画。比如我们在上面添加了`fade`，我们在 css 中就可以写`fade-enter`, `fade-enter-active`, `fade-exit`, `fade-exit-active`来根据 state 的状态管理动画。以下是一个 slide 加透明度时长 1s 的动画。\n\n```css\n//在动画开始前，我们设置组件的透明度为0并向左偏移50像素\n.fade-enter {\n  opacity: 0;\n  transform: translateX(-50px);\n}\n\n//当被active的时候，我们将要跳转的router透明度设置为1并为正常位置\n.fade-enter-active {\n  opacity: 1;\n  transform: translateX(0px);\n  transition: all 1s;\n}\n\n//退出动画起始设置为默认\n.fade-exit {\n  opacity: 1;\n  transform: translateX(0px);\n}\n\n//退出动画开始 向右偏移并透明度变为0\n.fade-exit-active {\n  opacity: 0;\n  transform: translateX(50px);\n  transition: all 1s;\n}\n```\n","slug":"04-react-css-transition","published":1,"updated":"2020-06-20T07:15:17.902Z","layout":"post","photos":[],"link":"","_id":"ckdnmttcu0008rwuibgxd6k5z","content":"<blockquote>\n<p>通过利用 React Router 我们可以实现页面的跳转和切换。但默认 react router 的效果很生硬，我们可以通过利用 React Transition Group 来实现路由切换的平滑动画</p>\n</blockquote>\n<a id=\"more\"></a>\n\n<h1 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h1><h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><p>使用 Transition 之前我们需要安装 React Transition Group</p>\n<p>npm 下安装<br><code>npm install react-transition-group --save</code></p>\n<p>yarn 下安装<br><code>yarn add react-transition-group</code></p>\n<h2 id=\"导入\"><a href=\"#导入\" class=\"headerlink\" title=\"导入\"></a>导入</h2><p>在组件中导入<code>react-transition-group</code></p>\n<p><code>import {TransitionGroup, CSSTransition} from &#39;react-transition-group&#39;</code></p>\n<h1 id=\"路由\"><a href=\"#路由\" class=\"headerlink\" title=\"路由\"></a>路由</h1><p>假设我们已经建立了一个 setting 里的路由。现在我们可以通过不同的链接在 setting 组件中切换来渲染不同的组件，比如主题，语言，更新日志组件的切换。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;Switch location=&#123;location&#125;&gt;</span><br><span class=\"line\">  &lt;Route exact path=<span class=\"string\">\"/setting/profile\"</span>&gt;</span><br><span class=\"line\">    &lt;Profile /&gt;</span><br><span class=\"line\">  &lt;<span class=\"regexp\">/Route&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  &lt;Route path=\"/</span>setting/theme<span class=\"string\">\"&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;Apparence /&gt;</span></span><br><span class=\"line\"><span class=\"string\">  &lt;/Route&gt;</span></span><br><span class=\"line\"><span class=\"string\">  &lt;Route path=\"</span>/setting/language<span class=\"string\">\"&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;Language /&gt;</span></span><br><span class=\"line\"><span class=\"string\">  &lt;/Route&gt;</span></span><br><span class=\"line\"><span class=\"string\">  &lt;Route path=\"</span>/setting/about<span class=\"string\">\"&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;About /&gt;</span></span><br><span class=\"line\"><span class=\"string\">  &lt;/Route&gt;</span></span><br><span class=\"line\"><span class=\"string\">  &lt;Route path=\"</span>/setting/changelog<span class=\"string\">\"&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;ChangeLog /&gt;</span></span><br><span class=\"line\"><span class=\"string\">  &lt;/Route&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;/Switch&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>然后我们添加 TransitionGroup 和 CSSTransition 到 Switch 组件的外层</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;TransitionGroup&gt;</span><br><span class=\"line\">  &lt;CSSTransition</span><br><span class=\"line\">    key=&#123;location.key&#125;</span><br><span class=\"line\">    timeout=&#123;&#123; <span class=\"attr\">enter</span>: <span class=\"number\">1000</span>, <span class=\"attr\">exit</span>: <span class=\"number\">1000</span> &#125;&#125;</span><br><span class=\"line\">    classNames=<span class=\"string\">\"fade\"</span></span><br><span class=\"line\">  &gt;&lt;<span class=\"regexp\">/CSSTransition&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">&lt;/</span>TransitionGroup&gt;</span><br></pre></td></tr></table></figure>\n\n<p>React 每一个组件都应该有自己独立的 key，我们可以用 router 的 location 来添加到 CSSTransition 做 key<br><code>timeout</code>用来设置我们动画的时长。<code>classNames</code>用来作为前缀在 css 中写每个状态的动画。比如我们在上面添加了<code>fade</code>，我们在 css 中就可以写<code>fade-enter</code>, <code>fade-enter-active</code>, <code>fade-exit</code>, <code>fade-exit-active</code>来根据 state 的状态管理动画。以下是一个 slide 加透明度时长 1s 的动画。</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//在动画开始前，我们设置组件的透明度为0并向左偏移50像素</span><br><span class=\"line\"><span class=\"selector-class\">.fade-enter</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">translateX</span>(-<span class=\"number\">50px</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//当被active的时候，我们将要跳转的router透明度设置为1并为正常位置</span><br><span class=\"line\"><span class=\"selector-class\">.fade-enter-active</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">translateX</span>(<span class=\"number\">0px</span>);</span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: all <span class=\"number\">1s</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//退出动画起始设置为默认</span><br><span class=\"line\"><span class=\"selector-class\">.fade-exit</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">translateX</span>(<span class=\"number\">0px</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//退出动画开始 向右偏移并透明度变为0</span><br><span class=\"line\"><span class=\"selector-class\">.fade-exit-active</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">translateX</span>(<span class=\"number\">50px</span>);</span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: all <span class=\"number\">1s</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"<blockquote>\n<p>通过利用 React Router 我们可以实现页面的跳转和切换。但默认 react router 的效果很生硬，我们可以通过利用 React Transition Group 来实现路由切换的平滑动画</p>\n</blockquote>","more":"<h1 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h1><h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><p>使用 Transition 之前我们需要安装 React Transition Group</p>\n<p>npm 下安装<br><code>npm install react-transition-group --save</code></p>\n<p>yarn 下安装<br><code>yarn add react-transition-group</code></p>\n<h2 id=\"导入\"><a href=\"#导入\" class=\"headerlink\" title=\"导入\"></a>导入</h2><p>在组件中导入<code>react-transition-group</code></p>\n<p><code>import {TransitionGroup, CSSTransition} from &#39;react-transition-group&#39;</code></p>\n<h1 id=\"路由\"><a href=\"#路由\" class=\"headerlink\" title=\"路由\"></a>路由</h1><p>假设我们已经建立了一个 setting 里的路由。现在我们可以通过不同的链接在 setting 组件中切换来渲染不同的组件，比如主题，语言，更新日志组件的切换。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;Switch location=&#123;location&#125;&gt;</span><br><span class=\"line\">  &lt;Route exact path=<span class=\"string\">\"/setting/profile\"</span>&gt;</span><br><span class=\"line\">    &lt;Profile /&gt;</span><br><span class=\"line\">  &lt;<span class=\"regexp\">/Route&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  &lt;Route path=\"/</span>setting/theme<span class=\"string\">\"&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;Apparence /&gt;</span></span><br><span class=\"line\"><span class=\"string\">  &lt;/Route&gt;</span></span><br><span class=\"line\"><span class=\"string\">  &lt;Route path=\"</span>/setting/language<span class=\"string\">\"&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;Language /&gt;</span></span><br><span class=\"line\"><span class=\"string\">  &lt;/Route&gt;</span></span><br><span class=\"line\"><span class=\"string\">  &lt;Route path=\"</span>/setting/about<span class=\"string\">\"&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;About /&gt;</span></span><br><span class=\"line\"><span class=\"string\">  &lt;/Route&gt;</span></span><br><span class=\"line\"><span class=\"string\">  &lt;Route path=\"</span>/setting/changelog<span class=\"string\">\"&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;ChangeLog /&gt;</span></span><br><span class=\"line\"><span class=\"string\">  &lt;/Route&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;/Switch&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>然后我们添加 TransitionGroup 和 CSSTransition 到 Switch 组件的外层</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;TransitionGroup&gt;</span><br><span class=\"line\">  &lt;CSSTransition</span><br><span class=\"line\">    key=&#123;location.key&#125;</span><br><span class=\"line\">    timeout=&#123;&#123; <span class=\"attr\">enter</span>: <span class=\"number\">1000</span>, <span class=\"attr\">exit</span>: <span class=\"number\">1000</span> &#125;&#125;</span><br><span class=\"line\">    classNames=<span class=\"string\">\"fade\"</span></span><br><span class=\"line\">  &gt;&lt;<span class=\"regexp\">/CSSTransition&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">&lt;/</span>TransitionGroup&gt;</span><br></pre></td></tr></table></figure>\n\n<p>React 每一个组件都应该有自己独立的 key，我们可以用 router 的 location 来添加到 CSSTransition 做 key<br><code>timeout</code>用来设置我们动画的时长。<code>classNames</code>用来作为前缀在 css 中写每个状态的动画。比如我们在上面添加了<code>fade</code>，我们在 css 中就可以写<code>fade-enter</code>, <code>fade-enter-active</code>, <code>fade-exit</code>, <code>fade-exit-active</code>来根据 state 的状态管理动画。以下是一个 slide 加透明度时长 1s 的动画。</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//在动画开始前，我们设置组件的透明度为0并向左偏移50像素</span><br><span class=\"line\"><span class=\"selector-class\">.fade-enter</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">translateX</span>(-<span class=\"number\">50px</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//当被active的时候，我们将要跳转的router透明度设置为1并为正常位置</span><br><span class=\"line\"><span class=\"selector-class\">.fade-enter-active</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">translateX</span>(<span class=\"number\">0px</span>);</span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: all <span class=\"number\">1s</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//退出动画起始设置为默认</span><br><span class=\"line\"><span class=\"selector-class\">.fade-exit</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">translateX</span>(<span class=\"number\">0px</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//退出动画开始 向右偏移并透明度变为0</span><br><span class=\"line\"><span class=\"selector-class\">.fade-exit-active</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">translateX</span>(<span class=\"number\">50px</span>);</span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: all <span class=\"number\">1s</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"JavaScript 笔记","date":"2020-06-09T05:15:48.000Z","comments":0,"cover":"https://i2.wp.com/storage.googleapis.com/blog-images-backup/1*hcws3Wa6u9IqaEZ_4X04uw.jpeg?ssl=1","_content":"\n> JavaScript 数组，对象，类，函数的常用用法以及备忘录\n\n<!-- more -->\n\n## Variables & Strings\n\n### Template Literals\n\n```js\nlet weight = 74\nlet msg = `Your body weight is ${weight * 2.2} pounds`\nconsole.log(msg)\n```\n\nOutput\n\n> Your body weight is 162.8 pounds\n\n## Function\n\n### Function Closure\n\n```js\nfunction countingdown() {\n  let initNum = 0\n  return function decrement() {\n    initNum -= 1\n  }\n  decrement()\n}\n\nconst countingDown = countingdown()\n\nconsole.log(countingDown())\nconsole.log(countingDown())\nconsole.log(countingDown())\n```\n\n### Default Parameter\n\n```js\nfunction convertTemperature(celsius, decimalPlaces = 1) {\n  const fahrenheit = celsius * 1.8 + 32\n  return Number(fahrenheit.toFixed(decimalPlaces))\n}\n\nconsole.log(convertTemperature(21, 0))\n```\n\n### Arrow Function\n\n#### Object\n\n```js\nconst setName = (id, name) => `id: ${id} name: ${name}`\nconsole.log(setName(1, 'Yang'))\n```\n\n#### Map\n\n```js\nconst prices = products.map(item => item.price)\nconsole.log(prices) //[array of items price]\n```\n\n#### Fecth\n\n```js\n//fetch data from API\nfunction getData(baseUrl) {\n  return function (route) {\n    return function (callback) {\n      fetch(`${baseUrl}${route}`)\n        .then(response => response.json)\n        .then(data => callback(data))\n    }\n  }\n}\n\n//store API data getSocialMediaData\nconst getSocialMediaData = getData('https://jsonplaceholder.typicode.com')\n\n//post route\nconst getSocialMediaPosts = getSocialMediaData('/posts')\n//comment route\nconst getSocialMediaComments = getSocialMediaData('/comments')\n\n//List all the post title\ngetSocialMediaPosts(posts => {\n  posts.forEach(post => console.log(post.title))\n})\n```\n\n## Objects & Maps\n\n### Get and Modify Object Data\n\n```js\nconst color = 'black'\nconst hexCode = '000'\n\n//squat notation [] dynamically change object pair values\nconst colors = {\n  [color]: hexCode,\n}\n\ndelete colors['blue']\nconsole.log(colors)\n```\n\n### Object Destructing\n\n```js\nconst user = {\n  name: 'Yang',\n  username: 'yang052513',\n  email: 'liyang0525@hotmail.com',\n  details: {\n    title: 'Web developer',\n  },\n  getBio() {\n    console.log(`User ${this.name} is a ${this.details.title}`)\n  },\n\n  askToFriend() {\n    //嵌套函数用arrow function解决this binding问题\n    setTimeout(() => {\n      console.log(`Would you like to friend ${this.name}`)\n    }, 2000)\n  },\n}\n\nuser.getBio()\n```\n\n### Map\n\n```js\nconst user1 = 'Yang'\nconst key1 = '1'\n\n//创建一个新的map并插入用户1的key和value\nconst userMap = new Map([[key1, user1]])\n\n//插入key为2 value为nathan到userMap\nuserMap.set('2', 'Nathan')\n\n//循环userMap并打印每个数据\nconst display = values => document.writeln(values + '<br>')\nuserMap.forEach(display)\n\n//取得用户key为1的value\nconst key = userMap.get('1')\nconsole.log(key)\n\n//userMap大小\nconsole.log(userMap.size)\n```\n\n## Arrays & Sets\n\n### Element Existence .some() & .every()\n\n```js\nconst array = [\n  {\n    name: 'Attack on titan',\n    rating: 9.8,\n    episode: 24,\n  },\n  {\n    name: 'Fate stay night',\n    rating: 4.8,\n    episode: 13,\n  },\n  {\n    name: 'Haikyuu',\n    rating: 10.0,\n    episode: 24,\n  },\n]\n\n//测试是否至少有一个元素的rating小于5\nconst ratingTest = item => item.rating < 5\nconst episodeTest = item => item.episode > 12\nconsole.log(`至少有一部动画评分小于5分: ${array.some(ratingTest)}`)\nconsole.log(`每部动画集数大于12: ${array.every(episodeTest)}`)\n```\n\n### Perform Actions on All Elements: .map() & forEach() Method\n\n```js\nconst animations = [\n  { name: 'attack on titan', episode: 12, rating: 6.8 },\n  { name: 'fate stay night', episode: 13, rating: 7.2 },\n  { name: 'haikyuu', episode: 12, rating: 4.5 },\n  { name: 'clannad', episode: 24, rating: 3.2 },\n  { name: 'Bokuno name', episode: 8, rating: 9.8 },\n]\n\n//重构一个新的array newAnimations\nconst newAnimations = animations.map(animes =>\n  //对animations里的每一个对象执行一下\n  //如果rating大于8 在原object的基础上merge isHighRank\n  //其他保持不变\n  animes.rating > 8 ? { ...animes, isHighRank: true } : animes\n)\n\n//循环newAnimations里的每一个对象\nnewAnimations.forEach(animes => {\n  animes.isHighRank\n    ? console.log(`${animes.name} is recommended by other users`)\n    : null\n})\nconsole.log(newAnimations)\n```\n\n### Subsets of Arrays .filter() & .find()\n\n`.filter`: 返回匹配条件的新数组\n\n```js\nconst animations = [\n  { name: 'attack on titan', episode: 12, rating: 6.8 },\n  { name: 'fate stay night', episode: 13, rating: 7.2 },\n  { name: 'haikyuu', episode: 12, rating: 4.5 },\n  { name: 'aksa', episode: 24, rating: 3.2 },\n  { name: 'air', episode: 8, rating: 9.8 },\n]\n\n//如果没有匹配结果 返回空数组\nconst animationA = animations.filter(\n  animes => animes.name.toLowerCase().startsWith('a') && animes.rating > 7\n)\nconsole.log(animationA)\n```\n\n`.find()`: 返回匹配条件的**第一个元素/对象**\n\n```js\nconst animations = [\n  { name: 'haikyuu to top', episode: 12, rating: 6.8 },\n  { name: 'haikyuu2', episode: 13, rating: 9.2 },\n  { name: 'haikyuu', episode: 12, rating: 4.5 },\n]\n\nconst animationSearch = animations.find(\n  anime => anime.name.toLowerCase().includes('haikyuu') && anime.rating > 9\n)\n\nconsole.log(animationSearch)\n```\n\n### Transform Arrays .reduce()\n\n#### Accumulator Array\n\n```js\nconst cart = [\n  { item: 'Squat Stand 2.0', price: 460.89 },\n  { item: 'Falt Utility Bench', price: 230 },\n  { item: 'Ohio Power Bar', price: 385.23 },\n]\n\n//cart数组中的每个值累加\n//0 as initialize value\nconst cartTotal = cart.reduce((subtotal, cartItem) => {\n  return subtotal + cartItem.price\n}, 0)\nconsole.log(cartTotal)\n```\n\n#### Double Array Values\n\n```js\nconst numbers = [1, 2, 3, 4, 5, 6]\n\nconst doubleNum = numbers.reduce((acc, num) => {\n  acc.push(num * 2)\n  return acc\n}, [])\n\nconst greaterThree = numbers.reduce((acc, num) => {\n  if (num > 3) {\n    acc.push(num)\n  }\n  return acc\n}, 0)\n\n//const doubleNum = numbers.map(num => num * 2)\n//const greaterThree = numbers.filter(num => num > 3)\n\nconsole.log(doubleNum)\nconsole.log(greaterThree)\n```\n\n### Modify Arry with Spread Operator ...\n\nAvoid Array Mutation\n\n```js\nconst aprilAnimation = ['Haikyuu', 'Attack on Tatin']\nconst sepAnimation = ['Dango', 'Physico Pass']\n//clone aprilAnimation into allAnimation\nconst allAnimation = [...aprilAnimation, ...sepAnimation]\n//now use array method will not change aprilAnimation array\nallAnimation.push('Clannad')\nconsole.log(allAnimation)\n```\n\n### Get Unique Sets of Data new Set()\n\n```js\nconst animeVote = [\n  'Attack on titan',\n  'Fate Stay Night',\n  'Attack on titan',\n  'Hero',\n]\n\n//先调用Set method重组新的unqie数组 然后保存到新的数组\nconst uniqueAnimeVote = [...new Set(animeVote)]\nconsole.log(uniqueAnimeVote)\n```\n\n## Classes\n\n### Constructor Function\n\n```js\nfunction Student(id, name, courses = []) {\n  this.id = id\n  this.name = name\n  this.courses = courses\n}\n\n//Student method\nStudent.prototype.addCourse = function (course) {\n  //merge the current student couse array with new courses\n  this.courses = [...this.courses, course]\n}\n\nconst s1 = new Student(3, 'Yang', ['Chinese', 'English', 'Math', 'Computer'])\n\ns1.addCourse('Powerlifting')\nconsole.log(s1.courses)\n```\n\n### Classes\n\n```js\nclass Student {\n  constructor(id, name, subjects = []) {\n    this.id = id\n    this.name = name\n    this.subjects = subjects\n  }\n\n  getStdName() {\n    return `Student: ${this.name}`\n  }\n\n  setStdName(name) {\n    this.name = name\n  }\n}\n\nconst s1 = new Student(1, 'Yang', 'Math')\nconsole.log(s1.getStdName())\n```\n\n<br>\n\n### Inheritance\n\n```js\nclass Product {\n  constructor(name, price, discountable) {\n    this.name = name\n    this.price = price\n    this.discountable = discountable\n  }\n\n  isDiscountable() {\n    return this.discountable\n  }\n}\n\nclass SaleProduct extends Product {\n  constructor(name, price, discountable, percentOff) {\n    super(name, price, discountable)\n    this.percentOff = percentOff\n  }\n\n  getSalePrice() {\n    if (super.isDiscountable()) {\n      return this.price * ((100 - this.percentOff) / 100)\n    } else {\n      return `${this.name} is not eligible for a discount`\n    }\n  }\n}\n\nconst saleProduct1 = new SaleProduct('Coffee Maker', 99, false, 20)\nconsole.log(saleProduct1.getSalePrice())\n```\n\n### Binding method to Class\n\n```js\nconst isAuth = true\nconst user = {\n  favorites: [],\n}\n\nclass Product {\n  constructor(name, price) {\n    this.name = name\n    this.price = price\n    //Bind favoriteProduct method to Product class\n    this.favoriteProduct = this.favoriteProduct.bind(this)\n  }\n\n  handleFavoriteProduct = () => {\n    if (isAuth) {\n      setTimeout(this.favoriteProduct, 1000)\n    } else {\n      console.log('You must be signed in to favorite products!')\n    }\n  }\n\n  favoriteProduct = () => {\n    user.favorites.push(this.name)\n    console.log(`${this.name} favorited!`)\n  }\n}\n\nconst product1 = new Product('Coaster', 89.99)\nproduct1.handleFavoriteProduct()\n```\n","source":"_posts/05-javascript.md","raw":"---\ntitle: JavaScript 笔记\ndate: 2020-06-08 22:15:48\ntags: ['笔记', 'JavaScript']\ncomments: false\ncategories: '笔记'\ncover: 'https://i2.wp.com/storage.googleapis.com/blog-images-backup/1*hcws3Wa6u9IqaEZ_4X04uw.jpeg?ssl=1'\n---\n\n> JavaScript 数组，对象，类，函数的常用用法以及备忘录\n\n<!-- more -->\n\n## Variables & Strings\n\n### Template Literals\n\n```js\nlet weight = 74\nlet msg = `Your body weight is ${weight * 2.2} pounds`\nconsole.log(msg)\n```\n\nOutput\n\n> Your body weight is 162.8 pounds\n\n## Function\n\n### Function Closure\n\n```js\nfunction countingdown() {\n  let initNum = 0\n  return function decrement() {\n    initNum -= 1\n  }\n  decrement()\n}\n\nconst countingDown = countingdown()\n\nconsole.log(countingDown())\nconsole.log(countingDown())\nconsole.log(countingDown())\n```\n\n### Default Parameter\n\n```js\nfunction convertTemperature(celsius, decimalPlaces = 1) {\n  const fahrenheit = celsius * 1.8 + 32\n  return Number(fahrenheit.toFixed(decimalPlaces))\n}\n\nconsole.log(convertTemperature(21, 0))\n```\n\n### Arrow Function\n\n#### Object\n\n```js\nconst setName = (id, name) => `id: ${id} name: ${name}`\nconsole.log(setName(1, 'Yang'))\n```\n\n#### Map\n\n```js\nconst prices = products.map(item => item.price)\nconsole.log(prices) //[array of items price]\n```\n\n#### Fecth\n\n```js\n//fetch data from API\nfunction getData(baseUrl) {\n  return function (route) {\n    return function (callback) {\n      fetch(`${baseUrl}${route}`)\n        .then(response => response.json)\n        .then(data => callback(data))\n    }\n  }\n}\n\n//store API data getSocialMediaData\nconst getSocialMediaData = getData('https://jsonplaceholder.typicode.com')\n\n//post route\nconst getSocialMediaPosts = getSocialMediaData('/posts')\n//comment route\nconst getSocialMediaComments = getSocialMediaData('/comments')\n\n//List all the post title\ngetSocialMediaPosts(posts => {\n  posts.forEach(post => console.log(post.title))\n})\n```\n\n## Objects & Maps\n\n### Get and Modify Object Data\n\n```js\nconst color = 'black'\nconst hexCode = '000'\n\n//squat notation [] dynamically change object pair values\nconst colors = {\n  [color]: hexCode,\n}\n\ndelete colors['blue']\nconsole.log(colors)\n```\n\n### Object Destructing\n\n```js\nconst user = {\n  name: 'Yang',\n  username: 'yang052513',\n  email: 'liyang0525@hotmail.com',\n  details: {\n    title: 'Web developer',\n  },\n  getBio() {\n    console.log(`User ${this.name} is a ${this.details.title}`)\n  },\n\n  askToFriend() {\n    //嵌套函数用arrow function解决this binding问题\n    setTimeout(() => {\n      console.log(`Would you like to friend ${this.name}`)\n    }, 2000)\n  },\n}\n\nuser.getBio()\n```\n\n### Map\n\n```js\nconst user1 = 'Yang'\nconst key1 = '1'\n\n//创建一个新的map并插入用户1的key和value\nconst userMap = new Map([[key1, user1]])\n\n//插入key为2 value为nathan到userMap\nuserMap.set('2', 'Nathan')\n\n//循环userMap并打印每个数据\nconst display = values => document.writeln(values + '<br>')\nuserMap.forEach(display)\n\n//取得用户key为1的value\nconst key = userMap.get('1')\nconsole.log(key)\n\n//userMap大小\nconsole.log(userMap.size)\n```\n\n## Arrays & Sets\n\n### Element Existence .some() & .every()\n\n```js\nconst array = [\n  {\n    name: 'Attack on titan',\n    rating: 9.8,\n    episode: 24,\n  },\n  {\n    name: 'Fate stay night',\n    rating: 4.8,\n    episode: 13,\n  },\n  {\n    name: 'Haikyuu',\n    rating: 10.0,\n    episode: 24,\n  },\n]\n\n//测试是否至少有一个元素的rating小于5\nconst ratingTest = item => item.rating < 5\nconst episodeTest = item => item.episode > 12\nconsole.log(`至少有一部动画评分小于5分: ${array.some(ratingTest)}`)\nconsole.log(`每部动画集数大于12: ${array.every(episodeTest)}`)\n```\n\n### Perform Actions on All Elements: .map() & forEach() Method\n\n```js\nconst animations = [\n  { name: 'attack on titan', episode: 12, rating: 6.8 },\n  { name: 'fate stay night', episode: 13, rating: 7.2 },\n  { name: 'haikyuu', episode: 12, rating: 4.5 },\n  { name: 'clannad', episode: 24, rating: 3.2 },\n  { name: 'Bokuno name', episode: 8, rating: 9.8 },\n]\n\n//重构一个新的array newAnimations\nconst newAnimations = animations.map(animes =>\n  //对animations里的每一个对象执行一下\n  //如果rating大于8 在原object的基础上merge isHighRank\n  //其他保持不变\n  animes.rating > 8 ? { ...animes, isHighRank: true } : animes\n)\n\n//循环newAnimations里的每一个对象\nnewAnimations.forEach(animes => {\n  animes.isHighRank\n    ? console.log(`${animes.name} is recommended by other users`)\n    : null\n})\nconsole.log(newAnimations)\n```\n\n### Subsets of Arrays .filter() & .find()\n\n`.filter`: 返回匹配条件的新数组\n\n```js\nconst animations = [\n  { name: 'attack on titan', episode: 12, rating: 6.8 },\n  { name: 'fate stay night', episode: 13, rating: 7.2 },\n  { name: 'haikyuu', episode: 12, rating: 4.5 },\n  { name: 'aksa', episode: 24, rating: 3.2 },\n  { name: 'air', episode: 8, rating: 9.8 },\n]\n\n//如果没有匹配结果 返回空数组\nconst animationA = animations.filter(\n  animes => animes.name.toLowerCase().startsWith('a') && animes.rating > 7\n)\nconsole.log(animationA)\n```\n\n`.find()`: 返回匹配条件的**第一个元素/对象**\n\n```js\nconst animations = [\n  { name: 'haikyuu to top', episode: 12, rating: 6.8 },\n  { name: 'haikyuu2', episode: 13, rating: 9.2 },\n  { name: 'haikyuu', episode: 12, rating: 4.5 },\n]\n\nconst animationSearch = animations.find(\n  anime => anime.name.toLowerCase().includes('haikyuu') && anime.rating > 9\n)\n\nconsole.log(animationSearch)\n```\n\n### Transform Arrays .reduce()\n\n#### Accumulator Array\n\n```js\nconst cart = [\n  { item: 'Squat Stand 2.0', price: 460.89 },\n  { item: 'Falt Utility Bench', price: 230 },\n  { item: 'Ohio Power Bar', price: 385.23 },\n]\n\n//cart数组中的每个值累加\n//0 as initialize value\nconst cartTotal = cart.reduce((subtotal, cartItem) => {\n  return subtotal + cartItem.price\n}, 0)\nconsole.log(cartTotal)\n```\n\n#### Double Array Values\n\n```js\nconst numbers = [1, 2, 3, 4, 5, 6]\n\nconst doubleNum = numbers.reduce((acc, num) => {\n  acc.push(num * 2)\n  return acc\n}, [])\n\nconst greaterThree = numbers.reduce((acc, num) => {\n  if (num > 3) {\n    acc.push(num)\n  }\n  return acc\n}, 0)\n\n//const doubleNum = numbers.map(num => num * 2)\n//const greaterThree = numbers.filter(num => num > 3)\n\nconsole.log(doubleNum)\nconsole.log(greaterThree)\n```\n\n### Modify Arry with Spread Operator ...\n\nAvoid Array Mutation\n\n```js\nconst aprilAnimation = ['Haikyuu', 'Attack on Tatin']\nconst sepAnimation = ['Dango', 'Physico Pass']\n//clone aprilAnimation into allAnimation\nconst allAnimation = [...aprilAnimation, ...sepAnimation]\n//now use array method will not change aprilAnimation array\nallAnimation.push('Clannad')\nconsole.log(allAnimation)\n```\n\n### Get Unique Sets of Data new Set()\n\n```js\nconst animeVote = [\n  'Attack on titan',\n  'Fate Stay Night',\n  'Attack on titan',\n  'Hero',\n]\n\n//先调用Set method重组新的unqie数组 然后保存到新的数组\nconst uniqueAnimeVote = [...new Set(animeVote)]\nconsole.log(uniqueAnimeVote)\n```\n\n## Classes\n\n### Constructor Function\n\n```js\nfunction Student(id, name, courses = []) {\n  this.id = id\n  this.name = name\n  this.courses = courses\n}\n\n//Student method\nStudent.prototype.addCourse = function (course) {\n  //merge the current student couse array with new courses\n  this.courses = [...this.courses, course]\n}\n\nconst s1 = new Student(3, 'Yang', ['Chinese', 'English', 'Math', 'Computer'])\n\ns1.addCourse('Powerlifting')\nconsole.log(s1.courses)\n```\n\n### Classes\n\n```js\nclass Student {\n  constructor(id, name, subjects = []) {\n    this.id = id\n    this.name = name\n    this.subjects = subjects\n  }\n\n  getStdName() {\n    return `Student: ${this.name}`\n  }\n\n  setStdName(name) {\n    this.name = name\n  }\n}\n\nconst s1 = new Student(1, 'Yang', 'Math')\nconsole.log(s1.getStdName())\n```\n\n<br>\n\n### Inheritance\n\n```js\nclass Product {\n  constructor(name, price, discountable) {\n    this.name = name\n    this.price = price\n    this.discountable = discountable\n  }\n\n  isDiscountable() {\n    return this.discountable\n  }\n}\n\nclass SaleProduct extends Product {\n  constructor(name, price, discountable, percentOff) {\n    super(name, price, discountable)\n    this.percentOff = percentOff\n  }\n\n  getSalePrice() {\n    if (super.isDiscountable()) {\n      return this.price * ((100 - this.percentOff) / 100)\n    } else {\n      return `${this.name} is not eligible for a discount`\n    }\n  }\n}\n\nconst saleProduct1 = new SaleProduct('Coffee Maker', 99, false, 20)\nconsole.log(saleProduct1.getSalePrice())\n```\n\n### Binding method to Class\n\n```js\nconst isAuth = true\nconst user = {\n  favorites: [],\n}\n\nclass Product {\n  constructor(name, price) {\n    this.name = name\n    this.price = price\n    //Bind favoriteProduct method to Product class\n    this.favoriteProduct = this.favoriteProduct.bind(this)\n  }\n\n  handleFavoriteProduct = () => {\n    if (isAuth) {\n      setTimeout(this.favoriteProduct, 1000)\n    } else {\n      console.log('You must be signed in to favorite products!')\n    }\n  }\n\n  favoriteProduct = () => {\n    user.favorites.push(this.name)\n    console.log(`${this.name} favorited!`)\n  }\n}\n\nconst product1 = new Product('Coaster', 89.99)\nproduct1.handleFavoriteProduct()\n```\n","slug":"05-javascript","published":1,"updated":"2020-06-20T07:14:21.244Z","layout":"post","photos":[],"link":"","_id":"ckdnmttcw000arwui6s800m6p","content":"<blockquote>\n<p>JavaScript 数组，对象，类，函数的常用用法以及备忘录</p>\n</blockquote>\n<a id=\"more\"></a>\n\n<h2 id=\"Variables-amp-Strings\"><a href=\"#Variables-amp-Strings\" class=\"headerlink\" title=\"Variables &amp; Strings\"></a>Variables &amp; Strings</h2><h3 id=\"Template-Literals\"><a href=\"#Template-Literals\" class=\"headerlink\" title=\"Template Literals\"></a>Template Literals</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> weight = <span class=\"number\">74</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> msg = <span class=\"string\">`Your body weight is <span class=\"subst\">$&#123;weight * <span class=\"number\">2.2</span>&#125;</span> pounds`</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(msg)</span><br></pre></td></tr></table></figure>\n\n<p>Output</p>\n<blockquote>\n<p>Your body weight is 162.8 pounds</p>\n</blockquote>\n<h2 id=\"Function\"><a href=\"#Function\" class=\"headerlink\" title=\"Function\"></a>Function</h2><h3 id=\"Function-Closure\"><a href=\"#Function-Closure\" class=\"headerlink\" title=\"Function Closure\"></a>Function Closure</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">countingdown</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> initNum = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">decrement</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    initNum -= <span class=\"number\">1</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  decrement()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> countingDown = countingdown()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(countingDown())</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(countingDown())</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(countingDown())</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Default-Parameter\"><a href=\"#Default-Parameter\" class=\"headerlink\" title=\"Default Parameter\"></a>Default Parameter</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">convertTemperature</span>(<span class=\"params\">celsius, decimalPlaces = <span class=\"number\">1</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> fahrenheit = celsius * <span class=\"number\">1.8</span> + <span class=\"number\">32</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">Number</span>(fahrenheit.toFixed(decimalPlaces))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(convertTemperature(<span class=\"number\">21</span>, <span class=\"number\">0</span>))</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Arrow-Function\"><a href=\"#Arrow-Function\" class=\"headerlink\" title=\"Arrow Function\"></a>Arrow Function</h3><h4 id=\"Object\"><a href=\"#Object\" class=\"headerlink\" title=\"Object\"></a>Object</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> setName = <span class=\"function\">(<span class=\"params\">id, name</span>) =&gt;</span> <span class=\"string\">`id: <span class=\"subst\">$&#123;id&#125;</span> name: <span class=\"subst\">$&#123;name&#125;</span>`</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(setName(<span class=\"number\">1</span>, <span class=\"string\">'Yang'</span>))</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Map\"><a href=\"#Map\" class=\"headerlink\" title=\"Map\"></a>Map</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> prices = products.map(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> item.price)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(prices) <span class=\"comment\">//[array of items price]</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Fecth\"><a href=\"#Fecth\" class=\"headerlink\" title=\"Fecth\"></a>Fecth</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//fetch data from API</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getData</span>(<span class=\"params\">baseUrl</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">route</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">callback</span>) </span>&#123;</span><br><span class=\"line\">      fetch(<span class=\"string\">`<span class=\"subst\">$&#123;baseUrl&#125;</span><span class=\"subst\">$&#123;route&#125;</span>`</span>)</span><br><span class=\"line\">        .then(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> response.json)</span><br><span class=\"line\">        .then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> callback(data))</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//store API data getSocialMediaData</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> getSocialMediaData = getData(<span class=\"string\">'https://jsonplaceholder.typicode.com'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//post route</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> getSocialMediaPosts = getSocialMediaData(<span class=\"string\">'/posts'</span>)</span><br><span class=\"line\"><span class=\"comment\">//comment route</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> getSocialMediaComments = getSocialMediaData(<span class=\"string\">'/comments'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//List all the post title</span></span><br><span class=\"line\">getSocialMediaPosts(<span class=\"function\"><span class=\"params\">posts</span> =&gt;</span> &#123;</span><br><span class=\"line\">  posts.forEach(<span class=\"function\"><span class=\"params\">post</span> =&gt;</span> <span class=\"built_in\">console</span>.log(post.title))</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Objects-amp-Maps\"><a href=\"#Objects-amp-Maps\" class=\"headerlink\" title=\"Objects &amp; Maps\"></a>Objects &amp; Maps</h2><h3 id=\"Get-and-Modify-Object-Data\"><a href=\"#Get-and-Modify-Object-Data\" class=\"headerlink\" title=\"Get and Modify Object Data\"></a>Get and Modify Object Data</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> color = <span class=\"string\">'black'</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> hexCode = <span class=\"string\">'000'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//squat notation [] dynamically change object pair values</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> colors = &#123;</span><br><span class=\"line\">  [color]: hexCode,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">delete</span> colors[<span class=\"string\">'blue'</span>]</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(colors)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Object-Destructing\"><a href=\"#Object-Destructing\" class=\"headerlink\" title=\"Object Destructing\"></a>Object Destructing</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> user = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">'Yang'</span>,</span><br><span class=\"line\">  username: <span class=\"string\">'yang052513'</span>,</span><br><span class=\"line\">  email: <span class=\"string\">'liyang0525@hotmail.com'</span>,</span><br><span class=\"line\">  details: &#123;</span><br><span class=\"line\">    title: <span class=\"string\">'Web developer'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  getBio() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`User <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.name&#125;</span> is a <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.details.title&#125;</span>`</span>)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  askToFriend() &#123;</span><br><span class=\"line\">    <span class=\"comment\">//嵌套函数用arrow function解决this binding问题</span></span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">`Would you like to friend <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.name&#125;</span>`</span>)</span><br><span class=\"line\">    &#125;, <span class=\"number\">2000</span>)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">user.getBio()</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Map-1\"><a href=\"#Map-1\" class=\"headerlink\" title=\"Map\"></a>Map</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> user1 = <span class=\"string\">'Yang'</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> key1 = <span class=\"string\">'1'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//创建一个新的map并插入用户1的key和value</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> userMap = <span class=\"keyword\">new</span> <span class=\"built_in\">Map</span>([[key1, user1]])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//插入key为2 value为nathan到userMap</span></span><br><span class=\"line\">userMap.set(<span class=\"string\">'2'</span>, <span class=\"string\">'Nathan'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//循环userMap并打印每个数据</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> display = <span class=\"function\"><span class=\"params\">values</span> =&gt;</span> <span class=\"built_in\">document</span>.writeln(values + <span class=\"string\">'&lt;br&gt;'</span>)</span><br><span class=\"line\">userMap.forEach(display)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//取得用户key为1的value</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> key = userMap.get(<span class=\"string\">'1'</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(key)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//userMap大小</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(userMap.size)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Arrays-amp-Sets\"><a href=\"#Arrays-amp-Sets\" class=\"headerlink\" title=\"Arrays &amp; Sets\"></a>Arrays &amp; Sets</h2><h3 id=\"Element-Existence-some-amp-every\"><a href=\"#Element-Existence-some-amp-every\" class=\"headerlink\" title=\"Element Existence .some() &amp; .every()\"></a>Element Existence .some() &amp; .every()</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> array = [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Attack on titan'</span>,</span><br><span class=\"line\">    rating: <span class=\"number\">9.8</span>,</span><br><span class=\"line\">    episode: <span class=\"number\">24</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Fate stay night'</span>,</span><br><span class=\"line\">    rating: <span class=\"number\">4.8</span>,</span><br><span class=\"line\">    episode: <span class=\"number\">13</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Haikyuu'</span>,</span><br><span class=\"line\">    rating: <span class=\"number\">10.0</span>,</span><br><span class=\"line\">    episode: <span class=\"number\">24</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//测试是否至少有一个元素的rating小于5</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> ratingTest = <span class=\"function\"><span class=\"params\">item</span> =&gt;</span> item.rating &lt; <span class=\"number\">5</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> episodeTest = <span class=\"function\"><span class=\"params\">item</span> =&gt;</span> item.episode &gt; <span class=\"number\">12</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">`至少有一部动画评分小于5分: <span class=\"subst\">$&#123;array.some(ratingTest)&#125;</span>`</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">`每部动画集数大于12: <span class=\"subst\">$&#123;array.every(episodeTest)&#125;</span>`</span>)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Perform-Actions-on-All-Elements-map-amp-forEach-Method\"><a href=\"#Perform-Actions-on-All-Elements-map-amp-forEach-Method\" class=\"headerlink\" title=\"Perform Actions on All Elements: .map() &amp; forEach() Method\"></a>Perform Actions on All Elements: .map() &amp; forEach() Method</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> animations = [</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'attack on titan'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">12</span>, <span class=\"attr\">rating</span>: <span class=\"number\">6.8</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'fate stay night'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">13</span>, <span class=\"attr\">rating</span>: <span class=\"number\">7.2</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'haikyuu'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">12</span>, <span class=\"attr\">rating</span>: <span class=\"number\">4.5</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'clannad'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">24</span>, <span class=\"attr\">rating</span>: <span class=\"number\">3.2</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'Bokuno name'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">8</span>, <span class=\"attr\">rating</span>: <span class=\"number\">9.8</span> &#125;,</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//重构一个新的array newAnimations</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> newAnimations = animations.map(<span class=\"function\"><span class=\"params\">animes</span> =&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">//对animations里的每一个对象执行一下</span></span><br><span class=\"line\">  <span class=\"comment\">//如果rating大于8 在原object的基础上merge isHighRank</span></span><br><span class=\"line\">  <span class=\"comment\">//其他保持不变</span></span><br><span class=\"line\">  animes.rating &gt; <span class=\"number\">8</span> ? &#123; ...animes, <span class=\"attr\">isHighRank</span>: <span class=\"literal\">true</span> &#125; : animes</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//循环newAnimations里的每一个对象</span></span><br><span class=\"line\">newAnimations.forEach(<span class=\"function\"><span class=\"params\">animes</span> =&gt;</span> &#123;</span><br><span class=\"line\">  animes.isHighRank</span><br><span class=\"line\">    ? <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;animes.name&#125;</span> is recommended by other users`</span>)</span><br><span class=\"line\">    : <span class=\"literal\">null</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(newAnimations)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Subsets-of-Arrays-filter-amp-find\"><a href=\"#Subsets-of-Arrays-filter-amp-find\" class=\"headerlink\" title=\"Subsets of Arrays .filter() &amp; .find()\"></a>Subsets of Arrays .filter() &amp; .find()</h3><p><code>.filter</code>: 返回匹配条件的新数组</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> animations = [</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'attack on titan'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">12</span>, <span class=\"attr\">rating</span>: <span class=\"number\">6.8</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'fate stay night'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">13</span>, <span class=\"attr\">rating</span>: <span class=\"number\">7.2</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'haikyuu'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">12</span>, <span class=\"attr\">rating</span>: <span class=\"number\">4.5</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'aksa'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">24</span>, <span class=\"attr\">rating</span>: <span class=\"number\">3.2</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'air'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">8</span>, <span class=\"attr\">rating</span>: <span class=\"number\">9.8</span> &#125;,</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//如果没有匹配结果 返回空数组</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> animationA = animations.filter(</span><br><span class=\"line\">  animes =&gt; animes.name.toLowerCase().startsWith(<span class=\"string\">'a'</span>) &amp;&amp; animes.rating &gt; <span class=\"number\">7</span></span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(animationA)</span><br></pre></td></tr></table></figure>\n\n<p><code>.find()</code>: 返回匹配条件的<strong>第一个元素/对象</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> animations = [</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'haikyuu to top'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">12</span>, <span class=\"attr\">rating</span>: <span class=\"number\">6.8</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'haikyuu2'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">13</span>, <span class=\"attr\">rating</span>: <span class=\"number\">9.2</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'haikyuu'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">12</span>, <span class=\"attr\">rating</span>: <span class=\"number\">4.5</span> &#125;,</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> animationSearch = animations.find(</span><br><span class=\"line\">  anime =&gt; anime.name.toLowerCase().includes(<span class=\"string\">'haikyuu'</span>) &amp;&amp; anime.rating &gt; <span class=\"number\">9</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(animationSearch)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Transform-Arrays-reduce\"><a href=\"#Transform-Arrays-reduce\" class=\"headerlink\" title=\"Transform Arrays .reduce()\"></a>Transform Arrays .reduce()</h3><h4 id=\"Accumulator-Array\"><a href=\"#Accumulator-Array\" class=\"headerlink\" title=\"Accumulator Array\"></a>Accumulator Array</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> cart = [</span><br><span class=\"line\">  &#123; <span class=\"attr\">item</span>: <span class=\"string\">'Squat Stand 2.0'</span>, <span class=\"attr\">price</span>: <span class=\"number\">460.89</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">item</span>: <span class=\"string\">'Falt Utility Bench'</span>, <span class=\"attr\">price</span>: <span class=\"number\">230</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">item</span>: <span class=\"string\">'Ohio Power Bar'</span>, <span class=\"attr\">price</span>: <span class=\"number\">385.23</span> &#125;,</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//cart数组中的每个值累加</span></span><br><span class=\"line\"><span class=\"comment\">//0 as initialize value</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> cartTotal = cart.reduce(<span class=\"function\">(<span class=\"params\">subtotal, cartItem</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> subtotal + cartItem.price</span><br><span class=\"line\">&#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(cartTotal)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Double-Array-Values\"><a href=\"#Double-Array-Values\" class=\"headerlink\" title=\"Double Array Values\"></a>Double Array Values</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> numbers = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> doubleNum = numbers.reduce(<span class=\"function\">(<span class=\"params\">acc, num</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  acc.push(num * <span class=\"number\">2</span>)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> acc</span><br><span class=\"line\">&#125;, [])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> greaterThree = numbers.reduce(<span class=\"function\">(<span class=\"params\">acc, num</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (num &gt; <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">    acc.push(num)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> acc</span><br><span class=\"line\">&#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//const doubleNum = numbers.map(num =&gt; num * 2)</span></span><br><span class=\"line\"><span class=\"comment\">//const greaterThree = numbers.filter(num =&gt; num &gt; 3)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(doubleNum)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(greaterThree)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Modify-Arry-with-Spread-Operator-…\"><a href=\"#Modify-Arry-with-Spread-Operator-…\" class=\"headerlink\" title=\"Modify Arry with Spread Operator …\"></a>Modify Arry with Spread Operator …</h3><p>Avoid Array Mutation</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> aprilAnimation = [<span class=\"string\">'Haikyuu'</span>, <span class=\"string\">'Attack on Tatin'</span>]</span><br><span class=\"line\"><span class=\"keyword\">const</span> sepAnimation = [<span class=\"string\">'Dango'</span>, <span class=\"string\">'Physico Pass'</span>]</span><br><span class=\"line\"><span class=\"comment\">//clone aprilAnimation into allAnimation</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> allAnimation = [...aprilAnimation, ...sepAnimation]</span><br><span class=\"line\"><span class=\"comment\">//now use array method will not change aprilAnimation array</span></span><br><span class=\"line\">allAnimation.push(<span class=\"string\">'Clannad'</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(allAnimation)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Get-Unique-Sets-of-Data-new-Set\"><a href=\"#Get-Unique-Sets-of-Data-new-Set\" class=\"headerlink\" title=\"Get Unique Sets of Data new Set()\"></a>Get Unique Sets of Data new Set()</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> animeVote = [</span><br><span class=\"line\">  <span class=\"string\">'Attack on titan'</span>,</span><br><span class=\"line\">  <span class=\"string\">'Fate Stay Night'</span>,</span><br><span class=\"line\">  <span class=\"string\">'Attack on titan'</span>,</span><br><span class=\"line\">  <span class=\"string\">'Hero'</span>,</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//先调用Set method重组新的unqie数组 然后保存到新的数组</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> uniqueAnimeVote = [...new <span class=\"built_in\">Set</span>(animeVote)]</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(uniqueAnimeVote)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Classes\"><a href=\"#Classes\" class=\"headerlink\" title=\"Classes\"></a>Classes</h2><h3 id=\"Constructor-Function\"><a href=\"#Constructor-Function\" class=\"headerlink\" title=\"Constructor Function\"></a>Constructor Function</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Student</span>(<span class=\"params\">id, name, courses = []</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.id = id</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.courses = courses</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Student method</span></span><br><span class=\"line\">Student.prototype.addCourse = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">course</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">//merge the current student couse array with new courses</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.courses = [...this.courses, course]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> s1 = <span class=\"keyword\">new</span> Student(<span class=\"number\">3</span>, <span class=\"string\">'Yang'</span>, [<span class=\"string\">'Chinese'</span>, <span class=\"string\">'English'</span>, <span class=\"string\">'Math'</span>, <span class=\"string\">'Computer'</span>])</span><br><span class=\"line\"></span><br><span class=\"line\">s1.addCourse(<span class=\"string\">'Powerlifting'</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(s1.courses)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Classes-1\"><a href=\"#Classes-1\" class=\"headerlink\" title=\"Classes\"></a>Classes</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Student</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(id, name, subjects = []) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.id = id</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.subjects = subjects</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  getStdName() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`Student: <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.name&#125;</span>`</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  setStdName(name) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> s1 = <span class=\"keyword\">new</span> Student(<span class=\"number\">1</span>, <span class=\"string\">'Yang'</span>, <span class=\"string\">'Math'</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(s1.getStdName())</span><br></pre></td></tr></table></figure>\n\n<br>\n\n<h3 id=\"Inheritance\"><a href=\"#Inheritance\" class=\"headerlink\" title=\"Inheritance\"></a>Inheritance</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(name, price, discountable) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.price = price</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.discountable = discountable</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  isDiscountable() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.discountable</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SaleProduct</span> <span class=\"keyword\">extends</span> <span class=\"title\">Product</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(name, price, discountable, percentOff) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>(name, price, discountable)</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.percentOff = percentOff</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  getSalePrice() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">super</span>.isDiscountable()) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.price * ((<span class=\"number\">100</span> - <span class=\"keyword\">this</span>.percentOff) / <span class=\"number\">100</span>)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.name&#125;</span> is not eligible for a discount`</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> saleProduct1 = <span class=\"keyword\">new</span> SaleProduct(<span class=\"string\">'Coffee Maker'</span>, <span class=\"number\">99</span>, <span class=\"literal\">false</span>, <span class=\"number\">20</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(saleProduct1.getSalePrice())</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Binding-method-to-Class\"><a href=\"#Binding-method-to-Class\" class=\"headerlink\" title=\"Binding method to Class\"></a>Binding method to Class</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> isAuth = <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> user = &#123;</span><br><span class=\"line\">  favorites: [],</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(name, price) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.price = price</span><br><span class=\"line\">    <span class=\"comment\">//Bind favoriteProduct method to Product class</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.favoriteProduct = <span class=\"keyword\">this</span>.favoriteProduct.bind(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  handleFavoriteProduct = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isAuth) &#123;</span><br><span class=\"line\">      setTimeout(<span class=\"keyword\">this</span>.favoriteProduct, <span class=\"number\">1000</span>)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'You must be signed in to favorite products!'</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  favoriteProduct = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    user.favorites.push(<span class=\"keyword\">this</span>.name)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.name&#125;</span> favorited!`</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> product1 = <span class=\"keyword\">new</span> Product(<span class=\"string\">'Coaster'</span>, <span class=\"number\">89.99</span>)</span><br><span class=\"line\">product1.handleFavoriteProduct()</span><br></pre></td></tr></table></figure>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"<blockquote>\n<p>JavaScript 数组，对象，类，函数的常用用法以及备忘录</p>\n</blockquote>","more":"<h2 id=\"Variables-amp-Strings\"><a href=\"#Variables-amp-Strings\" class=\"headerlink\" title=\"Variables &amp; Strings\"></a>Variables &amp; Strings</h2><h3 id=\"Template-Literals\"><a href=\"#Template-Literals\" class=\"headerlink\" title=\"Template Literals\"></a>Template Literals</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> weight = <span class=\"number\">74</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> msg = <span class=\"string\">`Your body weight is <span class=\"subst\">$&#123;weight * <span class=\"number\">2.2</span>&#125;</span> pounds`</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(msg)</span><br></pre></td></tr></table></figure>\n\n<p>Output</p>\n<blockquote>\n<p>Your body weight is 162.8 pounds</p>\n</blockquote>\n<h2 id=\"Function\"><a href=\"#Function\" class=\"headerlink\" title=\"Function\"></a>Function</h2><h3 id=\"Function-Closure\"><a href=\"#Function-Closure\" class=\"headerlink\" title=\"Function Closure\"></a>Function Closure</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">countingdown</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> initNum = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">decrement</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    initNum -= <span class=\"number\">1</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  decrement()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> countingDown = countingdown()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(countingDown())</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(countingDown())</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(countingDown())</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Default-Parameter\"><a href=\"#Default-Parameter\" class=\"headerlink\" title=\"Default Parameter\"></a>Default Parameter</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">convertTemperature</span>(<span class=\"params\">celsius, decimalPlaces = <span class=\"number\">1</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> fahrenheit = celsius * <span class=\"number\">1.8</span> + <span class=\"number\">32</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">Number</span>(fahrenheit.toFixed(decimalPlaces))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(convertTemperature(<span class=\"number\">21</span>, <span class=\"number\">0</span>))</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Arrow-Function\"><a href=\"#Arrow-Function\" class=\"headerlink\" title=\"Arrow Function\"></a>Arrow Function</h3><h4 id=\"Object\"><a href=\"#Object\" class=\"headerlink\" title=\"Object\"></a>Object</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> setName = <span class=\"function\">(<span class=\"params\">id, name</span>) =&gt;</span> <span class=\"string\">`id: <span class=\"subst\">$&#123;id&#125;</span> name: <span class=\"subst\">$&#123;name&#125;</span>`</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(setName(<span class=\"number\">1</span>, <span class=\"string\">'Yang'</span>))</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Map\"><a href=\"#Map\" class=\"headerlink\" title=\"Map\"></a>Map</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> prices = products.map(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> item.price)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(prices) <span class=\"comment\">//[array of items price]</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Fecth\"><a href=\"#Fecth\" class=\"headerlink\" title=\"Fecth\"></a>Fecth</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//fetch data from API</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getData</span>(<span class=\"params\">baseUrl</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">route</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">callback</span>) </span>&#123;</span><br><span class=\"line\">      fetch(<span class=\"string\">`<span class=\"subst\">$&#123;baseUrl&#125;</span><span class=\"subst\">$&#123;route&#125;</span>`</span>)</span><br><span class=\"line\">        .then(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> response.json)</span><br><span class=\"line\">        .then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> callback(data))</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//store API data getSocialMediaData</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> getSocialMediaData = getData(<span class=\"string\">'https://jsonplaceholder.typicode.com'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//post route</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> getSocialMediaPosts = getSocialMediaData(<span class=\"string\">'/posts'</span>)</span><br><span class=\"line\"><span class=\"comment\">//comment route</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> getSocialMediaComments = getSocialMediaData(<span class=\"string\">'/comments'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//List all the post title</span></span><br><span class=\"line\">getSocialMediaPosts(<span class=\"function\"><span class=\"params\">posts</span> =&gt;</span> &#123;</span><br><span class=\"line\">  posts.forEach(<span class=\"function\"><span class=\"params\">post</span> =&gt;</span> <span class=\"built_in\">console</span>.log(post.title))</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Objects-amp-Maps\"><a href=\"#Objects-amp-Maps\" class=\"headerlink\" title=\"Objects &amp; Maps\"></a>Objects &amp; Maps</h2><h3 id=\"Get-and-Modify-Object-Data\"><a href=\"#Get-and-Modify-Object-Data\" class=\"headerlink\" title=\"Get and Modify Object Data\"></a>Get and Modify Object Data</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> color = <span class=\"string\">'black'</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> hexCode = <span class=\"string\">'000'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//squat notation [] dynamically change object pair values</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> colors = &#123;</span><br><span class=\"line\">  [color]: hexCode,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">delete</span> colors[<span class=\"string\">'blue'</span>]</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(colors)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Object-Destructing\"><a href=\"#Object-Destructing\" class=\"headerlink\" title=\"Object Destructing\"></a>Object Destructing</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> user = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">'Yang'</span>,</span><br><span class=\"line\">  username: <span class=\"string\">'yang052513'</span>,</span><br><span class=\"line\">  email: <span class=\"string\">'liyang0525@hotmail.com'</span>,</span><br><span class=\"line\">  details: &#123;</span><br><span class=\"line\">    title: <span class=\"string\">'Web developer'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  getBio() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`User <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.name&#125;</span> is a <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.details.title&#125;</span>`</span>)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  askToFriend() &#123;</span><br><span class=\"line\">    <span class=\"comment\">//嵌套函数用arrow function解决this binding问题</span></span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">`Would you like to friend <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.name&#125;</span>`</span>)</span><br><span class=\"line\">    &#125;, <span class=\"number\">2000</span>)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">user.getBio()</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Map-1\"><a href=\"#Map-1\" class=\"headerlink\" title=\"Map\"></a>Map</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> user1 = <span class=\"string\">'Yang'</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> key1 = <span class=\"string\">'1'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//创建一个新的map并插入用户1的key和value</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> userMap = <span class=\"keyword\">new</span> <span class=\"built_in\">Map</span>([[key1, user1]])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//插入key为2 value为nathan到userMap</span></span><br><span class=\"line\">userMap.set(<span class=\"string\">'2'</span>, <span class=\"string\">'Nathan'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//循环userMap并打印每个数据</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> display = <span class=\"function\"><span class=\"params\">values</span> =&gt;</span> <span class=\"built_in\">document</span>.writeln(values + <span class=\"string\">'&lt;br&gt;'</span>)</span><br><span class=\"line\">userMap.forEach(display)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//取得用户key为1的value</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> key = userMap.get(<span class=\"string\">'1'</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(key)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//userMap大小</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(userMap.size)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Arrays-amp-Sets\"><a href=\"#Arrays-amp-Sets\" class=\"headerlink\" title=\"Arrays &amp; Sets\"></a>Arrays &amp; Sets</h2><h3 id=\"Element-Existence-some-amp-every\"><a href=\"#Element-Existence-some-amp-every\" class=\"headerlink\" title=\"Element Existence .some() &amp; .every()\"></a>Element Existence .some() &amp; .every()</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> array = [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Attack on titan'</span>,</span><br><span class=\"line\">    rating: <span class=\"number\">9.8</span>,</span><br><span class=\"line\">    episode: <span class=\"number\">24</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Fate stay night'</span>,</span><br><span class=\"line\">    rating: <span class=\"number\">4.8</span>,</span><br><span class=\"line\">    episode: <span class=\"number\">13</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Haikyuu'</span>,</span><br><span class=\"line\">    rating: <span class=\"number\">10.0</span>,</span><br><span class=\"line\">    episode: <span class=\"number\">24</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//测试是否至少有一个元素的rating小于5</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> ratingTest = <span class=\"function\"><span class=\"params\">item</span> =&gt;</span> item.rating &lt; <span class=\"number\">5</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> episodeTest = <span class=\"function\"><span class=\"params\">item</span> =&gt;</span> item.episode &gt; <span class=\"number\">12</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">`至少有一部动画评分小于5分: <span class=\"subst\">$&#123;array.some(ratingTest)&#125;</span>`</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">`每部动画集数大于12: <span class=\"subst\">$&#123;array.every(episodeTest)&#125;</span>`</span>)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Perform-Actions-on-All-Elements-map-amp-forEach-Method\"><a href=\"#Perform-Actions-on-All-Elements-map-amp-forEach-Method\" class=\"headerlink\" title=\"Perform Actions on All Elements: .map() &amp; forEach() Method\"></a>Perform Actions on All Elements: .map() &amp; forEach() Method</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> animations = [</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'attack on titan'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">12</span>, <span class=\"attr\">rating</span>: <span class=\"number\">6.8</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'fate stay night'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">13</span>, <span class=\"attr\">rating</span>: <span class=\"number\">7.2</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'haikyuu'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">12</span>, <span class=\"attr\">rating</span>: <span class=\"number\">4.5</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'clannad'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">24</span>, <span class=\"attr\">rating</span>: <span class=\"number\">3.2</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'Bokuno name'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">8</span>, <span class=\"attr\">rating</span>: <span class=\"number\">9.8</span> &#125;,</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//重构一个新的array newAnimations</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> newAnimations = animations.map(<span class=\"function\"><span class=\"params\">animes</span> =&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">//对animations里的每一个对象执行一下</span></span><br><span class=\"line\">  <span class=\"comment\">//如果rating大于8 在原object的基础上merge isHighRank</span></span><br><span class=\"line\">  <span class=\"comment\">//其他保持不变</span></span><br><span class=\"line\">  animes.rating &gt; <span class=\"number\">8</span> ? &#123; ...animes, <span class=\"attr\">isHighRank</span>: <span class=\"literal\">true</span> &#125; : animes</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//循环newAnimations里的每一个对象</span></span><br><span class=\"line\">newAnimations.forEach(<span class=\"function\"><span class=\"params\">animes</span> =&gt;</span> &#123;</span><br><span class=\"line\">  animes.isHighRank</span><br><span class=\"line\">    ? <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;animes.name&#125;</span> is recommended by other users`</span>)</span><br><span class=\"line\">    : <span class=\"literal\">null</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(newAnimations)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Subsets-of-Arrays-filter-amp-find\"><a href=\"#Subsets-of-Arrays-filter-amp-find\" class=\"headerlink\" title=\"Subsets of Arrays .filter() &amp; .find()\"></a>Subsets of Arrays .filter() &amp; .find()</h3><p><code>.filter</code>: 返回匹配条件的新数组</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> animations = [</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'attack on titan'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">12</span>, <span class=\"attr\">rating</span>: <span class=\"number\">6.8</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'fate stay night'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">13</span>, <span class=\"attr\">rating</span>: <span class=\"number\">7.2</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'haikyuu'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">12</span>, <span class=\"attr\">rating</span>: <span class=\"number\">4.5</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'aksa'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">24</span>, <span class=\"attr\">rating</span>: <span class=\"number\">3.2</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'air'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">8</span>, <span class=\"attr\">rating</span>: <span class=\"number\">9.8</span> &#125;,</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//如果没有匹配结果 返回空数组</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> animationA = animations.filter(</span><br><span class=\"line\">  animes =&gt; animes.name.toLowerCase().startsWith(<span class=\"string\">'a'</span>) &amp;&amp; animes.rating &gt; <span class=\"number\">7</span></span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(animationA)</span><br></pre></td></tr></table></figure>\n\n<p><code>.find()</code>: 返回匹配条件的<strong>第一个元素/对象</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> animations = [</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'haikyuu to top'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">12</span>, <span class=\"attr\">rating</span>: <span class=\"number\">6.8</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'haikyuu2'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">13</span>, <span class=\"attr\">rating</span>: <span class=\"number\">9.2</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'haikyuu'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">12</span>, <span class=\"attr\">rating</span>: <span class=\"number\">4.5</span> &#125;,</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> animationSearch = animations.find(</span><br><span class=\"line\">  anime =&gt; anime.name.toLowerCase().includes(<span class=\"string\">'haikyuu'</span>) &amp;&amp; anime.rating &gt; <span class=\"number\">9</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(animationSearch)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Transform-Arrays-reduce\"><a href=\"#Transform-Arrays-reduce\" class=\"headerlink\" title=\"Transform Arrays .reduce()\"></a>Transform Arrays .reduce()</h3><h4 id=\"Accumulator-Array\"><a href=\"#Accumulator-Array\" class=\"headerlink\" title=\"Accumulator Array\"></a>Accumulator Array</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> cart = [</span><br><span class=\"line\">  &#123; <span class=\"attr\">item</span>: <span class=\"string\">'Squat Stand 2.0'</span>, <span class=\"attr\">price</span>: <span class=\"number\">460.89</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">item</span>: <span class=\"string\">'Falt Utility Bench'</span>, <span class=\"attr\">price</span>: <span class=\"number\">230</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">item</span>: <span class=\"string\">'Ohio Power Bar'</span>, <span class=\"attr\">price</span>: <span class=\"number\">385.23</span> &#125;,</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//cart数组中的每个值累加</span></span><br><span class=\"line\"><span class=\"comment\">//0 as initialize value</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> cartTotal = cart.reduce(<span class=\"function\">(<span class=\"params\">subtotal, cartItem</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> subtotal + cartItem.price</span><br><span class=\"line\">&#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(cartTotal)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Double-Array-Values\"><a href=\"#Double-Array-Values\" class=\"headerlink\" title=\"Double Array Values\"></a>Double Array Values</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> numbers = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> doubleNum = numbers.reduce(<span class=\"function\">(<span class=\"params\">acc, num</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  acc.push(num * <span class=\"number\">2</span>)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> acc</span><br><span class=\"line\">&#125;, [])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> greaterThree = numbers.reduce(<span class=\"function\">(<span class=\"params\">acc, num</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (num &gt; <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">    acc.push(num)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> acc</span><br><span class=\"line\">&#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//const doubleNum = numbers.map(num =&gt; num * 2)</span></span><br><span class=\"line\"><span class=\"comment\">//const greaterThree = numbers.filter(num =&gt; num &gt; 3)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(doubleNum)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(greaterThree)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Modify-Arry-with-Spread-Operator-…\"><a href=\"#Modify-Arry-with-Spread-Operator-…\" class=\"headerlink\" title=\"Modify Arry with Spread Operator …\"></a>Modify Arry with Spread Operator …</h3><p>Avoid Array Mutation</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> aprilAnimation = [<span class=\"string\">'Haikyuu'</span>, <span class=\"string\">'Attack on Tatin'</span>]</span><br><span class=\"line\"><span class=\"keyword\">const</span> sepAnimation = [<span class=\"string\">'Dango'</span>, <span class=\"string\">'Physico Pass'</span>]</span><br><span class=\"line\"><span class=\"comment\">//clone aprilAnimation into allAnimation</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> allAnimation = [...aprilAnimation, ...sepAnimation]</span><br><span class=\"line\"><span class=\"comment\">//now use array method will not change aprilAnimation array</span></span><br><span class=\"line\">allAnimation.push(<span class=\"string\">'Clannad'</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(allAnimation)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Get-Unique-Sets-of-Data-new-Set\"><a href=\"#Get-Unique-Sets-of-Data-new-Set\" class=\"headerlink\" title=\"Get Unique Sets of Data new Set()\"></a>Get Unique Sets of Data new Set()</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> animeVote = [</span><br><span class=\"line\">  <span class=\"string\">'Attack on titan'</span>,</span><br><span class=\"line\">  <span class=\"string\">'Fate Stay Night'</span>,</span><br><span class=\"line\">  <span class=\"string\">'Attack on titan'</span>,</span><br><span class=\"line\">  <span class=\"string\">'Hero'</span>,</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//先调用Set method重组新的unqie数组 然后保存到新的数组</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> uniqueAnimeVote = [...new <span class=\"built_in\">Set</span>(animeVote)]</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(uniqueAnimeVote)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Classes\"><a href=\"#Classes\" class=\"headerlink\" title=\"Classes\"></a>Classes</h2><h3 id=\"Constructor-Function\"><a href=\"#Constructor-Function\" class=\"headerlink\" title=\"Constructor Function\"></a>Constructor Function</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Student</span>(<span class=\"params\">id, name, courses = []</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.id = id</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.courses = courses</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Student method</span></span><br><span class=\"line\">Student.prototype.addCourse = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">course</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">//merge the current student couse array with new courses</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.courses = [...this.courses, course]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> s1 = <span class=\"keyword\">new</span> Student(<span class=\"number\">3</span>, <span class=\"string\">'Yang'</span>, [<span class=\"string\">'Chinese'</span>, <span class=\"string\">'English'</span>, <span class=\"string\">'Math'</span>, <span class=\"string\">'Computer'</span>])</span><br><span class=\"line\"></span><br><span class=\"line\">s1.addCourse(<span class=\"string\">'Powerlifting'</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(s1.courses)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Classes-1\"><a href=\"#Classes-1\" class=\"headerlink\" title=\"Classes\"></a>Classes</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Student</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(id, name, subjects = []) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.id = id</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.subjects = subjects</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  getStdName() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`Student: <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.name&#125;</span>`</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  setStdName(name) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> s1 = <span class=\"keyword\">new</span> Student(<span class=\"number\">1</span>, <span class=\"string\">'Yang'</span>, <span class=\"string\">'Math'</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(s1.getStdName())</span><br></pre></td></tr></table></figure>\n\n<br>\n\n<h3 id=\"Inheritance\"><a href=\"#Inheritance\" class=\"headerlink\" title=\"Inheritance\"></a>Inheritance</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(name, price, discountable) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.price = price</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.discountable = discountable</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  isDiscountable() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.discountable</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SaleProduct</span> <span class=\"keyword\">extends</span> <span class=\"title\">Product</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(name, price, discountable, percentOff) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>(name, price, discountable)</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.percentOff = percentOff</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  getSalePrice() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">super</span>.isDiscountable()) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.price * ((<span class=\"number\">100</span> - <span class=\"keyword\">this</span>.percentOff) / <span class=\"number\">100</span>)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.name&#125;</span> is not eligible for a discount`</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> saleProduct1 = <span class=\"keyword\">new</span> SaleProduct(<span class=\"string\">'Coffee Maker'</span>, <span class=\"number\">99</span>, <span class=\"literal\">false</span>, <span class=\"number\">20</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(saleProduct1.getSalePrice())</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Binding-method-to-Class\"><a href=\"#Binding-method-to-Class\" class=\"headerlink\" title=\"Binding method to Class\"></a>Binding method to Class</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> isAuth = <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> user = &#123;</span><br><span class=\"line\">  favorites: [],</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(name, price) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.price = price</span><br><span class=\"line\">    <span class=\"comment\">//Bind favoriteProduct method to Product class</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.favoriteProduct = <span class=\"keyword\">this</span>.favoriteProduct.bind(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  handleFavoriteProduct = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isAuth) &#123;</span><br><span class=\"line\">      setTimeout(<span class=\"keyword\">this</span>.favoriteProduct, <span class=\"number\">1000</span>)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'You must be signed in to favorite products!'</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  favoriteProduct = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    user.favorites.push(<span class=\"keyword\">this</span>.name)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.name&#125;</span> favorited!`</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> product1 = <span class=\"keyword\">new</span> Product(<span class=\"string\">'Coaster'</span>, <span class=\"number\">89.99</span>)</span><br><span class=\"line\">product1.handleFavoriteProduct()</span><br></pre></td></tr></table></figure>"},{"title":"Sass Cheat Sheet","date":"2020-06-09T05:33:44.000Z","comments":0,"cover":"https://cdn-media-1.freecodecamp.org/images/1*HFYKWq92BcXJIdata7d-JQ.png","_content":"\n> 继 less 之后用的第二个 CSS preprocessor。目前还不是特别习惯`sass`的写法，但`sass`相比还是更简洁清晰一点。主要记录了变量，嵌套，继承，函数以及计算相关的内容。\n\n<!-- more -->\n\n## Variables\n\n```scss\n$btnPrimaryColor: rgb(125, 125, 125);\n\nheader button {\n  background-color: $btnPrimaryColor;\n}\n\n.contact button {\n  background-color: $btnPrimaryColor;\n}\n```\n\n## Nested\n\n```scss\nheader {\n  text-align: center;\n  button {\n    border: 1px solid black;\n    &:hover {\n      background: red;\n    }\n  }\n  p {\n    font-size: 14px;\n  }\n}\n```\n\n## Separate files\n\nstyle.scss\n\n```scss\n@import './header';\n@import './variable';\n```\n\nvariable.scss\n\n```scss\n$btnPrimaryColor: rgb(125, 125, 125);\n$btnSecondaryColor: rgb(100, 100, 100);\n```\n\n\\_header.scss\n\n```scss\nheader {\n  text-align: center;\n  button {\n    border: 1px solid black;\n    &:hover {\n      background: red;\n    }\n  }\n  p {\n    font-size: 14px;\n  }\n}\n```\n\n## Mixed-In\n\n```scss\n/* can be placed in other files */\n@mixin flexCenter($direction, $background) {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: $direction;\n  background: $background;\n}\n\nheader {\n  @include flexCenter(column, rgb(100, 240, 222));\n}\n```\n\n## Extends\n\n\\_header.scss\n\n```scss\nheader {\n  text-align: center;\n  button {\n    border: 1px solid black;\n    &:hover {\n      background: red;\n    }\n  }\n  p {\n    font-size: 14px;\n  }\n}\n```\n\nstyle.scss\n\n```scss\n@import \"./header\";\n\n.contact {\n    @extend header;\n    /* overwrite */\n    background: rgb(0, 0, 255)'\n}\n```\n\n## Calculation\n\n```scss\nheader {\n  text-align: center;\n  p {\n    font-size: 100% - 20%;\n  }\n}\n```\n","source":"_posts/06-sass-cheat-sheet.md","raw":"---\ntitle: Sass Cheat Sheet\ndate: 2020-06-08 22:33:44\ntags: ['Sass', 'css', 'note']\ncomments: false\ncategories: '笔记'\ncover: 'https://cdn-media-1.freecodecamp.org/images/1*HFYKWq92BcXJIdata7d-JQ.png'\n---\n\n> 继 less 之后用的第二个 CSS preprocessor。目前还不是特别习惯`sass`的写法，但`sass`相比还是更简洁清晰一点。主要记录了变量，嵌套，继承，函数以及计算相关的内容。\n\n<!-- more -->\n\n## Variables\n\n```scss\n$btnPrimaryColor: rgb(125, 125, 125);\n\nheader button {\n  background-color: $btnPrimaryColor;\n}\n\n.contact button {\n  background-color: $btnPrimaryColor;\n}\n```\n\n## Nested\n\n```scss\nheader {\n  text-align: center;\n  button {\n    border: 1px solid black;\n    &:hover {\n      background: red;\n    }\n  }\n  p {\n    font-size: 14px;\n  }\n}\n```\n\n## Separate files\n\nstyle.scss\n\n```scss\n@import './header';\n@import './variable';\n```\n\nvariable.scss\n\n```scss\n$btnPrimaryColor: rgb(125, 125, 125);\n$btnSecondaryColor: rgb(100, 100, 100);\n```\n\n\\_header.scss\n\n```scss\nheader {\n  text-align: center;\n  button {\n    border: 1px solid black;\n    &:hover {\n      background: red;\n    }\n  }\n  p {\n    font-size: 14px;\n  }\n}\n```\n\n## Mixed-In\n\n```scss\n/* can be placed in other files */\n@mixin flexCenter($direction, $background) {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: $direction;\n  background: $background;\n}\n\nheader {\n  @include flexCenter(column, rgb(100, 240, 222));\n}\n```\n\n## Extends\n\n\\_header.scss\n\n```scss\nheader {\n  text-align: center;\n  button {\n    border: 1px solid black;\n    &:hover {\n      background: red;\n    }\n  }\n  p {\n    font-size: 14px;\n  }\n}\n```\n\nstyle.scss\n\n```scss\n@import \"./header\";\n\n.contact {\n    @extend header;\n    /* overwrite */\n    background: rgb(0, 0, 255)'\n}\n```\n\n## Calculation\n\n```scss\nheader {\n  text-align: center;\n  p {\n    font-size: 100% - 20%;\n  }\n}\n```\n","slug":"06-sass-cheat-sheet","published":1,"updated":"2020-06-20T07:14:04.136Z","layout":"post","photos":[],"link":"","_id":"ckdnmttcz000drwui24xp799z","content":"<blockquote>\n<p>继 less 之后用的第二个 CSS preprocessor。目前还不是特别习惯<code>sass</code>的写法，但<code>sass</code>相比还是更简洁清晰一点。主要记录了变量，嵌套，继承，函数以及计算相关的内容。</p>\n</blockquote>\n<a id=\"more\"></a>\n\n<h2 id=\"Variables\"><a href=\"#Variables\" class=\"headerlink\" title=\"Variables\"></a>Variables</h2><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$btnPrimaryColor</span>: rgb(<span class=\"number\">125</span>, <span class=\"number\">125</span>, <span class=\"number\">125</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">header</span> <span class=\"selector-tag\">button</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"variable\">$btnPrimaryColor</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.contact</span> <span class=\"selector-tag\">button</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"variable\">$btnPrimaryColor</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Nested\"><a href=\"#Nested\" class=\"headerlink\" title=\"Nested\"></a>Nested</h2><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">header</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">  <span class=\"selector-tag\">button</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid black;</span><br><span class=\"line\">    &amp;<span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">background</span>: red;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"selector-tag\">p</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">14px</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Separate-files\"><a href=\"#Separate-files\" class=\"headerlink\" title=\"Separate files\"></a>Separate files</h2><p>style.scss</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">'./header'</span>;</span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">'./variable'</span>;</span><br></pre></td></tr></table></figure>\n\n<p>variable.scss</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$btnPrimaryColor</span>: rgb(<span class=\"number\">125</span>, <span class=\"number\">125</span>, <span class=\"number\">125</span>);</span><br><span class=\"line\"><span class=\"variable\">$btnSecondaryColor</span>: rgb(<span class=\"number\">100</span>, <span class=\"number\">100</span>, <span class=\"number\">100</span>);</span><br></pre></td></tr></table></figure>\n\n<p>_header.scss</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">header</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">  <span class=\"selector-tag\">button</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid black;</span><br><span class=\"line\">    &amp;<span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">background</span>: red;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"selector-tag\">p</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">14px</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Mixed-In\"><a href=\"#Mixed-In\" class=\"headerlink\" title=\"Mixed-In\"></a>Mixed-In</h2><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* can be placed in other files */</span></span><br><span class=\"line\"><span class=\"keyword\">@mixin</span> flexCenter(<span class=\"variable\">$direction</span>, <span class=\"variable\">$background</span>) &#123;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">  <span class=\"attribute\">justify-content</span>: center;</span><br><span class=\"line\">  <span class=\"attribute\">align-items</span>: center;</span><br><span class=\"line\">  <span class=\"attribute\">flex-direction</span>: <span class=\"variable\">$direction</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: <span class=\"variable\">$background</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">header</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">@include</span> flexCenter(column, rgb(<span class=\"number\">100</span>, <span class=\"number\">240</span>, <span class=\"number\">222</span>));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Extends\"><a href=\"#Extends\" class=\"headerlink\" title=\"Extends\"></a>Extends</h2><p>_header.scss</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">header</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">  <span class=\"selector-tag\">button</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid black;</span><br><span class=\"line\">    &amp;<span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">background</span>: red;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"selector-tag\">p</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">14px</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>style.scss</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">\"./header\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.contact</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">@extend</span> header;</span><br><span class=\"line\">    <span class=\"comment\">/* overwrite */</span></span><br><span class=\"line\">    <span class=\"attribute\">background</span>: rgb(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">255</span>)<span class=\"string\">'</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Calculation\"><a href=\"#Calculation\" class=\"headerlink\" title=\"Calculation\"></a>Calculation</h2><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">header</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">  <span class=\"selector-tag\">p</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">100%</span> - <span class=\"number\">20%</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"<blockquote>\n<p>继 less 之后用的第二个 CSS preprocessor。目前还不是特别习惯<code>sass</code>的写法，但<code>sass</code>相比还是更简洁清晰一点。主要记录了变量，嵌套，继承，函数以及计算相关的内容。</p>\n</blockquote>","more":"<h2 id=\"Variables\"><a href=\"#Variables\" class=\"headerlink\" title=\"Variables\"></a>Variables</h2><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$btnPrimaryColor</span>: rgb(<span class=\"number\">125</span>, <span class=\"number\">125</span>, <span class=\"number\">125</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">header</span> <span class=\"selector-tag\">button</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"variable\">$btnPrimaryColor</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.contact</span> <span class=\"selector-tag\">button</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"variable\">$btnPrimaryColor</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Nested\"><a href=\"#Nested\" class=\"headerlink\" title=\"Nested\"></a>Nested</h2><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">header</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">  <span class=\"selector-tag\">button</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid black;</span><br><span class=\"line\">    &amp;<span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">background</span>: red;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"selector-tag\">p</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">14px</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Separate-files\"><a href=\"#Separate-files\" class=\"headerlink\" title=\"Separate files\"></a>Separate files</h2><p>style.scss</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">'./header'</span>;</span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">'./variable'</span>;</span><br></pre></td></tr></table></figure>\n\n<p>variable.scss</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$btnPrimaryColor</span>: rgb(<span class=\"number\">125</span>, <span class=\"number\">125</span>, <span class=\"number\">125</span>);</span><br><span class=\"line\"><span class=\"variable\">$btnSecondaryColor</span>: rgb(<span class=\"number\">100</span>, <span class=\"number\">100</span>, <span class=\"number\">100</span>);</span><br></pre></td></tr></table></figure>\n\n<p>_header.scss</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">header</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">  <span class=\"selector-tag\">button</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid black;</span><br><span class=\"line\">    &amp;<span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">background</span>: red;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"selector-tag\">p</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">14px</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Mixed-In\"><a href=\"#Mixed-In\" class=\"headerlink\" title=\"Mixed-In\"></a>Mixed-In</h2><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* can be placed in other files */</span></span><br><span class=\"line\"><span class=\"keyword\">@mixin</span> flexCenter(<span class=\"variable\">$direction</span>, <span class=\"variable\">$background</span>) &#123;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">  <span class=\"attribute\">justify-content</span>: center;</span><br><span class=\"line\">  <span class=\"attribute\">align-items</span>: center;</span><br><span class=\"line\">  <span class=\"attribute\">flex-direction</span>: <span class=\"variable\">$direction</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: <span class=\"variable\">$background</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">header</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">@include</span> flexCenter(column, rgb(<span class=\"number\">100</span>, <span class=\"number\">240</span>, <span class=\"number\">222</span>));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Extends\"><a href=\"#Extends\" class=\"headerlink\" title=\"Extends\"></a>Extends</h2><p>_header.scss</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">header</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">  <span class=\"selector-tag\">button</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid black;</span><br><span class=\"line\">    &amp;<span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">background</span>: red;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"selector-tag\">p</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">14px</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>style.scss</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">\"./header\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.contact</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">@extend</span> header;</span><br><span class=\"line\">    <span class=\"comment\">/* overwrite */</span></span><br><span class=\"line\">    <span class=\"attribute\">background</span>: rgb(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">255</span>)<span class=\"string\">'</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Calculation\"><a href=\"#Calculation\" class=\"headerlink\" title=\"Calculation\"></a>Calculation</h2><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">header</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">  <span class=\"selector-tag\">p</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">100%</span> - <span class=\"number\">20%</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"Typescript 让你的Javascript更严谨","date":"2020-06-12T19:42:27.000Z","cover":"https://miro.medium.com/max/816/1*mn6bOs7s6Qbao15PMNRyOA.png","_content":"\n> 学习 Angular 的时候要用 typescritp 来写。于是学习 typescript 成了我的 angular 的前置课程。本文主要是记录 typescript 的一些特性和语法，以及介绍一些在 react 中写 typescript(tsx)的基础。\n\n<!-- more -->\n\n## 简介 Introduction\n\n> Typescript 是 javascript 的 superset，也就是说你之前学到的 javascript 或者 ES6 的写法都可以写在 typescript 中。但是不同的是我们可以给变量添加类型(type), 比如 number 可以是 interger 或者 double, 又或者是 boolean 的类型。我们甚至可以给函数添加返回的类型等等。我们在之后会一一介绍。总体来说，typescript 可以让我们之前写的 javascript 更加严谨且代码更容易理解。\n\n## 安装 Environment Setup\n\n安装 typescript 之前我们确保已经安装了 node.js。如果没有，可以到 nodejs.org 下载 LTS 版本(LTS 即 long term support 也就是稳定版)。\n\n如果你不确定是否已经安装过 node.js, 可以在 cmd 中输入`node -v`。安装过的话会显示当前 node 的版本号。\n\n之后我们便可以在 cmd 中输入`npm install -g typescript`。\n\n## 变量定义 Variable Declartions\n\n这里跟 ES6 一样。我们简单介绍下两种变量定义的方法 let 和 const\n\n**let**\n\n- 首先，let 不需要初始化(initialize)数值。比如我们可以声明一个 myAge 变量如：let myAge。\n- 其次，let 可以重新声明变量值。比如我们声明一个变量 let myAge = 5。之后我们可以 myAge = 10。\n\n**const**\n\n- const 必须初始化一个数值，不能留空。比如`cont myName`这样就会报错。\n- const 声明的变量值，之后**不可以更改**。假设我们创建了一个变量`const myName = 'Yang'`。之后就不可以更改 myName 的值了。\n- 大多数情况下，const 可能是我们会用到最多的声明方式。我们也尽可能选择 const 以避免 let 重复声明(re-assign)可能会带来的未知错误。比如函数，常量我们都可以用 const 来声明。\n\n## 变量类型 Variable Types\n\n在给变量定义类型后，我们重新声明变量的值必须匹配它的类型。比如 `let example:string`。我们之后只能定义 example 为 string。这样也可以让我们的代码更严谨。这部分我们主要介绍 boolean, number, string, null, undefined, array, any 类型。\n\n### Boolean\n\nboolean 即 true 或 false\n`let isRare:boolean = false`\n\n### Number\n\nnumber 类型可以是 int 或者是 double\n\n```ts\nlet myAge: number = 23\nlet monitorPrice: number = 399.99\n```\n\n### String\n\n```ts\nconst title: string = 'Typescript 2020'\n```\n\n### Null Undefined\n\nnull 和 undefined 都属于附属类型（sub-types)。即我们可以给之前的任何变量声明 null 和 undefined。\n\n```ts\nlet username: null = null\nlet userprofile: undefined = undefined\n```\n\n但我们很多情况下是预期得到的变量类型是 string 或者 number，但又可能返回 null 和 undefined。就可以用以下方式\n\n```ts\nconst username: string | null = null\nconst isUser: boolean = undefined\n```\n\n### Array\n\n定义数组的类型也很简单。在类型后加入`[]`\n\n```ts\nlet cartList: string[] = ['apple', 'orange', 'milk']\nlet randomNumList: number[] = [13, 22, 3, 344]\n```\n\n或者用 Generics 的写法来定义\n\n```ts\nlet cartList: Array<string> = ['apple', 'orange', 'milk']\nlet randomNumList: Array<number> = [13, 22, 3, 344]\n```\n\n### Tuples\n\n假设我们想在数组中混合变量类型，那我们可以用 tuple 来实现\n\n```ts\nlet myMixList: [string, number, boolean] = ['name', 23, false]\n```\n\n需要注意的是 tuple 数组内的元素是固定的。也就说一旦我们声明完变量类型，我们不可以添加其他元素到 tuple 数组。\n\n```ts\nlet myMixList: [string, number, boolean] = ['name', 'number', false] //error\nlet myMixList: [string, number, boolean] = ['name', 23, 23] //error\nlet myMixList: [string, number, boolean] = [false, 23, false] //error\n\nmyMixList[0] = 23 //erro: 不能更改变量类型\nmyMixList[1].toLowerCase() //error: 数组索引值1处为数字 不能用string method\n```\n\n### Any\n\n有些情况下我们不确定我们变量的类型。比如我们想 fecth 第三方 API 获取数据的时候，有的数据可能会返回 null 或者 undefined，或者其他类型我们不确定。这时候我们可以用 any。\n\n```ts\nlet unknowType: any = 'Can be a string'\nunknowType = 23\nunknowType = false\n```\n\n有的时候我们知道返回变量的类型但定义要用 any，这种情况可以用 type assertion\n\n```ts\nlet unknowValue: any = 'Use as to get length'\nlet n: numbner = (unknowValue as string).length\n```\n\n### Void\n\n我们一般用于返回函数时定义的类型。\n\n```ts\nconst modalMsg = (): void => {\n  console.log('This function does not return anything')\n}\n\nconst plusOperation = (numOne, numTwo): void => {\n  return numOne + numTwop //error:我们定义了void类型，即函数不返回任务值。\n}\n```\n\n### Object\n\n`object`即排除所有 primitive 的类型(number, string, boolean, null, undefined)\n\n```ts\nconst userProfile: object = { name: 'Yang', age: 23 }\nconst errorProfile: object = 30 //error\n```\n\n## 函数 Functions\n\n### Parameter 和返回的类型\n\n我们可以给函数的值和返回的数值定义类型。下面的代码中我们定义`addOperation`的 parameters 类型为 number, 函数返回的类型为 number。\n\n```ts\nconst addOperation = (numOne: number, numTwo: number): number => {\n  return numOne + numTwp\n}\n\naddOperation(1, 3) //返回4\naddOperation(1, '3') //error '3'不是number类型\naddOperation(1, false) //error false不是number类型\n```\n\n我们也可以给函数返回类型定义为 void。\n\n```ts\nconst modalMsg = (msg: string): void => {\n  console.log(`Error: ${msg}`)\n}\n```\n\n### 不确定的函数值\n\n假设我们不确定 parameter 的数值，即 numOne 可以是 null 或者是 number 类型，我们只需要在`:`前面加`?`就可以。\n\n```ts\nconst addOperation = (numOne?: number, numTwo: number): number => {\n  if (numOne) {\n    return numOne + numTwo\n  } else {\n    return numTwo\n  }\n}\n\naddOperation(null, 5) //5\naddOperation(3, 5) //8\n```\n\n### Default Parameter\n\n我们可以定义 default parameter 到函数中\n\n```ts\nconst addOperation = (numOne: number, numTwo: number = 10): number => {\n  return numOne + numTwo\n}\n\naddOperation(3, 10) //13\naddOperation(3) //13\n```\n\n## 接口 Interface\n\n```ts\ninterface Address {\n  road: string\n  unit: string\n  zip: string\n  country: string\n}\n\ninterface Profile {\n  name: string\n  age: number\n  address: Address\n}\nconst userInfo = (profile: Profile): string => {\n  return `User name is ${profile.name} and age is ${profile.age}`\n}\n```\n\n## React 与 TSX\n\n### Function Components\n\n在 typescript 中写 function components 以及传递 props。相比在 jsx 中，typescript 可以声明一个接口 Props 然后从接口中传递父级的属性\n\n如下创建一个 Card 组件\n\n```ts\n//Props可以传递object\ninterface Attribute {\n  hp: number\n  mp: number\n  attack: number\n  info: string\n}\n\n//父级属性\ninterface Props {\n  name: string\n  isRare: boolean\n  toggle: (method: string) => string\n  attribute: Attributes\n}\n\n//用<Props>来声明Props\nexport const Card: React.FC<Props> = ({ name, isRare, toggle, attribute }) => {\n  return (\n    <div>\n      <h3>Card name is {name}</h3>\n      {isRare ? <p>This card is rare</p> : null}\n    </div>\n  )\n}\n```\n\n#### useState Hooks\n\n```ts\n//声明的state可以是number也可以是null\nconst [count, setCount] = useState<number | null | undefined>(5)\n\n//在useState中传递props\nconst [count, setCount] = useState<{ name: string }>(name)\n```\n","source":"_posts/07-typescript.md","raw":"---\ntitle: Typescript 让你的Javascript更严谨\ndate: 2020-06-12 12:42:27\ntags: ['react', 'tsx', 'typescript', 'front-end', 'notes']\ncategories: 笔记\ncover: 'https://miro.medium.com/max/816/1*mn6bOs7s6Qbao15PMNRyOA.png'\n---\n\n> 学习 Angular 的时候要用 typescritp 来写。于是学习 typescript 成了我的 angular 的前置课程。本文主要是记录 typescript 的一些特性和语法，以及介绍一些在 react 中写 typescript(tsx)的基础。\n\n<!-- more -->\n\n## 简介 Introduction\n\n> Typescript 是 javascript 的 superset，也就是说你之前学到的 javascript 或者 ES6 的写法都可以写在 typescript 中。但是不同的是我们可以给变量添加类型(type), 比如 number 可以是 interger 或者 double, 又或者是 boolean 的类型。我们甚至可以给函数添加返回的类型等等。我们在之后会一一介绍。总体来说，typescript 可以让我们之前写的 javascript 更加严谨且代码更容易理解。\n\n## 安装 Environment Setup\n\n安装 typescript 之前我们确保已经安装了 node.js。如果没有，可以到 nodejs.org 下载 LTS 版本(LTS 即 long term support 也就是稳定版)。\n\n如果你不确定是否已经安装过 node.js, 可以在 cmd 中输入`node -v`。安装过的话会显示当前 node 的版本号。\n\n之后我们便可以在 cmd 中输入`npm install -g typescript`。\n\n## 变量定义 Variable Declartions\n\n这里跟 ES6 一样。我们简单介绍下两种变量定义的方法 let 和 const\n\n**let**\n\n- 首先，let 不需要初始化(initialize)数值。比如我们可以声明一个 myAge 变量如：let myAge。\n- 其次，let 可以重新声明变量值。比如我们声明一个变量 let myAge = 5。之后我们可以 myAge = 10。\n\n**const**\n\n- const 必须初始化一个数值，不能留空。比如`cont myName`这样就会报错。\n- const 声明的变量值，之后**不可以更改**。假设我们创建了一个变量`const myName = 'Yang'`。之后就不可以更改 myName 的值了。\n- 大多数情况下，const 可能是我们会用到最多的声明方式。我们也尽可能选择 const 以避免 let 重复声明(re-assign)可能会带来的未知错误。比如函数，常量我们都可以用 const 来声明。\n\n## 变量类型 Variable Types\n\n在给变量定义类型后，我们重新声明变量的值必须匹配它的类型。比如 `let example:string`。我们之后只能定义 example 为 string。这样也可以让我们的代码更严谨。这部分我们主要介绍 boolean, number, string, null, undefined, array, any 类型。\n\n### Boolean\n\nboolean 即 true 或 false\n`let isRare:boolean = false`\n\n### Number\n\nnumber 类型可以是 int 或者是 double\n\n```ts\nlet myAge: number = 23\nlet monitorPrice: number = 399.99\n```\n\n### String\n\n```ts\nconst title: string = 'Typescript 2020'\n```\n\n### Null Undefined\n\nnull 和 undefined 都属于附属类型（sub-types)。即我们可以给之前的任何变量声明 null 和 undefined。\n\n```ts\nlet username: null = null\nlet userprofile: undefined = undefined\n```\n\n但我们很多情况下是预期得到的变量类型是 string 或者 number，但又可能返回 null 和 undefined。就可以用以下方式\n\n```ts\nconst username: string | null = null\nconst isUser: boolean = undefined\n```\n\n### Array\n\n定义数组的类型也很简单。在类型后加入`[]`\n\n```ts\nlet cartList: string[] = ['apple', 'orange', 'milk']\nlet randomNumList: number[] = [13, 22, 3, 344]\n```\n\n或者用 Generics 的写法来定义\n\n```ts\nlet cartList: Array<string> = ['apple', 'orange', 'milk']\nlet randomNumList: Array<number> = [13, 22, 3, 344]\n```\n\n### Tuples\n\n假设我们想在数组中混合变量类型，那我们可以用 tuple 来实现\n\n```ts\nlet myMixList: [string, number, boolean] = ['name', 23, false]\n```\n\n需要注意的是 tuple 数组内的元素是固定的。也就说一旦我们声明完变量类型，我们不可以添加其他元素到 tuple 数组。\n\n```ts\nlet myMixList: [string, number, boolean] = ['name', 'number', false] //error\nlet myMixList: [string, number, boolean] = ['name', 23, 23] //error\nlet myMixList: [string, number, boolean] = [false, 23, false] //error\n\nmyMixList[0] = 23 //erro: 不能更改变量类型\nmyMixList[1].toLowerCase() //error: 数组索引值1处为数字 不能用string method\n```\n\n### Any\n\n有些情况下我们不确定我们变量的类型。比如我们想 fecth 第三方 API 获取数据的时候，有的数据可能会返回 null 或者 undefined，或者其他类型我们不确定。这时候我们可以用 any。\n\n```ts\nlet unknowType: any = 'Can be a string'\nunknowType = 23\nunknowType = false\n```\n\n有的时候我们知道返回变量的类型但定义要用 any，这种情况可以用 type assertion\n\n```ts\nlet unknowValue: any = 'Use as to get length'\nlet n: numbner = (unknowValue as string).length\n```\n\n### Void\n\n我们一般用于返回函数时定义的类型。\n\n```ts\nconst modalMsg = (): void => {\n  console.log('This function does not return anything')\n}\n\nconst plusOperation = (numOne, numTwo): void => {\n  return numOne + numTwop //error:我们定义了void类型，即函数不返回任务值。\n}\n```\n\n### Object\n\n`object`即排除所有 primitive 的类型(number, string, boolean, null, undefined)\n\n```ts\nconst userProfile: object = { name: 'Yang', age: 23 }\nconst errorProfile: object = 30 //error\n```\n\n## 函数 Functions\n\n### Parameter 和返回的类型\n\n我们可以给函数的值和返回的数值定义类型。下面的代码中我们定义`addOperation`的 parameters 类型为 number, 函数返回的类型为 number。\n\n```ts\nconst addOperation = (numOne: number, numTwo: number): number => {\n  return numOne + numTwp\n}\n\naddOperation(1, 3) //返回4\naddOperation(1, '3') //error '3'不是number类型\naddOperation(1, false) //error false不是number类型\n```\n\n我们也可以给函数返回类型定义为 void。\n\n```ts\nconst modalMsg = (msg: string): void => {\n  console.log(`Error: ${msg}`)\n}\n```\n\n### 不确定的函数值\n\n假设我们不确定 parameter 的数值，即 numOne 可以是 null 或者是 number 类型，我们只需要在`:`前面加`?`就可以。\n\n```ts\nconst addOperation = (numOne?: number, numTwo: number): number => {\n  if (numOne) {\n    return numOne + numTwo\n  } else {\n    return numTwo\n  }\n}\n\naddOperation(null, 5) //5\naddOperation(3, 5) //8\n```\n\n### Default Parameter\n\n我们可以定义 default parameter 到函数中\n\n```ts\nconst addOperation = (numOne: number, numTwo: number = 10): number => {\n  return numOne + numTwo\n}\n\naddOperation(3, 10) //13\naddOperation(3) //13\n```\n\n## 接口 Interface\n\n```ts\ninterface Address {\n  road: string\n  unit: string\n  zip: string\n  country: string\n}\n\ninterface Profile {\n  name: string\n  age: number\n  address: Address\n}\nconst userInfo = (profile: Profile): string => {\n  return `User name is ${profile.name} and age is ${profile.age}`\n}\n```\n\n## React 与 TSX\n\n### Function Components\n\n在 typescript 中写 function components 以及传递 props。相比在 jsx 中，typescript 可以声明一个接口 Props 然后从接口中传递父级的属性\n\n如下创建一个 Card 组件\n\n```ts\n//Props可以传递object\ninterface Attribute {\n  hp: number\n  mp: number\n  attack: number\n  info: string\n}\n\n//父级属性\ninterface Props {\n  name: string\n  isRare: boolean\n  toggle: (method: string) => string\n  attribute: Attributes\n}\n\n//用<Props>来声明Props\nexport const Card: React.FC<Props> = ({ name, isRare, toggle, attribute }) => {\n  return (\n    <div>\n      <h3>Card name is {name}</h3>\n      {isRare ? <p>This card is rare</p> : null}\n    </div>\n  )\n}\n```\n\n#### useState Hooks\n\n```ts\n//声明的state可以是number也可以是null\nconst [count, setCount] = useState<number | null | undefined>(5)\n\n//在useState中传递props\nconst [count, setCount] = useState<{ name: string }>(name)\n```\n","slug":"07-typescript","published":1,"updated":"2020-06-20T07:12:00.855Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckdnmttd1000erwui0abh8oqb","content":"<blockquote>\n<p>学习 Angular 的时候要用 typescritp 来写。于是学习 typescript 成了我的 angular 的前置课程。本文主要是记录 typescript 的一些特性和语法，以及介绍一些在 react 中写 typescript(tsx)的基础。</p>\n</blockquote>\n<a id=\"more\"></a>\n\n<h2 id=\"简介-Introduction\"><a href=\"#简介-Introduction\" class=\"headerlink\" title=\"简介 Introduction\"></a>简介 Introduction</h2><blockquote>\n<p>Typescript 是 javascript 的 superset，也就是说你之前学到的 javascript 或者 ES6 的写法都可以写在 typescript 中。但是不同的是我们可以给变量添加类型(type), 比如 number 可以是 interger 或者 double, 又或者是 boolean 的类型。我们甚至可以给函数添加返回的类型等等。我们在之后会一一介绍。总体来说，typescript 可以让我们之前写的 javascript 更加严谨且代码更容易理解。</p>\n</blockquote>\n<h2 id=\"安装-Environment-Setup\"><a href=\"#安装-Environment-Setup\" class=\"headerlink\" title=\"安装 Environment Setup\"></a>安装 Environment Setup</h2><p>安装 typescript 之前我们确保已经安装了 node.js。如果没有，可以到 nodejs.org 下载 LTS 版本(LTS 即 long term support 也就是稳定版)。</p>\n<p>如果你不确定是否已经安装过 node.js, 可以在 cmd 中输入<code>node -v</code>。安装过的话会显示当前 node 的版本号。</p>\n<p>之后我们便可以在 cmd 中输入<code>npm install -g typescript</code>。</p>\n<h2 id=\"变量定义-Variable-Declartions\"><a href=\"#变量定义-Variable-Declartions\" class=\"headerlink\" title=\"变量定义 Variable Declartions\"></a>变量定义 Variable Declartions</h2><p>这里跟 ES6 一样。我们简单介绍下两种变量定义的方法 let 和 const</p>\n<p><strong>let</strong></p>\n<ul>\n<li>首先，let 不需要初始化(initialize)数值。比如我们可以声明一个 myAge 变量如：let myAge。</li>\n<li>其次，let 可以重新声明变量值。比如我们声明一个变量 let myAge = 5。之后我们可以 myAge = 10。</li>\n</ul>\n<p><strong>const</strong></p>\n<ul>\n<li>const 必须初始化一个数值，不能留空。比如<code>cont myName</code>这样就会报错。</li>\n<li>const 声明的变量值，之后<strong>不可以更改</strong>。假设我们创建了一个变量<code>const myName = &#39;Yang&#39;</code>。之后就不可以更改 myName 的值了。</li>\n<li>大多数情况下，const 可能是我们会用到最多的声明方式。我们也尽可能选择 const 以避免 let 重复声明(re-assign)可能会带来的未知错误。比如函数，常量我们都可以用 const 来声明。</li>\n</ul>\n<h2 id=\"变量类型-Variable-Types\"><a href=\"#变量类型-Variable-Types\" class=\"headerlink\" title=\"变量类型 Variable Types\"></a>变量类型 Variable Types</h2><p>在给变量定义类型后，我们重新声明变量的值必须匹配它的类型。比如 <code>let example:string</code>。我们之后只能定义 example 为 string。这样也可以让我们的代码更严谨。这部分我们主要介绍 boolean, number, string, null, undefined, array, any 类型。</p>\n<h3 id=\"Boolean\"><a href=\"#Boolean\" class=\"headerlink\" title=\"Boolean\"></a>Boolean</h3><p>boolean 即 true 或 false<br><code>let isRare:boolean = false</code></p>\n<h3 id=\"Number\"><a href=\"#Number\" class=\"headerlink\" title=\"Number\"></a>Number</h3><p>number 类型可以是 int 或者是 double</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> myAge: <span class=\"built_in\">number</span> = <span class=\"number\">23</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> monitorPrice: <span class=\"built_in\">number</span> = <span class=\"number\">399.99</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"String\"><a href=\"#String\" class=\"headerlink\" title=\"String\"></a>String</h3><figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> title: <span class=\"built_in\">string</span> = <span class=\"string\">'Typescript 2020'</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Null-Undefined\"><a href=\"#Null-Undefined\" class=\"headerlink\" title=\"Null Undefined\"></a>Null Undefined</h3><p>null 和 undefined 都属于附属类型（sub-types)。即我们可以给之前的任何变量声明 null 和 undefined。</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> username: <span class=\"literal\">null</span> = <span class=\"literal\">null</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> userprofile: <span class=\"literal\">undefined</span> = <span class=\"literal\">undefined</span></span><br></pre></td></tr></table></figure>\n\n<p>但我们很多情况下是预期得到的变量类型是 string 或者 number，但又可能返回 null 和 undefined。就可以用以下方式</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> username: <span class=\"built_in\">string</span> | <span class=\"literal\">null</span> = <span class=\"literal\">null</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> isUser: <span class=\"built_in\">boolean</span> = <span class=\"literal\">undefined</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Array\"><a href=\"#Array\" class=\"headerlink\" title=\"Array\"></a>Array</h3><p>定义数组的类型也很简单。在类型后加入<code>[]</code></p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> cartList: <span class=\"built_in\">string</span>[] = [<span class=\"string\">'apple'</span>, <span class=\"string\">'orange'</span>, <span class=\"string\">'milk'</span>]</span><br><span class=\"line\"><span class=\"keyword\">let</span> randomNumList: <span class=\"built_in\">number</span>[] = [<span class=\"number\">13</span>, <span class=\"number\">22</span>, <span class=\"number\">3</span>, <span class=\"number\">344</span>]</span><br></pre></td></tr></table></figure>\n\n<p>或者用 Generics 的写法来定义</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> cartList: <span class=\"built_in\">Array</span>&lt;<span class=\"built_in\">string</span>&gt; = [<span class=\"string\">'apple'</span>, <span class=\"string\">'orange'</span>, <span class=\"string\">'milk'</span>]</span><br><span class=\"line\"><span class=\"keyword\">let</span> randomNumList: <span class=\"built_in\">Array</span>&lt;<span class=\"built_in\">number</span>&gt; = [<span class=\"number\">13</span>, <span class=\"number\">22</span>, <span class=\"number\">3</span>, <span class=\"number\">344</span>]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Tuples\"><a href=\"#Tuples\" class=\"headerlink\" title=\"Tuples\"></a>Tuples</h3><p>假设我们想在数组中混合变量类型，那我们可以用 tuple 来实现</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> myMixList: [<span class=\"built_in\">string</span>, <span class=\"built_in\">number</span>, <span class=\"built_in\">boolean</span>] = [<span class=\"string\">'name'</span>, <span class=\"number\">23</span>, <span class=\"literal\">false</span>]</span><br></pre></td></tr></table></figure>\n\n<p>需要注意的是 tuple 数组内的元素是固定的。也就说一旦我们声明完变量类型，我们不可以添加其他元素到 tuple 数组。</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> myMixList: [<span class=\"built_in\">string</span>, <span class=\"built_in\">number</span>, <span class=\"built_in\">boolean</span>] = [<span class=\"string\">'name'</span>, <span class=\"string\">'number'</span>, <span class=\"literal\">false</span>] <span class=\"comment\">//error</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> myMixList: [<span class=\"built_in\">string</span>, <span class=\"built_in\">number</span>, <span class=\"built_in\">boolean</span>] = [<span class=\"string\">'name'</span>, <span class=\"number\">23</span>, <span class=\"number\">23</span>] <span class=\"comment\">//error</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> myMixList: [<span class=\"built_in\">string</span>, <span class=\"built_in\">number</span>, <span class=\"built_in\">boolean</span>] = [<span class=\"literal\">false</span>, <span class=\"number\">23</span>, <span class=\"literal\">false</span>] <span class=\"comment\">//error</span></span><br><span class=\"line\"></span><br><span class=\"line\">myMixList[<span class=\"number\">0</span>] = <span class=\"number\">23</span> <span class=\"comment\">//erro: 不能更改变量类型</span></span><br><span class=\"line\">myMixList[<span class=\"number\">1</span>].toLowerCase() <span class=\"comment\">//error: 数组索引值1处为数字 不能用string method</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Any\"><a href=\"#Any\" class=\"headerlink\" title=\"Any\"></a>Any</h3><p>有些情况下我们不确定我们变量的类型。比如我们想 fecth 第三方 API 获取数据的时候，有的数据可能会返回 null 或者 undefined，或者其他类型我们不确定。这时候我们可以用 any。</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> unknowType: <span class=\"built_in\">any</span> = <span class=\"string\">'Can be a string'</span></span><br><span class=\"line\">unknowType = <span class=\"number\">23</span></span><br><span class=\"line\">unknowType = <span class=\"literal\">false</span></span><br></pre></td></tr></table></figure>\n\n<p>有的时候我们知道返回变量的类型但定义要用 any，这种情况可以用 type assertion</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> unknowValue: <span class=\"built_in\">any</span> = <span class=\"string\">'Use as to get length'</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> n: numbner = (unknowValue <span class=\"keyword\">as</span> <span class=\"built_in\">string</span>).length</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Void\"><a href=\"#Void\" class=\"headerlink\" title=\"Void\"></a>Void</h3><p>我们一般用于返回函数时定义的类型。</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> modalMsg = (): <span class=\"function\"><span class=\"params\">void</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'This function does not return anything'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> plusOperation = (numOne, numTwo): <span class=\"function\"><span class=\"params\">void</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> numOne + numTwop <span class=\"comment\">//error:我们定义了void类型，即函数不返回任务值。</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Object\"><a href=\"#Object\" class=\"headerlink\" title=\"Object\"></a>Object</h3><p><code>object</code>即排除所有 primitive 的类型(number, string, boolean, null, undefined)</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> userProfile: object = &#123; name: <span class=\"string\">'Yang'</span>, age: <span class=\"number\">23</span> &#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> errorProfile: object = <span class=\"number\">30</span> <span class=\"comment\">//error</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"函数-Functions\"><a href=\"#函数-Functions\" class=\"headerlink\" title=\"函数 Functions\"></a>函数 Functions</h2><h3 id=\"Parameter-和返回的类型\"><a href=\"#Parameter-和返回的类型\" class=\"headerlink\" title=\"Parameter 和返回的类型\"></a>Parameter 和返回的类型</h3><p>我们可以给函数的值和返回的数值定义类型。下面的代码中我们定义<code>addOperation</code>的 parameters 类型为 number, 函数返回的类型为 number。</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> addOperation = (numOne: <span class=\"built_in\">number</span>, numTwo: <span class=\"built_in\">number</span>): <span class=\"function\"><span class=\"params\">number</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> numOne + numTwp</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">addOperation(<span class=\"number\">1</span>, <span class=\"number\">3</span>) <span class=\"comment\">//返回4</span></span><br><span class=\"line\">addOperation(<span class=\"number\">1</span>, <span class=\"string\">'3'</span>) <span class=\"comment\">//error '3'不是number类型</span></span><br><span class=\"line\">addOperation(<span class=\"number\">1</span>, <span class=\"literal\">false</span>) <span class=\"comment\">//error false不是number类型</span></span><br></pre></td></tr></table></figure>\n\n<p>我们也可以给函数返回类型定义为 void。</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> modalMsg = (msg: <span class=\"built_in\">string</span>): <span class=\"function\"><span class=\"params\">void</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`Error: <span class=\"subst\">$&#123;msg&#125;</span>`</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"不确定的函数值\"><a href=\"#不确定的函数值\" class=\"headerlink\" title=\"不确定的函数值\"></a>不确定的函数值</h3><p>假设我们不确定 parameter 的数值，即 numOne 可以是 null 或者是 number 类型，我们只需要在<code>:</code>前面加<code>?</code>就可以。</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> addOperation = (numOne?: <span class=\"built_in\">number</span>, numTwo: <span class=\"built_in\">number</span>): <span class=\"function\"><span class=\"params\">number</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (numOne) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> numOne + numTwo</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> numTwo</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">addOperation(<span class=\"literal\">null</span>, <span class=\"number\">5</span>) <span class=\"comment\">//5</span></span><br><span class=\"line\">addOperation(<span class=\"number\">3</span>, <span class=\"number\">5</span>) <span class=\"comment\">//8</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Default-Parameter\"><a href=\"#Default-Parameter\" class=\"headerlink\" title=\"Default Parameter\"></a>Default Parameter</h3><p>我们可以定义 default parameter 到函数中</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> addOperation = (numOne: <span class=\"built_in\">number</span>, numTwo: <span class=\"built_in\">number</span> = <span class=\"number\">10</span>): <span class=\"function\"><span class=\"params\">number</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> numOne + numTwo</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">addOperation(<span class=\"number\">3</span>, <span class=\"number\">10</span>) <span class=\"comment\">//13</span></span><br><span class=\"line\">addOperation(<span class=\"number\">3</span>) <span class=\"comment\">//13</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"接口-Interface\"><a href=\"#接口-Interface\" class=\"headerlink\" title=\"接口 Interface\"></a>接口 Interface</h2><figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Address &#123;</span><br><span class=\"line\">  road: <span class=\"built_in\">string</span></span><br><span class=\"line\">  unit: <span class=\"built_in\">string</span></span><br><span class=\"line\">  zip: <span class=\"built_in\">string</span></span><br><span class=\"line\">  country: <span class=\"built_in\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Profile &#123;</span><br><span class=\"line\">  name: <span class=\"built_in\">string</span></span><br><span class=\"line\">  age: <span class=\"built_in\">number</span></span><br><span class=\"line\">  address: Address</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> userInfo = (profile: Profile): <span class=\"function\"><span class=\"params\">string</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">`User name is <span class=\"subst\">$&#123;profile.name&#125;</span> and age is <span class=\"subst\">$&#123;profile.age&#125;</span>`</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"React-与-TSX\"><a href=\"#React-与-TSX\" class=\"headerlink\" title=\"React 与 TSX\"></a>React 与 TSX</h2><h3 id=\"Function-Components\"><a href=\"#Function-Components\" class=\"headerlink\" title=\"Function Components\"></a>Function Components</h3><p>在 typescript 中写 function components 以及传递 props。相比在 jsx 中，typescript 可以声明一个接口 Props 然后从接口中传递父级的属性</p>\n<p>如下创建一个 Card 组件</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//Props可以传递object</span></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Attribute &#123;</span><br><span class=\"line\">  hp: <span class=\"built_in\">number</span></span><br><span class=\"line\">  mp: <span class=\"built_in\">number</span></span><br><span class=\"line\">  attack: <span class=\"built_in\">number</span></span><br><span class=\"line\">  info: <span class=\"built_in\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//父级属性</span></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Props &#123;</span><br><span class=\"line\">  name: <span class=\"built_in\">string</span></span><br><span class=\"line\">  isRare: <span class=\"built_in\">boolean</span></span><br><span class=\"line\">  toggle: <span class=\"function\">(<span class=\"params\">method: <span class=\"built_in\">string</span></span>) =&gt;</span> <span class=\"built_in\">string</span></span><br><span class=\"line\">  attribute: Attributes</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//用&lt;Props&gt;来声明Props</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> Card: React.FC&lt;Props&gt; = <span class=\"function\">(<span class=\"params\">&#123; name, isRare, toggle, attribute &#125;</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;h3&gt;Card name is &#123;name&#125;&lt;<span class=\"regexp\">/h3&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &#123;isRare ? &lt;p&gt;This card is rare&lt;/</span>p&gt; : <span class=\"literal\">null</span>&#125;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"useState-Hooks\"><a href=\"#useState-Hooks\" class=\"headerlink\" title=\"useState Hooks\"></a>useState Hooks</h4><figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//声明的state可以是number也可以是null</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> [count, setCount] = useState&lt;<span class=\"built_in\">number</span> | <span class=\"literal\">null</span> | <span class=\"literal\">undefined</span>&gt;(<span class=\"number\">5</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//在useState中传递props</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> [count, setCount] = useState&lt;&#123; name: <span class=\"built_in\">string</span> &#125;&gt;(name)</span><br></pre></td></tr></table></figure>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"<blockquote>\n<p>学习 Angular 的时候要用 typescritp 来写。于是学习 typescript 成了我的 angular 的前置课程。本文主要是记录 typescript 的一些特性和语法，以及介绍一些在 react 中写 typescript(tsx)的基础。</p>\n</blockquote>","more":"<h2 id=\"简介-Introduction\"><a href=\"#简介-Introduction\" class=\"headerlink\" title=\"简介 Introduction\"></a>简介 Introduction</h2><blockquote>\n<p>Typescript 是 javascript 的 superset，也就是说你之前学到的 javascript 或者 ES6 的写法都可以写在 typescript 中。但是不同的是我们可以给变量添加类型(type), 比如 number 可以是 interger 或者 double, 又或者是 boolean 的类型。我们甚至可以给函数添加返回的类型等等。我们在之后会一一介绍。总体来说，typescript 可以让我们之前写的 javascript 更加严谨且代码更容易理解。</p>\n</blockquote>\n<h2 id=\"安装-Environment-Setup\"><a href=\"#安装-Environment-Setup\" class=\"headerlink\" title=\"安装 Environment Setup\"></a>安装 Environment Setup</h2><p>安装 typescript 之前我们确保已经安装了 node.js。如果没有，可以到 nodejs.org 下载 LTS 版本(LTS 即 long term support 也就是稳定版)。</p>\n<p>如果你不确定是否已经安装过 node.js, 可以在 cmd 中输入<code>node -v</code>。安装过的话会显示当前 node 的版本号。</p>\n<p>之后我们便可以在 cmd 中输入<code>npm install -g typescript</code>。</p>\n<h2 id=\"变量定义-Variable-Declartions\"><a href=\"#变量定义-Variable-Declartions\" class=\"headerlink\" title=\"变量定义 Variable Declartions\"></a>变量定义 Variable Declartions</h2><p>这里跟 ES6 一样。我们简单介绍下两种变量定义的方法 let 和 const</p>\n<p><strong>let</strong></p>\n<ul>\n<li>首先，let 不需要初始化(initialize)数值。比如我们可以声明一个 myAge 变量如：let myAge。</li>\n<li>其次，let 可以重新声明变量值。比如我们声明一个变量 let myAge = 5。之后我们可以 myAge = 10。</li>\n</ul>\n<p><strong>const</strong></p>\n<ul>\n<li>const 必须初始化一个数值，不能留空。比如<code>cont myName</code>这样就会报错。</li>\n<li>const 声明的变量值，之后<strong>不可以更改</strong>。假设我们创建了一个变量<code>const myName = &#39;Yang&#39;</code>。之后就不可以更改 myName 的值了。</li>\n<li>大多数情况下，const 可能是我们会用到最多的声明方式。我们也尽可能选择 const 以避免 let 重复声明(re-assign)可能会带来的未知错误。比如函数，常量我们都可以用 const 来声明。</li>\n</ul>\n<h2 id=\"变量类型-Variable-Types\"><a href=\"#变量类型-Variable-Types\" class=\"headerlink\" title=\"变量类型 Variable Types\"></a>变量类型 Variable Types</h2><p>在给变量定义类型后，我们重新声明变量的值必须匹配它的类型。比如 <code>let example:string</code>。我们之后只能定义 example 为 string。这样也可以让我们的代码更严谨。这部分我们主要介绍 boolean, number, string, null, undefined, array, any 类型。</p>\n<h3 id=\"Boolean\"><a href=\"#Boolean\" class=\"headerlink\" title=\"Boolean\"></a>Boolean</h3><p>boolean 即 true 或 false<br><code>let isRare:boolean = false</code></p>\n<h3 id=\"Number\"><a href=\"#Number\" class=\"headerlink\" title=\"Number\"></a>Number</h3><p>number 类型可以是 int 或者是 double</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> myAge: <span class=\"built_in\">number</span> = <span class=\"number\">23</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> monitorPrice: <span class=\"built_in\">number</span> = <span class=\"number\">399.99</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"String\"><a href=\"#String\" class=\"headerlink\" title=\"String\"></a>String</h3><figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> title: <span class=\"built_in\">string</span> = <span class=\"string\">'Typescript 2020'</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Null-Undefined\"><a href=\"#Null-Undefined\" class=\"headerlink\" title=\"Null Undefined\"></a>Null Undefined</h3><p>null 和 undefined 都属于附属类型（sub-types)。即我们可以给之前的任何变量声明 null 和 undefined。</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> username: <span class=\"literal\">null</span> = <span class=\"literal\">null</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> userprofile: <span class=\"literal\">undefined</span> = <span class=\"literal\">undefined</span></span><br></pre></td></tr></table></figure>\n\n<p>但我们很多情况下是预期得到的变量类型是 string 或者 number，但又可能返回 null 和 undefined。就可以用以下方式</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> username: <span class=\"built_in\">string</span> | <span class=\"literal\">null</span> = <span class=\"literal\">null</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> isUser: <span class=\"built_in\">boolean</span> = <span class=\"literal\">undefined</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Array\"><a href=\"#Array\" class=\"headerlink\" title=\"Array\"></a>Array</h3><p>定义数组的类型也很简单。在类型后加入<code>[]</code></p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> cartList: <span class=\"built_in\">string</span>[] = [<span class=\"string\">'apple'</span>, <span class=\"string\">'orange'</span>, <span class=\"string\">'milk'</span>]</span><br><span class=\"line\"><span class=\"keyword\">let</span> randomNumList: <span class=\"built_in\">number</span>[] = [<span class=\"number\">13</span>, <span class=\"number\">22</span>, <span class=\"number\">3</span>, <span class=\"number\">344</span>]</span><br></pre></td></tr></table></figure>\n\n<p>或者用 Generics 的写法来定义</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> cartList: <span class=\"built_in\">Array</span>&lt;<span class=\"built_in\">string</span>&gt; = [<span class=\"string\">'apple'</span>, <span class=\"string\">'orange'</span>, <span class=\"string\">'milk'</span>]</span><br><span class=\"line\"><span class=\"keyword\">let</span> randomNumList: <span class=\"built_in\">Array</span>&lt;<span class=\"built_in\">number</span>&gt; = [<span class=\"number\">13</span>, <span class=\"number\">22</span>, <span class=\"number\">3</span>, <span class=\"number\">344</span>]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Tuples\"><a href=\"#Tuples\" class=\"headerlink\" title=\"Tuples\"></a>Tuples</h3><p>假设我们想在数组中混合变量类型，那我们可以用 tuple 来实现</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> myMixList: [<span class=\"built_in\">string</span>, <span class=\"built_in\">number</span>, <span class=\"built_in\">boolean</span>] = [<span class=\"string\">'name'</span>, <span class=\"number\">23</span>, <span class=\"literal\">false</span>]</span><br></pre></td></tr></table></figure>\n\n<p>需要注意的是 tuple 数组内的元素是固定的。也就说一旦我们声明完变量类型，我们不可以添加其他元素到 tuple 数组。</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> myMixList: [<span class=\"built_in\">string</span>, <span class=\"built_in\">number</span>, <span class=\"built_in\">boolean</span>] = [<span class=\"string\">'name'</span>, <span class=\"string\">'number'</span>, <span class=\"literal\">false</span>] <span class=\"comment\">//error</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> myMixList: [<span class=\"built_in\">string</span>, <span class=\"built_in\">number</span>, <span class=\"built_in\">boolean</span>] = [<span class=\"string\">'name'</span>, <span class=\"number\">23</span>, <span class=\"number\">23</span>] <span class=\"comment\">//error</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> myMixList: [<span class=\"built_in\">string</span>, <span class=\"built_in\">number</span>, <span class=\"built_in\">boolean</span>] = [<span class=\"literal\">false</span>, <span class=\"number\">23</span>, <span class=\"literal\">false</span>] <span class=\"comment\">//error</span></span><br><span class=\"line\"></span><br><span class=\"line\">myMixList[<span class=\"number\">0</span>] = <span class=\"number\">23</span> <span class=\"comment\">//erro: 不能更改变量类型</span></span><br><span class=\"line\">myMixList[<span class=\"number\">1</span>].toLowerCase() <span class=\"comment\">//error: 数组索引值1处为数字 不能用string method</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Any\"><a href=\"#Any\" class=\"headerlink\" title=\"Any\"></a>Any</h3><p>有些情况下我们不确定我们变量的类型。比如我们想 fecth 第三方 API 获取数据的时候，有的数据可能会返回 null 或者 undefined，或者其他类型我们不确定。这时候我们可以用 any。</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> unknowType: <span class=\"built_in\">any</span> = <span class=\"string\">'Can be a string'</span></span><br><span class=\"line\">unknowType = <span class=\"number\">23</span></span><br><span class=\"line\">unknowType = <span class=\"literal\">false</span></span><br></pre></td></tr></table></figure>\n\n<p>有的时候我们知道返回变量的类型但定义要用 any，这种情况可以用 type assertion</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> unknowValue: <span class=\"built_in\">any</span> = <span class=\"string\">'Use as to get length'</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> n: numbner = (unknowValue <span class=\"keyword\">as</span> <span class=\"built_in\">string</span>).length</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Void\"><a href=\"#Void\" class=\"headerlink\" title=\"Void\"></a>Void</h3><p>我们一般用于返回函数时定义的类型。</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> modalMsg = (): <span class=\"function\"><span class=\"params\">void</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'This function does not return anything'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> plusOperation = (numOne, numTwo): <span class=\"function\"><span class=\"params\">void</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> numOne + numTwop <span class=\"comment\">//error:我们定义了void类型，即函数不返回任务值。</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Object\"><a href=\"#Object\" class=\"headerlink\" title=\"Object\"></a>Object</h3><p><code>object</code>即排除所有 primitive 的类型(number, string, boolean, null, undefined)</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> userProfile: object = &#123; name: <span class=\"string\">'Yang'</span>, age: <span class=\"number\">23</span> &#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> errorProfile: object = <span class=\"number\">30</span> <span class=\"comment\">//error</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"函数-Functions\"><a href=\"#函数-Functions\" class=\"headerlink\" title=\"函数 Functions\"></a>函数 Functions</h2><h3 id=\"Parameter-和返回的类型\"><a href=\"#Parameter-和返回的类型\" class=\"headerlink\" title=\"Parameter 和返回的类型\"></a>Parameter 和返回的类型</h3><p>我们可以给函数的值和返回的数值定义类型。下面的代码中我们定义<code>addOperation</code>的 parameters 类型为 number, 函数返回的类型为 number。</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> addOperation = (numOne: <span class=\"built_in\">number</span>, numTwo: <span class=\"built_in\">number</span>): <span class=\"function\"><span class=\"params\">number</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> numOne + numTwp</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">addOperation(<span class=\"number\">1</span>, <span class=\"number\">3</span>) <span class=\"comment\">//返回4</span></span><br><span class=\"line\">addOperation(<span class=\"number\">1</span>, <span class=\"string\">'3'</span>) <span class=\"comment\">//error '3'不是number类型</span></span><br><span class=\"line\">addOperation(<span class=\"number\">1</span>, <span class=\"literal\">false</span>) <span class=\"comment\">//error false不是number类型</span></span><br></pre></td></tr></table></figure>\n\n<p>我们也可以给函数返回类型定义为 void。</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> modalMsg = (msg: <span class=\"built_in\">string</span>): <span class=\"function\"><span class=\"params\">void</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`Error: <span class=\"subst\">$&#123;msg&#125;</span>`</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"不确定的函数值\"><a href=\"#不确定的函数值\" class=\"headerlink\" title=\"不确定的函数值\"></a>不确定的函数值</h3><p>假设我们不确定 parameter 的数值，即 numOne 可以是 null 或者是 number 类型，我们只需要在<code>:</code>前面加<code>?</code>就可以。</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> addOperation = (numOne?: <span class=\"built_in\">number</span>, numTwo: <span class=\"built_in\">number</span>): <span class=\"function\"><span class=\"params\">number</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (numOne) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> numOne + numTwo</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> numTwo</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">addOperation(<span class=\"literal\">null</span>, <span class=\"number\">5</span>) <span class=\"comment\">//5</span></span><br><span class=\"line\">addOperation(<span class=\"number\">3</span>, <span class=\"number\">5</span>) <span class=\"comment\">//8</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Default-Parameter\"><a href=\"#Default-Parameter\" class=\"headerlink\" title=\"Default Parameter\"></a>Default Parameter</h3><p>我们可以定义 default parameter 到函数中</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> addOperation = (numOne: <span class=\"built_in\">number</span>, numTwo: <span class=\"built_in\">number</span> = <span class=\"number\">10</span>): <span class=\"function\"><span class=\"params\">number</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> numOne + numTwo</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">addOperation(<span class=\"number\">3</span>, <span class=\"number\">10</span>) <span class=\"comment\">//13</span></span><br><span class=\"line\">addOperation(<span class=\"number\">3</span>) <span class=\"comment\">//13</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"接口-Interface\"><a href=\"#接口-Interface\" class=\"headerlink\" title=\"接口 Interface\"></a>接口 Interface</h2><figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Address &#123;</span><br><span class=\"line\">  road: <span class=\"built_in\">string</span></span><br><span class=\"line\">  unit: <span class=\"built_in\">string</span></span><br><span class=\"line\">  zip: <span class=\"built_in\">string</span></span><br><span class=\"line\">  country: <span class=\"built_in\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Profile &#123;</span><br><span class=\"line\">  name: <span class=\"built_in\">string</span></span><br><span class=\"line\">  age: <span class=\"built_in\">number</span></span><br><span class=\"line\">  address: Address</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> userInfo = (profile: Profile): <span class=\"function\"><span class=\"params\">string</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">`User name is <span class=\"subst\">$&#123;profile.name&#125;</span> and age is <span class=\"subst\">$&#123;profile.age&#125;</span>`</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"React-与-TSX\"><a href=\"#React-与-TSX\" class=\"headerlink\" title=\"React 与 TSX\"></a>React 与 TSX</h2><h3 id=\"Function-Components\"><a href=\"#Function-Components\" class=\"headerlink\" title=\"Function Components\"></a>Function Components</h3><p>在 typescript 中写 function components 以及传递 props。相比在 jsx 中，typescript 可以声明一个接口 Props 然后从接口中传递父级的属性</p>\n<p>如下创建一个 Card 组件</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//Props可以传递object</span></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Attribute &#123;</span><br><span class=\"line\">  hp: <span class=\"built_in\">number</span></span><br><span class=\"line\">  mp: <span class=\"built_in\">number</span></span><br><span class=\"line\">  attack: <span class=\"built_in\">number</span></span><br><span class=\"line\">  info: <span class=\"built_in\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//父级属性</span></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Props &#123;</span><br><span class=\"line\">  name: <span class=\"built_in\">string</span></span><br><span class=\"line\">  isRare: <span class=\"built_in\">boolean</span></span><br><span class=\"line\">  toggle: <span class=\"function\">(<span class=\"params\">method: <span class=\"built_in\">string</span></span>) =&gt;</span> <span class=\"built_in\">string</span></span><br><span class=\"line\">  attribute: Attributes</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//用&lt;Props&gt;来声明Props</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> Card: React.FC&lt;Props&gt; = <span class=\"function\">(<span class=\"params\">&#123; name, isRare, toggle, attribute &#125;</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;h3&gt;Card name is &#123;name&#125;&lt;<span class=\"regexp\">/h3&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &#123;isRare ? &lt;p&gt;This card is rare&lt;/</span>p&gt; : <span class=\"literal\">null</span>&#125;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"useState-Hooks\"><a href=\"#useState-Hooks\" class=\"headerlink\" title=\"useState Hooks\"></a>useState Hooks</h4><figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//声明的state可以是number也可以是null</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> [count, setCount] = useState&lt;<span class=\"built_in\">number</span> | <span class=\"literal\">null</span> | <span class=\"literal\">undefined</span>&gt;(<span class=\"number\">5</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//在useState中传递props</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> [count, setCount] = useState&lt;&#123; name: <span class=\"built_in\">string</span> &#125;&gt;(name)</span><br></pre></td></tr></table></figure>"},{"title":"如何创建你的第一个React组件库并发布到npm","date":"2020-06-15T06:51:11.000Z","cover":"https://www.itprotoday.com/sites/itprotoday.com/files/styles/article_featured_retina/public/github-npm.png?itok=NVoj-tk8","_content":"\n> 在学习 React 开发项目的过程中，很多时候希望能够重复利用之前项目的组件。比如一些常用的 css 和 js 交互特效，又或者是一个反馈面板根据 props 显示状态回馈，可能也只是一个简单样式化的按钮。于是就产生出了自己创建组件然后传到 npm 上来再次利用。本文用 typescript 为例来介绍如何创建你的第一个 npm 库\n\n<!-- more -->\n\n## 安装 npm\n\n首先我们创建一个文件夹，命名为我们的项目名。比如如下我们创建一个命名为`react-current-time`的项目, 然后进入到该项目目录中\n\n```cmd\nmkdir react-current-time\ncd react-current-time\n```\n\n然后我们可以安装建立`package.json`文件到该目录\n\n```cmd\nnpm init -y\n```\n\n之后安装 typescript 依赖到该目录\n\n```cmd\nnpm i typescript -D\n```\n\n接下来安装 typescript 的配置文件\n\n```cmd\nnpx tsc --init\n```\n\n安装 react 依赖\n\n```cmd\nnpm i react @types/react -D\n```\n\n完成以上后我们可以进入文件夹目录配置相关文件\n\n## 配置文件\n\n### tsconfig.json\n\n首先打开目录中的`tsconfig.json`文件，然后更改为以下相关的设置\n\n```json\n{\n  \"compilerOptions\": {\n    \"jsx\": \"react\",\n    \"declaration\": true,\n    \"declarationMap\": true,\n    \"sourceMap\": true,\n    \"outDir\": \"lib\"\n  },\n  \"include\": [\"src\"]\n}\n```\n\n更改完`tsconfig.json`文件后，我们在项目目录创建`src`目录并创建`index.tsx`文件在该目录，这也是我们文件的入点\n\n## 创建组件\n\n接下来我们就可以像平时一样创建组件。如下我们创建一个卡片的组件接受父级的 props 并渲染\n\n```jsx\nimport React from 'react'\n\ninterface Props {\n    name: string\n    category: string\n    isRare: boolean\n}\n\nexport const Card: React.FC<Props> = ({name, category, isRare}) => {\n    return (\n        <div>\n            <p>Card name: {name}</p>\n            <p>Card category: {category}</p>\n            {isRare ? <p>Rare Card</p> : null}\n        </div>\n    )\n}\n```\n\n## 打包发布到 npm\n\n当我们的组件完成后，我们可以打包我们的项目发布到 npm。\n\n首先打开项目目录内的`package.json`文件，在`scripts`处加入`\"build\": \"tsc -p .\"`\n\n```json\n{\n  \"scripts\": {\n    \"build\": \"tsc -p .\"\n  }\n}\n```\n\n在 terminal 中进入到该项目目录，然后在该目录下输入`npm run build`\n\n```cmd\nnpm run build\n```\n\n输入`npm login`登录 npm\n\n```cmd\nnpm login\nUsername: yang052513\npassword:\n```\n\n最后用命令`npm publish`就可以发布到 npm 上，可以在个人信息的 package 处查看\n\n> 注: 初次发布的版本为`1.0.0`, 可以在项目根目录的`package.json`文件进行更改。更改之后若要发布新的版本必须在`package.json`文件内更改`version`之后才能发布\n\n## 导入和使用\n\n现在我们就可以用我们的自己的组件库啦。下面用一个`react` boiler plate 项目来展示如何导入我们自己的库。\n\n首先在我们新的项目中安装我们建立的 npm 包\n\n```cmd\nnpm install react-card-demo\n```\n\n然后导入组件\n\n```cmd\nimport {Card} from react-card-demo\n```\n\n> 注: 因为我们之前用的`typescript`来创建的组件，所以要加上`{}`。如果是`jsx`, 可以直接`import Card from react-card-demo`\n\n```jsx\nimport React from 'react'\n//导入组件\nimport { Card } from 'react-card-demo`\n\nexport const App: React.FC = () => {\n    return (\n        <div className=\"app=container\">\n              {/* 我们之前给Card组件创建了3个props */}\n            <Card name=\"Fate Stay Night\" category=\"Gal Game\" isRare={false}>\n        </div>\n    )\n}\n```\n","source":"_posts/08-your-first-npm-package.md","raw":"---\ntitle: 如何创建你的第一个React组件库并发布到npm\ndate: 2020-06-14 23:51:11\ntags: ['react', 'typescript', 'notes', 'npm', 'node']\ncategories: Articles\ncover: 'https://www.itprotoday.com/sites/itprotoday.com/files/styles/article_featured_retina/public/github-npm.png?itok=NVoj-tk8'\n---\n\n> 在学习 React 开发项目的过程中，很多时候希望能够重复利用之前项目的组件。比如一些常用的 css 和 js 交互特效，又或者是一个反馈面板根据 props 显示状态回馈，可能也只是一个简单样式化的按钮。于是就产生出了自己创建组件然后传到 npm 上来再次利用。本文用 typescript 为例来介绍如何创建你的第一个 npm 库\n\n<!-- more -->\n\n## 安装 npm\n\n首先我们创建一个文件夹，命名为我们的项目名。比如如下我们创建一个命名为`react-current-time`的项目, 然后进入到该项目目录中\n\n```cmd\nmkdir react-current-time\ncd react-current-time\n```\n\n然后我们可以安装建立`package.json`文件到该目录\n\n```cmd\nnpm init -y\n```\n\n之后安装 typescript 依赖到该目录\n\n```cmd\nnpm i typescript -D\n```\n\n接下来安装 typescript 的配置文件\n\n```cmd\nnpx tsc --init\n```\n\n安装 react 依赖\n\n```cmd\nnpm i react @types/react -D\n```\n\n完成以上后我们可以进入文件夹目录配置相关文件\n\n## 配置文件\n\n### tsconfig.json\n\n首先打开目录中的`tsconfig.json`文件，然后更改为以下相关的设置\n\n```json\n{\n  \"compilerOptions\": {\n    \"jsx\": \"react\",\n    \"declaration\": true,\n    \"declarationMap\": true,\n    \"sourceMap\": true,\n    \"outDir\": \"lib\"\n  },\n  \"include\": [\"src\"]\n}\n```\n\n更改完`tsconfig.json`文件后，我们在项目目录创建`src`目录并创建`index.tsx`文件在该目录，这也是我们文件的入点\n\n## 创建组件\n\n接下来我们就可以像平时一样创建组件。如下我们创建一个卡片的组件接受父级的 props 并渲染\n\n```jsx\nimport React from 'react'\n\ninterface Props {\n    name: string\n    category: string\n    isRare: boolean\n}\n\nexport const Card: React.FC<Props> = ({name, category, isRare}) => {\n    return (\n        <div>\n            <p>Card name: {name}</p>\n            <p>Card category: {category}</p>\n            {isRare ? <p>Rare Card</p> : null}\n        </div>\n    )\n}\n```\n\n## 打包发布到 npm\n\n当我们的组件完成后，我们可以打包我们的项目发布到 npm。\n\n首先打开项目目录内的`package.json`文件，在`scripts`处加入`\"build\": \"tsc -p .\"`\n\n```json\n{\n  \"scripts\": {\n    \"build\": \"tsc -p .\"\n  }\n}\n```\n\n在 terminal 中进入到该项目目录，然后在该目录下输入`npm run build`\n\n```cmd\nnpm run build\n```\n\n输入`npm login`登录 npm\n\n```cmd\nnpm login\nUsername: yang052513\npassword:\n```\n\n最后用命令`npm publish`就可以发布到 npm 上，可以在个人信息的 package 处查看\n\n> 注: 初次发布的版本为`1.0.0`, 可以在项目根目录的`package.json`文件进行更改。更改之后若要发布新的版本必须在`package.json`文件内更改`version`之后才能发布\n\n## 导入和使用\n\n现在我们就可以用我们的自己的组件库啦。下面用一个`react` boiler plate 项目来展示如何导入我们自己的库。\n\n首先在我们新的项目中安装我们建立的 npm 包\n\n```cmd\nnpm install react-card-demo\n```\n\n然后导入组件\n\n```cmd\nimport {Card} from react-card-demo\n```\n\n> 注: 因为我们之前用的`typescript`来创建的组件，所以要加上`{}`。如果是`jsx`, 可以直接`import Card from react-card-demo`\n\n```jsx\nimport React from 'react'\n//导入组件\nimport { Card } from 'react-card-demo`\n\nexport const App: React.FC = () => {\n    return (\n        <div className=\"app=container\">\n              {/* 我们之前给Card组件创建了3个props */}\n            <Card name=\"Fate Stay Night\" category=\"Gal Game\" isRare={false}>\n        </div>\n    )\n}\n```\n","slug":"08-your-first-npm-package","published":1,"updated":"2020-06-20T07:10:28.240Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckdnmttd2000irwui200ngn48","content":"<blockquote>\n<p>在学习 React 开发项目的过程中，很多时候希望能够重复利用之前项目的组件。比如一些常用的 css 和 js 交互特效，又或者是一个反馈面板根据 props 显示状态回馈，可能也只是一个简单样式化的按钮。于是就产生出了自己创建组件然后传到 npm 上来再次利用。本文用 typescript 为例来介绍如何创建你的第一个 npm 库</p>\n</blockquote>\n<a id=\"more\"></a>\n\n<h2 id=\"安装-npm\"><a href=\"#安装-npm\" class=\"headerlink\" title=\"安装 npm\"></a>安装 npm</h2><p>首先我们创建一个文件夹，命名为我们的项目名。比如如下我们创建一个命名为<code>react-current-time</code>的项目, 然后进入到该项目目录中</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> react-current-<span class=\"built_in\">time</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> react-current-<span class=\"built_in\">time</span></span><br></pre></td></tr></table></figure>\n\n<p>然后我们可以安装建立<code>package.json</code>文件到该目录</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm init -y</span><br></pre></td></tr></table></figure>\n\n<p>之后安装 typescript 依赖到该目录</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i typescript -D</span><br></pre></td></tr></table></figure>\n\n<p>接下来安装 typescript 的配置文件</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npx tsc --init</span><br></pre></td></tr></table></figure>\n\n<p>安装 react 依赖</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i react @types/react -D</span><br></pre></td></tr></table></figure>\n\n<p>完成以上后我们可以进入文件夹目录配置相关文件</p>\n<h2 id=\"配置文件\"><a href=\"#配置文件\" class=\"headerlink\" title=\"配置文件\"></a>配置文件</h2><h3 id=\"tsconfig-json\"><a href=\"#tsconfig-json\" class=\"headerlink\" title=\"tsconfig.json\"></a>tsconfig.json</h3><p>首先打开目录中的<code>tsconfig.json</code>文件，然后更改为以下相关的设置</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"compilerOptions\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"jsx\"</span>: <span class=\"string\">\"react\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"declaration\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"declarationMap\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"sourceMap\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"outDir\"</span>: <span class=\"string\">\"lib\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"include\"</span>: [<span class=\"string\">\"src\"</span>]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>更改完<code>tsconfig.json</code>文件后，我们在项目目录创建<code>src</code>目录并创建<code>index.tsx</code>文件在该目录，这也是我们文件的入点</p>\n<h2 id=\"创建组件\"><a href=\"#创建组件\" class=\"headerlink\" title=\"创建组件\"></a>创建组件</h2><p>接下来我们就可以像平时一样创建组件。如下我们创建一个卡片的组件接受父级的 props 并渲染</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"></span><br><span class=\"line\">interface Props &#123;</span><br><span class=\"line\">    name: string</span><br><span class=\"line\">    category: string</span><br><span class=\"line\">    isRare: boolean</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> Card: React.FC&lt;Props&gt; = <span class=\"function\">(<span class=\"params\">&#123;name, category, isRare&#125;</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">        &lt;div&gt;</span><br><span class=\"line\">            &lt;p&gt;Card name: &#123;name&#125;&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">            &lt;p&gt;Card category: &#123;category&#125;&lt;/</span>p&gt;</span><br><span class=\"line\">            &#123;isRare ? <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Rare Card<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span> : <span class=\"literal\">null</span>&#125;</span><br><span class=\"line\">        &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"打包发布到-npm\"><a href=\"#打包发布到-npm\" class=\"headerlink\" title=\"打包发布到 npm\"></a>打包发布到 npm</h2><p>当我们的组件完成后，我们可以打包我们的项目发布到 npm。</p>\n<p>首先打开项目目录内的<code>package.json</code>文件，在<code>scripts</code>处加入<code>&quot;build&quot;: &quot;tsc -p .&quot;</code></p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"build\"</span>: <span class=\"string\">\"tsc -p .\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在 terminal 中进入到该项目目录，然后在该目录下输入<code>npm run build</code></p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run build</span><br></pre></td></tr></table></figure>\n\n<p>输入<code>npm login</code>登录 npm</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm login</span><br><span class=\"line\"><span class=\"function\">Username: <span class=\"title\">yang052513</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">password</span>:</span></span><br></pre></td></tr></table></figure>\n\n<p>最后用命令<code>npm publish</code>就可以发布到 npm 上，可以在个人信息的 package 处查看</p>\n<blockquote>\n<p>注: 初次发布的版本为<code>1.0.0</code>, 可以在项目根目录的<code>package.json</code>文件进行更改。更改之后若要发布新的版本必须在<code>package.json</code>文件内更改<code>version</code>之后才能发布</p>\n</blockquote>\n<h2 id=\"导入和使用\"><a href=\"#导入和使用\" class=\"headerlink\" title=\"导入和使用\"></a>导入和使用</h2><p>现在我们就可以用我们的自己的组件库啦。下面用一个<code>react</code> boiler plate 项目来展示如何导入我们自己的库。</p>\n<p>首先在我们新的项目中安装我们建立的 npm 包</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install react-card-demo</span><br></pre></td></tr></table></figure>\n\n<p>然后导入组件</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import &#123;Card&#125; from react-card-demo</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注: 因为我们之前用的<code>typescript</code>来创建的组件，所以要加上<code>{}</code>。如果是<code>jsx</code>, 可以直接<code>import Card from react-card-demo</code></p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"comment\">//导入组件</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Card &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-card-demo`</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">export const App: React.FC = () =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"string\">    return (</span></span><br><span class=\"line\"><span class=\"string\">        &lt;div className=\"app=container\"&gt;</span></span><br><span class=\"line\"><span class=\"string\">              &#123;/* 我们之前给Card组件创建了3个props */&#125;</span></span><br><span class=\"line\"><span class=\"string\">            &lt;Card name=\"Fate Stay Night\" category=\"Gal Game\" isRare=&#123;false&#125;&gt;</span></span><br><span class=\"line\"><span class=\"string\">        &lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">    )</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"<blockquote>\n<p>在学习 React 开发项目的过程中，很多时候希望能够重复利用之前项目的组件。比如一些常用的 css 和 js 交互特效，又或者是一个反馈面板根据 props 显示状态回馈，可能也只是一个简单样式化的按钮。于是就产生出了自己创建组件然后传到 npm 上来再次利用。本文用 typescript 为例来介绍如何创建你的第一个 npm 库</p>\n</blockquote>","more":"<h2 id=\"安装-npm\"><a href=\"#安装-npm\" class=\"headerlink\" title=\"安装 npm\"></a>安装 npm</h2><p>首先我们创建一个文件夹，命名为我们的项目名。比如如下我们创建一个命名为<code>react-current-time</code>的项目, 然后进入到该项目目录中</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> react-current-<span class=\"built_in\">time</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> react-current-<span class=\"built_in\">time</span></span><br></pre></td></tr></table></figure>\n\n<p>然后我们可以安装建立<code>package.json</code>文件到该目录</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm init -y</span><br></pre></td></tr></table></figure>\n\n<p>之后安装 typescript 依赖到该目录</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i typescript -D</span><br></pre></td></tr></table></figure>\n\n<p>接下来安装 typescript 的配置文件</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npx tsc --init</span><br></pre></td></tr></table></figure>\n\n<p>安装 react 依赖</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i react @types/react -D</span><br></pre></td></tr></table></figure>\n\n<p>完成以上后我们可以进入文件夹目录配置相关文件</p>\n<h2 id=\"配置文件\"><a href=\"#配置文件\" class=\"headerlink\" title=\"配置文件\"></a>配置文件</h2><h3 id=\"tsconfig-json\"><a href=\"#tsconfig-json\" class=\"headerlink\" title=\"tsconfig.json\"></a>tsconfig.json</h3><p>首先打开目录中的<code>tsconfig.json</code>文件，然后更改为以下相关的设置</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"compilerOptions\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"jsx\"</span>: <span class=\"string\">\"react\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"declaration\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"declarationMap\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"sourceMap\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"outDir\"</span>: <span class=\"string\">\"lib\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"include\"</span>: [<span class=\"string\">\"src\"</span>]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>更改完<code>tsconfig.json</code>文件后，我们在项目目录创建<code>src</code>目录并创建<code>index.tsx</code>文件在该目录，这也是我们文件的入点</p>\n<h2 id=\"创建组件\"><a href=\"#创建组件\" class=\"headerlink\" title=\"创建组件\"></a>创建组件</h2><p>接下来我们就可以像平时一样创建组件。如下我们创建一个卡片的组件接受父级的 props 并渲染</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"></span><br><span class=\"line\">interface Props &#123;</span><br><span class=\"line\">    name: string</span><br><span class=\"line\">    category: string</span><br><span class=\"line\">    isRare: boolean</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> Card: React.FC&lt;Props&gt; = <span class=\"function\">(<span class=\"params\">&#123;name, category, isRare&#125;</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">        &lt;div&gt;</span><br><span class=\"line\">            &lt;p&gt;Card name: &#123;name&#125;&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">            &lt;p&gt;Card category: &#123;category&#125;&lt;/</span>p&gt;</span><br><span class=\"line\">            &#123;isRare ? <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Rare Card<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span> : <span class=\"literal\">null</span>&#125;</span><br><span class=\"line\">        &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"打包发布到-npm\"><a href=\"#打包发布到-npm\" class=\"headerlink\" title=\"打包发布到 npm\"></a>打包发布到 npm</h2><p>当我们的组件完成后，我们可以打包我们的项目发布到 npm。</p>\n<p>首先打开项目目录内的<code>package.json</code>文件，在<code>scripts</code>处加入<code>&quot;build&quot;: &quot;tsc -p .&quot;</code></p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"build\"</span>: <span class=\"string\">\"tsc -p .\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在 terminal 中进入到该项目目录，然后在该目录下输入<code>npm run build</code></p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run build</span><br></pre></td></tr></table></figure>\n\n<p>输入<code>npm login</code>登录 npm</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm login</span><br><span class=\"line\"><span class=\"function\">Username: <span class=\"title\">yang052513</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">password</span>:</span></span><br></pre></td></tr></table></figure>\n\n<p>最后用命令<code>npm publish</code>就可以发布到 npm 上，可以在个人信息的 package 处查看</p>\n<blockquote>\n<p>注: 初次发布的版本为<code>1.0.0</code>, 可以在项目根目录的<code>package.json</code>文件进行更改。更改之后若要发布新的版本必须在<code>package.json</code>文件内更改<code>version</code>之后才能发布</p>\n</blockquote>\n<h2 id=\"导入和使用\"><a href=\"#导入和使用\" class=\"headerlink\" title=\"导入和使用\"></a>导入和使用</h2><p>现在我们就可以用我们的自己的组件库啦。下面用一个<code>react</code> boiler plate 项目来展示如何导入我们自己的库。</p>\n<p>首先在我们新的项目中安装我们建立的 npm 包</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install react-card-demo</span><br></pre></td></tr></table></figure>\n\n<p>然后导入组件</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import &#123;Card&#125; from react-card-demo</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注: 因为我们之前用的<code>typescript</code>来创建的组件，所以要加上<code>{}</code>。如果是<code>jsx</code>, 可以直接<code>import Card from react-card-demo</code></p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"comment\">//导入组件</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Card &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-card-demo`</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">export const App: React.FC = () =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"string\">    return (</span></span><br><span class=\"line\"><span class=\"string\">        &lt;div className=\"app=container\"&gt;</span></span><br><span class=\"line\"><span class=\"string\">              &#123;/* 我们之前给Card组件创建了3个props */&#125;</span></span><br><span class=\"line\"><span class=\"string\">            &lt;Card name=\"Fate Stay Night\" category=\"Gal Game\" isRare=&#123;false&#125;&gt;</span></span><br><span class=\"line\"><span class=\"string\">        &lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">    )</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>"},{"title":"自定义Windows10下的terminal外观","date":"2020-06-15T07:55:13.000Z","cover":"https://i1.wp.com/regroove.ca/wp-content/uploads/2018/08/powershell.png?fit=2560%2C1440&ssl=1","_content":"\n> 之前用 MacOS 时用的 iterm2 非常好用，无论外观自定义还是 git 当前分支的提醒，都比系统自带的 terminal 好看很多。换到 windows 之后，这个原生的界面...不能看！好在微软自己推出了一个 terminal 可以自定义 powershell 和 cmd 的外观，更改完后...真香！\n\n<!-- more -->\n\n## 安装软件\n\n首先我们去 windows microsoft store 搜索`Windows Terminal`，然后点击 install 安装。\n\n完成安装后我们打开 Terminal 应用，按下`Ctrl+,`打开配置文件`settings.json`。\n\n我们主要就在这个文件内更改 powershell 的字体和外观。\n\n## 色板 Color Schemes\n\nhttps://atomcorp.github.io/themes/ 这个网站提供了大量的色彩配色方案。各种主题应有尽有...\n\n我们先挑选一个色调，比如`Batman`。\n\n然后我们点击`Get Theme`, 你的剪贴板内就会复制这个主题的 json 格式\n\n```json\n{\n  \"name\": \"Batman\",\n  \"black\": \"#1b1d1e\",\n  \"red\": \"#e6dc44\",\n  \"green\": \"#c8be46\",\n  \"yellow\": \"#f4fd22\",\n  \"blue\": \"#737174\",\n  \"purple\": \"#747271\",\n  \"cyan\": \"#62605f\",\n  \"white\": \"#c6c5bf\",\n  \"brightBlack\": \"#505354\",\n  \"brightRed\": \"#fff78e\",\n  \"brightGreen\": \"#fff27d\",\n  \"brightYellow\": \"#feed6c\",\n  \"brightBlue\": \"#919495\",\n  \"brightPurple\": \"#9a9a9d\",\n  \"brightCyan\": \"#a3a3a6\",\n  \"brightWhite\": \"#dadbd6\",\n  \"background\": \"#1b1d1e\",\n  \"foreground\": \"#6f6f6f\"\n}\n```\n\n我们再回到 settings.json 文件内，找到`\"schemes\": [ ],`。\n\n这个数组就是用来定义我们主题色。我们把刚刚拷贝的主题粘贴到这个数组内。\n\n```json\n{\n  \"schemes\": [\n    {\n      \"name\": \"Batman\",\n      \"black\": \"#1b1d1e\",\n      \"red\": \"#e6dc44\",\n      \"green\": \"#c8be46\",\n      \"yellow\": \"#f4fd22\",\n      \"blue\": \"#737174\",\n      \"purple\": \"#747271\",\n      \"cyan\": \"#62605f\",\n      \"white\": \"#c6c5bf\",\n      \"brightBlack\": \"#505354\",\n      \"brightRed\": \"#fff78e\",\n      \"brightGreen\": \"#fff27d\",\n      \"brightYellow\": \"#feed6c\",\n      \"brightBlue\": \"#919495\",\n      \"brightPurple\": \"#9a9a9d\",\n      \"brightCyan\": \"#a3a3a6\",\n      \"brightWhite\": \"#dadbd6\",\n      \"background\": \"#1b1d1e\",\n      \"foreground\": \"#6f6f6f\"\n    }\n  ]\n}\n```\n\n然后在`profiles`部分添加该主题名来指定我们的主题\n\n```json\n{\n  \"colorScheme\": \"Batman\"\n}\n```\n\n当然，因为这是一个配置文件，`schemes`里的任何颜色变量时都可以更改的。也就是说你可以在一个主题的基础上进行魔改达到你想要的效果。\n\n这样我们的颜色主题就更改完成了\n\n## 自定义平台\n\n在`setting.json`文件中，我们看下`profiles`这一部分。\n\n每个 profiles 的类都有一个`guid`，比如 Powershell, Cmd, Azure Cloud Shell 他们的 guid 都是不同的。\n\n`profiles`的上方我们可以看到有一个`defaultProfile`，那这个定义的 guid 就是我们默认 Termin 应用打开时启动的终端。\n\n如果我们想用原生 Cmd, 就可以把 cmd 的 guid 复制到`defaultProfile`内。\n\n## 自定义字体，背景\n\n`fontFace`更改字体，字体名可以在 windows 字体库中查看\n`fontSize` 定义字体的大小\n`icon`: 更改应用上方的图标，文件地址为绝对路径\n`backgroundImage`: 更改应用内的背景，图片地址为绝对地址\n`backgroundImageOpacity`: 背景图片的透明度。0 即不显示\n`startingDirector`: 打开应用时的默认路径\n\n```json\n  \"profiles\":\n    [\n        {\n        \"guid\": \"{61c54bbd-c2c6-5271-96e7-009a87ff44bf}\",\n        \"name\": \"Yang's WorkSpace\",\n        \"commandline\": \"powershell.exe\",\n        \"hidden\": false,\n        \"colorScheme\": \"Thayer Bright\",\n        \"fontFace\": \"Monaco\",\n        \"fontSize\": 9,\n        \"cursorShape\": \"underscore\",\n        \"cursorColor\": \"#fff\",\n        \"icon\": \"C:\\\\Users\\\\Yang\\\\Pictures\\\\Footage\\\\logo.png\",\n        \"backgroundImage\": \"C:\\\\Users\\\\Yang\\\\Pictures\\\\Footage\\\\Wallpaper\\\\login-bg.png\",\n        \"backgroundImageOpacity\": 0.2,\n        \"startingDirectory\": \"C:\\\\Users\\\\Yang\\\\Projects\"\n        },\n    ]\n```\n","source":"_posts/09-customize-powershell.md","raw":"---\ntitle: 自定义Windows10下的terminal外观\ndate: 2020-06-15 00:55:13\ntags: ['windows', 'powershell', 'terminal']\ncategories: Articles\ncover: 'https://i1.wp.com/regroove.ca/wp-content/uploads/2018/08/powershell.png?fit=2560%2C1440&ssl=1'\n---\n\n> 之前用 MacOS 时用的 iterm2 非常好用，无论外观自定义还是 git 当前分支的提醒，都比系统自带的 terminal 好看很多。换到 windows 之后，这个原生的界面...不能看！好在微软自己推出了一个 terminal 可以自定义 powershell 和 cmd 的外观，更改完后...真香！\n\n<!-- more -->\n\n## 安装软件\n\n首先我们去 windows microsoft store 搜索`Windows Terminal`，然后点击 install 安装。\n\n完成安装后我们打开 Terminal 应用，按下`Ctrl+,`打开配置文件`settings.json`。\n\n我们主要就在这个文件内更改 powershell 的字体和外观。\n\n## 色板 Color Schemes\n\nhttps://atomcorp.github.io/themes/ 这个网站提供了大量的色彩配色方案。各种主题应有尽有...\n\n我们先挑选一个色调，比如`Batman`。\n\n然后我们点击`Get Theme`, 你的剪贴板内就会复制这个主题的 json 格式\n\n```json\n{\n  \"name\": \"Batman\",\n  \"black\": \"#1b1d1e\",\n  \"red\": \"#e6dc44\",\n  \"green\": \"#c8be46\",\n  \"yellow\": \"#f4fd22\",\n  \"blue\": \"#737174\",\n  \"purple\": \"#747271\",\n  \"cyan\": \"#62605f\",\n  \"white\": \"#c6c5bf\",\n  \"brightBlack\": \"#505354\",\n  \"brightRed\": \"#fff78e\",\n  \"brightGreen\": \"#fff27d\",\n  \"brightYellow\": \"#feed6c\",\n  \"brightBlue\": \"#919495\",\n  \"brightPurple\": \"#9a9a9d\",\n  \"brightCyan\": \"#a3a3a6\",\n  \"brightWhite\": \"#dadbd6\",\n  \"background\": \"#1b1d1e\",\n  \"foreground\": \"#6f6f6f\"\n}\n```\n\n我们再回到 settings.json 文件内，找到`\"schemes\": [ ],`。\n\n这个数组就是用来定义我们主题色。我们把刚刚拷贝的主题粘贴到这个数组内。\n\n```json\n{\n  \"schemes\": [\n    {\n      \"name\": \"Batman\",\n      \"black\": \"#1b1d1e\",\n      \"red\": \"#e6dc44\",\n      \"green\": \"#c8be46\",\n      \"yellow\": \"#f4fd22\",\n      \"blue\": \"#737174\",\n      \"purple\": \"#747271\",\n      \"cyan\": \"#62605f\",\n      \"white\": \"#c6c5bf\",\n      \"brightBlack\": \"#505354\",\n      \"brightRed\": \"#fff78e\",\n      \"brightGreen\": \"#fff27d\",\n      \"brightYellow\": \"#feed6c\",\n      \"brightBlue\": \"#919495\",\n      \"brightPurple\": \"#9a9a9d\",\n      \"brightCyan\": \"#a3a3a6\",\n      \"brightWhite\": \"#dadbd6\",\n      \"background\": \"#1b1d1e\",\n      \"foreground\": \"#6f6f6f\"\n    }\n  ]\n}\n```\n\n然后在`profiles`部分添加该主题名来指定我们的主题\n\n```json\n{\n  \"colorScheme\": \"Batman\"\n}\n```\n\n当然，因为这是一个配置文件，`schemes`里的任何颜色变量时都可以更改的。也就是说你可以在一个主题的基础上进行魔改达到你想要的效果。\n\n这样我们的颜色主题就更改完成了\n\n## 自定义平台\n\n在`setting.json`文件中，我们看下`profiles`这一部分。\n\n每个 profiles 的类都有一个`guid`，比如 Powershell, Cmd, Azure Cloud Shell 他们的 guid 都是不同的。\n\n`profiles`的上方我们可以看到有一个`defaultProfile`，那这个定义的 guid 就是我们默认 Termin 应用打开时启动的终端。\n\n如果我们想用原生 Cmd, 就可以把 cmd 的 guid 复制到`defaultProfile`内。\n\n## 自定义字体，背景\n\n`fontFace`更改字体，字体名可以在 windows 字体库中查看\n`fontSize` 定义字体的大小\n`icon`: 更改应用上方的图标，文件地址为绝对路径\n`backgroundImage`: 更改应用内的背景，图片地址为绝对地址\n`backgroundImageOpacity`: 背景图片的透明度。0 即不显示\n`startingDirector`: 打开应用时的默认路径\n\n```json\n  \"profiles\":\n    [\n        {\n        \"guid\": \"{61c54bbd-c2c6-5271-96e7-009a87ff44bf}\",\n        \"name\": \"Yang's WorkSpace\",\n        \"commandline\": \"powershell.exe\",\n        \"hidden\": false,\n        \"colorScheme\": \"Thayer Bright\",\n        \"fontFace\": \"Monaco\",\n        \"fontSize\": 9,\n        \"cursorShape\": \"underscore\",\n        \"cursorColor\": \"#fff\",\n        \"icon\": \"C:\\\\Users\\\\Yang\\\\Pictures\\\\Footage\\\\logo.png\",\n        \"backgroundImage\": \"C:\\\\Users\\\\Yang\\\\Pictures\\\\Footage\\\\Wallpaper\\\\login-bg.png\",\n        \"backgroundImageOpacity\": 0.2,\n        \"startingDirectory\": \"C:\\\\Users\\\\Yang\\\\Projects\"\n        },\n    ]\n```\n","slug":"09-customize-powershell","published":1,"updated":"2020-06-21T19:57:25.124Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckdnmttd3000krwuibfkthl68","content":"<blockquote>\n<p>之前用 MacOS 时用的 iterm2 非常好用，无论外观自定义还是 git 当前分支的提醒，都比系统自带的 terminal 好看很多。换到 windows 之后，这个原生的界面…不能看！好在微软自己推出了一个 terminal 可以自定义 powershell 和 cmd 的外观，更改完后…真香！</p>\n</blockquote>\n<a id=\"more\"></a>\n\n<h2 id=\"安装软件\"><a href=\"#安装软件\" class=\"headerlink\" title=\"安装软件\"></a>安装软件</h2><p>首先我们去 windows microsoft store 搜索<code>Windows Terminal</code>，然后点击 install 安装。</p>\n<p>完成安装后我们打开 Terminal 应用，按下<code>Ctrl+,</code>打开配置文件<code>settings.json</code>。</p>\n<p>我们主要就在这个文件内更改 powershell 的字体和外观。</p>\n<h2 id=\"色板-Color-Schemes\"><a href=\"#色板-Color-Schemes\" class=\"headerlink\" title=\"色板 Color Schemes\"></a>色板 Color Schemes</h2><p><a href=\"https://atomcorp.github.io/themes/\" target=\"_blank\" rel=\"noopener\">https://atomcorp.github.io/themes/</a> 这个网站提供了大量的色彩配色方案。各种主题应有尽有…</p>\n<p>我们先挑选一个色调，比如<code>Batman</code>。</p>\n<p>然后我们点击<code>Get Theme</code>, 你的剪贴板内就会复制这个主题的 json 格式</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"Batman\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"black\"</span>: <span class=\"string\">\"#1b1d1e\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"red\"</span>: <span class=\"string\">\"#e6dc44\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"green\"</span>: <span class=\"string\">\"#c8be46\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"yellow\"</span>: <span class=\"string\">\"#f4fd22\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"blue\"</span>: <span class=\"string\">\"#737174\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"purple\"</span>: <span class=\"string\">\"#747271\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"cyan\"</span>: <span class=\"string\">\"#62605f\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"white\"</span>: <span class=\"string\">\"#c6c5bf\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"brightBlack\"</span>: <span class=\"string\">\"#505354\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"brightRed\"</span>: <span class=\"string\">\"#fff78e\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"brightGreen\"</span>: <span class=\"string\">\"#fff27d\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"brightYellow\"</span>: <span class=\"string\">\"#feed6c\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"brightBlue\"</span>: <span class=\"string\">\"#919495\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"brightPurple\"</span>: <span class=\"string\">\"#9a9a9d\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"brightCyan\"</span>: <span class=\"string\">\"#a3a3a6\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"brightWhite\"</span>: <span class=\"string\">\"#dadbd6\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"background\"</span>: <span class=\"string\">\"#1b1d1e\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"foreground\"</span>: <span class=\"string\">\"#6f6f6f\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>我们再回到 settings.json 文件内，找到<code>&quot;schemes&quot;: [ ],</code>。</p>\n<p>这个数组就是用来定义我们主题色。我们把刚刚拷贝的主题粘贴到这个数组内。</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"schemes\"</span>: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"Batman\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"black\"</span>: <span class=\"string\">\"#1b1d1e\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"red\"</span>: <span class=\"string\">\"#e6dc44\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"green\"</span>: <span class=\"string\">\"#c8be46\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"yellow\"</span>: <span class=\"string\">\"#f4fd22\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"blue\"</span>: <span class=\"string\">\"#737174\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"purple\"</span>: <span class=\"string\">\"#747271\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"cyan\"</span>: <span class=\"string\">\"#62605f\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"white\"</span>: <span class=\"string\">\"#c6c5bf\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"brightBlack\"</span>: <span class=\"string\">\"#505354\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"brightRed\"</span>: <span class=\"string\">\"#fff78e\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"brightGreen\"</span>: <span class=\"string\">\"#fff27d\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"brightYellow\"</span>: <span class=\"string\">\"#feed6c\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"brightBlue\"</span>: <span class=\"string\">\"#919495\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"brightPurple\"</span>: <span class=\"string\">\"#9a9a9d\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"brightCyan\"</span>: <span class=\"string\">\"#a3a3a6\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"brightWhite\"</span>: <span class=\"string\">\"#dadbd6\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"background\"</span>: <span class=\"string\">\"#1b1d1e\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"foreground\"</span>: <span class=\"string\">\"#6f6f6f\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>然后在<code>profiles</code>部分添加该主题名来指定我们的主题</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"colorScheme\"</span>: <span class=\"string\">\"Batman\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>当然，因为这是一个配置文件，<code>schemes</code>里的任何颜色变量时都可以更改的。也就是说你可以在一个主题的基础上进行魔改达到你想要的效果。</p>\n<p>这样我们的颜色主题就更改完成了</p>\n<h2 id=\"自定义平台\"><a href=\"#自定义平台\" class=\"headerlink\" title=\"自定义平台\"></a>自定义平台</h2><p>在<code>setting.json</code>文件中，我们看下<code>profiles</code>这一部分。</p>\n<p>每个 profiles 的类都有一个<code>guid</code>，比如 Powershell, Cmd, Azure Cloud Shell 他们的 guid 都是不同的。</p>\n<p><code>profiles</code>的上方我们可以看到有一个<code>defaultProfile</code>，那这个定义的 guid 就是我们默认 Termin 应用打开时启动的终端。</p>\n<p>如果我们想用原生 Cmd, 就可以把 cmd 的 guid 复制到<code>defaultProfile</code>内。</p>\n<h2 id=\"自定义字体，背景\"><a href=\"#自定义字体，背景\" class=\"headerlink\" title=\"自定义字体，背景\"></a>自定义字体，背景</h2><p><code>fontFace</code>更改字体，字体名可以在 windows 字体库中查看<br><code>fontSize</code> 定义字体的大小<br><code>icon</code>: 更改应用上方的图标，文件地址为绝对路径<br><code>backgroundImage</code>: 更改应用内的背景，图片地址为绝对地址<br><code>backgroundImageOpacity</code>: 背景图片的透明度。0 即不显示<br><code>startingDirector</code>: 打开应用时的默认路径</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\"profiles\":</span><br><span class=\"line\">  [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">      <span class=\"attr\">\"guid\"</span>: <span class=\"string\">\"&#123;61c54bbd-c2c6-5271-96e7-009a87ff44bf&#125;\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"Yang's WorkSpace\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"commandline\"</span>: <span class=\"string\">\"powershell.exe\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"hidden\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"colorScheme\"</span>: <span class=\"string\">\"Thayer Bright\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"fontFace\"</span>: <span class=\"string\">\"Monaco\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"fontSize\"</span>: <span class=\"number\">9</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"cursorShape\"</span>: <span class=\"string\">\"underscore\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"cursorColor\"</span>: <span class=\"string\">\"#fff\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"icon\"</span>: <span class=\"string\">\"C:\\\\Users\\\\Yang\\\\Pictures\\\\Footage\\\\logo.png\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"backgroundImage\"</span>: <span class=\"string\">\"C:\\\\Users\\\\Yang\\\\Pictures\\\\Footage\\\\Wallpaper\\\\login-bg.png\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"backgroundImageOpacity\"</span>: <span class=\"number\">0.2</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"startingDirectory\"</span>: <span class=\"string\">\"C:\\\\Users\\\\Yang\\\\Projects\"</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">  ]</span><br></pre></td></tr></table></figure>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"<blockquote>\n<p>之前用 MacOS 时用的 iterm2 非常好用，无论外观自定义还是 git 当前分支的提醒，都比系统自带的 terminal 好看很多。换到 windows 之后，这个原生的界面…不能看！好在微软自己推出了一个 terminal 可以自定义 powershell 和 cmd 的外观，更改完后…真香！</p>\n</blockquote>","more":"<h2 id=\"安装软件\"><a href=\"#安装软件\" class=\"headerlink\" title=\"安装软件\"></a>安装软件</h2><p>首先我们去 windows microsoft store 搜索<code>Windows Terminal</code>，然后点击 install 安装。</p>\n<p>完成安装后我们打开 Terminal 应用，按下<code>Ctrl+,</code>打开配置文件<code>settings.json</code>。</p>\n<p>我们主要就在这个文件内更改 powershell 的字体和外观。</p>\n<h2 id=\"色板-Color-Schemes\"><a href=\"#色板-Color-Schemes\" class=\"headerlink\" title=\"色板 Color Schemes\"></a>色板 Color Schemes</h2><p><a href=\"https://atomcorp.github.io/themes/\" target=\"_blank\" rel=\"noopener\">https://atomcorp.github.io/themes/</a> 这个网站提供了大量的色彩配色方案。各种主题应有尽有…</p>\n<p>我们先挑选一个色调，比如<code>Batman</code>。</p>\n<p>然后我们点击<code>Get Theme</code>, 你的剪贴板内就会复制这个主题的 json 格式</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"Batman\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"black\"</span>: <span class=\"string\">\"#1b1d1e\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"red\"</span>: <span class=\"string\">\"#e6dc44\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"green\"</span>: <span class=\"string\">\"#c8be46\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"yellow\"</span>: <span class=\"string\">\"#f4fd22\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"blue\"</span>: <span class=\"string\">\"#737174\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"purple\"</span>: <span class=\"string\">\"#747271\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"cyan\"</span>: <span class=\"string\">\"#62605f\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"white\"</span>: <span class=\"string\">\"#c6c5bf\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"brightBlack\"</span>: <span class=\"string\">\"#505354\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"brightRed\"</span>: <span class=\"string\">\"#fff78e\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"brightGreen\"</span>: <span class=\"string\">\"#fff27d\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"brightYellow\"</span>: <span class=\"string\">\"#feed6c\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"brightBlue\"</span>: <span class=\"string\">\"#919495\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"brightPurple\"</span>: <span class=\"string\">\"#9a9a9d\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"brightCyan\"</span>: <span class=\"string\">\"#a3a3a6\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"brightWhite\"</span>: <span class=\"string\">\"#dadbd6\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"background\"</span>: <span class=\"string\">\"#1b1d1e\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"foreground\"</span>: <span class=\"string\">\"#6f6f6f\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>我们再回到 settings.json 文件内，找到<code>&quot;schemes&quot;: [ ],</code>。</p>\n<p>这个数组就是用来定义我们主题色。我们把刚刚拷贝的主题粘贴到这个数组内。</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"schemes\"</span>: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"Batman\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"black\"</span>: <span class=\"string\">\"#1b1d1e\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"red\"</span>: <span class=\"string\">\"#e6dc44\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"green\"</span>: <span class=\"string\">\"#c8be46\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"yellow\"</span>: <span class=\"string\">\"#f4fd22\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"blue\"</span>: <span class=\"string\">\"#737174\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"purple\"</span>: <span class=\"string\">\"#747271\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"cyan\"</span>: <span class=\"string\">\"#62605f\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"white\"</span>: <span class=\"string\">\"#c6c5bf\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"brightBlack\"</span>: <span class=\"string\">\"#505354\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"brightRed\"</span>: <span class=\"string\">\"#fff78e\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"brightGreen\"</span>: <span class=\"string\">\"#fff27d\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"brightYellow\"</span>: <span class=\"string\">\"#feed6c\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"brightBlue\"</span>: <span class=\"string\">\"#919495\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"brightPurple\"</span>: <span class=\"string\">\"#9a9a9d\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"brightCyan\"</span>: <span class=\"string\">\"#a3a3a6\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"brightWhite\"</span>: <span class=\"string\">\"#dadbd6\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"background\"</span>: <span class=\"string\">\"#1b1d1e\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"foreground\"</span>: <span class=\"string\">\"#6f6f6f\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>然后在<code>profiles</code>部分添加该主题名来指定我们的主题</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"colorScheme\"</span>: <span class=\"string\">\"Batman\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>当然，因为这是一个配置文件，<code>schemes</code>里的任何颜色变量时都可以更改的。也就是说你可以在一个主题的基础上进行魔改达到你想要的效果。</p>\n<p>这样我们的颜色主题就更改完成了</p>\n<h2 id=\"自定义平台\"><a href=\"#自定义平台\" class=\"headerlink\" title=\"自定义平台\"></a>自定义平台</h2><p>在<code>setting.json</code>文件中，我们看下<code>profiles</code>这一部分。</p>\n<p>每个 profiles 的类都有一个<code>guid</code>，比如 Powershell, Cmd, Azure Cloud Shell 他们的 guid 都是不同的。</p>\n<p><code>profiles</code>的上方我们可以看到有一个<code>defaultProfile</code>，那这个定义的 guid 就是我们默认 Termin 应用打开时启动的终端。</p>\n<p>如果我们想用原生 Cmd, 就可以把 cmd 的 guid 复制到<code>defaultProfile</code>内。</p>\n<h2 id=\"自定义字体，背景\"><a href=\"#自定义字体，背景\" class=\"headerlink\" title=\"自定义字体，背景\"></a>自定义字体，背景</h2><p><code>fontFace</code>更改字体，字体名可以在 windows 字体库中查看<br><code>fontSize</code> 定义字体的大小<br><code>icon</code>: 更改应用上方的图标，文件地址为绝对路径<br><code>backgroundImage</code>: 更改应用内的背景，图片地址为绝对地址<br><code>backgroundImageOpacity</code>: 背景图片的透明度。0 即不显示<br><code>startingDirector</code>: 打开应用时的默认路径</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\"profiles\":</span><br><span class=\"line\">  [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">      <span class=\"attr\">\"guid\"</span>: <span class=\"string\">\"&#123;61c54bbd-c2c6-5271-96e7-009a87ff44bf&#125;\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"Yang's WorkSpace\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"commandline\"</span>: <span class=\"string\">\"powershell.exe\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"hidden\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"colorScheme\"</span>: <span class=\"string\">\"Thayer Bright\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"fontFace\"</span>: <span class=\"string\">\"Monaco\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"fontSize\"</span>: <span class=\"number\">9</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"cursorShape\"</span>: <span class=\"string\">\"underscore\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"cursorColor\"</span>: <span class=\"string\">\"#fff\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"icon\"</span>: <span class=\"string\">\"C:\\\\Users\\\\Yang\\\\Pictures\\\\Footage\\\\logo.png\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"backgroundImage\"</span>: <span class=\"string\">\"C:\\\\Users\\\\Yang\\\\Pictures\\\\Footage\\\\Wallpaper\\\\login-bg.png\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"backgroundImageOpacity\"</span>: <span class=\"number\">0.2</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"startingDirectory\"</span>: <span class=\"string\">\"C:\\\\Users\\\\Yang\\\\Projects\"</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">  ]</span><br></pre></td></tr></table></figure>"},{"title":"ES6与Javascrpit的对比","date":"2020-06-18T05:55:19.000Z","comments":0,"cover":"https://miro.medium.com/max/840/0*Vbp13RW_9HpRqH6E.png","_content":"\n> 在之前学 React 的过程中渐渐的从 js 写法转变为 es6 写法，不过都是学到什么用么。于是今天重新来学习一下 ES6 的新特性以及对比跟 javascript 的区别\n\n<!-- more -->\n\n## 简介\n\n引用维基百科的定义\n\n> ECMAScript is a scripting-language specification standardized by Ecma International. It was created to standardize JavaScript to help foster multiple independent implementations.\n\n简单来说，ES6 就是在原 javascript 的基础上创建了新的语法和特性来让代码更易读和简介。\n\n## Variables\n\n**Javascript**\nES6 之前我们声明变量用 var, 但是 var 我们可以重复声明同一个变量。\n\n比如\n\n```js\nvar name = 'Yang'\nvar name = 'Jason'\n\nfor (var i = 0; i < 5; i++) {\n  console.log(i)\n  //0, 1, 2, 3, 4\n}\n\nconsole.log(i) //0, 1, 2, 3, 4 不是block scoping, 可能会有未知错误\n```\n\n**ES6**\nES6 中我们可以用`let`和`const`来声明变量\n\n- let 和 const 都是 block scoping: 在`{}`中声明的 let 和 const 只能在`{}`中 access\n- let 的变量可以重新定义\n- const 的变量声明后不可以更改\n\n```js\nlet name = 'Yang'\nname = 'Nathan' //ok\n\nconst title = 'ES6 Notes'\ntitle = 'Cant change const variable' //error: variable has already been declared\n\nfor (let i = 0; i < 5; i++) {\n  console.log(i)\n  //0, 1, 2, 3, 4\n}\n\nconsole.log(i) //error\n```\n\n## String Concatenation\n\n**Javascript**\n较早的 Javascript 中我们只需要用`+`就可以实现 string concatenation。\n\n```js\nvar name = 'Yang'\nvar age = 23\nconsole.log('My name is' + name + ' and my age is' + age)\n```\n\n**ES6**\nES6 中我们可以用 template literal。比`+`更方便。我们只需要用``来包括内容，用\\${}来声明变量即可。\n\n```js\nconst name = 'Yang'\nconst age = '23'\nconsole.log(`My name is ${name} and my age is ${age}`)\n```\n\n## Object Deconstruction\n\n**Javascript**\nOld Javascript 我们用`.`来获取对象的变量。\n\n```js\nvar profile = {\n  name: 'Yang',\n  age: 23,\n  avatar: 'img/user.jpg',\n}\n\nconsole.log(profile.name, profile.age, profile.avatar)\n```\n\n**ES6**\nES6 中我们可以使用`{}`destruct 对象，然后可以直接引用变量名。\n\n```js\nconst profile = {\n  name: 'Yang',\n  age: 23,\n  avatar: 'img/user/jpg',\n}\n\nconst { name, age, avatar } = profile\nconsole.log(name, age, avatar)\n```\n\n## Arrow Functions\n\n**Javascript**\n\n```js\nfunction greeting() {\n  console.log('Hello javascript')\n}\n\nvar greeting = function () {\n  console.log('Hello javascript')\n}\n```\n\n**ES6**\n\n```js\nconst greeting = () => {\n  console.log('Hello javascript')\n}\n\n//如果只有一个parameter 可以省略()\nconst sayHello = name => {\n  console.log(`Hello ${name}`)\n}\n\n//return statement只有一行时可以省略{}\nconst sayHello = name => console.log(`Hello ${name}`)\n```\n\n## Default Parameters\n\n**Javascript**\n\n```js\nfunction addOperation(numOne, numTwo) {\n  //如果没有input将设置默认值为1\n  var oneDefault = numOne || 1\n  var twoDefault = numTwo || 1\n\n  return oneDefault + twoDefault\n}\n```\n\n**ES6**\n\n```js\nconst addOperation = (numOne = 1, numTwo = 1) => {\n  return numOne + numTwo\n}\n\naddOperation(13) //14\n```\n\n## Array Functions\n\nES6 中引入了 forEach, map 和 filter。forEach 对当前数组进行操作。map 和 filter 拷贝原数组在其基础上进行更改\n\n**ES6**\n\n```js\nconst animeList = ['fate zero', 'fate stay night', 'haikyuu', 'clannad']\n\n//index返回数组内每个元素的索引值\nanimeList.forEach((anime, index) => {\n  console.log(anime, index)\n})\n\n//map创建一个新的数组\nconst myAnimeList = animeList.map(myAnime => return myAnime.includes('fate')\n)\n\n//假设每个动画都有自己的评分\nconst myFavouriteList = animeList.filter(item => item.rank >= 9.3)\n```\n\n## Constructor Functions and Classes\n\n**ES6**\n\n```js\nclass Anime {\n    constructor(name, year, rank) {\n        this.name = name\n        this.year = year\n        this.rank = rank\n    }\n    const animeInfo = () => {\n        console.log(`The anime is ${this.name}, and made in ${this.year}。`)\n    }\n}\n\nconst fate = new Anime('Fate Stay Night', 2015, 9.5)\n\nconsole.log(fate.animeInfo())\n\n//继承 extends\nclass AnimeYuri extends Anime {\n    constructor(name, year, rank, isForChild) {\n        //从父级anime中继承name props\n        super(name, year, rank)\n        this.isForChild = isForChild\n    }\n}\n\nconst yuriyuri = new AnimeYuri('Yuriyuri', 2017, 9.9, true)\n```\n\n## Promise\n\n### Using Promise: fetch()\n\n**ES6**\n\n```js\nconst url = 'https://theapiurl/'\n\nfetch(url)\n  .then(response => response.json())\n  .then(data => console.log(data))\n  .catch(error => console.log(error))\n```\n","source":"_posts/11-es6-notes.md","raw":"---\ntitle: ES6与Javascrpit的对比\ndate: 2020-06-17 22:55:19\ntags: ['javascript', 'es6', 'notes']\ncategories: 笔记\ncomments: false\ncover: 'https://miro.medium.com/max/840/0*Vbp13RW_9HpRqH6E.png'\n---\n\n> 在之前学 React 的过程中渐渐的从 js 写法转变为 es6 写法，不过都是学到什么用么。于是今天重新来学习一下 ES6 的新特性以及对比跟 javascript 的区别\n\n<!-- more -->\n\n## 简介\n\n引用维基百科的定义\n\n> ECMAScript is a scripting-language specification standardized by Ecma International. It was created to standardize JavaScript to help foster multiple independent implementations.\n\n简单来说，ES6 就是在原 javascript 的基础上创建了新的语法和特性来让代码更易读和简介。\n\n## Variables\n\n**Javascript**\nES6 之前我们声明变量用 var, 但是 var 我们可以重复声明同一个变量。\n\n比如\n\n```js\nvar name = 'Yang'\nvar name = 'Jason'\n\nfor (var i = 0; i < 5; i++) {\n  console.log(i)\n  //0, 1, 2, 3, 4\n}\n\nconsole.log(i) //0, 1, 2, 3, 4 不是block scoping, 可能会有未知错误\n```\n\n**ES6**\nES6 中我们可以用`let`和`const`来声明变量\n\n- let 和 const 都是 block scoping: 在`{}`中声明的 let 和 const 只能在`{}`中 access\n- let 的变量可以重新定义\n- const 的变量声明后不可以更改\n\n```js\nlet name = 'Yang'\nname = 'Nathan' //ok\n\nconst title = 'ES6 Notes'\ntitle = 'Cant change const variable' //error: variable has already been declared\n\nfor (let i = 0; i < 5; i++) {\n  console.log(i)\n  //0, 1, 2, 3, 4\n}\n\nconsole.log(i) //error\n```\n\n## String Concatenation\n\n**Javascript**\n较早的 Javascript 中我们只需要用`+`就可以实现 string concatenation。\n\n```js\nvar name = 'Yang'\nvar age = 23\nconsole.log('My name is' + name + ' and my age is' + age)\n```\n\n**ES6**\nES6 中我们可以用 template literal。比`+`更方便。我们只需要用``来包括内容，用\\${}来声明变量即可。\n\n```js\nconst name = 'Yang'\nconst age = '23'\nconsole.log(`My name is ${name} and my age is ${age}`)\n```\n\n## Object Deconstruction\n\n**Javascript**\nOld Javascript 我们用`.`来获取对象的变量。\n\n```js\nvar profile = {\n  name: 'Yang',\n  age: 23,\n  avatar: 'img/user.jpg',\n}\n\nconsole.log(profile.name, profile.age, profile.avatar)\n```\n\n**ES6**\nES6 中我们可以使用`{}`destruct 对象，然后可以直接引用变量名。\n\n```js\nconst profile = {\n  name: 'Yang',\n  age: 23,\n  avatar: 'img/user/jpg',\n}\n\nconst { name, age, avatar } = profile\nconsole.log(name, age, avatar)\n```\n\n## Arrow Functions\n\n**Javascript**\n\n```js\nfunction greeting() {\n  console.log('Hello javascript')\n}\n\nvar greeting = function () {\n  console.log('Hello javascript')\n}\n```\n\n**ES6**\n\n```js\nconst greeting = () => {\n  console.log('Hello javascript')\n}\n\n//如果只有一个parameter 可以省略()\nconst sayHello = name => {\n  console.log(`Hello ${name}`)\n}\n\n//return statement只有一行时可以省略{}\nconst sayHello = name => console.log(`Hello ${name}`)\n```\n\n## Default Parameters\n\n**Javascript**\n\n```js\nfunction addOperation(numOne, numTwo) {\n  //如果没有input将设置默认值为1\n  var oneDefault = numOne || 1\n  var twoDefault = numTwo || 1\n\n  return oneDefault + twoDefault\n}\n```\n\n**ES6**\n\n```js\nconst addOperation = (numOne = 1, numTwo = 1) => {\n  return numOne + numTwo\n}\n\naddOperation(13) //14\n```\n\n## Array Functions\n\nES6 中引入了 forEach, map 和 filter。forEach 对当前数组进行操作。map 和 filter 拷贝原数组在其基础上进行更改\n\n**ES6**\n\n```js\nconst animeList = ['fate zero', 'fate stay night', 'haikyuu', 'clannad']\n\n//index返回数组内每个元素的索引值\nanimeList.forEach((anime, index) => {\n  console.log(anime, index)\n})\n\n//map创建一个新的数组\nconst myAnimeList = animeList.map(myAnime => return myAnime.includes('fate')\n)\n\n//假设每个动画都有自己的评分\nconst myFavouriteList = animeList.filter(item => item.rank >= 9.3)\n```\n\n## Constructor Functions and Classes\n\n**ES6**\n\n```js\nclass Anime {\n    constructor(name, year, rank) {\n        this.name = name\n        this.year = year\n        this.rank = rank\n    }\n    const animeInfo = () => {\n        console.log(`The anime is ${this.name}, and made in ${this.year}。`)\n    }\n}\n\nconst fate = new Anime('Fate Stay Night', 2015, 9.5)\n\nconsole.log(fate.animeInfo())\n\n//继承 extends\nclass AnimeYuri extends Anime {\n    constructor(name, year, rank, isForChild) {\n        //从父级anime中继承name props\n        super(name, year, rank)\n        this.isForChild = isForChild\n    }\n}\n\nconst yuriyuri = new AnimeYuri('Yuriyuri', 2017, 9.9, true)\n```\n\n## Promise\n\n### Using Promise: fetch()\n\n**ES6**\n\n```js\nconst url = 'https://theapiurl/'\n\nfetch(url)\n  .then(response => response.json())\n  .then(data => console.log(data))\n  .catch(error => console.log(error))\n```\n","slug":"11-es6-notes","published":1,"updated":"2020-06-20T07:08:14.125Z","layout":"post","photos":[],"link":"","_id":"ckdnmttd5000orwuifaz58tp3","content":"<blockquote>\n<p>在之前学 React 的过程中渐渐的从 js 写法转变为 es6 写法，不过都是学到什么用么。于是今天重新来学习一下 ES6 的新特性以及对比跟 javascript 的区别</p>\n</blockquote>\n<a id=\"more\"></a>\n\n<h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><p>引用维基百科的定义</p>\n<blockquote>\n<p>ECMAScript is a scripting-language specification standardized by Ecma International. It was created to standardize JavaScript to help foster multiple independent implementations.</p>\n</blockquote>\n<p>简单来说，ES6 就是在原 javascript 的基础上创建了新的语法和特性来让代码更易读和简介。</p>\n<h2 id=\"Variables\"><a href=\"#Variables\" class=\"headerlink\" title=\"Variables\"></a>Variables</h2><p><strong>Javascript</strong><br>ES6 之前我们声明变量用 var, 但是 var 我们可以重复声明同一个变量。</p>\n<p>比如</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">'Yang'</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">'Jason'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">  <span class=\"comment\">//0, 1, 2, 3, 4</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(i) <span class=\"comment\">//0, 1, 2, 3, 4 不是block scoping, 可能会有未知错误</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>ES6</strong><br>ES6 中我们可以用<code>let</code>和<code>const</code>来声明变量</p>\n<ul>\n<li>let 和 const 都是 block scoping: 在<code>{}</code>中声明的 let 和 const 只能在<code>{}</code>中 access</li>\n<li>let 的变量可以重新定义</li>\n<li>const 的变量声明后不可以更改</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> name = <span class=\"string\">'Yang'</span></span><br><span class=\"line\">name = <span class=\"string\">'Nathan'</span> <span class=\"comment\">//ok</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> title = <span class=\"string\">'ES6 Notes'</span></span><br><span class=\"line\">title = <span class=\"string\">'Cant change const variable'</span> <span class=\"comment\">//error: variable has already been declared</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">  <span class=\"comment\">//0, 1, 2, 3, 4</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(i) <span class=\"comment\">//error</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"String-Concatenation\"><a href=\"#String-Concatenation\" class=\"headerlink\" title=\"String Concatenation\"></a>String Concatenation</h2><p><strong>Javascript</strong><br>较早的 Javascript 中我们只需要用<code>+</code>就可以实现 string concatenation。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">'Yang'</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> age = <span class=\"number\">23</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'My name is'</span> + name + <span class=\"string\">' and my age is'</span> + age)</span><br></pre></td></tr></table></figure>\n\n<p><strong>ES6</strong><br>ES6 中我们可以用 template literal。比<code>+</code>更方便。我们只需要用``来包括内容，用${}来声明变量即可。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> name = <span class=\"string\">'Yang'</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> age = <span class=\"string\">'23'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">`My name is <span class=\"subst\">$&#123;name&#125;</span> and my age is <span class=\"subst\">$&#123;age&#125;</span>`</span>)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Object-Deconstruction\"><a href=\"#Object-Deconstruction\" class=\"headerlink\" title=\"Object Deconstruction\"></a>Object Deconstruction</h2><p><strong>Javascript</strong><br>Old Javascript 我们用<code>.</code>来获取对象的变量。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> profile = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">'Yang'</span>,</span><br><span class=\"line\">  age: <span class=\"number\">23</span>,</span><br><span class=\"line\">  avatar: <span class=\"string\">'img/user.jpg'</span>,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(profile.name, profile.age, profile.avatar)</span><br></pre></td></tr></table></figure>\n\n<p><strong>ES6</strong><br>ES6 中我们可以使用<code>{}</code>destruct 对象，然后可以直接引用变量名。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> profile = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">'Yang'</span>,</span><br><span class=\"line\">  age: <span class=\"number\">23</span>,</span><br><span class=\"line\">  avatar: <span class=\"string\">'img/user/jpg'</span>,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; name, age, avatar &#125; = profile</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(name, age, avatar)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Arrow-Functions\"><a href=\"#Arrow-Functions\" class=\"headerlink\" title=\"Arrow Functions\"></a>Arrow Functions</h2><p><strong>Javascript</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">greeting</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello javascript'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> greeting = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello javascript'</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>ES6</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> greeting = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello javascript'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//如果只有一个parameter 可以省略()</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> sayHello = <span class=\"function\"><span class=\"params\">name</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`Hello <span class=\"subst\">$&#123;name&#125;</span>`</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//return statement只有一行时可以省略&#123;&#125;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> sayHello = <span class=\"function\"><span class=\"params\">name</span> =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">`Hello <span class=\"subst\">$&#123;name&#125;</span>`</span>)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Default-Parameters\"><a href=\"#Default-Parameters\" class=\"headerlink\" title=\"Default Parameters\"></a>Default Parameters</h2><p><strong>Javascript</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addOperation</span>(<span class=\"params\">numOne, numTwo</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">//如果没有input将设置默认值为1</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> oneDefault = numOne || <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> twoDefault = numTwo || <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> oneDefault + twoDefault</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>ES6</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> addOperation = <span class=\"function\">(<span class=\"params\">numOne = <span class=\"number\">1</span>, numTwo = <span class=\"number\">1</span></span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> numOne + numTwo</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">addOperation(<span class=\"number\">13</span>) <span class=\"comment\">//14</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Array-Functions\"><a href=\"#Array-Functions\" class=\"headerlink\" title=\"Array Functions\"></a>Array Functions</h2><p>ES6 中引入了 forEach, map 和 filter。forEach 对当前数组进行操作。map 和 filter 拷贝原数组在其基础上进行更改</p>\n<p><strong>ES6</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> animeList = [<span class=\"string\">'fate zero'</span>, <span class=\"string\">'fate stay night'</span>, <span class=\"string\">'haikyuu'</span>, <span class=\"string\">'clannad'</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//index返回数组内每个元素的索引值</span></span><br><span class=\"line\">animeList.forEach(<span class=\"function\">(<span class=\"params\">anime, index</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(anime, index)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//map创建一个新的数组</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> myAnimeList = animeList.map(<span class=\"function\"><span class=\"params\">myAnime</span> =&gt;</span> <span class=\"keyword\">return</span> myAnime.includes(<span class=\"string\">'fate'</span>)</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//假设每个动画都有自己的评分</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> myFavouriteList = animeList.filter(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> item.rank &gt;= <span class=\"number\">9.3</span>)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Constructor-Functions-and-Classes\"><a href=\"#Constructor-Functions-and-Classes\" class=\"headerlink\" title=\"Constructor Functions and Classes\"></a>Constructor Functions and Classes</h2><p><strong>ES6</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Anime</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>(name, year, rank) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.year = year</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.rank = rank</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> animeInfo = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">`The anime is <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.name&#125;</span>, and made in <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.year&#125;</span>。`</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> fate = <span class=\"keyword\">new</span> Anime(<span class=\"string\">'Fate Stay Night'</span>, <span class=\"number\">2015</span>, <span class=\"number\">9.5</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(fate.animeInfo())</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//继承 extends</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AnimeYuri</span> <span class=\"keyword\">extends</span> <span class=\"title\">Anime</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>(name, year, rank, isForChild) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//从父级anime中继承name props</span></span><br><span class=\"line\">        <span class=\"keyword\">super</span>(name, year, rank)</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.isForChild = isForChild</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> yuriyuri = <span class=\"keyword\">new</span> AnimeYuri(<span class=\"string\">'Yuriyuri'</span>, <span class=\"number\">2017</span>, <span class=\"number\">9.9</span>, <span class=\"literal\">true</span>)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Promise\"><a href=\"#Promise\" class=\"headerlink\" title=\"Promise\"></a>Promise</h2><h3 id=\"Using-Promise-fetch\"><a href=\"#Using-Promise-fetch\" class=\"headerlink\" title=\"Using Promise: fetch()\"></a>Using Promise: fetch()</h3><p><strong>ES6</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> url = <span class=\"string\">'https://theapiurl/'</span></span><br><span class=\"line\"></span><br><span class=\"line\">fetch(url)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> response.json())</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> <span class=\"built_in\">console</span>.log(data))</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">error</span> =&gt;</span> <span class=\"built_in\">console</span>.log(error))</span><br></pre></td></tr></table></figure>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"<blockquote>\n<p>在之前学 React 的过程中渐渐的从 js 写法转变为 es6 写法，不过都是学到什么用么。于是今天重新来学习一下 ES6 的新特性以及对比跟 javascript 的区别</p>\n</blockquote>","more":"<h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><p>引用维基百科的定义</p>\n<blockquote>\n<p>ECMAScript is a scripting-language specification standardized by Ecma International. It was created to standardize JavaScript to help foster multiple independent implementations.</p>\n</blockquote>\n<p>简单来说，ES6 就是在原 javascript 的基础上创建了新的语法和特性来让代码更易读和简介。</p>\n<h2 id=\"Variables\"><a href=\"#Variables\" class=\"headerlink\" title=\"Variables\"></a>Variables</h2><p><strong>Javascript</strong><br>ES6 之前我们声明变量用 var, 但是 var 我们可以重复声明同一个变量。</p>\n<p>比如</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">'Yang'</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">'Jason'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">  <span class=\"comment\">//0, 1, 2, 3, 4</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(i) <span class=\"comment\">//0, 1, 2, 3, 4 不是block scoping, 可能会有未知错误</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>ES6</strong><br>ES6 中我们可以用<code>let</code>和<code>const</code>来声明变量</p>\n<ul>\n<li>let 和 const 都是 block scoping: 在<code>{}</code>中声明的 let 和 const 只能在<code>{}</code>中 access</li>\n<li>let 的变量可以重新定义</li>\n<li>const 的变量声明后不可以更改</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> name = <span class=\"string\">'Yang'</span></span><br><span class=\"line\">name = <span class=\"string\">'Nathan'</span> <span class=\"comment\">//ok</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> title = <span class=\"string\">'ES6 Notes'</span></span><br><span class=\"line\">title = <span class=\"string\">'Cant change const variable'</span> <span class=\"comment\">//error: variable has already been declared</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">  <span class=\"comment\">//0, 1, 2, 3, 4</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(i) <span class=\"comment\">//error</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"String-Concatenation\"><a href=\"#String-Concatenation\" class=\"headerlink\" title=\"String Concatenation\"></a>String Concatenation</h2><p><strong>Javascript</strong><br>较早的 Javascript 中我们只需要用<code>+</code>就可以实现 string concatenation。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">'Yang'</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> age = <span class=\"number\">23</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'My name is'</span> + name + <span class=\"string\">' and my age is'</span> + age)</span><br></pre></td></tr></table></figure>\n\n<p><strong>ES6</strong><br>ES6 中我们可以用 template literal。比<code>+</code>更方便。我们只需要用``来包括内容，用${}来声明变量即可。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> name = <span class=\"string\">'Yang'</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> age = <span class=\"string\">'23'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">`My name is <span class=\"subst\">$&#123;name&#125;</span> and my age is <span class=\"subst\">$&#123;age&#125;</span>`</span>)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Object-Deconstruction\"><a href=\"#Object-Deconstruction\" class=\"headerlink\" title=\"Object Deconstruction\"></a>Object Deconstruction</h2><p><strong>Javascript</strong><br>Old Javascript 我们用<code>.</code>来获取对象的变量。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> profile = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">'Yang'</span>,</span><br><span class=\"line\">  age: <span class=\"number\">23</span>,</span><br><span class=\"line\">  avatar: <span class=\"string\">'img/user.jpg'</span>,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(profile.name, profile.age, profile.avatar)</span><br></pre></td></tr></table></figure>\n\n<p><strong>ES6</strong><br>ES6 中我们可以使用<code>{}</code>destruct 对象，然后可以直接引用变量名。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> profile = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">'Yang'</span>,</span><br><span class=\"line\">  age: <span class=\"number\">23</span>,</span><br><span class=\"line\">  avatar: <span class=\"string\">'img/user/jpg'</span>,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; name, age, avatar &#125; = profile</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(name, age, avatar)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Arrow-Functions\"><a href=\"#Arrow-Functions\" class=\"headerlink\" title=\"Arrow Functions\"></a>Arrow Functions</h2><p><strong>Javascript</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">greeting</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello javascript'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> greeting = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello javascript'</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>ES6</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> greeting = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello javascript'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//如果只有一个parameter 可以省略()</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> sayHello = <span class=\"function\"><span class=\"params\">name</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`Hello <span class=\"subst\">$&#123;name&#125;</span>`</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//return statement只有一行时可以省略&#123;&#125;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> sayHello = <span class=\"function\"><span class=\"params\">name</span> =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">`Hello <span class=\"subst\">$&#123;name&#125;</span>`</span>)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Default-Parameters\"><a href=\"#Default-Parameters\" class=\"headerlink\" title=\"Default Parameters\"></a>Default Parameters</h2><p><strong>Javascript</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">addOperation</span>(<span class=\"params\">numOne, numTwo</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">//如果没有input将设置默认值为1</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> oneDefault = numOne || <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> twoDefault = numTwo || <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> oneDefault + twoDefault</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>ES6</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> addOperation = <span class=\"function\">(<span class=\"params\">numOne = <span class=\"number\">1</span>, numTwo = <span class=\"number\">1</span></span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> numOne + numTwo</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">addOperation(<span class=\"number\">13</span>) <span class=\"comment\">//14</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Array-Functions\"><a href=\"#Array-Functions\" class=\"headerlink\" title=\"Array Functions\"></a>Array Functions</h2><p>ES6 中引入了 forEach, map 和 filter。forEach 对当前数组进行操作。map 和 filter 拷贝原数组在其基础上进行更改</p>\n<p><strong>ES6</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> animeList = [<span class=\"string\">'fate zero'</span>, <span class=\"string\">'fate stay night'</span>, <span class=\"string\">'haikyuu'</span>, <span class=\"string\">'clannad'</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//index返回数组内每个元素的索引值</span></span><br><span class=\"line\">animeList.forEach(<span class=\"function\">(<span class=\"params\">anime, index</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(anime, index)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//map创建一个新的数组</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> myAnimeList = animeList.map(<span class=\"function\"><span class=\"params\">myAnime</span> =&gt;</span> <span class=\"keyword\">return</span> myAnime.includes(<span class=\"string\">'fate'</span>)</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//假设每个动画都有自己的评分</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> myFavouriteList = animeList.filter(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> item.rank &gt;= <span class=\"number\">9.3</span>)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Constructor-Functions-and-Classes\"><a href=\"#Constructor-Functions-and-Classes\" class=\"headerlink\" title=\"Constructor Functions and Classes\"></a>Constructor Functions and Classes</h2><p><strong>ES6</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Anime</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>(name, year, rank) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.year = year</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.rank = rank</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> animeInfo = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">`The anime is <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.name&#125;</span>, and made in <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.year&#125;</span>。`</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> fate = <span class=\"keyword\">new</span> Anime(<span class=\"string\">'Fate Stay Night'</span>, <span class=\"number\">2015</span>, <span class=\"number\">9.5</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(fate.animeInfo())</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//继承 extends</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AnimeYuri</span> <span class=\"keyword\">extends</span> <span class=\"title\">Anime</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>(name, year, rank, isForChild) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//从父级anime中继承name props</span></span><br><span class=\"line\">        <span class=\"keyword\">super</span>(name, year, rank)</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.isForChild = isForChild</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> yuriyuri = <span class=\"keyword\">new</span> AnimeYuri(<span class=\"string\">'Yuriyuri'</span>, <span class=\"number\">2017</span>, <span class=\"number\">9.9</span>, <span class=\"literal\">true</span>)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Promise\"><a href=\"#Promise\" class=\"headerlink\" title=\"Promise\"></a>Promise</h2><h3 id=\"Using-Promise-fetch\"><a href=\"#Using-Promise-fetch\" class=\"headerlink\" title=\"Using Promise: fetch()\"></a>Using Promise: fetch()</h3><p><strong>ES6</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> url = <span class=\"string\">'https://theapiurl/'</span></span><br><span class=\"line\"></span><br><span class=\"line\">fetch(url)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> response.json())</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> <span class=\"built_in\">console</span>.log(data))</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">error</span> =&gt;</span> <span class=\"built_in\">console</span>.log(error))</span><br></pre></td></tr></table></figure>"},{"title":"健力课表长期短期规划浅谈以及个人经验","date":"2020-06-19T00:55:19.000Z","cover":"https://physiqz.com/wp-content/uploads/2018/04/Powerlifting-Gear-and-Equipment-Guide.jpg","_content":"\n> 在刚接触力量举的时候，我一直以为计划加饮食是能帮助我提升最大的因素。其实不然，在去过日本关西前三的健力馆，并有幸跟世界卧推冠军 Kodoma Daiki 交流后，我意识到训练中个人意识起到了更重要的作用。一个系统的计划依旧很重要，但你的态度以及热爱可以超过所有营养和计划。本文将介绍我路程中所吸取到的经验，以及我之后创立的课表都会放在这边。\n\n<!-- more -->\n","source":"_posts/12-intermediate-powerlifting.md","raw":"---\ntitle: 健力课表长期短期规划浅谈以及个人经验\ndate: 2020-06-18 17:55:19\ntags: ['powerlifting', 'routine', 'Big three', 'rogue']\ncategories: Articles\ncover: 'https://physiqz.com/wp-content/uploads/2018/04/Powerlifting-Gear-and-Equipment-Guide.jpg'\n---\n\n> 在刚接触力量举的时候，我一直以为计划加饮食是能帮助我提升最大的因素。其实不然，在去过日本关西前三的健力馆，并有幸跟世界卧推冠军 Kodoma Daiki 交流后，我意识到训练中个人意识起到了更重要的作用。一个系统的计划依旧很重要，但你的态度以及热爱可以超过所有营养和计划。本文将介绍我路程中所吸取到的经验，以及我之后创立的课表都会放在这边。\n\n<!-- more -->\n","slug":"12-intermediate-powerlifting","published":1,"updated":"2020-06-21T19:57:42.115Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckdnmttd6000qrwui0anj3irl","content":"<blockquote>\n<p>在刚接触力量举的时候，我一直以为计划加饮食是能帮助我提升最大的因素。其实不然，在去过日本关西前三的健力馆，并有幸跟世界卧推冠军 Kodoma Daiki 交流后，我意识到训练中个人意识起到了更重要的作用。一个系统的计划依旧很重要，但你的态度以及热爱可以超过所有营养和计划。本文将介绍我路程中所吸取到的经验，以及我之后创立的课表都会放在这边。</p>\n</blockquote>\n<a id=\"more\"></a>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"<blockquote>\n<p>在刚接触力量举的时候，我一直以为计划加饮食是能帮助我提升最大的因素。其实不然，在去过日本关西前三的健力馆，并有幸跟世界卧推冠军 Kodoma Daiki 交流后，我意识到训练中个人意识起到了更重要的作用。一个系统的计划依旧很重要，但你的态度以及热爱可以超过所有营养和计划。本文将介绍我路程中所吸取到的经验，以及我之后创立的课表都会放在这边。</p>\n</blockquote>","more":""},{"title":"算法导论概览","date":"2020-06-15T07:55:19.000Z","cover":"https://3.bp.blogspot.com/-bsAe5iHfUvw/XMm2l8YCMtI/AAAAAAAAA28/9-Uj-v3GHhIE06c1_HdSEOeXML1byHInACLcBGAs/s1600/what-is-an-algorithm.png","_content":"\n> 总结暑假算法课 COMP3761 中学习到的知识点，代码实现以 python 来展示。课程内容参考 [Introduction to The Design and Analysis of Algorithm](https://www.amazon.ca/Introduction-Design-Analysis-Algorithms-3rd/dp/0132316811). 前半部分主要分析各种排序算法的原理以及代码实现。后半部分主要为图算法和最短路径的应用。\n\n1. Brute Force 暴力求解\n2. Decrease and Conquer 减治法\n3. Divide and Conquer 分治法\n4. Transform and Conquer 变治法\n5. Time Space Tradeoff 时空权衡\n6. Data Structure 数据结构\n7. Greedy Approach 贪心算法\n\n# Brute Force 暴力求解\n\n> 从字面意思理解，brute force 就是用最直接的方法来解决相应的问题。比如我们设计一个猜数字的游戏。数字范围为 0-10，根据用户的输入返回是否大还是小。那暴力求解的算法就是从 0 开始然后递增，最好的情况是 1 次猜中，但最坏的情况`Worst case`就是 10 次。\n\n## 1. Bubble Sort 冒泡排序\n\n假设我们有一个可排序的数组, 冒泡排序即从第一个元素开始，每个元素进行两两比较。如果左边的大于右边的,就进行位置替换。完成第一个 iteration 之后继续从第二个元素开始进行相同的步骤。\n\n冒泡排序伪代码如下:\n\n```\nfor i = 0 to A.length - 1\n    for j = 0 to A.length - 1 -i\n        if left > right:\n            swap(left, right)\n```\n\n### 举例\n\n比如我们有一个数组`[3, 0, 6, 1]`。那我们先从第一位`3`开始， 先是`3`和`0`比较，`3`大于`0`于是我们进行调换。比较完成后我们递增到下一位继续进行两两比较\n\n现在数组为`[0, 3, 6, 1]`。于是我们继续进行比较`3`和`6`。很明显`3`小于`6`，我们不需要进行调换。我们来到最后一组比较`6`和`1`。左边大于右边我们进行调换。\n\n此时我们第一个 iteration 的排序完成了, `[0, 3, 1, 6]`。\n\n同理我们现在从`index=1`的位置开始进行以上相同的步骤直到结束。\n\n### 代码实现\n\n**Python**\n\n```python\ndef bubble_sort(array):\n    n = len(array)\n    for i in range(n - 1):\n        for j in range(n - 1 -i):\n            if(array[j] > array[j+1]):\n                array[j], array[j+1] = array[j+1], array[j]\n    return array\n```\n\n### 复杂度分析\n\n冒泡排序有两个`for`循环，所以冒泡排序的复杂度 n<sup>2</sup>\n\n## 2. Selection Sort 选择排序\n\n选择排序首先设定数组第一个字符的元素为最小值，然后遍历整个数组。如果在遍历过程中发现有元素小于当前设定的最小值，就将该元素设置为新的最小值。\n\n重复步骤结束 iteration 并把此循环中最小值起始的值替换完成排序。伪代码实现如下:\n\n```\nfor i = 0 to Array.length -1:\n    min = i\n    for j = i+1 to Array.length:\n        if(j < min):\n            min = j\n    swap(i, j)\n```\n\n### 举例\n\n假设我们用选择排序算法来排序`[3, 0, 2]`数组。\n\n首先把最小值`min`设置为`array[0]`也就是`3`, 然后`i+1`开始进行判断，`0`小于`3`。于是我们现在把`min`设置为`0`。\n\n现在`2`大于`0`，不需要更改最小值。于是第一个循环完成了。将`i`和更新后的最小值`min`调换，即调换`3`和`0`的位置得到\n\n`[0, 3, 2]`。\n\n同理我们从`i = 1`开始第二个 iteration，`min`现在设置为`array[1]`也就是`3`。比较`3`和`2`条件成立进行调换位置。\n\n最后我们得到`[0, 2, 3]`\n\n### 代码实现\n\n**Python**\n\n```python\ndef selection_sort(array):\n    n = len(array)\n    for i in range(n):\n        min = i\n        for j in range(i+1, n):\n            if(array[j] < array[min]):\n                min = j\n        array[i], array[min] = array[min], array[i]\n    return array\n```\n\n### 复杂度分析\n\n选择排序的复杂度 n<sup>2</sup>\n\n## 3. Brtute Force String Match 暴力求解 字符串匹配\n\n在浏览器查找一个字符串时，我们可以用`Ctrl+F`来进行文本内容的匹配搜索。如果暴力求解的方法来实现字符串匹配，我们就要对字符串内每个字符开始进行比较。一旦有一个字符不匹配我们位移一个单位继续进行判断。\n\n### 举例\n\n比如我们要在`I love python`中搜索`python`。首先从`I`开始，`p`并不匹配`I`，移动索引一个单位。\n\n现在`python`与`love py`对齐进行匹配。\n\n`p`依旧不匹配空格。同理移动一个索引继续匹配，直到 index = 7 的位置才匹配成功并返回 index = 7。\n\n### 代码实现\n\n```python\nfor i in n - m:\n    j = 0\n    while j < m and pattern[j] = text[i + j]:\n        j = j + 1\n    if(j = m):\n        return i\nreturn -1\n```\n\n### 复杂度分析\n\n最坏的情况下我们要进行`(n-m+1)m`次对比。\n\n## 4. Knapsack Problem 背包问题\n\n背包问题即给定一些特定物品并有对应的价格和重量。然后有一个限重 W 的背包，每个物品只能选择一次。在不超重的情况下如何做到**价值最大化**选择？\n\n比如我们有一个最重承受 10kg 的背包。并有以下物品可以选择: 物品一: 2kg, 10 元。 物品二: 5kg, 30 元。物品三: 4kg, 20 元....如此。\n\n用暴力算法来解决这个问题即将所有可能的组合先全部列出来，然后判断并筛选超重的集合，最后比较所有集合来找到价值最高的集合。\n\n算法效率来讲，假设我们有 n 个物品，那复杂度即为 **2<sup>n</sup>**\n\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n# Decrease and Conquer 减治法\n\n> 跟暴力求解不同，减治法是通过**逐步缩小问题规模**来解决一个问题。简而言之，回到我们之前猜数字的游戏。如果用暴力求解，我们要一个数字一个数字猜测。减治法可以先把数字对半分，比如猜从 0-10 的数字，我们可以先拆成 0-5 和 6-10。如果我们给出 5 系统显示太高，那我们可以继续对半拆除从 0-4 进行同样的步骤。直到最后我们找到数字也就是一直拆分问题。\n\n## 1. Insertation Sort 插入排序\n\n插入排序从数组的第一个索引开始，跟左边的元素进行比较，如果小于左边的元素进行调换。\n\n假设给定一个数组`[0, 1, 5, 3, 2]`。\n\n第一部分`[0, 1]`是有序数列，后半部分为无序数列。如果我们每次把无序数列的第一个元素插入到正确的位置后，整体问题的规模就减少 1。\n\n如次重复`n-1`次后，数组也重新排成有序了。\n\n> 重复 n-1 是因为只有一个元素的数组必定是有序的。\n\n可以把插入排序想象成扑克牌卡片排序。\n\n### 举例\n\n假设我们对数组`A=[3, 2, 4, 0]`进行插入排序\n\n首先从 A[0]开始，第一个元素左边没有其他元素，所以`3`在正确的位置。现在我们无序部分为`[2, 4 ,0]`\n\n我们发现 2 < 3, 于是我们调换 2 和 3 的位置得到`[2, 3, 4, 0]`。现在无序部分为`[4, 0]`。\n\n4 不需要任何位置更改，于是无序部分只剩下`[0]`。\n\n我们把 0 跟左边的对比，直到 0 < 2 完成左移的过程。所以我们把 0 插入到第一个 index。最终得到有序数组`[0, 2, 3, 4]`\n\n### 代码实现\n\n**Python**\n\n```python\ndef insertion_sort(array):\n    n = len(array)\n    for i in range(1, n):\n        index = array[i]\n        # the index in the left of i\n        j = i - 1\n\n        # 如果左边还有数字 并且 当前元素小于它左边的元素：\n        while j >= 0 and index < array[j]:\n            # 调换当前元素和左边的元素\n            array[j + 1] = array[j]\n            # 继续向左移动\n            j = j - 1\n        # 循环结束 插入到对应的位置\n        array[j + 1] = index\n    return array\n```\n\n### 复杂度分析\n\n`插入排序`的复杂度为 n<sup>2</sup>\n\n## 2. Binary Search 二分查找\n\n目前我们涉及到的算法都是从数组的第一个位置开始然后进行遍历判断。二分查找则从一个数组的中间开始，从左往右一次查找，直到找到该元素或循环结束。\n\n**Python**\n\n```python\ndef binary_search(array, key):\n    l = 0\n    r = len(array) - 1\n    while l <= r:\n        m = (l + r) // 2\n        if key == array[m]:\n            return m\n        elif key < array[m]:\n            r = m - 1\n        else:\n            l = m + 1\n    return -1\n```\n\n## 3. Binary Search Tree Traversal 二叉树的遍历\n\n将数组(有序)分为两部分，数组的中间元素为树的根节点，左边和右边的元素再进行相同的划分，小于根节点的元素放在左边，大于的在右边。\n\n根据二叉搜索树我们可以进行数组的插入，查询和删除节点。接下来我们引入二叉树遍历即怎样知道节点是否已经被访问过了。\n\n### Pre-order Traversal 前序遍历\n\n从 Root 开始，每个节点进行`Visit -> Left -> Right`\n\n{% youtube 1WxLM2hwL-U %}\n\n### In-order Traversal 中序遍历\n\n从 Root 开始，每个节点进行`Left -> Visit -> Right`\n\n{% youtube 5dySuyZf9Qg %}\n\n### Post-order Traversal 后序遍历\n\n从 Root 开始，每个节点进行`Left -> Right -> Visit`\n\n{% youtube 4zVdfkpcT6U %}\n\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n# Divide and Conquer 分治法\n\n> 分治法的理论为把一个大的问题分成若干个小问题，然后逐个解决小问题，最后将小问题的解决方案合并到原来大问题的解。比如乐高玩具，一个乐高模型分成若干个小问题即乐高零件。小问题的解就是将各个组件先拼好，比如房顶，门之类。最后再将各个小组件组合起来拼成完整的模型。\n\n## 1. 有序数组合并\n\n在介绍归并排序和快速排序之前，我们先来了解以下有序数组的合并。\n\n给定两个有序数组`a`和`b`\n\n`a = [2, 3, 8, 9]`\n`b = [1, 4, 5, 7]`\n\n现在需要把数组 a 和 b 合并为一个新的有序数组到一个空的数组 `c []`。\n\n1. 首先我们用三个变量分别来记录三个数组的索引值并初始化为 0， 数组 a 为`i`， 数组 b 为`j`，数组 c 为`k`。\n2. 然后我们比较 `a[i]` 和 `b[j]` 并将较小的元素存入到数组`c[0]中`。初始化为 0，所以我们首先比较`a[0]`和`b[0]`。\n3. 之后我们将较小元素的数组索引和数组 c 的索引加 1。\n4. 然后我们继续重复第二步进行比较\n\n最好的情况下我们要比较 `n/2` 个元素，最坏的情况要比较 `n-1` 次。\n\n由此可以得到合并有序数组的复杂度为 `n`。\n\n## 2. Merge Sort 归并排序\n\n归并排序首先要将数组一直拆分直到数组内只有一个元素剩余。然后对拆分后的数组进行重新排序，排序完成后进行归并即得到有序的数组。\n\n### 举例\n\n给定一个数组`[2, 1, 8, 6]`。\n\n首先拆分成`[2, 1]`和`[8, 6]`。然后继续进行拆分直到数组内只有一个元素，因为**只有一个元素的数组必定是有序的**。\n\n得到`[2], [1], [8], [6]`。现在我们完成了拆分过程，每个数组都是有序的。\n\n接下来我们将数组两两归并排序，`[1, 2]`和`[6, 8]`。\n\n继续将这两个数组合并最终得到`[1, 2, 6, 8]`。\n\n### 复杂度分析\n\n归并排序的复杂度 `nlogn`。这比我们之前的冒泡排序和选择排序 n<sup>2</sup>的复杂度好了很多。\n\n### 参考\n\n{% youtube 4VqmGXwpLqc %}\n\n## 3. Quick Sort 快速排序\n\n快速排序的原理是首先我们选择一个`中轴(pivot)`, 一般选择数组内的第一个值。然后有比中轴值小的元素位于中轴的左侧，而大于中轴值的元素位于中轴的右侧。最终实现有序的排序。\n\n### 举例\n\n给定一个数组 `a = [12, 25, 33, 5, 8]`。\n\n选择第一个值`a[0]=44`为我们的中轴，并用`p`来记录。同时我们用变量`i`记录替换索引，`j`来记录遍历的索引。\n\n我们的目标即在 j 的遍历过程中，如果 a[j]的值小于当前的中轴值，我们将 i 递增 1，然后将 a[i]和 a[j]进行调换。当 j 遍历完数组后，我们再将 a[i]与中轴调换位置。\n\n起始我们的中轴`p = 12`, `i = 0`, `j = 1`。\n\n| p 中轴 |  i  |  j  | a[j] | Compare |                 Procedure                  |        Array         |\n| :----: | :-: | :-: | :--: | :-----: | :----------------------------------------: | :------------------: |\n|   12   |  0  |  1  |  25  | 25 > 12 |             不需要调换 递增 j              | `[12, 25, 33, 5, 8]` |\n|   12   |  0  |  2  |  33  | 33 > 12 |             不需要调换 递增 j              | `[12, 25, 33, 5, 8]` |\n|   12   |  0  |  3  |  5   | 5 < 12  | 递增 i i = 1 替换 a[i]和 a[j]的位置 递增 j | `[12, 5, 33, 25, 8]` |\n|   12   |  1  |  4  |  8   | 8 < 12  | 递增 i i = 2 替换 a[i]和 a[j]的位置 递增 j | `[12, 5, 8, 25, 33]` |\n\n现在第一个 iteration 完成，我们将中轴 p = 12 与 a[2]的位置替换\n\n得到`[8, 5, 12, 25, 33]`。我们可以发现现在 12 的左边都是小于 12 的，而右边都是大于 12 的。也就是说我们接下来只要对左边和右边的部分进行相同的操作即可完成快速排序。\n\n### 代码实现\n\n```python\ndef partition(array):\n    l = 0\n    r = len(array) - 1\n    pivot = a[l]\n    s = l\n    for i in range(l+1, r+1):\n        if a[i] < p:\n            s += 1\n            a[s], a[i] = a[i], a[s]\n            a[l], a[s] = a[s], a[l]\n    return s\n```\n\n### 复杂度分析\n\n快速排序的复杂度为`nlong(n)`\n\n### 参考\n\n{% youtube cnzIChso3cc %}\n\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n# Transform and Conquer 变治法\n\n## 1. Instance Simplification Pre-sorting 预排序\n\n### Check Elements Uniqueness 判断数组内元素是否重复\n\n给出一个数组，判断是否该数组存在重复元素。\n\n我们先用暴力求解来看下\n\n```python\ndef is_unique_bf(array):\n    n = len(array)\n    for i in range(n - 1):\n        # 存储当前索引元素变量\n        index_value = array[i]\n        # 循环数组 查找是否有匹配相等的\n        for j in range(i+1, n):\n            if(array[j] == index_value):\n                return False\n    return True\n```\n\n我们发现用暴力求解的算法得到复杂度为 n<sup>2</sup>。\n\n假设我们先将数组进行排序得到一个**有序数组**，然后在进行判断是否存在重复元素。算法效率是否会有提升呢?\n\n如果是一个有序数组，我们只需要查看**一个元素**是否跟它的**下一个元素**是否相等即可。比如`[2, 3, 3, 5]`。a[1] = a[2] 很明显得出数组存在重复元素。\n\n#### 代码实现\n\n```python\ndef is_unique_presort(array):\n    n = len(array)\n    # 假设我们先进行排序 比如利用之前比较高效的归并或者快速排序\n    array.sort()\n    for i in range(n-1):\n        if array[i] == array[i+1]:\n            return False\n    return True\n```\n\n#### 复杂度分析\n\n由于算法由两部分构成（预排序数组和遍历数组查看元素相等），所以其复杂度也应该为两部分：排序的复杂度加检查元素相等的复杂度。\n\n我们在之前的分治法中发现归并排序和快速排序是目前相对有效的算法。假设我们的预排序使用归并算法，那么排序部分的复杂度即`nlogn`\n\n由于我们只有一个循环遍历判断元素相等，所以整体算法复杂度为 `nlogn + n`\n\n也就是 `nlogn`\n\n### Find the Mode 寻找众数\n\n> 众数是出现在一组数据中最频繁的数。\n\n先来看下用暴力求解如何实现这个算法\n\n```python\ndef find_mode_bf(array):\n  n = len(array)\n  # 计数器字典 统计每个数字的频率\n  counter = {}\n\n  for i in range(n):\n    counter[array[i]] = counter.get(array[i], 0) + 1\n\n  occurence = 0\n  for key, value in counter.items():\n    if value > occurence:\n      occurence = value\n      mode = key\n  return mode\n```\n\n最坏的情况下我们的数组每个元素都只出现一次 `[1, 2, 3, 4, 5, 6]`。复杂度为 n<sup>2</sup>\n\n如果数组已经是一个有序数组，那么相同的元素在有序数组里都是相邻的。\n\n#### 代码实现\n\n```python\ndef compute_mode_presort(array):\n    array.sort()  # sort array\n    i = 0; freq = 0\n    while i < len(array):\n        temp_freq = 1; temp_mode = array[i]\n        while i + temp_freq < len(array) and array[i+temp_freq] == temp_mode:\n            temp_freq += 1\n        if temp_freq > freq:\n            freq = temp_freq; mode = temp_mode\n        i += temp_freq\n    return mode\n\n```\n\n#### 复杂度分析\n\n算法复杂度可以得出：`nlog n + log n = nlog n`\n\n## 2. Representation Change 改变数据的表现形式\n\n除了对数组进行预处理外，我们还可以改变数据结构来提高算法效率。\n\n### Heap 堆的定义\n\n- 堆的每个**父节点**(parent node)都**大于或者等于**它的子节点(child node)\n- 堆按照**从左往右**的顺序依次每层铺满子元素。\n- 在顶堆中，最大的元素为 Root 即根节点。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20161423.png?alt=media&token=b043f03e-bca9-4e6e-a758-f47cd244e4c3\" width=\"60%\" height=\"auto\" />\n\n### Heap Implementation 堆的应用\n\n将下面的堆树转换为数组表达形式\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20162133.png?alt=media&token=59dd7b37-81c6-4c7b-a581-8d6829b88ca1\" width=\"30%\" height=\"auto\" />\n\n<br />\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20162142.png?alt=media&token=b6a265f0-24b1-4c66-b3f2-6453516e7b33\" width=\"50%\" height=\"auto\" />\n\n同理可以根据数组转化为堆树。从数组第一个元素开始，从左往右依次把每层铺满子元素。最后由上至下改变节点的位置以满足堆的性质。\n\n### Heap Insert 堆的插入\n\n假设我们要把一个数值插入到一个堆中,如何来实现呢?\n\n给定一个堆的排序 `[16, 15, 10, 14, 7, 9, 3, 2, 8 ,1]`，我们想要插入`17`到这个堆中\n\n1. 首先把 17 插入到数组的最后一个位置中。\n   <img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20162537.png?alt=media&token=d9fddb9a-d835-49de-9e45-258f7508d8b1\" width=\"60%\" height=\"auto\" />\n\n2. 然后将 17 与它的父节点 7 进行比较。7 小于 17 不满足父节点大于子节点的特性，于是调换 7 和 17 的位置。\n\n   <img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/311.png?alt=media&token=caec7593-c628-4168-9543-7f2bf56fc7fe\" width=\"60%\" height=\"auto\" />\n\n3. 重复**步骤 2** 直到堆的性质得到满足。\n   <img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20162907.png?alt=media&token=7433c13d-ad7d-4d06-8b94-54ae543cddf7\" width=\"60%\" height=\"auto\" />\n\n<br />\n\n#### 复杂度分析\n\n由于堆的高度为`log n`，所有堆的插入算法复杂度为`log n`。因为我们要检查每层是否都满足堆的性质。\n\n### Heap Delete 堆的删除\n\n从堆中删除一个元素的实现方法为：\n\n1. 交换根节点的元素与堆尾的位置(数组中头尾交换)\n2. 删除堆尾\n3. **由上至下**调整堆的结构 (与堆的插入：由下至上相反)\n   - 如果不满足堆的性质就交换两个节点的值\n\n比如我们之前的例子，`[17, 16, 10, 14, 15, 9, 3, 2, 8, 1, 7]`。我们想要删除根节点 17。按照上面的步骤来实现即\n\n1. 替换 17 与 7 的位置\n   <img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/heapdelete1.png?alt=media&token=ee262f31-245a-4427-9b74-57169b2f16f8\" width=\"60%\" height=\"auto\" />\n\n2. 删除 节点 17\n   <img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/heapdelete2.png?alt=media&token=8a4fe4c4-36de-4aa2-b616-b558faca9e81\" width=\"60%\" height=\"auto\" />\n3. 调整堆的结构，7 与 16 对比，不满足堆的性质调换位置\n   <img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/heapdelete3.png?alt=media&token=23f09c2b-55aa-42cd-9892-fddd268b18de\" width=\"60%\" height=\"auto\" />\n4. 重复步骤 3 直到堆完全满足定义\n\n#### 复杂度分析\n\n由于堆的高度为`log n`，所有堆的插入算法效率为`log n`。\n\n### Heap Sort 堆排序\n\n#### 步骤\n\n1. 构建堆树(heap implementation)\n2. 构建顶堆，即根元素为最大值。\n3. 堆顶和堆尾的值交换顺序，并删除交换后的堆尾元素。\n4. 调整堆的节点位置以满足堆的性质\n5. 重复 1，2，3 步骤。\n\n#### 分析\n\n堆排序效率为`n logn`\n\n#### 参考\n\n{% youtube 2DmK_H7IdTo %}\n\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n# Space and Time Trade-Offs 时空权衡\n\n## 1. Counting Sort 计数排序\n\n### 举例\n\n给定一个数组`A = [4, 1, 3, 4, 3]`\n\n1. 找到数组内的最大值和最小值，即 4 和 1，创建一个新的数组`C = []`用来记录每个数值的频率，长度为`4-1+1=4`\n   <img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/1.png?alt=media&token=141e933e-8bf6-4a92-82c9-90083ec50f37\" width=\"50%\" height=\"auto\" />\n2. 遍历数组`A`并将每个数值的频率记录到`C`数组中。`C`数组的索引对应`A`数组的值。\n   最终结果为`C = [1, 0, 2, 2]`。\n   <img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/2.png?alt=media&token=bbfbf382-5953-4d24-b83b-16af4c5cdd1d\" width=\"50%\" height=\"auto\" />\n3. 将`C`数组内容的元素递归两两相加。比如`1+0=2`然后`2+2=4`如此。\n   <img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/3.png?alt=media&token=390d9075-b58b-4eca-b59f-5b099c9d841a\" width=\"50%\" height=\"auto\" />\n4. 最后，从`A`数组最后一个值开始，找到`C`数组内对应的**频率减一**后得到相对应的新的索引。然后放到新的数组`S = []`\n   比如我们从`A[4] = 3`开始， 3 在 Count 中对应的频率是 3，我们减一后得到 2，于是我们把 3 放在`S[2]`的位置。\n   <img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/4.png?alt=media&token=1c7f75dd-7f15-4d5f-a432-376f7c1fd1fa\" width=\"50%\" height=\"auto\" />\n   重复步骤 4 最后得到有序数组`[1, 3, 3, 4, 4]`\n\n### 复杂度分析\n\n整个算法过程中我们要遍历两个数组，一个是给定的数组，另一个为计算频率的数组。\n\n所以最好的情况下算法复杂度为 n。这比我们之前的分治法快速排序和归并排序更有效。\n\n### 参考\n\n{% youtube 8uyB78HNR4M %}\n\n## 2. Horspool's Algorithm: String Matching 字符串匹配算法\n\n在最开始的暴力求解部分中，我们介绍了如何使用暴力求解来进行字符串匹配的算法。\n\n如果字符串不匹配，我们移动字符一个单位进行对比，重复该步骤直到遍历整个字符。我们也总结出时间复杂度为`(n-m+1)m`, n 为字符的长度，m 为我们要匹配的字符串长度。\n\n`Horspool`算法不同的是，当我们遇到 mismatch 也就是不匹配的情况，我们可以位移 1 个或者多个单位再进行比较。位移的多少取决于我们可以用一个`shift table`来表示。\n\n### 举例\n\n假设我们想要匹配的字符串为`IDIGDAB`。字符串的长度为`7`。进行匹配的字符为`IBAGHJDABADAB`。\n\n每个字符的值为字符串中出现在最右侧的索引。即`m - index in pattern -1`。\n\n比如 I 出现了两次，但最右侧的索引为 2, 那么 I 的位移为 `7 - 2 - 1 = 4`。\n\n最后一个字母`B`因为没有出现过，所以唯一单位为字母的长度也就是 7\n\n同理可以得出 shift table 如下\n\n| Letters |  I  |  D  |  G  |  A  |  B  | \\*  |\n| :-----: | :-: | :-: | :-: | :-: | :-: | :-: |\n|  Value  |  4  |  2  |  3  |  1  |  7  |  7  |\n\n有了 Shift Table 之后我们可以进行匹配，一旦有字符不匹配，我们即可参照 shift table 进行相对应的字符移动。\n\n首先`B`与`D`不匹配，根据 Shift Table, 我们需要将字符向右移动两个单位。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20174305.png?alt=media&token=083aa2a2-d97a-4bed-8efb-11004c845e94\" width=\"50%\" height=\"auto\" />\n\n现在`G`与`J`不匹配，由于`B`是我们字符串中比较的最后一个字符，所以我们参照`B`移动字符 7 个单位。然后重复步骤即可。\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/12.png?alt=media&token=92bac8ce-f00d-4404-a172-c73b817fcb9b\" width=\"50%\" height=\"auto\" />\n\n## 3. Hash 哈希\n\n### Hasing Function 哈希函数\n\n假设哈希表长度为 5, 可以利用哈希函数将元素的键利用余数来转换为整数键。\n\n比如要把(Emily, 6046321)写入到哈希表中。\n\n我们先把`Emily`每个字母利用`ord()`函数转换成相应的整数。\n\n`ord(e) + ord(m) + ord(i) + ord(l) + ord(y) = 5 + 13 + 9 + 12 + 25 = 64`\n\n因为哈希表的长度为 5，64 除以 5 的余数为 4, 也就是转换后`6046321`的键。\n\n### Collision Handling 冲突解决\n\n如果在利用`哈希函数`转换键的时候出现相同的键怎么办呢? 比如两个元素 `Key mod 5`之后都是 4。如何解决这两个元素在哈希表中位置得问题呢？\n\n#### 1. Separate Chaining 分离链接\n\n第一种方法是分离链接，也就是用链表的方式来将相同的键组合在一起。\n\n比如给定哈希函数`h(i) = i mod 7`, 将下面的键值写入到哈希表中\n\n| Key | Values |\n| :-: | :----: |\n| 44  | name1  |\n| 12  | name2  |\n| 23  | name3  |\n| 16  | name4  |\n|  5  | name5  |\n| 28  | name6  |\n\n我们可以发现`44`, `23`, 以及`16`的 key 都是相同的，那么我们就可以用链表的方式把这它们连接起来。最后得到的哈希表如下。\n\nh(44) = 44 mod 7 = 2\nh(23) = 23 mod 7 = 2\nh(16) = 23 mod 7 = 2\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20202615.png?alt=media&token=c720646f-7ef4-463b-a407-dbce665c6256\" width=\"70%\" height=\"auto\" />\n\n<br />\n\n#### 2. Closed Hashing 封闭散列\n\n封闭散列解决冲突的方式为如果有冲突，向后找是否有空缺的位置并把键值写入到该位置。\n\n我们用之前相同的例子，但是这次用封闭散列来解决冲突问题。\n\n首先转换所有键\n\n```markdown\nh(44) = 2\nh(12) = 5\nh(23) = 2\nh(16) = 2\nh(5) = 5\nh(28) = 0\n```\n\n然后依次写入到哈希表中，name3 和 name1 都是相同键，但是 index 2 已经没有位置，所以我们把 name3 放到 index3 的位置。同理其他键值最后得到哈希表如下:\n\n| Index | Values |\n| :---: | :----: |\n|   0   | name6  |\n|   1   |        |\n|   2   | name1  |\n|   3   | name3  |\n|   4   | name4  |\n|   5   | name2  |\n|   6   | name5  |\n\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n## 4. Summary of sorting algorithms 排序算法总结\n\n| 算法     | 最好的情况 | 最坏的情况 | 稳定性 |\n| -------- | ---------- | ---------- | ------ |\n| 选择排序 | n2         | n2         | 稳定   |\n| 冒泡排序 | n          | n2         | 稳定   |\n| 插入排序 | n          | n2         | 稳定   |\n| 归并排序 | n logn     | n logn     | 稳定   |\n| 快速排序 | n logn     | n2         | 不稳定 |\n| 堆排序   | n logn     | n logn     | 不稳定 |\n| 计数排序 | n          | n + u      | 不稳定 |\n\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n# Data Structure 数据结构\n\n> 数据结构是用来管理和储存数据的一种方式\n\n## 1. Linear Data Structure 线性数据结构\n\n### Array 数组\n\n一个数组通常有一系列相同类型的元素组成，每个元素都有相对应的索引值。\n\n比如下面`arr_list`数组，`item one`对应的索引值就是 0。\n\n```python\narr_list = ['item one', 'item two', 'item three']\n```\n\n由于数组的长度需要预先决定来分配内存。所以对于长度明确，或者插入删除不频繁的数据，数组比较适合。但如果数据需要频发插入或者删除，那我们可以用其他的数据结构。\n\n### Linked List 链表\n\n链表由 0 或者多个叫做节点的元素组成，每个节点都有一个指针指向下一个节点。\n\n在数组中，如果想要拿到索引为 2 的值，可以直接用 arr[2]。但是在链表中，我们要从`head`开始一直往右进行节点的查找。\n\n**单向链表**\n\n单向链表，即每个节点中有一个指针指向后继节点。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/linkedlist.png?alt=media&token=069ba69f-0b49-48d0-a353-5002b821f1cf\" width=\"70%\" height=\"auto\"/>\n<br>\n\n**双向链表**\n\n双向链表，每个节点中有两个指针并分别指向前驱和后继。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/linkedlist2.png?alt=media&token=cfaf0918-27ee-49ef-9249-c0d3f81c6c22\" width=\"70%\" height=\"auto\" />\n<br>\n\n#### 复杂度分析\n\n- Search: `O(n)`\n- Insert: `O(1)`\n- Delete: `O(1)`\n\n### Stack 栈\n\n遵循`后进先出(LIFO)`原则, 可以想象一叠盘子，你每清理完一个碟子你往上叠。结束后你从最上面的开始一个一个回收。最后一个清洁的碟子也是第一个拿走的。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/stack.png?alt=media&token=3d248a10-e203-4e05-9783-a2b619889ab8\" width=\"70%\" height=\"auto\"/>\n<br />\n\n插入方法为`push`，删除方法为`pop`。\n\n#### 复杂度分析\n\n- Search: `O(n)`\n- Insert: `O(1)`\n- Delete: `O(1)`\n\n### Queue 队列\n\n跟栈相反，队列遵循先进先出原则。可以想象以下我们平常超市购物结账排队的时候。排在第一位置的人也是先结完账最先离开的。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/Introduction.png?alt=media&token=d5dc1f40-5d9a-44b2-94c9-01c0490fab75\" width=\"50%\" height=\"auto\"/>\n<br />\n\n#### 复杂度分析\n\n- Search: `O(n)`\n- Insert: `O(1)`\n- Delete: `O(1)`\n\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n## 2. Non-Linear Data Structures: Graph 图\n\n### Types 图的分类\n\n图又可分为有向图和无向图\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20122800.png?alt=media&token=a82cd4fb-63c0-4927-88c9-f3e7ffe13c64\" width=\"70%\" height=\"auto\" />\n\n### Representing Graphs 图的表达方式\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20123400.png?alt=media&token=45ef871a-d7a2-465d-aa06-558c07a4acb8\"  width=\"50%\" height=\"auto\"/>\n\n#### 1. Adjacency Matrix 邻接矩阵\n\n用一个 2D 数组来储存图中顶点间的关系数据。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20123411.png?alt=media&token=4d49cadd-470a-4144-9eb9-75a662fa8de7\"  width=\"50%\" height=\"auto\"/>\n\n#### 2. Adjacency Lists 邻接表\n\n用来记录每一个节点所连接的所有其他节点。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20123423.png?alt=media&token=e060e48e-5d26-4938-bacd-b6140111f128\"  width=\"50%\" height=\"auto\"/>\n\n### Graph Traversal 图的遍历\n\n#### 1. Depth-First Search (DFS) 深度优先搜索\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/DFS.png?alt=media&token=b19c9461-5ea7-4a02-83d5-97f59227dec3\" width=\"50%\" height=\"auto\" />\n\nDFS 我们随意选择一个起点然后进行其他节点的探索，直到所有的节点全部被探索过。\n\n比如我们从 a 开始，我们现在可以走`b`, `f`, 或者`e`。我们用字母升序选择`b`，然后`f`最后`e`。\n\n这个时候已经没有路可以走了。那我们就要往回走到`b`。然后继续`g -> c -> d -> h`\n\n最后 DFS 的遍历为`abfegcdh` 如下图所示。当然如果一开始我们走完 a 选择其他路线，那 DFS 的遍历结果也是不一样的。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/d'f's%E6%89%B9%E6%B3%A8%202020-07-20%20210327.png?alt=media&token=b7bdde72-f3e2-4d8b-89ae-c3d669bc2543\" width=\"50%\" height=\"auto\" />\n\n#### 2. Breadth-First Search (BFS) 广度优先搜素\n\n广度优先搜索则是先把每个节点所有可行路线都走一遍，然后再回到每个子节点进行搜索。\n\n现在我们用 BFS 遍历之前的例子。\n\n我们从 a 开始，这时候有 b, e, f。然后 a 已经遍历完。我们开始遍历 b，发现只有 g。g 遍历完 c 和 h 后只剩下 d。\n\n得到 BFS `abefgchd`\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/BFS.png?alt=media&token=b7229ee9-55ad-479e-8acd-d1fae3464353\" width=\"50%\" height=\"auto\" />\n\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n# Greedy Approach 贪心算法\n\n## 1. Prim's Algorithm 普林姆算法\n\n在普林姆算法中，我们随意选择一个起点，之后每次都选择访问个节点的最短的路线，直到所有的节点都被访问过。\n\n### 举例\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/prim.png?alt=media&token=dde1bf4c-bfce-47b0-b6f7-c72f4373ce74\" width=\"60%\" height=\"auto\" />\n\n我们从 a 开始，可以发现最短路径为`af`，所以我们连接`af`。现在找到所有与 a 和 f 相连的节点的最短路径，我们找到`fe`最短, 连接`fe`。\n\n这个时候`ae`是最短的，但是`a`和`e`都已经访问过了，所以我们不能选择这条路径。\n\n于是我们连接`eb`, 然后`bc`最后`cd`结束得到最小生成树。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20212525.png?alt=media&token=e173c8f3-b841-4052-922e-007faa4de91a\" width=\"50%\" height=\"auto\" />\n\n### 参考\n\n{% youtube cplfcGZmX7I %}\n\n## 2. Kruskal's Algorithm 克鲁斯卡尔算法\n\n与 Prim 算法不同的时，Kruskal 算法我们不是随意选择一个起点，而是先选择图中最短的一条路径，然后在不制造出 cycle 的情况下，找到所有最短的路线直到所有节点被访问。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/prim.png?alt=media&token=dde1bf4c-bfce-47b0-b6f7-c72f4373ce74\" width=\"60%\" height=\"auto\" />\n\n同样用这个图，我们这次从`fe`开始，然后同样最短的路径有`af`和`cd`都为 4，可以都连接。\n\n这个时候`ae`不能连接因为会出现`cycle`。\n\n所以我们连接下一个最短路径`bc`。之后时`be`。于是得到最小生成树如下所示，可以发现跟 Prim 算法的结果相同。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20212525.png?alt=media&token=e173c8f3-b841-4052-922e-007faa4de91a\" width=\"50%\" height=\"auto\" />\n\n{% youtube 71UQH7Pr9kU %}\n\n## 3. Dijkstra's Algorithm: 迪克斯特拉算法\n\n{% youtube _lHSawdgXpI %}\n","source":"_posts/10-common-algo-review.md","raw":"---\ntitle: 算法导论概览\ndate: 2020-06-15 00:55:19\ntags: ['algorithim', 'notes']\ncategories: 笔记\ncover: 'https://3.bp.blogspot.com/-bsAe5iHfUvw/XMm2l8YCMtI/AAAAAAAAA28/9-Uj-v3GHhIE06c1_HdSEOeXML1byHInACLcBGAs/s1600/what-is-an-algorithm.png'\n---\n\n> 总结暑假算法课 COMP3761 中学习到的知识点，代码实现以 python 来展示。课程内容参考 [Introduction to The Design and Analysis of Algorithm](https://www.amazon.ca/Introduction-Design-Analysis-Algorithms-3rd/dp/0132316811). 前半部分主要分析各种排序算法的原理以及代码实现。后半部分主要为图算法和最短路径的应用。\n\n1. Brute Force 暴力求解\n2. Decrease and Conquer 减治法\n3. Divide and Conquer 分治法\n4. Transform and Conquer 变治法\n5. Time Space Tradeoff 时空权衡\n6. Data Structure 数据结构\n7. Greedy Approach 贪心算法\n\n# Brute Force 暴力求解\n\n> 从字面意思理解，brute force 就是用最直接的方法来解决相应的问题。比如我们设计一个猜数字的游戏。数字范围为 0-10，根据用户的输入返回是否大还是小。那暴力求解的算法就是从 0 开始然后递增，最好的情况是 1 次猜中，但最坏的情况`Worst case`就是 10 次。\n\n## 1. Bubble Sort 冒泡排序\n\n假设我们有一个可排序的数组, 冒泡排序即从第一个元素开始，每个元素进行两两比较。如果左边的大于右边的,就进行位置替换。完成第一个 iteration 之后继续从第二个元素开始进行相同的步骤。\n\n冒泡排序伪代码如下:\n\n```\nfor i = 0 to A.length - 1\n    for j = 0 to A.length - 1 -i\n        if left > right:\n            swap(left, right)\n```\n\n### 举例\n\n比如我们有一个数组`[3, 0, 6, 1]`。那我们先从第一位`3`开始， 先是`3`和`0`比较，`3`大于`0`于是我们进行调换。比较完成后我们递增到下一位继续进行两两比较\n\n现在数组为`[0, 3, 6, 1]`。于是我们继续进行比较`3`和`6`。很明显`3`小于`6`，我们不需要进行调换。我们来到最后一组比较`6`和`1`。左边大于右边我们进行调换。\n\n此时我们第一个 iteration 的排序完成了, `[0, 3, 1, 6]`。\n\n同理我们现在从`index=1`的位置开始进行以上相同的步骤直到结束。\n\n### 代码实现\n\n**Python**\n\n```python\ndef bubble_sort(array):\n    n = len(array)\n    for i in range(n - 1):\n        for j in range(n - 1 -i):\n            if(array[j] > array[j+1]):\n                array[j], array[j+1] = array[j+1], array[j]\n    return array\n```\n\n### 复杂度分析\n\n冒泡排序有两个`for`循环，所以冒泡排序的复杂度 n<sup>2</sup>\n\n## 2. Selection Sort 选择排序\n\n选择排序首先设定数组第一个字符的元素为最小值，然后遍历整个数组。如果在遍历过程中发现有元素小于当前设定的最小值，就将该元素设置为新的最小值。\n\n重复步骤结束 iteration 并把此循环中最小值起始的值替换完成排序。伪代码实现如下:\n\n```\nfor i = 0 to Array.length -1:\n    min = i\n    for j = i+1 to Array.length:\n        if(j < min):\n            min = j\n    swap(i, j)\n```\n\n### 举例\n\n假设我们用选择排序算法来排序`[3, 0, 2]`数组。\n\n首先把最小值`min`设置为`array[0]`也就是`3`, 然后`i+1`开始进行判断，`0`小于`3`。于是我们现在把`min`设置为`0`。\n\n现在`2`大于`0`，不需要更改最小值。于是第一个循环完成了。将`i`和更新后的最小值`min`调换，即调换`3`和`0`的位置得到\n\n`[0, 3, 2]`。\n\n同理我们从`i = 1`开始第二个 iteration，`min`现在设置为`array[1]`也就是`3`。比较`3`和`2`条件成立进行调换位置。\n\n最后我们得到`[0, 2, 3]`\n\n### 代码实现\n\n**Python**\n\n```python\ndef selection_sort(array):\n    n = len(array)\n    for i in range(n):\n        min = i\n        for j in range(i+1, n):\n            if(array[j] < array[min]):\n                min = j\n        array[i], array[min] = array[min], array[i]\n    return array\n```\n\n### 复杂度分析\n\n选择排序的复杂度 n<sup>2</sup>\n\n## 3. Brtute Force String Match 暴力求解 字符串匹配\n\n在浏览器查找一个字符串时，我们可以用`Ctrl+F`来进行文本内容的匹配搜索。如果暴力求解的方法来实现字符串匹配，我们就要对字符串内每个字符开始进行比较。一旦有一个字符不匹配我们位移一个单位继续进行判断。\n\n### 举例\n\n比如我们要在`I love python`中搜索`python`。首先从`I`开始，`p`并不匹配`I`，移动索引一个单位。\n\n现在`python`与`love py`对齐进行匹配。\n\n`p`依旧不匹配空格。同理移动一个索引继续匹配，直到 index = 7 的位置才匹配成功并返回 index = 7。\n\n### 代码实现\n\n```python\nfor i in n - m:\n    j = 0\n    while j < m and pattern[j] = text[i + j]:\n        j = j + 1\n    if(j = m):\n        return i\nreturn -1\n```\n\n### 复杂度分析\n\n最坏的情况下我们要进行`(n-m+1)m`次对比。\n\n## 4. Knapsack Problem 背包问题\n\n背包问题即给定一些特定物品并有对应的价格和重量。然后有一个限重 W 的背包，每个物品只能选择一次。在不超重的情况下如何做到**价值最大化**选择？\n\n比如我们有一个最重承受 10kg 的背包。并有以下物品可以选择: 物品一: 2kg, 10 元。 物品二: 5kg, 30 元。物品三: 4kg, 20 元....如此。\n\n用暴力算法来解决这个问题即将所有可能的组合先全部列出来，然后判断并筛选超重的集合，最后比较所有集合来找到价值最高的集合。\n\n算法效率来讲，假设我们有 n 个物品，那复杂度即为 **2<sup>n</sup>**\n\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n# Decrease and Conquer 减治法\n\n> 跟暴力求解不同，减治法是通过**逐步缩小问题规模**来解决一个问题。简而言之，回到我们之前猜数字的游戏。如果用暴力求解，我们要一个数字一个数字猜测。减治法可以先把数字对半分，比如猜从 0-10 的数字，我们可以先拆成 0-5 和 6-10。如果我们给出 5 系统显示太高，那我们可以继续对半拆除从 0-4 进行同样的步骤。直到最后我们找到数字也就是一直拆分问题。\n\n## 1. Insertation Sort 插入排序\n\n插入排序从数组的第一个索引开始，跟左边的元素进行比较，如果小于左边的元素进行调换。\n\n假设给定一个数组`[0, 1, 5, 3, 2]`。\n\n第一部分`[0, 1]`是有序数列，后半部分为无序数列。如果我们每次把无序数列的第一个元素插入到正确的位置后，整体问题的规模就减少 1。\n\n如次重复`n-1`次后，数组也重新排成有序了。\n\n> 重复 n-1 是因为只有一个元素的数组必定是有序的。\n\n可以把插入排序想象成扑克牌卡片排序。\n\n### 举例\n\n假设我们对数组`A=[3, 2, 4, 0]`进行插入排序\n\n首先从 A[0]开始，第一个元素左边没有其他元素，所以`3`在正确的位置。现在我们无序部分为`[2, 4 ,0]`\n\n我们发现 2 < 3, 于是我们调换 2 和 3 的位置得到`[2, 3, 4, 0]`。现在无序部分为`[4, 0]`。\n\n4 不需要任何位置更改，于是无序部分只剩下`[0]`。\n\n我们把 0 跟左边的对比，直到 0 < 2 完成左移的过程。所以我们把 0 插入到第一个 index。最终得到有序数组`[0, 2, 3, 4]`\n\n### 代码实现\n\n**Python**\n\n```python\ndef insertion_sort(array):\n    n = len(array)\n    for i in range(1, n):\n        index = array[i]\n        # the index in the left of i\n        j = i - 1\n\n        # 如果左边还有数字 并且 当前元素小于它左边的元素：\n        while j >= 0 and index < array[j]:\n            # 调换当前元素和左边的元素\n            array[j + 1] = array[j]\n            # 继续向左移动\n            j = j - 1\n        # 循环结束 插入到对应的位置\n        array[j + 1] = index\n    return array\n```\n\n### 复杂度分析\n\n`插入排序`的复杂度为 n<sup>2</sup>\n\n## 2. Binary Search 二分查找\n\n目前我们涉及到的算法都是从数组的第一个位置开始然后进行遍历判断。二分查找则从一个数组的中间开始，从左往右一次查找，直到找到该元素或循环结束。\n\n**Python**\n\n```python\ndef binary_search(array, key):\n    l = 0\n    r = len(array) - 1\n    while l <= r:\n        m = (l + r) // 2\n        if key == array[m]:\n            return m\n        elif key < array[m]:\n            r = m - 1\n        else:\n            l = m + 1\n    return -1\n```\n\n## 3. Binary Search Tree Traversal 二叉树的遍历\n\n将数组(有序)分为两部分，数组的中间元素为树的根节点，左边和右边的元素再进行相同的划分，小于根节点的元素放在左边，大于的在右边。\n\n根据二叉搜索树我们可以进行数组的插入，查询和删除节点。接下来我们引入二叉树遍历即怎样知道节点是否已经被访问过了。\n\n### Pre-order Traversal 前序遍历\n\n从 Root 开始，每个节点进行`Visit -> Left -> Right`\n\n{% youtube 1WxLM2hwL-U %}\n\n### In-order Traversal 中序遍历\n\n从 Root 开始，每个节点进行`Left -> Visit -> Right`\n\n{% youtube 5dySuyZf9Qg %}\n\n### Post-order Traversal 后序遍历\n\n从 Root 开始，每个节点进行`Left -> Right -> Visit`\n\n{% youtube 4zVdfkpcT6U %}\n\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n# Divide and Conquer 分治法\n\n> 分治法的理论为把一个大的问题分成若干个小问题，然后逐个解决小问题，最后将小问题的解决方案合并到原来大问题的解。比如乐高玩具，一个乐高模型分成若干个小问题即乐高零件。小问题的解就是将各个组件先拼好，比如房顶，门之类。最后再将各个小组件组合起来拼成完整的模型。\n\n## 1. 有序数组合并\n\n在介绍归并排序和快速排序之前，我们先来了解以下有序数组的合并。\n\n给定两个有序数组`a`和`b`\n\n`a = [2, 3, 8, 9]`\n`b = [1, 4, 5, 7]`\n\n现在需要把数组 a 和 b 合并为一个新的有序数组到一个空的数组 `c []`。\n\n1. 首先我们用三个变量分别来记录三个数组的索引值并初始化为 0， 数组 a 为`i`， 数组 b 为`j`，数组 c 为`k`。\n2. 然后我们比较 `a[i]` 和 `b[j]` 并将较小的元素存入到数组`c[0]中`。初始化为 0，所以我们首先比较`a[0]`和`b[0]`。\n3. 之后我们将较小元素的数组索引和数组 c 的索引加 1。\n4. 然后我们继续重复第二步进行比较\n\n最好的情况下我们要比较 `n/2` 个元素，最坏的情况要比较 `n-1` 次。\n\n由此可以得到合并有序数组的复杂度为 `n`。\n\n## 2. Merge Sort 归并排序\n\n归并排序首先要将数组一直拆分直到数组内只有一个元素剩余。然后对拆分后的数组进行重新排序，排序完成后进行归并即得到有序的数组。\n\n### 举例\n\n给定一个数组`[2, 1, 8, 6]`。\n\n首先拆分成`[2, 1]`和`[8, 6]`。然后继续进行拆分直到数组内只有一个元素，因为**只有一个元素的数组必定是有序的**。\n\n得到`[2], [1], [8], [6]`。现在我们完成了拆分过程，每个数组都是有序的。\n\n接下来我们将数组两两归并排序，`[1, 2]`和`[6, 8]`。\n\n继续将这两个数组合并最终得到`[1, 2, 6, 8]`。\n\n### 复杂度分析\n\n归并排序的复杂度 `nlogn`。这比我们之前的冒泡排序和选择排序 n<sup>2</sup>的复杂度好了很多。\n\n### 参考\n\n{% youtube 4VqmGXwpLqc %}\n\n## 3. Quick Sort 快速排序\n\n快速排序的原理是首先我们选择一个`中轴(pivot)`, 一般选择数组内的第一个值。然后有比中轴值小的元素位于中轴的左侧，而大于中轴值的元素位于中轴的右侧。最终实现有序的排序。\n\n### 举例\n\n给定一个数组 `a = [12, 25, 33, 5, 8]`。\n\n选择第一个值`a[0]=44`为我们的中轴，并用`p`来记录。同时我们用变量`i`记录替换索引，`j`来记录遍历的索引。\n\n我们的目标即在 j 的遍历过程中，如果 a[j]的值小于当前的中轴值，我们将 i 递增 1，然后将 a[i]和 a[j]进行调换。当 j 遍历完数组后，我们再将 a[i]与中轴调换位置。\n\n起始我们的中轴`p = 12`, `i = 0`, `j = 1`。\n\n| p 中轴 |  i  |  j  | a[j] | Compare |                 Procedure                  |        Array         |\n| :----: | :-: | :-: | :--: | :-----: | :----------------------------------------: | :------------------: |\n|   12   |  0  |  1  |  25  | 25 > 12 |             不需要调换 递增 j              | `[12, 25, 33, 5, 8]` |\n|   12   |  0  |  2  |  33  | 33 > 12 |             不需要调换 递增 j              | `[12, 25, 33, 5, 8]` |\n|   12   |  0  |  3  |  5   | 5 < 12  | 递增 i i = 1 替换 a[i]和 a[j]的位置 递增 j | `[12, 5, 33, 25, 8]` |\n|   12   |  1  |  4  |  8   | 8 < 12  | 递增 i i = 2 替换 a[i]和 a[j]的位置 递增 j | `[12, 5, 8, 25, 33]` |\n\n现在第一个 iteration 完成，我们将中轴 p = 12 与 a[2]的位置替换\n\n得到`[8, 5, 12, 25, 33]`。我们可以发现现在 12 的左边都是小于 12 的，而右边都是大于 12 的。也就是说我们接下来只要对左边和右边的部分进行相同的操作即可完成快速排序。\n\n### 代码实现\n\n```python\ndef partition(array):\n    l = 0\n    r = len(array) - 1\n    pivot = a[l]\n    s = l\n    for i in range(l+1, r+1):\n        if a[i] < p:\n            s += 1\n            a[s], a[i] = a[i], a[s]\n            a[l], a[s] = a[s], a[l]\n    return s\n```\n\n### 复杂度分析\n\n快速排序的复杂度为`nlong(n)`\n\n### 参考\n\n{% youtube cnzIChso3cc %}\n\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n# Transform and Conquer 变治法\n\n## 1. Instance Simplification Pre-sorting 预排序\n\n### Check Elements Uniqueness 判断数组内元素是否重复\n\n给出一个数组，判断是否该数组存在重复元素。\n\n我们先用暴力求解来看下\n\n```python\ndef is_unique_bf(array):\n    n = len(array)\n    for i in range(n - 1):\n        # 存储当前索引元素变量\n        index_value = array[i]\n        # 循环数组 查找是否有匹配相等的\n        for j in range(i+1, n):\n            if(array[j] == index_value):\n                return False\n    return True\n```\n\n我们发现用暴力求解的算法得到复杂度为 n<sup>2</sup>。\n\n假设我们先将数组进行排序得到一个**有序数组**，然后在进行判断是否存在重复元素。算法效率是否会有提升呢?\n\n如果是一个有序数组，我们只需要查看**一个元素**是否跟它的**下一个元素**是否相等即可。比如`[2, 3, 3, 5]`。a[1] = a[2] 很明显得出数组存在重复元素。\n\n#### 代码实现\n\n```python\ndef is_unique_presort(array):\n    n = len(array)\n    # 假设我们先进行排序 比如利用之前比较高效的归并或者快速排序\n    array.sort()\n    for i in range(n-1):\n        if array[i] == array[i+1]:\n            return False\n    return True\n```\n\n#### 复杂度分析\n\n由于算法由两部分构成（预排序数组和遍历数组查看元素相等），所以其复杂度也应该为两部分：排序的复杂度加检查元素相等的复杂度。\n\n我们在之前的分治法中发现归并排序和快速排序是目前相对有效的算法。假设我们的预排序使用归并算法，那么排序部分的复杂度即`nlogn`\n\n由于我们只有一个循环遍历判断元素相等，所以整体算法复杂度为 `nlogn + n`\n\n也就是 `nlogn`\n\n### Find the Mode 寻找众数\n\n> 众数是出现在一组数据中最频繁的数。\n\n先来看下用暴力求解如何实现这个算法\n\n```python\ndef find_mode_bf(array):\n  n = len(array)\n  # 计数器字典 统计每个数字的频率\n  counter = {}\n\n  for i in range(n):\n    counter[array[i]] = counter.get(array[i], 0) + 1\n\n  occurence = 0\n  for key, value in counter.items():\n    if value > occurence:\n      occurence = value\n      mode = key\n  return mode\n```\n\n最坏的情况下我们的数组每个元素都只出现一次 `[1, 2, 3, 4, 5, 6]`。复杂度为 n<sup>2</sup>\n\n如果数组已经是一个有序数组，那么相同的元素在有序数组里都是相邻的。\n\n#### 代码实现\n\n```python\ndef compute_mode_presort(array):\n    array.sort()  # sort array\n    i = 0; freq = 0\n    while i < len(array):\n        temp_freq = 1; temp_mode = array[i]\n        while i + temp_freq < len(array) and array[i+temp_freq] == temp_mode:\n            temp_freq += 1\n        if temp_freq > freq:\n            freq = temp_freq; mode = temp_mode\n        i += temp_freq\n    return mode\n\n```\n\n#### 复杂度分析\n\n算法复杂度可以得出：`nlog n + log n = nlog n`\n\n## 2. Representation Change 改变数据的表现形式\n\n除了对数组进行预处理外，我们还可以改变数据结构来提高算法效率。\n\n### Heap 堆的定义\n\n- 堆的每个**父节点**(parent node)都**大于或者等于**它的子节点(child node)\n- 堆按照**从左往右**的顺序依次每层铺满子元素。\n- 在顶堆中，最大的元素为 Root 即根节点。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20161423.png?alt=media&token=b043f03e-bca9-4e6e-a758-f47cd244e4c3\" width=\"60%\" height=\"auto\" />\n\n### Heap Implementation 堆的应用\n\n将下面的堆树转换为数组表达形式\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20162133.png?alt=media&token=59dd7b37-81c6-4c7b-a581-8d6829b88ca1\" width=\"30%\" height=\"auto\" />\n\n<br />\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20162142.png?alt=media&token=b6a265f0-24b1-4c66-b3f2-6453516e7b33\" width=\"50%\" height=\"auto\" />\n\n同理可以根据数组转化为堆树。从数组第一个元素开始，从左往右依次把每层铺满子元素。最后由上至下改变节点的位置以满足堆的性质。\n\n### Heap Insert 堆的插入\n\n假设我们要把一个数值插入到一个堆中,如何来实现呢?\n\n给定一个堆的排序 `[16, 15, 10, 14, 7, 9, 3, 2, 8 ,1]`，我们想要插入`17`到这个堆中\n\n1. 首先把 17 插入到数组的最后一个位置中。\n   <img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20162537.png?alt=media&token=d9fddb9a-d835-49de-9e45-258f7508d8b1\" width=\"60%\" height=\"auto\" />\n\n2. 然后将 17 与它的父节点 7 进行比较。7 小于 17 不满足父节点大于子节点的特性，于是调换 7 和 17 的位置。\n\n   <img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/311.png?alt=media&token=caec7593-c628-4168-9543-7f2bf56fc7fe\" width=\"60%\" height=\"auto\" />\n\n3. 重复**步骤 2** 直到堆的性质得到满足。\n   <img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20162907.png?alt=media&token=7433c13d-ad7d-4d06-8b94-54ae543cddf7\" width=\"60%\" height=\"auto\" />\n\n<br />\n\n#### 复杂度分析\n\n由于堆的高度为`log n`，所有堆的插入算法复杂度为`log n`。因为我们要检查每层是否都满足堆的性质。\n\n### Heap Delete 堆的删除\n\n从堆中删除一个元素的实现方法为：\n\n1. 交换根节点的元素与堆尾的位置(数组中头尾交换)\n2. 删除堆尾\n3. **由上至下**调整堆的结构 (与堆的插入：由下至上相反)\n   - 如果不满足堆的性质就交换两个节点的值\n\n比如我们之前的例子，`[17, 16, 10, 14, 15, 9, 3, 2, 8, 1, 7]`。我们想要删除根节点 17。按照上面的步骤来实现即\n\n1. 替换 17 与 7 的位置\n   <img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/heapdelete1.png?alt=media&token=ee262f31-245a-4427-9b74-57169b2f16f8\" width=\"60%\" height=\"auto\" />\n\n2. 删除 节点 17\n   <img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/heapdelete2.png?alt=media&token=8a4fe4c4-36de-4aa2-b616-b558faca9e81\" width=\"60%\" height=\"auto\" />\n3. 调整堆的结构，7 与 16 对比，不满足堆的性质调换位置\n   <img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/heapdelete3.png?alt=media&token=23f09c2b-55aa-42cd-9892-fddd268b18de\" width=\"60%\" height=\"auto\" />\n4. 重复步骤 3 直到堆完全满足定义\n\n#### 复杂度分析\n\n由于堆的高度为`log n`，所有堆的插入算法效率为`log n`。\n\n### Heap Sort 堆排序\n\n#### 步骤\n\n1. 构建堆树(heap implementation)\n2. 构建顶堆，即根元素为最大值。\n3. 堆顶和堆尾的值交换顺序，并删除交换后的堆尾元素。\n4. 调整堆的节点位置以满足堆的性质\n5. 重复 1，2，3 步骤。\n\n#### 分析\n\n堆排序效率为`n logn`\n\n#### 参考\n\n{% youtube 2DmK_H7IdTo %}\n\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n# Space and Time Trade-Offs 时空权衡\n\n## 1. Counting Sort 计数排序\n\n### 举例\n\n给定一个数组`A = [4, 1, 3, 4, 3]`\n\n1. 找到数组内的最大值和最小值，即 4 和 1，创建一个新的数组`C = []`用来记录每个数值的频率，长度为`4-1+1=4`\n   <img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/1.png?alt=media&token=141e933e-8bf6-4a92-82c9-90083ec50f37\" width=\"50%\" height=\"auto\" />\n2. 遍历数组`A`并将每个数值的频率记录到`C`数组中。`C`数组的索引对应`A`数组的值。\n   最终结果为`C = [1, 0, 2, 2]`。\n   <img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/2.png?alt=media&token=bbfbf382-5953-4d24-b83b-16af4c5cdd1d\" width=\"50%\" height=\"auto\" />\n3. 将`C`数组内容的元素递归两两相加。比如`1+0=2`然后`2+2=4`如此。\n   <img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/3.png?alt=media&token=390d9075-b58b-4eca-b59f-5b099c9d841a\" width=\"50%\" height=\"auto\" />\n4. 最后，从`A`数组最后一个值开始，找到`C`数组内对应的**频率减一**后得到相对应的新的索引。然后放到新的数组`S = []`\n   比如我们从`A[4] = 3`开始， 3 在 Count 中对应的频率是 3，我们减一后得到 2，于是我们把 3 放在`S[2]`的位置。\n   <img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/4.png?alt=media&token=1c7f75dd-7f15-4d5f-a432-376f7c1fd1fa\" width=\"50%\" height=\"auto\" />\n   重复步骤 4 最后得到有序数组`[1, 3, 3, 4, 4]`\n\n### 复杂度分析\n\n整个算法过程中我们要遍历两个数组，一个是给定的数组，另一个为计算频率的数组。\n\n所以最好的情况下算法复杂度为 n。这比我们之前的分治法快速排序和归并排序更有效。\n\n### 参考\n\n{% youtube 8uyB78HNR4M %}\n\n## 2. Horspool's Algorithm: String Matching 字符串匹配算法\n\n在最开始的暴力求解部分中，我们介绍了如何使用暴力求解来进行字符串匹配的算法。\n\n如果字符串不匹配，我们移动字符一个单位进行对比，重复该步骤直到遍历整个字符。我们也总结出时间复杂度为`(n-m+1)m`, n 为字符的长度，m 为我们要匹配的字符串长度。\n\n`Horspool`算法不同的是，当我们遇到 mismatch 也就是不匹配的情况，我们可以位移 1 个或者多个单位再进行比较。位移的多少取决于我们可以用一个`shift table`来表示。\n\n### 举例\n\n假设我们想要匹配的字符串为`IDIGDAB`。字符串的长度为`7`。进行匹配的字符为`IBAGHJDABADAB`。\n\n每个字符的值为字符串中出现在最右侧的索引。即`m - index in pattern -1`。\n\n比如 I 出现了两次，但最右侧的索引为 2, 那么 I 的位移为 `7 - 2 - 1 = 4`。\n\n最后一个字母`B`因为没有出现过，所以唯一单位为字母的长度也就是 7\n\n同理可以得出 shift table 如下\n\n| Letters |  I  |  D  |  G  |  A  |  B  | \\*  |\n| :-----: | :-: | :-: | :-: | :-: | :-: | :-: |\n|  Value  |  4  |  2  |  3  |  1  |  7  |  7  |\n\n有了 Shift Table 之后我们可以进行匹配，一旦有字符不匹配，我们即可参照 shift table 进行相对应的字符移动。\n\n首先`B`与`D`不匹配，根据 Shift Table, 我们需要将字符向右移动两个单位。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20174305.png?alt=media&token=083aa2a2-d97a-4bed-8efb-11004c845e94\" width=\"50%\" height=\"auto\" />\n\n现在`G`与`J`不匹配，由于`B`是我们字符串中比较的最后一个字符，所以我们参照`B`移动字符 7 个单位。然后重复步骤即可。\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/12.png?alt=media&token=92bac8ce-f00d-4404-a172-c73b817fcb9b\" width=\"50%\" height=\"auto\" />\n\n## 3. Hash 哈希\n\n### Hasing Function 哈希函数\n\n假设哈希表长度为 5, 可以利用哈希函数将元素的键利用余数来转换为整数键。\n\n比如要把(Emily, 6046321)写入到哈希表中。\n\n我们先把`Emily`每个字母利用`ord()`函数转换成相应的整数。\n\n`ord(e) + ord(m) + ord(i) + ord(l) + ord(y) = 5 + 13 + 9 + 12 + 25 = 64`\n\n因为哈希表的长度为 5，64 除以 5 的余数为 4, 也就是转换后`6046321`的键。\n\n### Collision Handling 冲突解决\n\n如果在利用`哈希函数`转换键的时候出现相同的键怎么办呢? 比如两个元素 `Key mod 5`之后都是 4。如何解决这两个元素在哈希表中位置得问题呢？\n\n#### 1. Separate Chaining 分离链接\n\n第一种方法是分离链接，也就是用链表的方式来将相同的键组合在一起。\n\n比如给定哈希函数`h(i) = i mod 7`, 将下面的键值写入到哈希表中\n\n| Key | Values |\n| :-: | :----: |\n| 44  | name1  |\n| 12  | name2  |\n| 23  | name3  |\n| 16  | name4  |\n|  5  | name5  |\n| 28  | name6  |\n\n我们可以发现`44`, `23`, 以及`16`的 key 都是相同的，那么我们就可以用链表的方式把这它们连接起来。最后得到的哈希表如下。\n\nh(44) = 44 mod 7 = 2\nh(23) = 23 mod 7 = 2\nh(16) = 23 mod 7 = 2\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20202615.png?alt=media&token=c720646f-7ef4-463b-a407-dbce665c6256\" width=\"70%\" height=\"auto\" />\n\n<br />\n\n#### 2. Closed Hashing 封闭散列\n\n封闭散列解决冲突的方式为如果有冲突，向后找是否有空缺的位置并把键值写入到该位置。\n\n我们用之前相同的例子，但是这次用封闭散列来解决冲突问题。\n\n首先转换所有键\n\n```markdown\nh(44) = 2\nh(12) = 5\nh(23) = 2\nh(16) = 2\nh(5) = 5\nh(28) = 0\n```\n\n然后依次写入到哈希表中，name3 和 name1 都是相同键，但是 index 2 已经没有位置，所以我们把 name3 放到 index3 的位置。同理其他键值最后得到哈希表如下:\n\n| Index | Values |\n| :---: | :----: |\n|   0   | name6  |\n|   1   |        |\n|   2   | name1  |\n|   3   | name3  |\n|   4   | name4  |\n|   5   | name2  |\n|   6   | name5  |\n\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n## 4. Summary of sorting algorithms 排序算法总结\n\n| 算法     | 最好的情况 | 最坏的情况 | 稳定性 |\n| -------- | ---------- | ---------- | ------ |\n| 选择排序 | n2         | n2         | 稳定   |\n| 冒泡排序 | n          | n2         | 稳定   |\n| 插入排序 | n          | n2         | 稳定   |\n| 归并排序 | n logn     | n logn     | 稳定   |\n| 快速排序 | n logn     | n2         | 不稳定 |\n| 堆排序   | n logn     | n logn     | 不稳定 |\n| 计数排序 | n          | n + u      | 不稳定 |\n\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n# Data Structure 数据结构\n\n> 数据结构是用来管理和储存数据的一种方式\n\n## 1. Linear Data Structure 线性数据结构\n\n### Array 数组\n\n一个数组通常有一系列相同类型的元素组成，每个元素都有相对应的索引值。\n\n比如下面`arr_list`数组，`item one`对应的索引值就是 0。\n\n```python\narr_list = ['item one', 'item two', 'item three']\n```\n\n由于数组的长度需要预先决定来分配内存。所以对于长度明确，或者插入删除不频繁的数据，数组比较适合。但如果数据需要频发插入或者删除，那我们可以用其他的数据结构。\n\n### Linked List 链表\n\n链表由 0 或者多个叫做节点的元素组成，每个节点都有一个指针指向下一个节点。\n\n在数组中，如果想要拿到索引为 2 的值，可以直接用 arr[2]。但是在链表中，我们要从`head`开始一直往右进行节点的查找。\n\n**单向链表**\n\n单向链表，即每个节点中有一个指针指向后继节点。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/linkedlist.png?alt=media&token=069ba69f-0b49-48d0-a353-5002b821f1cf\" width=\"70%\" height=\"auto\"/>\n<br>\n\n**双向链表**\n\n双向链表，每个节点中有两个指针并分别指向前驱和后继。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/linkedlist2.png?alt=media&token=cfaf0918-27ee-49ef-9249-c0d3f81c6c22\" width=\"70%\" height=\"auto\" />\n<br>\n\n#### 复杂度分析\n\n- Search: `O(n)`\n- Insert: `O(1)`\n- Delete: `O(1)`\n\n### Stack 栈\n\n遵循`后进先出(LIFO)`原则, 可以想象一叠盘子，你每清理完一个碟子你往上叠。结束后你从最上面的开始一个一个回收。最后一个清洁的碟子也是第一个拿走的。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/stack.png?alt=media&token=3d248a10-e203-4e05-9783-a2b619889ab8\" width=\"70%\" height=\"auto\"/>\n<br />\n\n插入方法为`push`，删除方法为`pop`。\n\n#### 复杂度分析\n\n- Search: `O(n)`\n- Insert: `O(1)`\n- Delete: `O(1)`\n\n### Queue 队列\n\n跟栈相反，队列遵循先进先出原则。可以想象以下我们平常超市购物结账排队的时候。排在第一位置的人也是先结完账最先离开的。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/Introduction.png?alt=media&token=d5dc1f40-5d9a-44b2-94c9-01c0490fab75\" width=\"50%\" height=\"auto\"/>\n<br />\n\n#### 复杂度分析\n\n- Search: `O(n)`\n- Insert: `O(1)`\n- Delete: `O(1)`\n\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n## 2. Non-Linear Data Structures: Graph 图\n\n### Types 图的分类\n\n图又可分为有向图和无向图\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20122800.png?alt=media&token=a82cd4fb-63c0-4927-88c9-f3e7ffe13c64\" width=\"70%\" height=\"auto\" />\n\n### Representing Graphs 图的表达方式\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20123400.png?alt=media&token=45ef871a-d7a2-465d-aa06-558c07a4acb8\"  width=\"50%\" height=\"auto\"/>\n\n#### 1. Adjacency Matrix 邻接矩阵\n\n用一个 2D 数组来储存图中顶点间的关系数据。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20123411.png?alt=media&token=4d49cadd-470a-4144-9eb9-75a662fa8de7\"  width=\"50%\" height=\"auto\"/>\n\n#### 2. Adjacency Lists 邻接表\n\n用来记录每一个节点所连接的所有其他节点。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20123423.png?alt=media&token=e060e48e-5d26-4938-bacd-b6140111f128\"  width=\"50%\" height=\"auto\"/>\n\n### Graph Traversal 图的遍历\n\n#### 1. Depth-First Search (DFS) 深度优先搜索\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/DFS.png?alt=media&token=b19c9461-5ea7-4a02-83d5-97f59227dec3\" width=\"50%\" height=\"auto\" />\n\nDFS 我们随意选择一个起点然后进行其他节点的探索，直到所有的节点全部被探索过。\n\n比如我们从 a 开始，我们现在可以走`b`, `f`, 或者`e`。我们用字母升序选择`b`，然后`f`最后`e`。\n\n这个时候已经没有路可以走了。那我们就要往回走到`b`。然后继续`g -> c -> d -> h`\n\n最后 DFS 的遍历为`abfegcdh` 如下图所示。当然如果一开始我们走完 a 选择其他路线，那 DFS 的遍历结果也是不一样的。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/d'f's%E6%89%B9%E6%B3%A8%202020-07-20%20210327.png?alt=media&token=b7bdde72-f3e2-4d8b-89ae-c3d669bc2543\" width=\"50%\" height=\"auto\" />\n\n#### 2. Breadth-First Search (BFS) 广度优先搜素\n\n广度优先搜索则是先把每个节点所有可行路线都走一遍，然后再回到每个子节点进行搜索。\n\n现在我们用 BFS 遍历之前的例子。\n\n我们从 a 开始，这时候有 b, e, f。然后 a 已经遍历完。我们开始遍历 b，发现只有 g。g 遍历完 c 和 h 后只剩下 d。\n\n得到 BFS `abefgchd`\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/BFS.png?alt=media&token=b7229ee9-55ad-479e-8acd-d1fae3464353\" width=\"50%\" height=\"auto\" />\n\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n# Greedy Approach 贪心算法\n\n## 1. Prim's Algorithm 普林姆算法\n\n在普林姆算法中，我们随意选择一个起点，之后每次都选择访问个节点的最短的路线，直到所有的节点都被访问过。\n\n### 举例\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/prim.png?alt=media&token=dde1bf4c-bfce-47b0-b6f7-c72f4373ce74\" width=\"60%\" height=\"auto\" />\n\n我们从 a 开始，可以发现最短路径为`af`，所以我们连接`af`。现在找到所有与 a 和 f 相连的节点的最短路径，我们找到`fe`最短, 连接`fe`。\n\n这个时候`ae`是最短的，但是`a`和`e`都已经访问过了，所以我们不能选择这条路径。\n\n于是我们连接`eb`, 然后`bc`最后`cd`结束得到最小生成树。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20212525.png?alt=media&token=e173c8f3-b841-4052-922e-007faa4de91a\" width=\"50%\" height=\"auto\" />\n\n### 参考\n\n{% youtube cplfcGZmX7I %}\n\n## 2. Kruskal's Algorithm 克鲁斯卡尔算法\n\n与 Prim 算法不同的时，Kruskal 算法我们不是随意选择一个起点，而是先选择图中最短的一条路径，然后在不制造出 cycle 的情况下，找到所有最短的路线直到所有节点被访问。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/prim.png?alt=media&token=dde1bf4c-bfce-47b0-b6f7-c72f4373ce74\" width=\"60%\" height=\"auto\" />\n\n同样用这个图，我们这次从`fe`开始，然后同样最短的路径有`af`和`cd`都为 4，可以都连接。\n\n这个时候`ae`不能连接因为会出现`cycle`。\n\n所以我们连接下一个最短路径`bc`。之后时`be`。于是得到最小生成树如下所示，可以发现跟 Prim 算法的结果相同。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20212525.png?alt=media&token=e173c8f3-b841-4052-922e-007faa4de91a\" width=\"50%\" height=\"auto\" />\n\n{% youtube 71UQH7Pr9kU %}\n\n## 3. Dijkstra's Algorithm: 迪克斯特拉算法\n\n{% youtube _lHSawdgXpI %}\n","slug":"10-common-algo-review","published":1,"updated":"2020-07-21T21:02:37.480Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckdnmttd7000trwuidpeg3m9t","content":"<blockquote>\n<p>总结暑假算法课 COMP3761 中学习到的知识点，代码实现以 python 来展示。课程内容参考 <a href=\"https://www.amazon.ca/Introduction-Design-Analysis-Algorithms-3rd/dp/0132316811\" target=\"_blank\" rel=\"noopener\">Introduction to The Design and Analysis of Algorithm</a>. 前半部分主要分析各种排序算法的原理以及代码实现。后半部分主要为图算法和最短路径的应用。</p>\n</blockquote>\n<ol>\n<li>Brute Force 暴力求解</li>\n<li>Decrease and Conquer 减治法</li>\n<li>Divide and Conquer 分治法</li>\n<li>Transform and Conquer 变治法</li>\n<li>Time Space Tradeoff 时空权衡</li>\n<li>Data Structure 数据结构</li>\n<li>Greedy Approach 贪心算法</li>\n</ol>\n<h1 id=\"Brute-Force-暴力求解\"><a href=\"#Brute-Force-暴力求解\" class=\"headerlink\" title=\"Brute Force 暴力求解\"></a>Brute Force 暴力求解</h1><blockquote>\n<p>从字面意思理解，brute force 就是用最直接的方法来解决相应的问题。比如我们设计一个猜数字的游戏。数字范围为 0-10，根据用户的输入返回是否大还是小。那暴力求解的算法就是从 0 开始然后递增，最好的情况是 1 次猜中，但最坏的情况<code>Worst case</code>就是 10 次。</p>\n</blockquote>\n<h2 id=\"1-Bubble-Sort-冒泡排序\"><a href=\"#1-Bubble-Sort-冒泡排序\" class=\"headerlink\" title=\"1. Bubble Sort 冒泡排序\"></a>1. Bubble Sort 冒泡排序</h2><p>假设我们有一个可排序的数组, 冒泡排序即从第一个元素开始，每个元素进行两两比较。如果左边的大于右边的,就进行位置替换。完成第一个 iteration 之后继续从第二个元素开始进行相同的步骤。</p>\n<p>冒泡排序伪代码如下:</p>\n<figure class=\"highlight livecodeserver\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> i = <span class=\"number\">0</span> <span class=\"built_in\">to</span> A.<span class=\"built_in\">length</span> - <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> j = <span class=\"number\">0</span> <span class=\"built_in\">to</span> A.<span class=\"built_in\">length</span> - <span class=\"number\">1</span> -i</span><br><span class=\"line\">        <span class=\"keyword\">if</span> left &gt; <span class=\"literal\">right</span>:</span><br><span class=\"line\">            swap(left, <span class=\"literal\">right</span>)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"举例\"><a href=\"#举例\" class=\"headerlink\" title=\"举例\"></a>举例</h3><p>比如我们有一个数组<code>[3, 0, 6, 1]</code>。那我们先从第一位<code>3</code>开始， 先是<code>3</code>和<code>0</code>比较，<code>3</code>大于<code>0</code>于是我们进行调换。比较完成后我们递增到下一位继续进行两两比较</p>\n<p>现在数组为<code>[0, 3, 6, 1]</code>。于是我们继续进行比较<code>3</code>和<code>6</code>。很明显<code>3</code>小于<code>6</code>，我们不需要进行调换。我们来到最后一组比较<code>6</code>和<code>1</code>。左边大于右边我们进行调换。</p>\n<p>此时我们第一个 iteration 的排序完成了, <code>[0, 3, 1, 6]</code>。</p>\n<p>同理我们现在从<code>index=1</code>的位置开始进行以上相同的步骤直到结束。</p>\n<h3 id=\"代码实现\"><a href=\"#代码实现\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><p><strong>Python</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">bubble_sort</span><span class=\"params\">(array)</span>:</span></span><br><span class=\"line\">    n = len(array)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(n - <span class=\"number\">1</span>):</span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> range(n - <span class=\"number\">1</span> -i):</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(array[j] &gt; array[j+<span class=\"number\">1</span>]):</span><br><span class=\"line\">                array[j], array[j+<span class=\"number\">1</span>] = array[j+<span class=\"number\">1</span>], array[j]</span><br><span class=\"line\">    <span class=\"keyword\">return</span> array</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"复杂度分析\"><a href=\"#复杂度分析\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h3><p>冒泡排序有两个<code>for</code>循环，所以冒泡排序的复杂度 n<sup>2</sup></p>\n<h2 id=\"2-Selection-Sort-选择排序\"><a href=\"#2-Selection-Sort-选择排序\" class=\"headerlink\" title=\"2. Selection Sort 选择排序\"></a>2. Selection Sort 选择排序</h2><p>选择排序首先设定数组第一个字符的元素为最小值，然后遍历整个数组。如果在遍历过程中发现有元素小于当前设定的最小值，就将该元素设置为新的最小值。</p>\n<p>重复步骤结束 iteration 并把此循环中最小值起始的值替换完成排序。伪代码实现如下:</p>\n<figure class=\"highlight matlab\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> <span class=\"built_in\">i</span> = <span class=\"number\">0</span> to Array.<span class=\"built_in\">length</span> <span class=\"number\">-1</span>:</span><br><span class=\"line\">    <span class=\"built_in\">min</span> = <span class=\"built_in\">i</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> <span class=\"built_in\">j</span> = <span class=\"built_in\">i</span>+<span class=\"number\">1</span> to Array.<span class=\"built_in\">length</span>:</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"built_in\">j</span> &lt; <span class=\"built_in\">min</span>):</span><br><span class=\"line\">            <span class=\"built_in\">min</span> = <span class=\"built_in\">j</span></span><br><span class=\"line\">    swap(<span class=\"built_in\">i</span>, <span class=\"built_in\">j</span>)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"举例-1\"><a href=\"#举例-1\" class=\"headerlink\" title=\"举例\"></a>举例</h3><p>假设我们用选择排序算法来排序<code>[3, 0, 2]</code>数组。</p>\n<p>首先把最小值<code>min</code>设置为<code>array[0]</code>也就是<code>3</code>, 然后<code>i+1</code>开始进行判断，<code>0</code>小于<code>3</code>。于是我们现在把<code>min</code>设置为<code>0</code>。</p>\n<p>现在<code>2</code>大于<code>0</code>，不需要更改最小值。于是第一个循环完成了。将<code>i</code>和更新后的最小值<code>min</code>调换，即调换<code>3</code>和<code>0</code>的位置得到</p>\n<p><code>[0, 3, 2]</code>。</p>\n<p>同理我们从<code>i = 1</code>开始第二个 iteration，<code>min</code>现在设置为<code>array[1]</code>也就是<code>3</code>。比较<code>3</code>和<code>2</code>条件成立进行调换位置。</p>\n<p>最后我们得到<code>[0, 2, 3]</code></p>\n<h3 id=\"代码实现-1\"><a href=\"#代码实现-1\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><p><strong>Python</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">selection_sort</span><span class=\"params\">(array)</span>:</span></span><br><span class=\"line\">    n = len(array)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(n):</span><br><span class=\"line\">        min = i</span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> range(i+<span class=\"number\">1</span>, n):</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(array[j] &lt; array[min]):</span><br><span class=\"line\">                min = j</span><br><span class=\"line\">        array[i], array[min] = array[min], array[i]</span><br><span class=\"line\">    <span class=\"keyword\">return</span> array</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"复杂度分析-1\"><a href=\"#复杂度分析-1\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h3><p>选择排序的复杂度 n<sup>2</sup></p>\n<h2 id=\"3-Brtute-Force-String-Match-暴力求解-字符串匹配\"><a href=\"#3-Brtute-Force-String-Match-暴力求解-字符串匹配\" class=\"headerlink\" title=\"3. Brtute Force String Match 暴力求解 字符串匹配\"></a>3. Brtute Force String Match 暴力求解 字符串匹配</h2><p>在浏览器查找一个字符串时，我们可以用<code>Ctrl+F</code>来进行文本内容的匹配搜索。如果暴力求解的方法来实现字符串匹配，我们就要对字符串内每个字符开始进行比较。一旦有一个字符不匹配我们位移一个单位继续进行判断。</p>\n<h3 id=\"举例-2\"><a href=\"#举例-2\" class=\"headerlink\" title=\"举例\"></a>举例</h3><p>比如我们要在<code>I love python</code>中搜索<code>python</code>。首先从<code>I</code>开始，<code>p</code>并不匹配<code>I</code>，移动索引一个单位。</p>\n<p>现在<code>python</code>与<code>love py</code>对齐进行匹配。</p>\n<p><code>p</code>依旧不匹配空格。同理移动一个索引继续匹配，直到 index = 7 的位置才匹配成功并返回 index = 7。</p>\n<h3 id=\"代码实现-2\"><a href=\"#代码实现-2\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> n - m:</span><br><span class=\"line\">    j = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> j &lt; m <span class=\"keyword\">and</span> pattern[j] = text[i + j]:</span><br><span class=\"line\">        j = j + <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(j = m):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> i</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"number\">-1</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"复杂度分析-2\"><a href=\"#复杂度分析-2\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h3><p>最坏的情况下我们要进行<code>(n-m+1)m</code>次对比。</p>\n<h2 id=\"4-Knapsack-Problem-背包问题\"><a href=\"#4-Knapsack-Problem-背包问题\" class=\"headerlink\" title=\"4. Knapsack Problem 背包问题\"></a>4. Knapsack Problem 背包问题</h2><p>背包问题即给定一些特定物品并有对应的价格和重量。然后有一个限重 W 的背包，每个物品只能选择一次。在不超重的情况下如何做到<strong>价值最大化</strong>选择？</p>\n<p>比如我们有一个最重承受 10kg 的背包。并有以下物品可以选择: 物品一: 2kg, 10 元。 物品二: 5kg, 30 元。物品三: 4kg, 20 元….如此。</p>\n<p>用暴力算法来解决这个问题即将所有可能的组合先全部列出来，然后判断并筛选超重的集合，最后比较所有集合来找到价值最高的集合。</p>\n<p>算法效率来讲，假设我们有 n 个物品，那复杂度即为 <strong>2<sup>n</sup></strong></p>\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n<h1 id=\"Decrease-and-Conquer-减治法\"><a href=\"#Decrease-and-Conquer-减治法\" class=\"headerlink\" title=\"Decrease and Conquer 减治法\"></a>Decrease and Conquer 减治法</h1><blockquote>\n<p>跟暴力求解不同，减治法是通过<strong>逐步缩小问题规模</strong>来解决一个问题。简而言之，回到我们之前猜数字的游戏。如果用暴力求解，我们要一个数字一个数字猜测。减治法可以先把数字对半分，比如猜从 0-10 的数字，我们可以先拆成 0-5 和 6-10。如果我们给出 5 系统显示太高，那我们可以继续对半拆除从 0-4 进行同样的步骤。直到最后我们找到数字也就是一直拆分问题。</p>\n</blockquote>\n<h2 id=\"1-Insertation-Sort-插入排序\"><a href=\"#1-Insertation-Sort-插入排序\" class=\"headerlink\" title=\"1. Insertation Sort 插入排序\"></a>1. Insertation Sort 插入排序</h2><p>插入排序从数组的第一个索引开始，跟左边的元素进行比较，如果小于左边的元素进行调换。</p>\n<p>假设给定一个数组<code>[0, 1, 5, 3, 2]</code>。</p>\n<p>第一部分<code>[0, 1]</code>是有序数列，后半部分为无序数列。如果我们每次把无序数列的第一个元素插入到正确的位置后，整体问题的规模就减少 1。</p>\n<p>如次重复<code>n-1</code>次后，数组也重新排成有序了。</p>\n<blockquote>\n<p>重复 n-1 是因为只有一个元素的数组必定是有序的。</p>\n</blockquote>\n<p>可以把插入排序想象成扑克牌卡片排序。</p>\n<h3 id=\"举例-3\"><a href=\"#举例-3\" class=\"headerlink\" title=\"举例\"></a>举例</h3><p>假设我们对数组<code>A=[3, 2, 4, 0]</code>进行插入排序</p>\n<p>首先从 A[0]开始，第一个元素左边没有其他元素，所以<code>3</code>在正确的位置。现在我们无序部分为<code>[2, 4 ,0]</code></p>\n<p>我们发现 2 &lt; 3, 于是我们调换 2 和 3 的位置得到<code>[2, 3, 4, 0]</code>。现在无序部分为<code>[4, 0]</code>。</p>\n<p>4 不需要任何位置更改，于是无序部分只剩下<code>[0]</code>。</p>\n<p>我们把 0 跟左边的对比，直到 0 &lt; 2 完成左移的过程。所以我们把 0 插入到第一个 index。最终得到有序数组<code>[0, 2, 3, 4]</code></p>\n<h3 id=\"代码实现-3\"><a href=\"#代码实现-3\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><p><strong>Python</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">insertion_sort</span><span class=\"params\">(array)</span>:</span></span><br><span class=\"line\">    n = len(array)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">1</span>, n):</span><br><span class=\"line\">        index = array[i]</span><br><span class=\"line\">        <span class=\"comment\"># the index in the left of i</span></span><br><span class=\"line\">        j = i - <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># 如果左边还有数字 并且 当前元素小于它左边的元素：</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> j &gt;= <span class=\"number\">0</span> <span class=\"keyword\">and</span> index &lt; array[j]:</span><br><span class=\"line\">            <span class=\"comment\"># 调换当前元素和左边的元素</span></span><br><span class=\"line\">            array[j + <span class=\"number\">1</span>] = array[j]</span><br><span class=\"line\">            <span class=\"comment\"># 继续向左移动</span></span><br><span class=\"line\">            j = j - <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"comment\"># 循环结束 插入到对应的位置</span></span><br><span class=\"line\">        array[j + <span class=\"number\">1</span>] = index</span><br><span class=\"line\">    <span class=\"keyword\">return</span> array</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"复杂度分析-3\"><a href=\"#复杂度分析-3\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h3><p><code>插入排序</code>的复杂度为 n<sup>2</sup></p>\n<h2 id=\"2-Binary-Search-二分查找\"><a href=\"#2-Binary-Search-二分查找\" class=\"headerlink\" title=\"2. Binary Search 二分查找\"></a>2. Binary Search 二分查找</h2><p>目前我们涉及到的算法都是从数组的第一个位置开始然后进行遍历判断。二分查找则从一个数组的中间开始，从左往右一次查找，直到找到该元素或循环结束。</p>\n<p><strong>Python</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">binary_search</span><span class=\"params\">(array, key)</span>:</span></span><br><span class=\"line\">    l = <span class=\"number\">0</span></span><br><span class=\"line\">    r = len(array) - <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> l &lt;= r:</span><br><span class=\"line\">        m = (l + r) // <span class=\"number\">2</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> key == array[m]:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> m</span><br><span class=\"line\">        <span class=\"keyword\">elif</span> key &lt; array[m]:</span><br><span class=\"line\">            r = m - <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            l = m + <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">-1</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-Binary-Search-Tree-Traversal-二叉树的遍历\"><a href=\"#3-Binary-Search-Tree-Traversal-二叉树的遍历\" class=\"headerlink\" title=\"3. Binary Search Tree Traversal 二叉树的遍历\"></a>3. Binary Search Tree Traversal 二叉树的遍历</h2><p>将数组(有序)分为两部分，数组的中间元素为树的根节点，左边和右边的元素再进行相同的划分，小于根节点的元素放在左边，大于的在右边。</p>\n<p>根据二叉搜索树我们可以进行数组的插入，查询和删除节点。接下来我们引入二叉树遍历即怎样知道节点是否已经被访问过了。</p>\n<h3 id=\"Pre-order-Traversal-前序遍历\"><a href=\"#Pre-order-Traversal-前序遍历\" class=\"headerlink\" title=\"Pre-order Traversal 前序遍历\"></a>Pre-order Traversal 前序遍历</h3><p>从 Root 开始，每个节点进行<code>Visit -&gt; Left -&gt; Right</code></p>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/1WxLM2hwL-U\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n\n<h3 id=\"In-order-Traversal-中序遍历\"><a href=\"#In-order-Traversal-中序遍历\" class=\"headerlink\" title=\"In-order Traversal 中序遍历\"></a>In-order Traversal 中序遍历</h3><p>从 Root 开始，每个节点进行<code>Left -&gt; Visit -&gt; Right</code></p>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/5dySuyZf9Qg\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n\n<h3 id=\"Post-order-Traversal-后序遍历\"><a href=\"#Post-order-Traversal-后序遍历\" class=\"headerlink\" title=\"Post-order Traversal 后序遍历\"></a>Post-order Traversal 后序遍历</h3><p>从 Root 开始，每个节点进行<code>Left -&gt; Right -&gt; Visit</code></p>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/4zVdfkpcT6U\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n<h1 id=\"Divide-and-Conquer-分治法\"><a href=\"#Divide-and-Conquer-分治法\" class=\"headerlink\" title=\"Divide and Conquer 分治法\"></a>Divide and Conquer 分治法</h1><blockquote>\n<p>分治法的理论为把一个大的问题分成若干个小问题，然后逐个解决小问题，最后将小问题的解决方案合并到原来大问题的解。比如乐高玩具，一个乐高模型分成若干个小问题即乐高零件。小问题的解就是将各个组件先拼好，比如房顶，门之类。最后再将各个小组件组合起来拼成完整的模型。</p>\n</blockquote>\n<h2 id=\"1-有序数组合并\"><a href=\"#1-有序数组合并\" class=\"headerlink\" title=\"1. 有序数组合并\"></a>1. 有序数组合并</h2><p>在介绍归并排序和快速排序之前，我们先来了解以下有序数组的合并。</p>\n<p>给定两个有序数组<code>a</code>和<code>b</code></p>\n<p><code>a = [2, 3, 8, 9]</code><br><code>b = [1, 4, 5, 7]</code></p>\n<p>现在需要把数组 a 和 b 合并为一个新的有序数组到一个空的数组 <code>c []</code>。</p>\n<ol>\n<li>首先我们用三个变量分别来记录三个数组的索引值并初始化为 0， 数组 a 为<code>i</code>， 数组 b 为<code>j</code>，数组 c 为<code>k</code>。</li>\n<li>然后我们比较 <code>a[i]</code> 和 <code>b[j]</code> 并将较小的元素存入到数组<code>c[0]中</code>。初始化为 0，所以我们首先比较<code>a[0]</code>和<code>b[0]</code>。</li>\n<li>之后我们将较小元素的数组索引和数组 c 的索引加 1。</li>\n<li>然后我们继续重复第二步进行比较</li>\n</ol>\n<p>最好的情况下我们要比较 <code>n/2</code> 个元素，最坏的情况要比较 <code>n-1</code> 次。</p>\n<p>由此可以得到合并有序数组的复杂度为 <code>n</code>。</p>\n<h2 id=\"2-Merge-Sort-归并排序\"><a href=\"#2-Merge-Sort-归并排序\" class=\"headerlink\" title=\"2. Merge Sort 归并排序\"></a>2. Merge Sort 归并排序</h2><p>归并排序首先要将数组一直拆分直到数组内只有一个元素剩余。然后对拆分后的数组进行重新排序，排序完成后进行归并即得到有序的数组。</p>\n<h3 id=\"举例-4\"><a href=\"#举例-4\" class=\"headerlink\" title=\"举例\"></a>举例</h3><p>给定一个数组<code>[2, 1, 8, 6]</code>。</p>\n<p>首先拆分成<code>[2, 1]</code>和<code>[8, 6]</code>。然后继续进行拆分直到数组内只有一个元素，因为<strong>只有一个元素的数组必定是有序的</strong>。</p>\n<p>得到<code>[2], [1], [8], [6]</code>。现在我们完成了拆分过程，每个数组都是有序的。</p>\n<p>接下来我们将数组两两归并排序，<code>[1, 2]</code>和<code>[6, 8]</code>。</p>\n<p>继续将这两个数组合并最终得到<code>[1, 2, 6, 8]</code>。</p>\n<h3 id=\"复杂度分析-4\"><a href=\"#复杂度分析-4\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h3><p>归并排序的复杂度 <code>nlogn</code>。这比我们之前的冒泡排序和选择排序 n<sup>2</sup>的复杂度好了很多。</p>\n<h3 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h3><div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/4VqmGXwpLqc\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n\n<h2 id=\"3-Quick-Sort-快速排序\"><a href=\"#3-Quick-Sort-快速排序\" class=\"headerlink\" title=\"3. Quick Sort 快速排序\"></a>3. Quick Sort 快速排序</h2><p>快速排序的原理是首先我们选择一个<code>中轴(pivot)</code>, 一般选择数组内的第一个值。然后有比中轴值小的元素位于中轴的左侧，而大于中轴值的元素位于中轴的右侧。最终实现有序的排序。</p>\n<h3 id=\"举例-5\"><a href=\"#举例-5\" class=\"headerlink\" title=\"举例\"></a>举例</h3><p>给定一个数组 <code>a = [12, 25, 33, 5, 8]</code>。</p>\n<p>选择第一个值<code>a[0]=44</code>为我们的中轴，并用<code>p</code>来记录。同时我们用变量<code>i</code>记录替换索引，<code>j</code>来记录遍历的索引。</p>\n<p>我们的目标即在 j 的遍历过程中，如果 a[j]的值小于当前的中轴值，我们将 i 递增 1，然后将 a[i]和 a[j]进行调换。当 j 遍历完数组后，我们再将 a[i]与中轴调换位置。</p>\n<p>起始我们的中轴<code>p = 12</code>, <code>i = 0</code>, <code>j = 1</code>。</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">p 中轴</th>\n<th align=\"center\">i</th>\n<th align=\"center\">j</th>\n<th align=\"center\">a[j]</th>\n<th align=\"center\">Compare</th>\n<th align=\"center\">Procedure</th>\n<th align=\"center\">Array</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">12</td>\n<td align=\"center\">0</td>\n<td align=\"center\">1</td>\n<td align=\"center\">25</td>\n<td align=\"center\">25 &gt; 12</td>\n<td align=\"center\">不需要调换 递增 j</td>\n<td align=\"center\"><code>[12, 25, 33, 5, 8]</code></td>\n</tr>\n<tr>\n<td align=\"center\">12</td>\n<td align=\"center\">0</td>\n<td align=\"center\">2</td>\n<td align=\"center\">33</td>\n<td align=\"center\">33 &gt; 12</td>\n<td align=\"center\">不需要调换 递增 j</td>\n<td align=\"center\"><code>[12, 25, 33, 5, 8]</code></td>\n</tr>\n<tr>\n<td align=\"center\">12</td>\n<td align=\"center\">0</td>\n<td align=\"center\">3</td>\n<td align=\"center\">5</td>\n<td align=\"center\">5 &lt; 12</td>\n<td align=\"center\">递增 i i = 1 替换 a[i]和 a[j]的位置 递增 j</td>\n<td align=\"center\"><code>[12, 5, 33, 25, 8]</code></td>\n</tr>\n<tr>\n<td align=\"center\">12</td>\n<td align=\"center\">1</td>\n<td align=\"center\">4</td>\n<td align=\"center\">8</td>\n<td align=\"center\">8 &lt; 12</td>\n<td align=\"center\">递增 i i = 2 替换 a[i]和 a[j]的位置 递增 j</td>\n<td align=\"center\"><code>[12, 5, 8, 25, 33]</code></td>\n</tr>\n</tbody></table>\n<p>现在第一个 iteration 完成，我们将中轴 p = 12 与 a[2]的位置替换</p>\n<p>得到<code>[8, 5, 12, 25, 33]</code>。我们可以发现现在 12 的左边都是小于 12 的，而右边都是大于 12 的。也就是说我们接下来只要对左边和右边的部分进行相同的操作即可完成快速排序。</p>\n<h3 id=\"代码实现-4\"><a href=\"#代码实现-4\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">partition</span><span class=\"params\">(array)</span>:</span></span><br><span class=\"line\">    l = <span class=\"number\">0</span></span><br><span class=\"line\">    r = len(array) - <span class=\"number\">1</span></span><br><span class=\"line\">    pivot = a[l]</span><br><span class=\"line\">    s = l</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(l+<span class=\"number\">1</span>, r+<span class=\"number\">1</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> a[i] &lt; p:</span><br><span class=\"line\">            s += <span class=\"number\">1</span></span><br><span class=\"line\">            a[s], a[i] = a[i], a[s]</span><br><span class=\"line\">            a[l], a[s] = a[s], a[l]</span><br><span class=\"line\">    <span class=\"keyword\">return</span> s</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"复杂度分析-5\"><a href=\"#复杂度分析-5\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h3><p>快速排序的复杂度为<code>nlong(n)</code></p>\n<h3 id=\"参考-1\"><a href=\"#参考-1\" class=\"headerlink\" title=\"参考\"></a>参考</h3><div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/cnzIChso3cc\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n<h1 id=\"Transform-and-Conquer-变治法\"><a href=\"#Transform-and-Conquer-变治法\" class=\"headerlink\" title=\"Transform and Conquer 变治法\"></a>Transform and Conquer 变治法</h1><h2 id=\"1-Instance-Simplification-Pre-sorting-预排序\"><a href=\"#1-Instance-Simplification-Pre-sorting-预排序\" class=\"headerlink\" title=\"1. Instance Simplification Pre-sorting 预排序\"></a>1. Instance Simplification Pre-sorting 预排序</h2><h3 id=\"Check-Elements-Uniqueness-判断数组内元素是否重复\"><a href=\"#Check-Elements-Uniqueness-判断数组内元素是否重复\" class=\"headerlink\" title=\"Check Elements Uniqueness 判断数组内元素是否重复\"></a>Check Elements Uniqueness 判断数组内元素是否重复</h3><p>给出一个数组，判断是否该数组存在重复元素。</p>\n<p>我们先用暴力求解来看下</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">is_unique_bf</span><span class=\"params\">(array)</span>:</span></span><br><span class=\"line\">    n = len(array)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(n - <span class=\"number\">1</span>):</span><br><span class=\"line\">        <span class=\"comment\"># 存储当前索引元素变量</span></span><br><span class=\"line\">        index_value = array[i]</span><br><span class=\"line\">        <span class=\"comment\"># 循环数组 查找是否有匹配相等的</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> range(i+<span class=\"number\">1</span>, n):</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(array[j] == index_value):</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">False</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">True</span></span><br></pre></td></tr></table></figure>\n\n<p>我们发现用暴力求解的算法得到复杂度为 n<sup>2</sup>。</p>\n<p>假设我们先将数组进行排序得到一个<strong>有序数组</strong>，然后在进行判断是否存在重复元素。算法效率是否会有提升呢?</p>\n<p>如果是一个有序数组，我们只需要查看<strong>一个元素</strong>是否跟它的<strong>下一个元素</strong>是否相等即可。比如<code>[2, 3, 3, 5]</code>。a[1] = a[2] 很明显得出数组存在重复元素。</p>\n<h4 id=\"代码实现-5\"><a href=\"#代码实现-5\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h4><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">is_unique_presort</span><span class=\"params\">(array)</span>:</span></span><br><span class=\"line\">    n = len(array)</span><br><span class=\"line\">    <span class=\"comment\"># 假设我们先进行排序 比如利用之前比较高效的归并或者快速排序</span></span><br><span class=\"line\">    array.sort()</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(n<span class=\"number\">-1</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> array[i] == array[i+<span class=\"number\">1</span>]:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">False</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">True</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"复杂度分析-6\"><a href=\"#复杂度分析-6\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h4><p>由于算法由两部分构成（预排序数组和遍历数组查看元素相等），所以其复杂度也应该为两部分：排序的复杂度加检查元素相等的复杂度。</p>\n<p>我们在之前的分治法中发现归并排序和快速排序是目前相对有效的算法。假设我们的预排序使用归并算法，那么排序部分的复杂度即<code>nlogn</code></p>\n<p>由于我们只有一个循环遍历判断元素相等，所以整体算法复杂度为 <code>nlogn + n</code></p>\n<p>也就是 <code>nlogn</code></p>\n<h3 id=\"Find-the-Mode-寻找众数\"><a href=\"#Find-the-Mode-寻找众数\" class=\"headerlink\" title=\"Find the Mode 寻找众数\"></a>Find the Mode 寻找众数</h3><blockquote>\n<p>众数是出现在一组数据中最频繁的数。</p>\n</blockquote>\n<p>先来看下用暴力求解如何实现这个算法</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">find_mode_bf</span><span class=\"params\">(array)</span>:</span></span><br><span class=\"line\">  n = len(array)</span><br><span class=\"line\">  <span class=\"comment\"># 计数器字典 统计每个数字的频率</span></span><br><span class=\"line\">  counter = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(n):</span><br><span class=\"line\">    counter[array[i]] = counter.get(array[i], <span class=\"number\">0</span>) + <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">  occurence = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> key, value <span class=\"keyword\">in</span> counter.items():</span><br><span class=\"line\">    <span class=\"keyword\">if</span> value &gt; occurence:</span><br><span class=\"line\">      occurence = value</span><br><span class=\"line\">      mode = key</span><br><span class=\"line\">  <span class=\"keyword\">return</span> mode</span><br></pre></td></tr></table></figure>\n\n<p>最坏的情况下我们的数组每个元素都只出现一次 <code>[1, 2, 3, 4, 5, 6]</code>。复杂度为 n<sup>2</sup></p>\n<p>如果数组已经是一个有序数组，那么相同的元素在有序数组里都是相邻的。</p>\n<h4 id=\"代码实现-6\"><a href=\"#代码实现-6\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h4><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">compute_mode_presort</span><span class=\"params\">(array)</span>:</span></span><br><span class=\"line\">    array.sort()  <span class=\"comment\"># sort array</span></span><br><span class=\"line\">    i = <span class=\"number\">0</span>; freq = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> i &lt; len(array):</span><br><span class=\"line\">        temp_freq = <span class=\"number\">1</span>; temp_mode = array[i]</span><br><span class=\"line\">        <span class=\"keyword\">while</span> i + temp_freq &lt; len(array) <span class=\"keyword\">and</span> array[i+temp_freq] == temp_mode:</span><br><span class=\"line\">            temp_freq += <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> temp_freq &gt; freq:</span><br><span class=\"line\">            freq = temp_freq; mode = temp_mode</span><br><span class=\"line\">        i += temp_freq</span><br><span class=\"line\">    <span class=\"keyword\">return</span> mode</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"复杂度分析-7\"><a href=\"#复杂度分析-7\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h4><p>算法复杂度可以得出：<code>nlog n + log n = nlog n</code></p>\n<h2 id=\"2-Representation-Change-改变数据的表现形式\"><a href=\"#2-Representation-Change-改变数据的表现形式\" class=\"headerlink\" title=\"2. Representation Change 改变数据的表现形式\"></a>2. Representation Change 改变数据的表现形式</h2><p>除了对数组进行预处理外，我们还可以改变数据结构来提高算法效率。</p>\n<h3 id=\"Heap-堆的定义\"><a href=\"#Heap-堆的定义\" class=\"headerlink\" title=\"Heap 堆的定义\"></a>Heap 堆的定义</h3><ul>\n<li>堆的每个<strong>父节点</strong>(parent node)都<strong>大于或者等于</strong>它的子节点(child node)</li>\n<li>堆按照<strong>从左往右</strong>的顺序依次每层铺满子元素。</li>\n<li>在顶堆中，最大的元素为 Root 即根节点。</li>\n</ul>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20161423.png?alt=media&token=b043f03e-bca9-4e6e-a758-f47cd244e4c3\" width=\"60%\" height=\"auto\">\n\n<h3 id=\"Heap-Implementation-堆的应用\"><a href=\"#Heap-Implementation-堆的应用\" class=\"headerlink\" title=\"Heap Implementation 堆的应用\"></a>Heap Implementation 堆的应用</h3><p>将下面的堆树转换为数组表达形式</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20162133.png?alt=media&token=59dd7b37-81c6-4c7b-a581-8d6829b88ca1\" width=\"30%\" height=\"auto\">\n\n<br>\n\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20162142.png?alt=media&token=b6a265f0-24b1-4c66-b3f2-6453516e7b33\" width=\"50%\" height=\"auto\">\n\n<p>同理可以根据数组转化为堆树。从数组第一个元素开始，从左往右依次把每层铺满子元素。最后由上至下改变节点的位置以满足堆的性质。</p>\n<h3 id=\"Heap-Insert-堆的插入\"><a href=\"#Heap-Insert-堆的插入\" class=\"headerlink\" title=\"Heap Insert 堆的插入\"></a>Heap Insert 堆的插入</h3><p>假设我们要把一个数值插入到一个堆中,如何来实现呢?</p>\n<p>给定一个堆的排序 <code>[16, 15, 10, 14, 7, 9, 3, 2, 8 ,1]</code>，我们想要插入<code>17</code>到这个堆中</p>\n<ol>\n<li><p>首先把 17 插入到数组的最后一个位置中。</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20162537.png?alt=media&token=d9fddb9a-d835-49de-9e45-258f7508d8b1\" width=\"60%\" height=\"auto\">\n</li>\n<li><p>然后将 17 与它的父节点 7 进行比较。7 小于 17 不满足父节点大于子节点的特性，于是调换 7 和 17 的位置。</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/311.png?alt=media&token=caec7593-c628-4168-9543-7f2bf56fc7fe\" width=\"60%\" height=\"auto\">\n</li>\n<li><p>重复<strong>步骤 2</strong> 直到堆的性质得到满足。</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20162907.png?alt=media&token=7433c13d-ad7d-4d06-8b94-54ae543cddf7\" width=\"60%\" height=\"auto\">\n\n</li>\n</ol>\n<br>\n\n<h4 id=\"复杂度分析-8\"><a href=\"#复杂度分析-8\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h4><p>由于堆的高度为<code>log n</code>，所有堆的插入算法复杂度为<code>log n</code>。因为我们要检查每层是否都满足堆的性质。</p>\n<h3 id=\"Heap-Delete-堆的删除\"><a href=\"#Heap-Delete-堆的删除\" class=\"headerlink\" title=\"Heap Delete 堆的删除\"></a>Heap Delete 堆的删除</h3><p>从堆中删除一个元素的实现方法为：</p>\n<ol>\n<li>交换根节点的元素与堆尾的位置(数组中头尾交换)</li>\n<li>删除堆尾</li>\n<li><strong>由上至下</strong>调整堆的结构 (与堆的插入：由下至上相反)<ul>\n<li>如果不满足堆的性质就交换两个节点的值</li>\n</ul>\n</li>\n</ol>\n<p>比如我们之前的例子，<code>[17, 16, 10, 14, 15, 9, 3, 2, 8, 1, 7]</code>。我们想要删除根节点 17。按照上面的步骤来实现即</p>\n<ol>\n<li><p>替换 17 与 7 的位置</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/heapdelete1.png?alt=media&token=ee262f31-245a-4427-9b74-57169b2f16f8\" width=\"60%\" height=\"auto\">\n</li>\n<li><p>删除 节点 17</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/heapdelete2.png?alt=media&token=8a4fe4c4-36de-4aa2-b616-b558faca9e81\" width=\"60%\" height=\"auto\"></li>\n<li><p>调整堆的结构，7 与 16 对比，不满足堆的性质调换位置</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/heapdelete3.png?alt=media&token=23f09c2b-55aa-42cd-9892-fddd268b18de\" width=\"60%\" height=\"auto\"></li>\n<li><p>重复步骤 3 直到堆完全满足定义</p>\n</li>\n</ol>\n<h4 id=\"复杂度分析-9\"><a href=\"#复杂度分析-9\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h4><p>由于堆的高度为<code>log n</code>，所有堆的插入算法效率为<code>log n</code>。</p>\n<h3 id=\"Heap-Sort-堆排序\"><a href=\"#Heap-Sort-堆排序\" class=\"headerlink\" title=\"Heap Sort 堆排序\"></a>Heap Sort 堆排序</h3><h4 id=\"步骤\"><a href=\"#步骤\" class=\"headerlink\" title=\"步骤\"></a>步骤</h4><ol>\n<li>构建堆树(heap implementation)</li>\n<li>构建顶堆，即根元素为最大值。</li>\n<li>堆顶和堆尾的值交换顺序，并删除交换后的堆尾元素。</li>\n<li>调整堆的节点位置以满足堆的性质</li>\n<li>重复 1，2，3 步骤。</li>\n</ol>\n<h4 id=\"分析\"><a href=\"#分析\" class=\"headerlink\" title=\"分析\"></a>分析</h4><p>堆排序效率为<code>n logn</code></p>\n<h4 id=\"参考-2\"><a href=\"#参考-2\" class=\"headerlink\" title=\"参考\"></a>参考</h4><div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/2DmK_H7IdTo\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n<h1 id=\"Space-and-Time-Trade-Offs-时空权衡\"><a href=\"#Space-and-Time-Trade-Offs-时空权衡\" class=\"headerlink\" title=\"Space and Time Trade-Offs 时空权衡\"></a>Space and Time Trade-Offs 时空权衡</h1><h2 id=\"1-Counting-Sort-计数排序\"><a href=\"#1-Counting-Sort-计数排序\" class=\"headerlink\" title=\"1. Counting Sort 计数排序\"></a>1. Counting Sort 计数排序</h2><h3 id=\"举例-6\"><a href=\"#举例-6\" class=\"headerlink\" title=\"举例\"></a>举例</h3><p>给定一个数组<code>A = [4, 1, 3, 4, 3]</code></p>\n<ol>\n<li>找到数组内的最大值和最小值，即 4 和 1，创建一个新的数组<code>C = []</code>用来记录每个数值的频率，长度为<code>4-1+1=4</code><img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/1.png?alt=media&token=141e933e-8bf6-4a92-82c9-90083ec50f37\" width=\"50%\" height=\"auto\"></li>\n<li>遍历数组<code>A</code>并将每个数值的频率记录到<code>C</code>数组中。<code>C</code>数组的索引对应<code>A</code>数组的值。<br>最终结果为<code>C = [1, 0, 2, 2]</code>。<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/2.png?alt=media&token=bbfbf382-5953-4d24-b83b-16af4c5cdd1d\" width=\"50%\" height=\"auto\"></li>\n<li>将<code>C</code>数组内容的元素递归两两相加。比如<code>1+0=2</code>然后<code>2+2=4</code>如此。<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/3.png?alt=media&token=390d9075-b58b-4eca-b59f-5b099c9d841a\" width=\"50%\" height=\"auto\"></li>\n<li>最后，从<code>A</code>数组最后一个值开始，找到<code>C</code>数组内对应的<strong>频率减一</strong>后得到相对应的新的索引。然后放到新的数组<code>S = []</code><br>比如我们从<code>A[4] = 3</code>开始， 3 在 Count 中对应的频率是 3，我们减一后得到 2，于是我们把 3 放在<code>S[2]</code>的位置。<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/4.png?alt=media&token=1c7f75dd-7f15-4d5f-a432-376f7c1fd1fa\" width=\"50%\" height=\"auto\">\n重复步骤 4 最后得到有序数组`[1, 3, 3, 4, 4]`\n\n</li>\n</ol>\n<h3 id=\"复杂度分析-10\"><a href=\"#复杂度分析-10\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h3><p>整个算法过程中我们要遍历两个数组，一个是给定的数组，另一个为计算频率的数组。</p>\n<p>所以最好的情况下算法复杂度为 n。这比我们之前的分治法快速排序和归并排序更有效。</p>\n<h3 id=\"参考-3\"><a href=\"#参考-3\" class=\"headerlink\" title=\"参考\"></a>参考</h3><div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/8uyB78HNR4M\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n\n<h2 id=\"2-Horspool’s-Algorithm-String-Matching-字符串匹配算法\"><a href=\"#2-Horspool’s-Algorithm-String-Matching-字符串匹配算法\" class=\"headerlink\" title=\"2. Horspool’s Algorithm: String Matching 字符串匹配算法\"></a>2. Horspool’s Algorithm: String Matching 字符串匹配算法</h2><p>在最开始的暴力求解部分中，我们介绍了如何使用暴力求解来进行字符串匹配的算法。</p>\n<p>如果字符串不匹配，我们移动字符一个单位进行对比，重复该步骤直到遍历整个字符。我们也总结出时间复杂度为<code>(n-m+1)m</code>, n 为字符的长度，m 为我们要匹配的字符串长度。</p>\n<p><code>Horspool</code>算法不同的是，当我们遇到 mismatch 也就是不匹配的情况，我们可以位移 1 个或者多个单位再进行比较。位移的多少取决于我们可以用一个<code>shift table</code>来表示。</p>\n<h3 id=\"举例-7\"><a href=\"#举例-7\" class=\"headerlink\" title=\"举例\"></a>举例</h3><p>假设我们想要匹配的字符串为<code>IDIGDAB</code>。字符串的长度为<code>7</code>。进行匹配的字符为<code>IBAGHJDABADAB</code>。</p>\n<p>每个字符的值为字符串中出现在最右侧的索引。即<code>m - index in pattern -1</code>。</p>\n<p>比如 I 出现了两次，但最右侧的索引为 2, 那么 I 的位移为 <code>7 - 2 - 1 = 4</code>。</p>\n<p>最后一个字母<code>B</code>因为没有出现过，所以唯一单位为字母的长度也就是 7</p>\n<p>同理可以得出 shift table 如下</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">Letters</th>\n<th align=\"center\">I</th>\n<th align=\"center\">D</th>\n<th align=\"center\">G</th>\n<th align=\"center\">A</th>\n<th align=\"center\">B</th>\n<th align=\"center\">*</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">Value</td>\n<td align=\"center\">4</td>\n<td align=\"center\">2</td>\n<td align=\"center\">3</td>\n<td align=\"center\">1</td>\n<td align=\"center\">7</td>\n<td align=\"center\">7</td>\n</tr>\n</tbody></table>\n<p>有了 Shift Table 之后我们可以进行匹配，一旦有字符不匹配，我们即可参照 shift table 进行相对应的字符移动。</p>\n<p>首先<code>B</code>与<code>D</code>不匹配，根据 Shift Table, 我们需要将字符向右移动两个单位。</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20174305.png?alt=media&token=083aa2a2-d97a-4bed-8efb-11004c845e94\" width=\"50%\" height=\"auto\">\n\n<p>现在<code>G</code>与<code>J</code>不匹配，由于<code>B</code>是我们字符串中比较的最后一个字符，所以我们参照<code>B</code>移动字符 7 个单位。然后重复步骤即可。<br><img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/12.png?alt=media&token=92bac8ce-f00d-4404-a172-c73b817fcb9b\" width=\"50%\" height=\"auto\"></p>\n<h2 id=\"3-Hash-哈希\"><a href=\"#3-Hash-哈希\" class=\"headerlink\" title=\"3. Hash 哈希\"></a>3. Hash 哈希</h2><h3 id=\"Hasing-Function-哈希函数\"><a href=\"#Hasing-Function-哈希函数\" class=\"headerlink\" title=\"Hasing Function 哈希函数\"></a>Hasing Function 哈希函数</h3><p>假设哈希表长度为 5, 可以利用哈希函数将元素的键利用余数来转换为整数键。</p>\n<p>比如要把(Emily, 6046321)写入到哈希表中。</p>\n<p>我们先把<code>Emily</code>每个字母利用<code>ord()</code>函数转换成相应的整数。</p>\n<p><code>ord(e) + ord(m) + ord(i) + ord(l) + ord(y) = 5 + 13 + 9 + 12 + 25 = 64</code></p>\n<p>因为哈希表的长度为 5，64 除以 5 的余数为 4, 也就是转换后<code>6046321</code>的键。</p>\n<h3 id=\"Collision-Handling-冲突解决\"><a href=\"#Collision-Handling-冲突解决\" class=\"headerlink\" title=\"Collision Handling 冲突解决\"></a>Collision Handling 冲突解决</h3><p>如果在利用<code>哈希函数</code>转换键的时候出现相同的键怎么办呢? 比如两个元素 <code>Key mod 5</code>之后都是 4。如何解决这两个元素在哈希表中位置得问题呢？</p>\n<h4 id=\"1-Separate-Chaining-分离链接\"><a href=\"#1-Separate-Chaining-分离链接\" class=\"headerlink\" title=\"1. Separate Chaining 分离链接\"></a>1. Separate Chaining 分离链接</h4><p>第一种方法是分离链接，也就是用链表的方式来将相同的键组合在一起。</p>\n<p>比如给定哈希函数<code>h(i) = i mod 7</code>, 将下面的键值写入到哈希表中</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">Key</th>\n<th align=\"center\">Values</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">44</td>\n<td align=\"center\">name1</td>\n</tr>\n<tr>\n<td align=\"center\">12</td>\n<td align=\"center\">name2</td>\n</tr>\n<tr>\n<td align=\"center\">23</td>\n<td align=\"center\">name3</td>\n</tr>\n<tr>\n<td align=\"center\">16</td>\n<td align=\"center\">name4</td>\n</tr>\n<tr>\n<td align=\"center\">5</td>\n<td align=\"center\">name5</td>\n</tr>\n<tr>\n<td align=\"center\">28</td>\n<td align=\"center\">name6</td>\n</tr>\n</tbody></table>\n<p>我们可以发现<code>44</code>, <code>23</code>, 以及<code>16</code>的 key 都是相同的，那么我们就可以用链表的方式把这它们连接起来。最后得到的哈希表如下。</p>\n<p>h(44) = 44 mod 7 = 2<br>h(23) = 23 mod 7 = 2<br>h(16) = 23 mod 7 = 2</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20202615.png?alt=media&token=c720646f-7ef4-463b-a407-dbce665c6256\" width=\"70%\" height=\"auto\">\n\n<br>\n\n<h4 id=\"2-Closed-Hashing-封闭散列\"><a href=\"#2-Closed-Hashing-封闭散列\" class=\"headerlink\" title=\"2. Closed Hashing 封闭散列\"></a>2. Closed Hashing 封闭散列</h4><p>封闭散列解决冲突的方式为如果有冲突，向后找是否有空缺的位置并把键值写入到该位置。</p>\n<p>我们用之前相同的例子，但是这次用封闭散列来解决冲突问题。</p>\n<p>首先转换所有键</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">h(44) = 2</span><br><span class=\"line\">h(12) = 5</span><br><span class=\"line\">h(23) = 2</span><br><span class=\"line\">h(16) = 2</span><br><span class=\"line\">h(5) = 5</span><br><span class=\"line\">h(28) = 0</span><br></pre></td></tr></table></figure>\n\n<p>然后依次写入到哈希表中，name3 和 name1 都是相同键，但是 index 2 已经没有位置，所以我们把 name3 放到 index3 的位置。同理其他键值最后得到哈希表如下:</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">Index</th>\n<th align=\"center\">Values</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">0</td>\n<td align=\"center\">name6</td>\n</tr>\n<tr>\n<td align=\"center\">1</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\">2</td>\n<td align=\"center\">name1</td>\n</tr>\n<tr>\n<td align=\"center\">3</td>\n<td align=\"center\">name3</td>\n</tr>\n<tr>\n<td align=\"center\">4</td>\n<td align=\"center\">name4</td>\n</tr>\n<tr>\n<td align=\"center\">5</td>\n<td align=\"center\">name2</td>\n</tr>\n<tr>\n<td align=\"center\">6</td>\n<td align=\"center\">name5</td>\n</tr>\n</tbody></table>\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n<h2 id=\"4-Summary-of-sorting-algorithms-排序算法总结\"><a href=\"#4-Summary-of-sorting-algorithms-排序算法总结\" class=\"headerlink\" title=\"4. Summary of sorting algorithms 排序算法总结\"></a>4. Summary of sorting algorithms 排序算法总结</h2><table>\n<thead>\n<tr>\n<th>算法</th>\n<th>最好的情况</th>\n<th>最坏的情况</th>\n<th>稳定性</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>选择排序</td>\n<td>n2</td>\n<td>n2</td>\n<td>稳定</td>\n</tr>\n<tr>\n<td>冒泡排序</td>\n<td>n</td>\n<td>n2</td>\n<td>稳定</td>\n</tr>\n<tr>\n<td>插入排序</td>\n<td>n</td>\n<td>n2</td>\n<td>稳定</td>\n</tr>\n<tr>\n<td>归并排序</td>\n<td>n logn</td>\n<td>n logn</td>\n<td>稳定</td>\n</tr>\n<tr>\n<td>快速排序</td>\n<td>n logn</td>\n<td>n2</td>\n<td>不稳定</td>\n</tr>\n<tr>\n<td>堆排序</td>\n<td>n logn</td>\n<td>n logn</td>\n<td>不稳定</td>\n</tr>\n<tr>\n<td>计数排序</td>\n<td>n</td>\n<td>n + u</td>\n<td>不稳定</td>\n</tr>\n</tbody></table>\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n<h1 id=\"Data-Structure-数据结构\"><a href=\"#Data-Structure-数据结构\" class=\"headerlink\" title=\"Data Structure 数据结构\"></a>Data Structure 数据结构</h1><blockquote>\n<p>数据结构是用来管理和储存数据的一种方式</p>\n</blockquote>\n<h2 id=\"1-Linear-Data-Structure-线性数据结构\"><a href=\"#1-Linear-Data-Structure-线性数据结构\" class=\"headerlink\" title=\"1. Linear Data Structure 线性数据结构\"></a>1. Linear Data Structure 线性数据结构</h2><h3 id=\"Array-数组\"><a href=\"#Array-数组\" class=\"headerlink\" title=\"Array 数组\"></a>Array 数组</h3><p>一个数组通常有一系列相同类型的元素组成，每个元素都有相对应的索引值。</p>\n<p>比如下面<code>arr_list</code>数组，<code>item one</code>对应的索引值就是 0。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">arr_list = [<span class=\"string\">'item one'</span>, <span class=\"string\">'item two'</span>, <span class=\"string\">'item three'</span>]</span><br></pre></td></tr></table></figure>\n\n<p>由于数组的长度需要预先决定来分配内存。所以对于长度明确，或者插入删除不频繁的数据，数组比较适合。但如果数据需要频发插入或者删除，那我们可以用其他的数据结构。</p>\n<h3 id=\"Linked-List-链表\"><a href=\"#Linked-List-链表\" class=\"headerlink\" title=\"Linked List 链表\"></a>Linked List 链表</h3><p>链表由 0 或者多个叫做节点的元素组成，每个节点都有一个指针指向下一个节点。</p>\n<p>在数组中，如果想要拿到索引为 2 的值，可以直接用 arr[2]。但是在链表中，我们要从<code>head</code>开始一直往右进行节点的查找。</p>\n<p><strong>单向链表</strong></p>\n<p>单向链表，即每个节点中有一个指针指向后继节点。</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/linkedlist.png?alt=media&token=069ba69f-0b49-48d0-a353-5002b821f1cf\" width=\"70%\" height=\"auto\">\n<br>\n\n<p><strong>双向链表</strong></p>\n<p>双向链表，每个节点中有两个指针并分别指向前驱和后继。</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/linkedlist2.png?alt=media&token=cfaf0918-27ee-49ef-9249-c0d3f81c6c22\" width=\"70%\" height=\"auto\">\n<br>\n\n<h4 id=\"复杂度分析-11\"><a href=\"#复杂度分析-11\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h4><ul>\n<li>Search: <code>O(n)</code></li>\n<li>Insert: <code>O(1)</code></li>\n<li>Delete: <code>O(1)</code></li>\n</ul>\n<h3 id=\"Stack-栈\"><a href=\"#Stack-栈\" class=\"headerlink\" title=\"Stack 栈\"></a>Stack 栈</h3><p>遵循<code>后进先出(LIFO)</code>原则, 可以想象一叠盘子，你每清理完一个碟子你往上叠。结束后你从最上面的开始一个一个回收。最后一个清洁的碟子也是第一个拿走的。</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/stack.png?alt=media&token=3d248a10-e203-4e05-9783-a2b619889ab8\" width=\"70%\" height=\"auto\">\n<br>\n\n<p>插入方法为<code>push</code>，删除方法为<code>pop</code>。</p>\n<h4 id=\"复杂度分析-12\"><a href=\"#复杂度分析-12\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h4><ul>\n<li>Search: <code>O(n)</code></li>\n<li>Insert: <code>O(1)</code></li>\n<li>Delete: <code>O(1)</code></li>\n</ul>\n<h3 id=\"Queue-队列\"><a href=\"#Queue-队列\" class=\"headerlink\" title=\"Queue 队列\"></a>Queue 队列</h3><p>跟栈相反，队列遵循先进先出原则。可以想象以下我们平常超市购物结账排队的时候。排在第一位置的人也是先结完账最先离开的。</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/Introduction.png?alt=media&token=d5dc1f40-5d9a-44b2-94c9-01c0490fab75\" width=\"50%\" height=\"auto\">\n<br>\n\n<h4 id=\"复杂度分析-13\"><a href=\"#复杂度分析-13\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h4><ul>\n<li>Search: <code>O(n)</code></li>\n<li>Insert: <code>O(1)</code></li>\n<li>Delete: <code>O(1)</code></li>\n</ul>\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n<h2 id=\"2-Non-Linear-Data-Structures-Graph-图\"><a href=\"#2-Non-Linear-Data-Structures-Graph-图\" class=\"headerlink\" title=\"2. Non-Linear Data Structures: Graph 图\"></a>2. Non-Linear Data Structures: Graph 图</h2><h3 id=\"Types-图的分类\"><a href=\"#Types-图的分类\" class=\"headerlink\" title=\"Types 图的分类\"></a>Types 图的分类</h3><p>图又可分为有向图和无向图</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20122800.png?alt=media&token=a82cd4fb-63c0-4927-88c9-f3e7ffe13c64\" width=\"70%\" height=\"auto\">\n\n<h3 id=\"Representing-Graphs-图的表达方式\"><a href=\"#Representing-Graphs-图的表达方式\" class=\"headerlink\" title=\"Representing Graphs 图的表达方式\"></a>Representing Graphs 图的表达方式</h3><img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20123400.png?alt=media&token=45ef871a-d7a2-465d-aa06-558c07a4acb8\" width=\"50%\" height=\"auto\">\n\n<h4 id=\"1-Adjacency-Matrix-邻接矩阵\"><a href=\"#1-Adjacency-Matrix-邻接矩阵\" class=\"headerlink\" title=\"1. Adjacency Matrix 邻接矩阵\"></a>1. Adjacency Matrix 邻接矩阵</h4><p>用一个 2D 数组来储存图中顶点间的关系数据。</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20123411.png?alt=media&token=4d49cadd-470a-4144-9eb9-75a662fa8de7\" width=\"50%\" height=\"auto\">\n\n<h4 id=\"2-Adjacency-Lists-邻接表\"><a href=\"#2-Adjacency-Lists-邻接表\" class=\"headerlink\" title=\"2. Adjacency Lists 邻接表\"></a>2. Adjacency Lists 邻接表</h4><p>用来记录每一个节点所连接的所有其他节点。</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20123423.png?alt=media&token=e060e48e-5d26-4938-bacd-b6140111f128\" width=\"50%\" height=\"auto\">\n\n<h3 id=\"Graph-Traversal-图的遍历\"><a href=\"#Graph-Traversal-图的遍历\" class=\"headerlink\" title=\"Graph Traversal 图的遍历\"></a>Graph Traversal 图的遍历</h3><h4 id=\"1-Depth-First-Search-DFS-深度优先搜索\"><a href=\"#1-Depth-First-Search-DFS-深度优先搜索\" class=\"headerlink\" title=\"1. Depth-First Search (DFS) 深度优先搜索\"></a>1. Depth-First Search (DFS) 深度优先搜索</h4><img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/DFS.png?alt=media&token=b19c9461-5ea7-4a02-83d5-97f59227dec3\" width=\"50%\" height=\"auto\">\n\n<p>DFS 我们随意选择一个起点然后进行其他节点的探索，直到所有的节点全部被探索过。</p>\n<p>比如我们从 a 开始，我们现在可以走<code>b</code>, <code>f</code>, 或者<code>e</code>。我们用字母升序选择<code>b</code>，然后<code>f</code>最后<code>e</code>。</p>\n<p>这个时候已经没有路可以走了。那我们就要往回走到<code>b</code>。然后继续<code>g -&gt; c -&gt; d -&gt; h</code></p>\n<p>最后 DFS 的遍历为<code>abfegcdh</code> 如下图所示。当然如果一开始我们走完 a 选择其他路线，那 DFS 的遍历结果也是不一样的。</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/d'f's%E6%89%B9%E6%B3%A8%202020-07-20%20210327.png?alt=media&token=b7bdde72-f3e2-4d8b-89ae-c3d669bc2543\" width=\"50%\" height=\"auto\">\n\n<h4 id=\"2-Breadth-First-Search-BFS-广度优先搜素\"><a href=\"#2-Breadth-First-Search-BFS-广度优先搜素\" class=\"headerlink\" title=\"2. Breadth-First Search (BFS) 广度优先搜素\"></a>2. Breadth-First Search (BFS) 广度优先搜素</h4><p>广度优先搜索则是先把每个节点所有可行路线都走一遍，然后再回到每个子节点进行搜索。</p>\n<p>现在我们用 BFS 遍历之前的例子。</p>\n<p>我们从 a 开始，这时候有 b, e, f。然后 a 已经遍历完。我们开始遍历 b，发现只有 g。g 遍历完 c 和 h 后只剩下 d。</p>\n<p>得到 BFS <code>abefgchd</code></p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/BFS.png?alt=media&token=b7229ee9-55ad-479e-8acd-d1fae3464353\" width=\"50%\" height=\"auto\">\n\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n<h1 id=\"Greedy-Approach-贪心算法\"><a href=\"#Greedy-Approach-贪心算法\" class=\"headerlink\" title=\"Greedy Approach 贪心算法\"></a>Greedy Approach 贪心算法</h1><h2 id=\"1-Prim’s-Algorithm-普林姆算法\"><a href=\"#1-Prim’s-Algorithm-普林姆算法\" class=\"headerlink\" title=\"1. Prim’s Algorithm 普林姆算法\"></a>1. Prim’s Algorithm 普林姆算法</h2><p>在普林姆算法中，我们随意选择一个起点，之后每次都选择访问个节点的最短的路线，直到所有的节点都被访问过。</p>\n<h3 id=\"举例-8\"><a href=\"#举例-8\" class=\"headerlink\" title=\"举例\"></a>举例</h3><img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/prim.png?alt=media&token=dde1bf4c-bfce-47b0-b6f7-c72f4373ce74\" width=\"60%\" height=\"auto\">\n\n<p>我们从 a 开始，可以发现最短路径为<code>af</code>，所以我们连接<code>af</code>。现在找到所有与 a 和 f 相连的节点的最短路径，我们找到<code>fe</code>最短, 连接<code>fe</code>。</p>\n<p>这个时候<code>ae</code>是最短的，但是<code>a</code>和<code>e</code>都已经访问过了，所以我们不能选择这条路径。</p>\n<p>于是我们连接<code>eb</code>, 然后<code>bc</code>最后<code>cd</code>结束得到最小生成树。</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20212525.png?alt=media&token=e173c8f3-b841-4052-922e-007faa4de91a\" width=\"50%\" height=\"auto\">\n\n<h3 id=\"参考-4\"><a href=\"#参考-4\" class=\"headerlink\" title=\"参考\"></a>参考</h3><div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/cplfcGZmX7I\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n\n<h2 id=\"2-Kruskal’s-Algorithm-克鲁斯卡尔算法\"><a href=\"#2-Kruskal’s-Algorithm-克鲁斯卡尔算法\" class=\"headerlink\" title=\"2. Kruskal’s Algorithm 克鲁斯卡尔算法\"></a>2. Kruskal’s Algorithm 克鲁斯卡尔算法</h2><p>与 Prim 算法不同的时，Kruskal 算法我们不是随意选择一个起点，而是先选择图中最短的一条路径，然后在不制造出 cycle 的情况下，找到所有最短的路线直到所有节点被访问。</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/prim.png?alt=media&token=dde1bf4c-bfce-47b0-b6f7-c72f4373ce74\" width=\"60%\" height=\"auto\">\n\n<p>同样用这个图，我们这次从<code>fe</code>开始，然后同样最短的路径有<code>af</code>和<code>cd</code>都为 4，可以都连接。</p>\n<p>这个时候<code>ae</code>不能连接因为会出现<code>cycle</code>。</p>\n<p>所以我们连接下一个最短路径<code>bc</code>。之后时<code>be</code>。于是得到最小生成树如下所示，可以发现跟 Prim 算法的结果相同。</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20212525.png?alt=media&token=e173c8f3-b841-4052-922e-007faa4de91a\" width=\"50%\" height=\"auto\">\n\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/71UQH7Pr9kU\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n\n<h2 id=\"3-Dijkstra’s-Algorithm-迪克斯特拉算法\"><a href=\"#3-Dijkstra’s-Algorithm-迪克斯特拉算法\" class=\"headerlink\" title=\"3. Dijkstra’s Algorithm: 迪克斯特拉算法\"></a>3. Dijkstra’s Algorithm: 迪克斯特拉算法</h2><div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/_lHSawdgXpI\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"","more":"<blockquote>\n<p>总结暑假算法课 COMP3761 中学习到的知识点，代码实现以 python 来展示。课程内容参考 <a href=\"https://www.amazon.ca/Introduction-Design-Analysis-Algorithms-3rd/dp/0132316811\" target=\"_blank\" rel=\"noopener\">Introduction to The Design and Analysis of Algorithm</a>. 前半部分主要分析各种排序算法的原理以及代码实现。后半部分主要为图算法和最短路径的应用。</p>\n</blockquote>\n<ol>\n<li>Brute Force 暴力求解</li>\n<li>Decrease and Conquer 减治法</li>\n<li>Divide and Conquer 分治法</li>\n<li>Transform and Conquer 变治法</li>\n<li>Time Space Tradeoff 时空权衡</li>\n<li>Data Structure 数据结构</li>\n<li>Greedy Approach 贪心算法</li>\n</ol>\n<h1 id=\"Brute-Force-暴力求解\"><a href=\"#Brute-Force-暴力求解\" class=\"headerlink\" title=\"Brute Force 暴力求解\"></a>Brute Force 暴力求解</h1><blockquote>\n<p>从字面意思理解，brute force 就是用最直接的方法来解决相应的问题。比如我们设计一个猜数字的游戏。数字范围为 0-10，根据用户的输入返回是否大还是小。那暴力求解的算法就是从 0 开始然后递增，最好的情况是 1 次猜中，但最坏的情况<code>Worst case</code>就是 10 次。</p>\n</blockquote>\n<h2 id=\"1-Bubble-Sort-冒泡排序\"><a href=\"#1-Bubble-Sort-冒泡排序\" class=\"headerlink\" title=\"1. Bubble Sort 冒泡排序\"></a>1. Bubble Sort 冒泡排序</h2><p>假设我们有一个可排序的数组, 冒泡排序即从第一个元素开始，每个元素进行两两比较。如果左边的大于右边的,就进行位置替换。完成第一个 iteration 之后继续从第二个元素开始进行相同的步骤。</p>\n<p>冒泡排序伪代码如下:</p>\n<figure class=\"highlight livecodeserver\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> i = <span class=\"number\">0</span> <span class=\"built_in\">to</span> A.<span class=\"built_in\">length</span> - <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> j = <span class=\"number\">0</span> <span class=\"built_in\">to</span> A.<span class=\"built_in\">length</span> - <span class=\"number\">1</span> -i</span><br><span class=\"line\">        <span class=\"keyword\">if</span> left &gt; <span class=\"literal\">right</span>:</span><br><span class=\"line\">            swap(left, <span class=\"literal\">right</span>)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"举例\"><a href=\"#举例\" class=\"headerlink\" title=\"举例\"></a>举例</h3><p>比如我们有一个数组<code>[3, 0, 6, 1]</code>。那我们先从第一位<code>3</code>开始， 先是<code>3</code>和<code>0</code>比较，<code>3</code>大于<code>0</code>于是我们进行调换。比较完成后我们递增到下一位继续进行两两比较</p>\n<p>现在数组为<code>[0, 3, 6, 1]</code>。于是我们继续进行比较<code>3</code>和<code>6</code>。很明显<code>3</code>小于<code>6</code>，我们不需要进行调换。我们来到最后一组比较<code>6</code>和<code>1</code>。左边大于右边我们进行调换。</p>\n<p>此时我们第一个 iteration 的排序完成了, <code>[0, 3, 1, 6]</code>。</p>\n<p>同理我们现在从<code>index=1</code>的位置开始进行以上相同的步骤直到结束。</p>\n<h3 id=\"代码实现\"><a href=\"#代码实现\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><p><strong>Python</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">bubble_sort</span><span class=\"params\">(array)</span>:</span></span><br><span class=\"line\">    n = len(array)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(n - <span class=\"number\">1</span>):</span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> range(n - <span class=\"number\">1</span> -i):</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(array[j] &gt; array[j+<span class=\"number\">1</span>]):</span><br><span class=\"line\">                array[j], array[j+<span class=\"number\">1</span>] = array[j+<span class=\"number\">1</span>], array[j]</span><br><span class=\"line\">    <span class=\"keyword\">return</span> array</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"复杂度分析\"><a href=\"#复杂度分析\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h3><p>冒泡排序有两个<code>for</code>循环，所以冒泡排序的复杂度 n<sup>2</sup></p>\n<h2 id=\"2-Selection-Sort-选择排序\"><a href=\"#2-Selection-Sort-选择排序\" class=\"headerlink\" title=\"2. Selection Sort 选择排序\"></a>2. Selection Sort 选择排序</h2><p>选择排序首先设定数组第一个字符的元素为最小值，然后遍历整个数组。如果在遍历过程中发现有元素小于当前设定的最小值，就将该元素设置为新的最小值。</p>\n<p>重复步骤结束 iteration 并把此循环中最小值起始的值替换完成排序。伪代码实现如下:</p>\n<figure class=\"highlight matlab\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> <span class=\"built_in\">i</span> = <span class=\"number\">0</span> to Array.<span class=\"built_in\">length</span> <span class=\"number\">-1</span>:</span><br><span class=\"line\">    <span class=\"built_in\">min</span> = <span class=\"built_in\">i</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> <span class=\"built_in\">j</span> = <span class=\"built_in\">i</span>+<span class=\"number\">1</span> to Array.<span class=\"built_in\">length</span>:</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"built_in\">j</span> &lt; <span class=\"built_in\">min</span>):</span><br><span class=\"line\">            <span class=\"built_in\">min</span> = <span class=\"built_in\">j</span></span><br><span class=\"line\">    swap(<span class=\"built_in\">i</span>, <span class=\"built_in\">j</span>)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"举例-1\"><a href=\"#举例-1\" class=\"headerlink\" title=\"举例\"></a>举例</h3><p>假设我们用选择排序算法来排序<code>[3, 0, 2]</code>数组。</p>\n<p>首先把最小值<code>min</code>设置为<code>array[0]</code>也就是<code>3</code>, 然后<code>i+1</code>开始进行判断，<code>0</code>小于<code>3</code>。于是我们现在把<code>min</code>设置为<code>0</code>。</p>\n<p>现在<code>2</code>大于<code>0</code>，不需要更改最小值。于是第一个循环完成了。将<code>i</code>和更新后的最小值<code>min</code>调换，即调换<code>3</code>和<code>0</code>的位置得到</p>\n<p><code>[0, 3, 2]</code>。</p>\n<p>同理我们从<code>i = 1</code>开始第二个 iteration，<code>min</code>现在设置为<code>array[1]</code>也就是<code>3</code>。比较<code>3</code>和<code>2</code>条件成立进行调换位置。</p>\n<p>最后我们得到<code>[0, 2, 3]</code></p>\n<h3 id=\"代码实现-1\"><a href=\"#代码实现-1\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><p><strong>Python</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">selection_sort</span><span class=\"params\">(array)</span>:</span></span><br><span class=\"line\">    n = len(array)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(n):</span><br><span class=\"line\">        min = i</span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> range(i+<span class=\"number\">1</span>, n):</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(array[j] &lt; array[min]):</span><br><span class=\"line\">                min = j</span><br><span class=\"line\">        array[i], array[min] = array[min], array[i]</span><br><span class=\"line\">    <span class=\"keyword\">return</span> array</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"复杂度分析-1\"><a href=\"#复杂度分析-1\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h3><p>选择排序的复杂度 n<sup>2</sup></p>\n<h2 id=\"3-Brtute-Force-String-Match-暴力求解-字符串匹配\"><a href=\"#3-Brtute-Force-String-Match-暴力求解-字符串匹配\" class=\"headerlink\" title=\"3. Brtute Force String Match 暴力求解 字符串匹配\"></a>3. Brtute Force String Match 暴力求解 字符串匹配</h2><p>在浏览器查找一个字符串时，我们可以用<code>Ctrl+F</code>来进行文本内容的匹配搜索。如果暴力求解的方法来实现字符串匹配，我们就要对字符串内每个字符开始进行比较。一旦有一个字符不匹配我们位移一个单位继续进行判断。</p>\n<h3 id=\"举例-2\"><a href=\"#举例-2\" class=\"headerlink\" title=\"举例\"></a>举例</h3><p>比如我们要在<code>I love python</code>中搜索<code>python</code>。首先从<code>I</code>开始，<code>p</code>并不匹配<code>I</code>，移动索引一个单位。</p>\n<p>现在<code>python</code>与<code>love py</code>对齐进行匹配。</p>\n<p><code>p</code>依旧不匹配空格。同理移动一个索引继续匹配，直到 index = 7 的位置才匹配成功并返回 index = 7。</p>\n<h3 id=\"代码实现-2\"><a href=\"#代码实现-2\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> n - m:</span><br><span class=\"line\">    j = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> j &lt; m <span class=\"keyword\">and</span> pattern[j] = text[i + j]:</span><br><span class=\"line\">        j = j + <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(j = m):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> i</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"number\">-1</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"复杂度分析-2\"><a href=\"#复杂度分析-2\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h3><p>最坏的情况下我们要进行<code>(n-m+1)m</code>次对比。</p>\n<h2 id=\"4-Knapsack-Problem-背包问题\"><a href=\"#4-Knapsack-Problem-背包问题\" class=\"headerlink\" title=\"4. Knapsack Problem 背包问题\"></a>4. Knapsack Problem 背包问题</h2><p>背包问题即给定一些特定物品并有对应的价格和重量。然后有一个限重 W 的背包，每个物品只能选择一次。在不超重的情况下如何做到<strong>价值最大化</strong>选择？</p>\n<p>比如我们有一个最重承受 10kg 的背包。并有以下物品可以选择: 物品一: 2kg, 10 元。 物品二: 5kg, 30 元。物品三: 4kg, 20 元….如此。</p>\n<p>用暴力算法来解决这个问题即将所有可能的组合先全部列出来，然后判断并筛选超重的集合，最后比较所有集合来找到价值最高的集合。</p>\n<p>算法效率来讲，假设我们有 n 个物品，那复杂度即为 <strong>2<sup>n</sup></strong></p>\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n<h1 id=\"Decrease-and-Conquer-减治法\"><a href=\"#Decrease-and-Conquer-减治法\" class=\"headerlink\" title=\"Decrease and Conquer 减治法\"></a>Decrease and Conquer 减治法</h1><blockquote>\n<p>跟暴力求解不同，减治法是通过<strong>逐步缩小问题规模</strong>来解决一个问题。简而言之，回到我们之前猜数字的游戏。如果用暴力求解，我们要一个数字一个数字猜测。减治法可以先把数字对半分，比如猜从 0-10 的数字，我们可以先拆成 0-5 和 6-10。如果我们给出 5 系统显示太高，那我们可以继续对半拆除从 0-4 进行同样的步骤。直到最后我们找到数字也就是一直拆分问题。</p>\n</blockquote>\n<h2 id=\"1-Insertation-Sort-插入排序\"><a href=\"#1-Insertation-Sort-插入排序\" class=\"headerlink\" title=\"1. Insertation Sort 插入排序\"></a>1. Insertation Sort 插入排序</h2><p>插入排序从数组的第一个索引开始，跟左边的元素进行比较，如果小于左边的元素进行调换。</p>\n<p>假设给定一个数组<code>[0, 1, 5, 3, 2]</code>。</p>\n<p>第一部分<code>[0, 1]</code>是有序数列，后半部分为无序数列。如果我们每次把无序数列的第一个元素插入到正确的位置后，整体问题的规模就减少 1。</p>\n<p>如次重复<code>n-1</code>次后，数组也重新排成有序了。</p>\n<blockquote>\n<p>重复 n-1 是因为只有一个元素的数组必定是有序的。</p>\n</blockquote>\n<p>可以把插入排序想象成扑克牌卡片排序。</p>\n<h3 id=\"举例-3\"><a href=\"#举例-3\" class=\"headerlink\" title=\"举例\"></a>举例</h3><p>假设我们对数组<code>A=[3, 2, 4, 0]</code>进行插入排序</p>\n<p>首先从 A[0]开始，第一个元素左边没有其他元素，所以<code>3</code>在正确的位置。现在我们无序部分为<code>[2, 4 ,0]</code></p>\n<p>我们发现 2 &lt; 3, 于是我们调换 2 和 3 的位置得到<code>[2, 3, 4, 0]</code>。现在无序部分为<code>[4, 0]</code>。</p>\n<p>4 不需要任何位置更改，于是无序部分只剩下<code>[0]</code>。</p>\n<p>我们把 0 跟左边的对比，直到 0 &lt; 2 完成左移的过程。所以我们把 0 插入到第一个 index。最终得到有序数组<code>[0, 2, 3, 4]</code></p>\n<h3 id=\"代码实现-3\"><a href=\"#代码实现-3\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><p><strong>Python</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">insertion_sort</span><span class=\"params\">(array)</span>:</span></span><br><span class=\"line\">    n = len(array)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">1</span>, n):</span><br><span class=\"line\">        index = array[i]</span><br><span class=\"line\">        <span class=\"comment\"># the index in the left of i</span></span><br><span class=\"line\">        j = i - <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># 如果左边还有数字 并且 当前元素小于它左边的元素：</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> j &gt;= <span class=\"number\">0</span> <span class=\"keyword\">and</span> index &lt; array[j]:</span><br><span class=\"line\">            <span class=\"comment\"># 调换当前元素和左边的元素</span></span><br><span class=\"line\">            array[j + <span class=\"number\">1</span>] = array[j]</span><br><span class=\"line\">            <span class=\"comment\"># 继续向左移动</span></span><br><span class=\"line\">            j = j - <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"comment\"># 循环结束 插入到对应的位置</span></span><br><span class=\"line\">        array[j + <span class=\"number\">1</span>] = index</span><br><span class=\"line\">    <span class=\"keyword\">return</span> array</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"复杂度分析-3\"><a href=\"#复杂度分析-3\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h3><p><code>插入排序</code>的复杂度为 n<sup>2</sup></p>\n<h2 id=\"2-Binary-Search-二分查找\"><a href=\"#2-Binary-Search-二分查找\" class=\"headerlink\" title=\"2. Binary Search 二分查找\"></a>2. Binary Search 二分查找</h2><p>目前我们涉及到的算法都是从数组的第一个位置开始然后进行遍历判断。二分查找则从一个数组的中间开始，从左往右一次查找，直到找到该元素或循环结束。</p>\n<p><strong>Python</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">binary_search</span><span class=\"params\">(array, key)</span>:</span></span><br><span class=\"line\">    l = <span class=\"number\">0</span></span><br><span class=\"line\">    r = len(array) - <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> l &lt;= r:</span><br><span class=\"line\">        m = (l + r) // <span class=\"number\">2</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> key == array[m]:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> m</span><br><span class=\"line\">        <span class=\"keyword\">elif</span> key &lt; array[m]:</span><br><span class=\"line\">            r = m - <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            l = m + <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">-1</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-Binary-Search-Tree-Traversal-二叉树的遍历\"><a href=\"#3-Binary-Search-Tree-Traversal-二叉树的遍历\" class=\"headerlink\" title=\"3. Binary Search Tree Traversal 二叉树的遍历\"></a>3. Binary Search Tree Traversal 二叉树的遍历</h2><p>将数组(有序)分为两部分，数组的中间元素为树的根节点，左边和右边的元素再进行相同的划分，小于根节点的元素放在左边，大于的在右边。</p>\n<p>根据二叉搜索树我们可以进行数组的插入，查询和删除节点。接下来我们引入二叉树遍历即怎样知道节点是否已经被访问过了。</p>\n<h3 id=\"Pre-order-Traversal-前序遍历\"><a href=\"#Pre-order-Traversal-前序遍历\" class=\"headerlink\" title=\"Pre-order Traversal 前序遍历\"></a>Pre-order Traversal 前序遍历</h3><p>从 Root 开始，每个节点进行<code>Visit -&gt; Left -&gt; Right</code></p>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/1WxLM2hwL-U\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n\n<h3 id=\"In-order-Traversal-中序遍历\"><a href=\"#In-order-Traversal-中序遍历\" class=\"headerlink\" title=\"In-order Traversal 中序遍历\"></a>In-order Traversal 中序遍历</h3><p>从 Root 开始，每个节点进行<code>Left -&gt; Visit -&gt; Right</code></p>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/5dySuyZf9Qg\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n\n<h3 id=\"Post-order-Traversal-后序遍历\"><a href=\"#Post-order-Traversal-后序遍历\" class=\"headerlink\" title=\"Post-order Traversal 后序遍历\"></a>Post-order Traversal 后序遍历</h3><p>从 Root 开始，每个节点进行<code>Left -&gt; Right -&gt; Visit</code></p>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/4zVdfkpcT6U\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n<h1 id=\"Divide-and-Conquer-分治法\"><a href=\"#Divide-and-Conquer-分治法\" class=\"headerlink\" title=\"Divide and Conquer 分治法\"></a>Divide and Conquer 分治法</h1><blockquote>\n<p>分治法的理论为把一个大的问题分成若干个小问题，然后逐个解决小问题，最后将小问题的解决方案合并到原来大问题的解。比如乐高玩具，一个乐高模型分成若干个小问题即乐高零件。小问题的解就是将各个组件先拼好，比如房顶，门之类。最后再将各个小组件组合起来拼成完整的模型。</p>\n</blockquote>\n<h2 id=\"1-有序数组合并\"><a href=\"#1-有序数组合并\" class=\"headerlink\" title=\"1. 有序数组合并\"></a>1. 有序数组合并</h2><p>在介绍归并排序和快速排序之前，我们先来了解以下有序数组的合并。</p>\n<p>给定两个有序数组<code>a</code>和<code>b</code></p>\n<p><code>a = [2, 3, 8, 9]</code><br><code>b = [1, 4, 5, 7]</code></p>\n<p>现在需要把数组 a 和 b 合并为一个新的有序数组到一个空的数组 <code>c []</code>。</p>\n<ol>\n<li>首先我们用三个变量分别来记录三个数组的索引值并初始化为 0， 数组 a 为<code>i</code>， 数组 b 为<code>j</code>，数组 c 为<code>k</code>。</li>\n<li>然后我们比较 <code>a[i]</code> 和 <code>b[j]</code> 并将较小的元素存入到数组<code>c[0]中</code>。初始化为 0，所以我们首先比较<code>a[0]</code>和<code>b[0]</code>。</li>\n<li>之后我们将较小元素的数组索引和数组 c 的索引加 1。</li>\n<li>然后我们继续重复第二步进行比较</li>\n</ol>\n<p>最好的情况下我们要比较 <code>n/2</code> 个元素，最坏的情况要比较 <code>n-1</code> 次。</p>\n<p>由此可以得到合并有序数组的复杂度为 <code>n</code>。</p>\n<h2 id=\"2-Merge-Sort-归并排序\"><a href=\"#2-Merge-Sort-归并排序\" class=\"headerlink\" title=\"2. Merge Sort 归并排序\"></a>2. Merge Sort 归并排序</h2><p>归并排序首先要将数组一直拆分直到数组内只有一个元素剩余。然后对拆分后的数组进行重新排序，排序完成后进行归并即得到有序的数组。</p>\n<h3 id=\"举例-4\"><a href=\"#举例-4\" class=\"headerlink\" title=\"举例\"></a>举例</h3><p>给定一个数组<code>[2, 1, 8, 6]</code>。</p>\n<p>首先拆分成<code>[2, 1]</code>和<code>[8, 6]</code>。然后继续进行拆分直到数组内只有一个元素，因为<strong>只有一个元素的数组必定是有序的</strong>。</p>\n<p>得到<code>[2], [1], [8], [6]</code>。现在我们完成了拆分过程，每个数组都是有序的。</p>\n<p>接下来我们将数组两两归并排序，<code>[1, 2]</code>和<code>[6, 8]</code>。</p>\n<p>继续将这两个数组合并最终得到<code>[1, 2, 6, 8]</code>。</p>\n<h3 id=\"复杂度分析-4\"><a href=\"#复杂度分析-4\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h3><p>归并排序的复杂度 <code>nlogn</code>。这比我们之前的冒泡排序和选择排序 n<sup>2</sup>的复杂度好了很多。</p>\n<h3 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h3><div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/4VqmGXwpLqc\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n\n<h2 id=\"3-Quick-Sort-快速排序\"><a href=\"#3-Quick-Sort-快速排序\" class=\"headerlink\" title=\"3. Quick Sort 快速排序\"></a>3. Quick Sort 快速排序</h2><p>快速排序的原理是首先我们选择一个<code>中轴(pivot)</code>, 一般选择数组内的第一个值。然后有比中轴值小的元素位于中轴的左侧，而大于中轴值的元素位于中轴的右侧。最终实现有序的排序。</p>\n<h3 id=\"举例-5\"><a href=\"#举例-5\" class=\"headerlink\" title=\"举例\"></a>举例</h3><p>给定一个数组 <code>a = [12, 25, 33, 5, 8]</code>。</p>\n<p>选择第一个值<code>a[0]=44</code>为我们的中轴，并用<code>p</code>来记录。同时我们用变量<code>i</code>记录替换索引，<code>j</code>来记录遍历的索引。</p>\n<p>我们的目标即在 j 的遍历过程中，如果 a[j]的值小于当前的中轴值，我们将 i 递增 1，然后将 a[i]和 a[j]进行调换。当 j 遍历完数组后，我们再将 a[i]与中轴调换位置。</p>\n<p>起始我们的中轴<code>p = 12</code>, <code>i = 0</code>, <code>j = 1</code>。</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">p 中轴</th>\n<th align=\"center\">i</th>\n<th align=\"center\">j</th>\n<th align=\"center\">a[j]</th>\n<th align=\"center\">Compare</th>\n<th align=\"center\">Procedure</th>\n<th align=\"center\">Array</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">12</td>\n<td align=\"center\">0</td>\n<td align=\"center\">1</td>\n<td align=\"center\">25</td>\n<td align=\"center\">25 &gt; 12</td>\n<td align=\"center\">不需要调换 递增 j</td>\n<td align=\"center\"><code>[12, 25, 33, 5, 8]</code></td>\n</tr>\n<tr>\n<td align=\"center\">12</td>\n<td align=\"center\">0</td>\n<td align=\"center\">2</td>\n<td align=\"center\">33</td>\n<td align=\"center\">33 &gt; 12</td>\n<td align=\"center\">不需要调换 递增 j</td>\n<td align=\"center\"><code>[12, 25, 33, 5, 8]</code></td>\n</tr>\n<tr>\n<td align=\"center\">12</td>\n<td align=\"center\">0</td>\n<td align=\"center\">3</td>\n<td align=\"center\">5</td>\n<td align=\"center\">5 &lt; 12</td>\n<td align=\"center\">递增 i i = 1 替换 a[i]和 a[j]的位置 递增 j</td>\n<td align=\"center\"><code>[12, 5, 33, 25, 8]</code></td>\n</tr>\n<tr>\n<td align=\"center\">12</td>\n<td align=\"center\">1</td>\n<td align=\"center\">4</td>\n<td align=\"center\">8</td>\n<td align=\"center\">8 &lt; 12</td>\n<td align=\"center\">递增 i i = 2 替换 a[i]和 a[j]的位置 递增 j</td>\n<td align=\"center\"><code>[12, 5, 8, 25, 33]</code></td>\n</tr>\n</tbody></table>\n<p>现在第一个 iteration 完成，我们将中轴 p = 12 与 a[2]的位置替换</p>\n<p>得到<code>[8, 5, 12, 25, 33]</code>。我们可以发现现在 12 的左边都是小于 12 的，而右边都是大于 12 的。也就是说我们接下来只要对左边和右边的部分进行相同的操作即可完成快速排序。</p>\n<h3 id=\"代码实现-4\"><a href=\"#代码实现-4\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">partition</span><span class=\"params\">(array)</span>:</span></span><br><span class=\"line\">    l = <span class=\"number\">0</span></span><br><span class=\"line\">    r = len(array) - <span class=\"number\">1</span></span><br><span class=\"line\">    pivot = a[l]</span><br><span class=\"line\">    s = l</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(l+<span class=\"number\">1</span>, r+<span class=\"number\">1</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> a[i] &lt; p:</span><br><span class=\"line\">            s += <span class=\"number\">1</span></span><br><span class=\"line\">            a[s], a[i] = a[i], a[s]</span><br><span class=\"line\">            a[l], a[s] = a[s], a[l]</span><br><span class=\"line\">    <span class=\"keyword\">return</span> s</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"复杂度分析-5\"><a href=\"#复杂度分析-5\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h3><p>快速排序的复杂度为<code>nlong(n)</code></p>\n<h3 id=\"参考-1\"><a href=\"#参考-1\" class=\"headerlink\" title=\"参考\"></a>参考</h3><div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/cnzIChso3cc\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n<h1 id=\"Transform-and-Conquer-变治法\"><a href=\"#Transform-and-Conquer-变治法\" class=\"headerlink\" title=\"Transform and Conquer 变治法\"></a>Transform and Conquer 变治法</h1><h2 id=\"1-Instance-Simplification-Pre-sorting-预排序\"><a href=\"#1-Instance-Simplification-Pre-sorting-预排序\" class=\"headerlink\" title=\"1. Instance Simplification Pre-sorting 预排序\"></a>1. Instance Simplification Pre-sorting 预排序</h2><h3 id=\"Check-Elements-Uniqueness-判断数组内元素是否重复\"><a href=\"#Check-Elements-Uniqueness-判断数组内元素是否重复\" class=\"headerlink\" title=\"Check Elements Uniqueness 判断数组内元素是否重复\"></a>Check Elements Uniqueness 判断数组内元素是否重复</h3><p>给出一个数组，判断是否该数组存在重复元素。</p>\n<p>我们先用暴力求解来看下</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">is_unique_bf</span><span class=\"params\">(array)</span>:</span></span><br><span class=\"line\">    n = len(array)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(n - <span class=\"number\">1</span>):</span><br><span class=\"line\">        <span class=\"comment\"># 存储当前索引元素变量</span></span><br><span class=\"line\">        index_value = array[i]</span><br><span class=\"line\">        <span class=\"comment\"># 循环数组 查找是否有匹配相等的</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> range(i+<span class=\"number\">1</span>, n):</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(array[j] == index_value):</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">False</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">True</span></span><br></pre></td></tr></table></figure>\n\n<p>我们发现用暴力求解的算法得到复杂度为 n<sup>2</sup>。</p>\n<p>假设我们先将数组进行排序得到一个<strong>有序数组</strong>，然后在进行判断是否存在重复元素。算法效率是否会有提升呢?</p>\n<p>如果是一个有序数组，我们只需要查看<strong>一个元素</strong>是否跟它的<strong>下一个元素</strong>是否相等即可。比如<code>[2, 3, 3, 5]</code>。a[1] = a[2] 很明显得出数组存在重复元素。</p>\n<h4 id=\"代码实现-5\"><a href=\"#代码实现-5\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h4><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">is_unique_presort</span><span class=\"params\">(array)</span>:</span></span><br><span class=\"line\">    n = len(array)</span><br><span class=\"line\">    <span class=\"comment\"># 假设我们先进行排序 比如利用之前比较高效的归并或者快速排序</span></span><br><span class=\"line\">    array.sort()</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(n<span class=\"number\">-1</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> array[i] == array[i+<span class=\"number\">1</span>]:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">False</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">True</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"复杂度分析-6\"><a href=\"#复杂度分析-6\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h4><p>由于算法由两部分构成（预排序数组和遍历数组查看元素相等），所以其复杂度也应该为两部分：排序的复杂度加检查元素相等的复杂度。</p>\n<p>我们在之前的分治法中发现归并排序和快速排序是目前相对有效的算法。假设我们的预排序使用归并算法，那么排序部分的复杂度即<code>nlogn</code></p>\n<p>由于我们只有一个循环遍历判断元素相等，所以整体算法复杂度为 <code>nlogn + n</code></p>\n<p>也就是 <code>nlogn</code></p>\n<h3 id=\"Find-the-Mode-寻找众数\"><a href=\"#Find-the-Mode-寻找众数\" class=\"headerlink\" title=\"Find the Mode 寻找众数\"></a>Find the Mode 寻找众数</h3><blockquote>\n<p>众数是出现在一组数据中最频繁的数。</p>\n</blockquote>\n<p>先来看下用暴力求解如何实现这个算法</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">find_mode_bf</span><span class=\"params\">(array)</span>:</span></span><br><span class=\"line\">  n = len(array)</span><br><span class=\"line\">  <span class=\"comment\"># 计数器字典 统计每个数字的频率</span></span><br><span class=\"line\">  counter = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(n):</span><br><span class=\"line\">    counter[array[i]] = counter.get(array[i], <span class=\"number\">0</span>) + <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">  occurence = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> key, value <span class=\"keyword\">in</span> counter.items():</span><br><span class=\"line\">    <span class=\"keyword\">if</span> value &gt; occurence:</span><br><span class=\"line\">      occurence = value</span><br><span class=\"line\">      mode = key</span><br><span class=\"line\">  <span class=\"keyword\">return</span> mode</span><br></pre></td></tr></table></figure>\n\n<p>最坏的情况下我们的数组每个元素都只出现一次 <code>[1, 2, 3, 4, 5, 6]</code>。复杂度为 n<sup>2</sup></p>\n<p>如果数组已经是一个有序数组，那么相同的元素在有序数组里都是相邻的。</p>\n<h4 id=\"代码实现-6\"><a href=\"#代码实现-6\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h4><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">compute_mode_presort</span><span class=\"params\">(array)</span>:</span></span><br><span class=\"line\">    array.sort()  <span class=\"comment\"># sort array</span></span><br><span class=\"line\">    i = <span class=\"number\">0</span>; freq = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> i &lt; len(array):</span><br><span class=\"line\">        temp_freq = <span class=\"number\">1</span>; temp_mode = array[i]</span><br><span class=\"line\">        <span class=\"keyword\">while</span> i + temp_freq &lt; len(array) <span class=\"keyword\">and</span> array[i+temp_freq] == temp_mode:</span><br><span class=\"line\">            temp_freq += <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> temp_freq &gt; freq:</span><br><span class=\"line\">            freq = temp_freq; mode = temp_mode</span><br><span class=\"line\">        i += temp_freq</span><br><span class=\"line\">    <span class=\"keyword\">return</span> mode</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"复杂度分析-7\"><a href=\"#复杂度分析-7\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h4><p>算法复杂度可以得出：<code>nlog n + log n = nlog n</code></p>\n<h2 id=\"2-Representation-Change-改变数据的表现形式\"><a href=\"#2-Representation-Change-改变数据的表现形式\" class=\"headerlink\" title=\"2. Representation Change 改变数据的表现形式\"></a>2. Representation Change 改变数据的表现形式</h2><p>除了对数组进行预处理外，我们还可以改变数据结构来提高算法效率。</p>\n<h3 id=\"Heap-堆的定义\"><a href=\"#Heap-堆的定义\" class=\"headerlink\" title=\"Heap 堆的定义\"></a>Heap 堆的定义</h3><ul>\n<li>堆的每个<strong>父节点</strong>(parent node)都<strong>大于或者等于</strong>它的子节点(child node)</li>\n<li>堆按照<strong>从左往右</strong>的顺序依次每层铺满子元素。</li>\n<li>在顶堆中，最大的元素为 Root 即根节点。</li>\n</ul>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20161423.png?alt=media&token=b043f03e-bca9-4e6e-a758-f47cd244e4c3\" width=\"60%\" height=\"auto\">\n\n<h3 id=\"Heap-Implementation-堆的应用\"><a href=\"#Heap-Implementation-堆的应用\" class=\"headerlink\" title=\"Heap Implementation 堆的应用\"></a>Heap Implementation 堆的应用</h3><p>将下面的堆树转换为数组表达形式</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20162133.png?alt=media&token=59dd7b37-81c6-4c7b-a581-8d6829b88ca1\" width=\"30%\" height=\"auto\">\n\n<br>\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20162142.png?alt=media&token=b6a265f0-24b1-4c66-b3f2-6453516e7b33\" width=\"50%\" height=\"auto\">\n\n<p>同理可以根据数组转化为堆树。从数组第一个元素开始，从左往右依次把每层铺满子元素。最后由上至下改变节点的位置以满足堆的性质。</p>\n<h3 id=\"Heap-Insert-堆的插入\"><a href=\"#Heap-Insert-堆的插入\" class=\"headerlink\" title=\"Heap Insert 堆的插入\"></a>Heap Insert 堆的插入</h3><p>假设我们要把一个数值插入到一个堆中,如何来实现呢?</p>\n<p>给定一个堆的排序 <code>[16, 15, 10, 14, 7, 9, 3, 2, 8 ,1]</code>，我们想要插入<code>17</code>到这个堆中</p>\n<ol>\n<li><p>首先把 17 插入到数组的最后一个位置中。</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20162537.png?alt=media&token=d9fddb9a-d835-49de-9e45-258f7508d8b1\" width=\"60%\" height=\"auto\">\n</li>\n<li><p>然后将 17 与它的父节点 7 进行比较。7 小于 17 不满足父节点大于子节点的特性，于是调换 7 和 17 的位置。</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/311.png?alt=media&token=caec7593-c628-4168-9543-7f2bf56fc7fe\" width=\"60%\" height=\"auto\">\n</li>\n<li><p>重复<strong>步骤 2</strong> 直到堆的性质得到满足。</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20162907.png?alt=media&token=7433c13d-ad7d-4d06-8b94-54ae543cddf7\" width=\"60%\" height=\"auto\">\n\n</li>\n</ol>\n<br>\n\n<h4 id=\"复杂度分析-8\"><a href=\"#复杂度分析-8\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h4><p>由于堆的高度为<code>log n</code>，所有堆的插入算法复杂度为<code>log n</code>。因为我们要检查每层是否都满足堆的性质。</p>\n<h3 id=\"Heap-Delete-堆的删除\"><a href=\"#Heap-Delete-堆的删除\" class=\"headerlink\" title=\"Heap Delete 堆的删除\"></a>Heap Delete 堆的删除</h3><p>从堆中删除一个元素的实现方法为：</p>\n<ol>\n<li>交换根节点的元素与堆尾的位置(数组中头尾交换)</li>\n<li>删除堆尾</li>\n<li><strong>由上至下</strong>调整堆的结构 (与堆的插入：由下至上相反)<ul>\n<li>如果不满足堆的性质就交换两个节点的值</li>\n</ul>\n</li>\n</ol>\n<p>比如我们之前的例子，<code>[17, 16, 10, 14, 15, 9, 3, 2, 8, 1, 7]</code>。我们想要删除根节点 17。按照上面的步骤来实现即</p>\n<ol>\n<li><p>替换 17 与 7 的位置</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/heapdelete1.png?alt=media&token=ee262f31-245a-4427-9b74-57169b2f16f8\" width=\"60%\" height=\"auto\">\n</li>\n<li><p>删除 节点 17</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/heapdelete2.png?alt=media&token=8a4fe4c4-36de-4aa2-b616-b558faca9e81\" width=\"60%\" height=\"auto\"></li>\n<li><p>调整堆的结构，7 与 16 对比，不满足堆的性质调换位置</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/heapdelete3.png?alt=media&token=23f09c2b-55aa-42cd-9892-fddd268b18de\" width=\"60%\" height=\"auto\"></li>\n<li><p>重复步骤 3 直到堆完全满足定义</p>\n</li>\n</ol>\n<h4 id=\"复杂度分析-9\"><a href=\"#复杂度分析-9\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h4><p>由于堆的高度为<code>log n</code>，所有堆的插入算法效率为<code>log n</code>。</p>\n<h3 id=\"Heap-Sort-堆排序\"><a href=\"#Heap-Sort-堆排序\" class=\"headerlink\" title=\"Heap Sort 堆排序\"></a>Heap Sort 堆排序</h3><h4 id=\"步骤\"><a href=\"#步骤\" class=\"headerlink\" title=\"步骤\"></a>步骤</h4><ol>\n<li>构建堆树(heap implementation)</li>\n<li>构建顶堆，即根元素为最大值。</li>\n<li>堆顶和堆尾的值交换顺序，并删除交换后的堆尾元素。</li>\n<li>调整堆的节点位置以满足堆的性质</li>\n<li>重复 1，2，3 步骤。</li>\n</ol>\n<h4 id=\"分析\"><a href=\"#分析\" class=\"headerlink\" title=\"分析\"></a>分析</h4><p>堆排序效率为<code>n logn</code></p>\n<h4 id=\"参考-2\"><a href=\"#参考-2\" class=\"headerlink\" title=\"参考\"></a>参考</h4><div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/2DmK_H7IdTo\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n<h1 id=\"Space-and-Time-Trade-Offs-时空权衡\"><a href=\"#Space-and-Time-Trade-Offs-时空权衡\" class=\"headerlink\" title=\"Space and Time Trade-Offs 时空权衡\"></a>Space and Time Trade-Offs 时空权衡</h1><h2 id=\"1-Counting-Sort-计数排序\"><a href=\"#1-Counting-Sort-计数排序\" class=\"headerlink\" title=\"1. Counting Sort 计数排序\"></a>1. Counting Sort 计数排序</h2><h3 id=\"举例-6\"><a href=\"#举例-6\" class=\"headerlink\" title=\"举例\"></a>举例</h3><p>给定一个数组<code>A = [4, 1, 3, 4, 3]</code></p>\n<ol>\n<li>找到数组内的最大值和最小值，即 4 和 1，创建一个新的数组<code>C = []</code>用来记录每个数值的频率，长度为<code>4-1+1=4</code><img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/1.png?alt=media&token=141e933e-8bf6-4a92-82c9-90083ec50f37\" width=\"50%\" height=\"auto\"></li>\n<li>遍历数组<code>A</code>并将每个数值的频率记录到<code>C</code>数组中。<code>C</code>数组的索引对应<code>A</code>数组的值。<br>最终结果为<code>C = [1, 0, 2, 2]</code>。<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/2.png?alt=media&token=bbfbf382-5953-4d24-b83b-16af4c5cdd1d\" width=\"50%\" height=\"auto\"></li>\n<li>将<code>C</code>数组内容的元素递归两两相加。比如<code>1+0=2</code>然后<code>2+2=4</code>如此。<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/3.png?alt=media&token=390d9075-b58b-4eca-b59f-5b099c9d841a\" width=\"50%\" height=\"auto\"></li>\n<li>最后，从<code>A</code>数组最后一个值开始，找到<code>C</code>数组内对应的<strong>频率减一</strong>后得到相对应的新的索引。然后放到新的数组<code>S = []</code><br>比如我们从<code>A[4] = 3</code>开始， 3 在 Count 中对应的频率是 3，我们减一后得到 2，于是我们把 3 放在<code>S[2]</code>的位置。<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/4.png?alt=media&token=1c7f75dd-7f15-4d5f-a432-376f7c1fd1fa\" width=\"50%\" height=\"auto\">\n重复步骤 4 最后得到有序数组`[1, 3, 3, 4, 4]`\n\n</li>\n</ol>\n<h3 id=\"复杂度分析-10\"><a href=\"#复杂度分析-10\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h3><p>整个算法过程中我们要遍历两个数组，一个是给定的数组，另一个为计算频率的数组。</p>\n<p>所以最好的情况下算法复杂度为 n。这比我们之前的分治法快速排序和归并排序更有效。</p>\n<h3 id=\"参考-3\"><a href=\"#参考-3\" class=\"headerlink\" title=\"参考\"></a>参考</h3><div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/8uyB78HNR4M\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n\n<h2 id=\"2-Horspool’s-Algorithm-String-Matching-字符串匹配算法\"><a href=\"#2-Horspool’s-Algorithm-String-Matching-字符串匹配算法\" class=\"headerlink\" title=\"2. Horspool’s Algorithm: String Matching 字符串匹配算法\"></a>2. Horspool’s Algorithm: String Matching 字符串匹配算法</h2><p>在最开始的暴力求解部分中，我们介绍了如何使用暴力求解来进行字符串匹配的算法。</p>\n<p>如果字符串不匹配，我们移动字符一个单位进行对比，重复该步骤直到遍历整个字符。我们也总结出时间复杂度为<code>(n-m+1)m</code>, n 为字符的长度，m 为我们要匹配的字符串长度。</p>\n<p><code>Horspool</code>算法不同的是，当我们遇到 mismatch 也就是不匹配的情况，我们可以位移 1 个或者多个单位再进行比较。位移的多少取决于我们可以用一个<code>shift table</code>来表示。</p>\n<h3 id=\"举例-7\"><a href=\"#举例-7\" class=\"headerlink\" title=\"举例\"></a>举例</h3><p>假设我们想要匹配的字符串为<code>IDIGDAB</code>。字符串的长度为<code>7</code>。进行匹配的字符为<code>IBAGHJDABADAB</code>。</p>\n<p>每个字符的值为字符串中出现在最右侧的索引。即<code>m - index in pattern -1</code>。</p>\n<p>比如 I 出现了两次，但最右侧的索引为 2, 那么 I 的位移为 <code>7 - 2 - 1 = 4</code>。</p>\n<p>最后一个字母<code>B</code>因为没有出现过，所以唯一单位为字母的长度也就是 7</p>\n<p>同理可以得出 shift table 如下</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">Letters</th>\n<th align=\"center\">I</th>\n<th align=\"center\">D</th>\n<th align=\"center\">G</th>\n<th align=\"center\">A</th>\n<th align=\"center\">B</th>\n<th align=\"center\">*</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">Value</td>\n<td align=\"center\">4</td>\n<td align=\"center\">2</td>\n<td align=\"center\">3</td>\n<td align=\"center\">1</td>\n<td align=\"center\">7</td>\n<td align=\"center\">7</td>\n</tr>\n</tbody></table>\n<p>有了 Shift Table 之后我们可以进行匹配，一旦有字符不匹配，我们即可参照 shift table 进行相对应的字符移动。</p>\n<p>首先<code>B</code>与<code>D</code>不匹配，根据 Shift Table, 我们需要将字符向右移动两个单位。</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20174305.png?alt=media&token=083aa2a2-d97a-4bed-8efb-11004c845e94\" width=\"50%\" height=\"auto\">\n\n<p>现在<code>G</code>与<code>J</code>不匹配，由于<code>B</code>是我们字符串中比较的最后一个字符，所以我们参照<code>B</code>移动字符 7 个单位。然后重复步骤即可。<br><img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/12.png?alt=media&token=92bac8ce-f00d-4404-a172-c73b817fcb9b\" width=\"50%\" height=\"auto\"></p>\n<h2 id=\"3-Hash-哈希\"><a href=\"#3-Hash-哈希\" class=\"headerlink\" title=\"3. Hash 哈希\"></a>3. Hash 哈希</h2><h3 id=\"Hasing-Function-哈希函数\"><a href=\"#Hasing-Function-哈希函数\" class=\"headerlink\" title=\"Hasing Function 哈希函数\"></a>Hasing Function 哈希函数</h3><p>假设哈希表长度为 5, 可以利用哈希函数将元素的键利用余数来转换为整数键。</p>\n<p>比如要把(Emily, 6046321)写入到哈希表中。</p>\n<p>我们先把<code>Emily</code>每个字母利用<code>ord()</code>函数转换成相应的整数。</p>\n<p><code>ord(e) + ord(m) + ord(i) + ord(l) + ord(y) = 5 + 13 + 9 + 12 + 25 = 64</code></p>\n<p>因为哈希表的长度为 5，64 除以 5 的余数为 4, 也就是转换后<code>6046321</code>的键。</p>\n<h3 id=\"Collision-Handling-冲突解决\"><a href=\"#Collision-Handling-冲突解决\" class=\"headerlink\" title=\"Collision Handling 冲突解决\"></a>Collision Handling 冲突解决</h3><p>如果在利用<code>哈希函数</code>转换键的时候出现相同的键怎么办呢? 比如两个元素 <code>Key mod 5</code>之后都是 4。如何解决这两个元素在哈希表中位置得问题呢？</p>\n<h4 id=\"1-Separate-Chaining-分离链接\"><a href=\"#1-Separate-Chaining-分离链接\" class=\"headerlink\" title=\"1. Separate Chaining 分离链接\"></a>1. Separate Chaining 分离链接</h4><p>第一种方法是分离链接，也就是用链表的方式来将相同的键组合在一起。</p>\n<p>比如给定哈希函数<code>h(i) = i mod 7</code>, 将下面的键值写入到哈希表中</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">Key</th>\n<th align=\"center\">Values</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">44</td>\n<td align=\"center\">name1</td>\n</tr>\n<tr>\n<td align=\"center\">12</td>\n<td align=\"center\">name2</td>\n</tr>\n<tr>\n<td align=\"center\">23</td>\n<td align=\"center\">name3</td>\n</tr>\n<tr>\n<td align=\"center\">16</td>\n<td align=\"center\">name4</td>\n</tr>\n<tr>\n<td align=\"center\">5</td>\n<td align=\"center\">name5</td>\n</tr>\n<tr>\n<td align=\"center\">28</td>\n<td align=\"center\">name6</td>\n</tr>\n</tbody></table>\n<p>我们可以发现<code>44</code>, <code>23</code>, 以及<code>16</code>的 key 都是相同的，那么我们就可以用链表的方式把这它们连接起来。最后得到的哈希表如下。</p>\n<p>h(44) = 44 mod 7 = 2<br>h(23) = 23 mod 7 = 2<br>h(16) = 23 mod 7 = 2</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20202615.png?alt=media&token=c720646f-7ef4-463b-a407-dbce665c6256\" width=\"70%\" height=\"auto\">\n\n<br>\n\n<h4 id=\"2-Closed-Hashing-封闭散列\"><a href=\"#2-Closed-Hashing-封闭散列\" class=\"headerlink\" title=\"2. Closed Hashing 封闭散列\"></a>2. Closed Hashing 封闭散列</h4><p>封闭散列解决冲突的方式为如果有冲突，向后找是否有空缺的位置并把键值写入到该位置。</p>\n<p>我们用之前相同的例子，但是这次用封闭散列来解决冲突问题。</p>\n<p>首先转换所有键</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">h(44) = 2</span><br><span class=\"line\">h(12) = 5</span><br><span class=\"line\">h(23) = 2</span><br><span class=\"line\">h(16) = 2</span><br><span class=\"line\">h(5) = 5</span><br><span class=\"line\">h(28) = 0</span><br></pre></td></tr></table></figure>\n\n<p>然后依次写入到哈希表中，name3 和 name1 都是相同键，但是 index 2 已经没有位置，所以我们把 name3 放到 index3 的位置。同理其他键值最后得到哈希表如下:</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">Index</th>\n<th align=\"center\">Values</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">0</td>\n<td align=\"center\">name6</td>\n</tr>\n<tr>\n<td align=\"center\">1</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\">2</td>\n<td align=\"center\">name1</td>\n</tr>\n<tr>\n<td align=\"center\">3</td>\n<td align=\"center\">name3</td>\n</tr>\n<tr>\n<td align=\"center\">4</td>\n<td align=\"center\">name4</td>\n</tr>\n<tr>\n<td align=\"center\">5</td>\n<td align=\"center\">name2</td>\n</tr>\n<tr>\n<td align=\"center\">6</td>\n<td align=\"center\">name5</td>\n</tr>\n</tbody></table>\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n<h2 id=\"4-Summary-of-sorting-algorithms-排序算法总结\"><a href=\"#4-Summary-of-sorting-algorithms-排序算法总结\" class=\"headerlink\" title=\"4. Summary of sorting algorithms 排序算法总结\"></a>4. Summary of sorting algorithms 排序算法总结</h2><table>\n<thead>\n<tr>\n<th>算法</th>\n<th>最好的情况</th>\n<th>最坏的情况</th>\n<th>稳定性</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>选择排序</td>\n<td>n2</td>\n<td>n2</td>\n<td>稳定</td>\n</tr>\n<tr>\n<td>冒泡排序</td>\n<td>n</td>\n<td>n2</td>\n<td>稳定</td>\n</tr>\n<tr>\n<td>插入排序</td>\n<td>n</td>\n<td>n2</td>\n<td>稳定</td>\n</tr>\n<tr>\n<td>归并排序</td>\n<td>n logn</td>\n<td>n logn</td>\n<td>稳定</td>\n</tr>\n<tr>\n<td>快速排序</td>\n<td>n logn</td>\n<td>n2</td>\n<td>不稳定</td>\n</tr>\n<tr>\n<td>堆排序</td>\n<td>n logn</td>\n<td>n logn</td>\n<td>不稳定</td>\n</tr>\n<tr>\n<td>计数排序</td>\n<td>n</td>\n<td>n + u</td>\n<td>不稳定</td>\n</tr>\n</tbody></table>\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n<h1 id=\"Data-Structure-数据结构\"><a href=\"#Data-Structure-数据结构\" class=\"headerlink\" title=\"Data Structure 数据结构\"></a>Data Structure 数据结构</h1><blockquote>\n<p>数据结构是用来管理和储存数据的一种方式</p>\n</blockquote>\n<h2 id=\"1-Linear-Data-Structure-线性数据结构\"><a href=\"#1-Linear-Data-Structure-线性数据结构\" class=\"headerlink\" title=\"1. Linear Data Structure 线性数据结构\"></a>1. Linear Data Structure 线性数据结构</h2><h3 id=\"Array-数组\"><a href=\"#Array-数组\" class=\"headerlink\" title=\"Array 数组\"></a>Array 数组</h3><p>一个数组通常有一系列相同类型的元素组成，每个元素都有相对应的索引值。</p>\n<p>比如下面<code>arr_list</code>数组，<code>item one</code>对应的索引值就是 0。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">arr_list = [<span class=\"string\">'item one'</span>, <span class=\"string\">'item two'</span>, <span class=\"string\">'item three'</span>]</span><br></pre></td></tr></table></figure>\n\n<p>由于数组的长度需要预先决定来分配内存。所以对于长度明确，或者插入删除不频繁的数据，数组比较适合。但如果数据需要频发插入或者删除，那我们可以用其他的数据结构。</p>\n<h3 id=\"Linked-List-链表\"><a href=\"#Linked-List-链表\" class=\"headerlink\" title=\"Linked List 链表\"></a>Linked List 链表</h3><p>链表由 0 或者多个叫做节点的元素组成，每个节点都有一个指针指向下一个节点。</p>\n<p>在数组中，如果想要拿到索引为 2 的值，可以直接用 arr[2]。但是在链表中，我们要从<code>head</code>开始一直往右进行节点的查找。</p>\n<p><strong>单向链表</strong></p>\n<p>单向链表，即每个节点中有一个指针指向后继节点。</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/linkedlist.png?alt=media&token=069ba69f-0b49-48d0-a353-5002b821f1cf\" width=\"70%\" height=\"auto\">\n<br>\n\n<p><strong>双向链表</strong></p>\n<p>双向链表，每个节点中有两个指针并分别指向前驱和后继。</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/linkedlist2.png?alt=media&token=cfaf0918-27ee-49ef-9249-c0d3f81c6c22\" width=\"70%\" height=\"auto\">\n<br>\n\n<h4 id=\"复杂度分析-11\"><a href=\"#复杂度分析-11\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h4><ul>\n<li>Search: <code>O(n)</code></li>\n<li>Insert: <code>O(1)</code></li>\n<li>Delete: <code>O(1)</code></li>\n</ul>\n<h3 id=\"Stack-栈\"><a href=\"#Stack-栈\" class=\"headerlink\" title=\"Stack 栈\"></a>Stack 栈</h3><p>遵循<code>后进先出(LIFO)</code>原则, 可以想象一叠盘子，你每清理完一个碟子你往上叠。结束后你从最上面的开始一个一个回收。最后一个清洁的碟子也是第一个拿走的。</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/stack.png?alt=media&token=3d248a10-e203-4e05-9783-a2b619889ab8\" width=\"70%\" height=\"auto\">\n<br>\n\n<p>插入方法为<code>push</code>，删除方法为<code>pop</code>。</p>\n<h4 id=\"复杂度分析-12\"><a href=\"#复杂度分析-12\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h4><ul>\n<li>Search: <code>O(n)</code></li>\n<li>Insert: <code>O(1)</code></li>\n<li>Delete: <code>O(1)</code></li>\n</ul>\n<h3 id=\"Queue-队列\"><a href=\"#Queue-队列\" class=\"headerlink\" title=\"Queue 队列\"></a>Queue 队列</h3><p>跟栈相反，队列遵循先进先出原则。可以想象以下我们平常超市购物结账排队的时候。排在第一位置的人也是先结完账最先离开的。</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/Introduction.png?alt=media&token=d5dc1f40-5d9a-44b2-94c9-01c0490fab75\" width=\"50%\" height=\"auto\">\n<br>\n\n<h4 id=\"复杂度分析-13\"><a href=\"#复杂度分析-13\" class=\"headerlink\" title=\"复杂度分析\"></a>复杂度分析</h4><ul>\n<li>Search: <code>O(n)</code></li>\n<li>Insert: <code>O(1)</code></li>\n<li>Delete: <code>O(1)</code></li>\n</ul>\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n<h2 id=\"2-Non-Linear-Data-Structures-Graph-图\"><a href=\"#2-Non-Linear-Data-Structures-Graph-图\" class=\"headerlink\" title=\"2. Non-Linear Data Structures: Graph 图\"></a>2. Non-Linear Data Structures: Graph 图</h2><h3 id=\"Types-图的分类\"><a href=\"#Types-图的分类\" class=\"headerlink\" title=\"Types 图的分类\"></a>Types 图的分类</h3><p>图又可分为有向图和无向图</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20122800.png?alt=media&token=a82cd4fb-63c0-4927-88c9-f3e7ffe13c64\" width=\"70%\" height=\"auto\">\n\n<h3 id=\"Representing-Graphs-图的表达方式\"><a href=\"#Representing-Graphs-图的表达方式\" class=\"headerlink\" title=\"Representing Graphs 图的表达方式\"></a>Representing Graphs 图的表达方式</h3><img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20123400.png?alt=media&token=45ef871a-d7a2-465d-aa06-558c07a4acb8\" width=\"50%\" height=\"auto\">\n\n<h4 id=\"1-Adjacency-Matrix-邻接矩阵\"><a href=\"#1-Adjacency-Matrix-邻接矩阵\" class=\"headerlink\" title=\"1. Adjacency Matrix 邻接矩阵\"></a>1. Adjacency Matrix 邻接矩阵</h4><p>用一个 2D 数组来储存图中顶点间的关系数据。</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20123411.png?alt=media&token=4d49cadd-470a-4144-9eb9-75a662fa8de7\" width=\"50%\" height=\"auto\">\n\n<h4 id=\"2-Adjacency-Lists-邻接表\"><a href=\"#2-Adjacency-Lists-邻接表\" class=\"headerlink\" title=\"2. Adjacency Lists 邻接表\"></a>2. Adjacency Lists 邻接表</h4><p>用来记录每一个节点所连接的所有其他节点。</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20123423.png?alt=media&token=e060e48e-5d26-4938-bacd-b6140111f128\" width=\"50%\" height=\"auto\">\n\n<h3 id=\"Graph-Traversal-图的遍历\"><a href=\"#Graph-Traversal-图的遍历\" class=\"headerlink\" title=\"Graph Traversal 图的遍历\"></a>Graph Traversal 图的遍历</h3><h4 id=\"1-Depth-First-Search-DFS-深度优先搜索\"><a href=\"#1-Depth-First-Search-DFS-深度优先搜索\" class=\"headerlink\" title=\"1. Depth-First Search (DFS) 深度优先搜索\"></a>1. Depth-First Search (DFS) 深度优先搜索</h4><img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/DFS.png?alt=media&token=b19c9461-5ea7-4a02-83d5-97f59227dec3\" width=\"50%\" height=\"auto\">\n\n<p>DFS 我们随意选择一个起点然后进行其他节点的探索，直到所有的节点全部被探索过。</p>\n<p>比如我们从 a 开始，我们现在可以走<code>b</code>, <code>f</code>, 或者<code>e</code>。我们用字母升序选择<code>b</code>，然后<code>f</code>最后<code>e</code>。</p>\n<p>这个时候已经没有路可以走了。那我们就要往回走到<code>b</code>。然后继续<code>g -&gt; c -&gt; d -&gt; h</code></p>\n<p>最后 DFS 的遍历为<code>abfegcdh</code> 如下图所示。当然如果一开始我们走完 a 选择其他路线，那 DFS 的遍历结果也是不一样的。</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/d'f's%E6%89%B9%E6%B3%A8%202020-07-20%20210327.png?alt=media&token=b7bdde72-f3e2-4d8b-89ae-c3d669bc2543\" width=\"50%\" height=\"auto\">\n\n<h4 id=\"2-Breadth-First-Search-BFS-广度优先搜素\"><a href=\"#2-Breadth-First-Search-BFS-广度优先搜素\" class=\"headerlink\" title=\"2. Breadth-First Search (BFS) 广度优先搜素\"></a>2. Breadth-First Search (BFS) 广度优先搜素</h4><p>广度优先搜索则是先把每个节点所有可行路线都走一遍，然后再回到每个子节点进行搜索。</p>\n<p>现在我们用 BFS 遍历之前的例子。</p>\n<p>我们从 a 开始，这时候有 b, e, f。然后 a 已经遍历完。我们开始遍历 b，发现只有 g。g 遍历完 c 和 h 后只剩下 d。</p>\n<p>得到 BFS <code>abefgchd</code></p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/BFS.png?alt=media&token=b7229ee9-55ad-479e-8acd-d1fae3464353\" width=\"50%\" height=\"auto\">\n\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n<!------------------------------------ 分割线 ---------------------------------------->\n\n<h1 id=\"Greedy-Approach-贪心算法\"><a href=\"#Greedy-Approach-贪心算法\" class=\"headerlink\" title=\"Greedy Approach 贪心算法\"></a>Greedy Approach 贪心算法</h1><h2 id=\"1-Prim’s-Algorithm-普林姆算法\"><a href=\"#1-Prim’s-Algorithm-普林姆算法\" class=\"headerlink\" title=\"1. Prim’s Algorithm 普林姆算法\"></a>1. Prim’s Algorithm 普林姆算法</h2><p>在普林姆算法中，我们随意选择一个起点，之后每次都选择访问个节点的最短的路线，直到所有的节点都被访问过。</p>\n<h3 id=\"举例-8\"><a href=\"#举例-8\" class=\"headerlink\" title=\"举例\"></a>举例</h3><img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/prim.png?alt=media&token=dde1bf4c-bfce-47b0-b6f7-c72f4373ce74\" width=\"60%\" height=\"auto\">\n\n<p>我们从 a 开始，可以发现最短路径为<code>af</code>，所以我们连接<code>af</code>。现在找到所有与 a 和 f 相连的节点的最短路径，我们找到<code>fe</code>最短, 连接<code>fe</code>。</p>\n<p>这个时候<code>ae</code>是最短的，但是<code>a</code>和<code>e</code>都已经访问过了，所以我们不能选择这条路径。</p>\n<p>于是我们连接<code>eb</code>, 然后<code>bc</code>最后<code>cd</code>结束得到最小生成树。</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20212525.png?alt=media&token=e173c8f3-b841-4052-922e-007faa4de91a\" width=\"50%\" height=\"auto\">\n\n<h3 id=\"参考-4\"><a href=\"#参考-4\" class=\"headerlink\" title=\"参考\"></a>参考</h3><div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/cplfcGZmX7I\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n\n<h2 id=\"2-Kruskal’s-Algorithm-克鲁斯卡尔算法\"><a href=\"#2-Kruskal’s-Algorithm-克鲁斯卡尔算法\" class=\"headerlink\" title=\"2. Kruskal’s Algorithm 克鲁斯卡尔算法\"></a>2. Kruskal’s Algorithm 克鲁斯卡尔算法</h2><p>与 Prim 算法不同的时，Kruskal 算法我们不是随意选择一个起点，而是先选择图中最短的一条路径，然后在不制造出 cycle 的情况下，找到所有最短的路线直到所有节点被访问。</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/prim.png?alt=media&token=dde1bf4c-bfce-47b0-b6f7-c72f4373ce74\" width=\"60%\" height=\"auto\">\n\n<p>同样用这个图，我们这次从<code>fe</code>开始，然后同样最短的路径有<code>af</code>和<code>cd</code>都为 4，可以都连接。</p>\n<p>这个时候<code>ae</code>不能连接因为会出现<code>cycle</code>。</p>\n<p>所以我们连接下一个最短路径<code>bc</code>。之后时<code>be</code>。于是得到最小生成树如下所示，可以发现跟 Prim 算法的结果相同。</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-20%20212525.png?alt=media&token=e173c8f3-b841-4052-922e-007faa4de91a\" width=\"50%\" height=\"auto\">\n\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/71UQH7Pr9kU\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n\n<h2 id=\"3-Dijkstra’s-Algorithm-迪克斯特拉算法\"><a href=\"#3-Dijkstra’s-Algorithm-迪克斯特拉算法\" class=\"headerlink\" title=\"3. Dijkstra’s Algorithm: 迪克斯特拉算法\"></a>3. Dijkstra’s Algorithm: 迪克斯特拉算法</h2><div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/_lHSawdgXpI\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n"},{"title":"React常用Hooks笔记","date":"2020-06-19T04:37:47.000Z","cover":"https://www.educative.io/api/page/6018530514305024/image/download/5753173610332160","_content":"\n> React Hooks 是 react 16.8 之后的新特性。相比于之前的在 class 组件中管理 state，我们现在可以在函数组件(function component)中管理状态和生命周期\n\n<!-- more -->\n\n## useState(): 管理状态 hooks\n\nuseState()有两个 parameters，期中第一个是变量，即指向状态的 value。第二个是管理该状态的函数，通常以 set 开头加状态名。\n\n比如我们声明一个用户登录的状态。\n\n```jsx\nimport React, {useState} from 'react'\n\nexport const App:React.FC = () => {\n    // 初始化isLogged的状态为false\n    const [isLogged, setIsLoggedIn] = useState<boolean>(false)\n\n    // 点击按钮后 更改isLogged的状态为true\n    const handleLogin = () {\n        setIsLoggedIn(true)\n    }\n\n    return (\n        <div>\n            <button onClick={handleLogin}>Login</button>\n        </div>\n    )\n}\n```\n\n### Custom Hooks Counter 例子\n\n除了利用 react 官方提供的 hooks API 之外，我们还可以把我们自己的函数封装成 hooks 重复利用。\n\n比如上面的 counter 我们可以封装为 useCounter()。\n\n```jsx\nimport React, {useState} from 'react'\n\nexport default const useCounter = (defaultValue) => {\n    const [count, setCount] = useState(defaultValue)\n\n    const increment = () {\n        setCount(prevCnt => prevCnt + 1)\n    }\n\n    //就像我们声明useState两个参数一样，第一个为变量，第二个为函数。\n    return [count, increment]\n}\n```\n\n在我们的 App 组件中运用我们的 useCounter hooks\n\n```jsx\nimport React, {useState} from 'react'\nimport useCounter from './useCounter'\n\nexport default const App = () => {\n    const [count, handleCount] = useCounter(10)\n\n    return (\n        <div className=\"app-container\">\n            <p>{count}</p>\n            <button onClick={handleCount}>Increment</button>\n        </div>\n    )\n}\n```\n\n### Form Hooks 例子\n\n首先创建一个`useForm()` Hooks\n\n```jsx\nimport { useState } from 'react'\n\nexport const useForm = initialValues => {\n  const [values, setValues] = useState(initialValues)\n\n  return [\n    values,\n    event => {\n      setValues({\n        ...values,\n        [event.target.name]: event.target.value,\n      })\n    },\n  ]\n}\n```\n\n在其他组件中利用`useForm()` Hooks\n\n```jsx\nimport React, { useState } from 'react'\nimport { useForm } from './useForm'\n\nexport const App = () => {\n  const [values, handleForm] = useForm({\n    username: '',\n    email: '',\n    password: '',\n  })\n\n  return (\n    <div>\n      <input name=\"username\" value={values.username} onChange={handleForm} />\n      <input name=\"password\" value={values.password} onChange={handleForm} />\n      <input name=\"email\" value={values.email} onChange={handleForm} />\n    </div>\n  )\n}\n```\n\n## useEffect(): 管理生命周期\n\n我们之前在 class 组件中可以利用`componentDidMount`以及其他函数来管理 state 的生命周期。现在，我们可以利用 useEffect 来管理组件的渲染或者处理第三方 API 的请求数据。useEffect()中有两个参数，第一个为 arrow 函数即我们要执行的操作。第二个参数为依赖，当依赖发生变化时就会执行 useEffect。\n\n```jsx\nuseEffect(() => {\n  //action\n}, [dependencies])\n```\n\n### 执行 effect 一次\n\n如果我们只想执行 useEffect 一次，类似于之前 componentDidMount。我们给第二个参数留空的数组即可。\n\n```jsx\nuseEffect(() => {\n  const url = 'https://whatevertheapiis/'\n  fetch(url)\n    .then(repsonse => response.json)\n    .then(data => {\n      console.log(data)\n    })\n}, [])\n```\n\n### 根据依赖来决定执行次数\n\n我们在第二个参数`[]`内写入依赖。比如我们想要这个 effect 每次`url`改变时执行。\n\n```jsx\nconst [url, setUrl] = useState('')\nuseEffect(() => {\n  fetch(`https://whatevertheapiis/${url}`)\n    .then(response => response.json)\n    .then(data => {\n      console.log(data)\n    })\n}, [url])\n```\n\n### 利用 callback 来 clean up\n\n有的时候你只希望`useEffect`在渲染的时候执行一次，但是会提示缺少依赖的警告。那我们可以把想要执行的函数作为第一个函数即可\n\n```jsx\nconst fetchUsers = () => {\n  firebase\n    .firestore()\n    .collection('user')\n    .get()\n    .then(querySnapshot => {\n      querySnapshot.forEach(docs => {\n        setUserLists(currUsers => [...currUsers, docs.data()])\n      })\n    })\n}\n\nuseEffect(fetchUsers, [])\n```\n\n或者直接在`useEffect()`中声明函数, 跟上面用`callback`同理\n\n```jsx\nuseEffect(() => {\n  const fetchUsers = () => {\n    return firebase\n      .firestore()\n      .collection('user')\n      .get()\n      .then(querySnapshot => {\n        querySnapshot.forEach(docs => {\n          setUserLists(currUsers => [...currUsers, docs.data()])\n        })\n      })\n  }\n  fetchUsers()\n}, [])\n```\n\n### 自定义 Fetch Hooks\n\n我们在处理多个组件都需要调用 API 时，除了上面在组件内用`useEffect()`只渲染一次的方法外，我们还可以自定义`userEffect()` hook 来重复利用相同的方法。那我们改变一下上面的`fetchUser`写法为`useFetchUser()`。\n\n**useFetch.js**\n\n```jsx\nimport { useState, useEffect } from 'react'\nimport firebase from 'firebase'\n\nexport const useFetch = (collection: string) => {\n  const [loading, setLoading] = useState < boolean > true\n  const [docs, setDocs] = useState < any > []\n\n  useEffect(() => {\n    const fetchCollection = async () => {\n      const querySnapshot = await firebase\n        .firestore()\n        .collection(collection)\n        .get()\n      querySnapshot.forEach(doc => {\n        setDocs((prevData: any) => [...prevData, doc.data()])\n        setLoading(false)\n      })\n    }\n    fetchCollection()\n  }, [])\n  return { docs, loading }\n}\n```\n\n**App.js**\n\n```js\nimport React, { useState, useEffect } from 'react'\nimport { useFetch } from './useFetch'\n\nexport const App = () => {\n  const { docs, loading } = useFetch('user')\n\n  return <div>{loading ? 'Loading Animaion...' : <p>{docs.username}</p>}</div>\n}\n```\n\n## useContext(): 跨组件传递状态\n\n在之前的版本中我们可以利用 context 来创建 Consumer 和 Provider。但是 useContext()可以更加方便。\n\n最简单的例子，用户登录之后，用户名是可以被多个组件使用。\n\n比如下面我们创建一个 ProfileMenu 和 Dashboard 组件。这两个组件都需要用到用户的姓名。\n\n```jsx\nexport const App: React.FC = () => {\n  return (\n    <div className=\"app-container\">\n      <ProfileMenu />\n      <Dashboard />\n    </div>\n  )\n}\n```\n\n首先我们需要给 Profile 和 Dashboard 组件创建一个 Context\n\n```jsx\nimport React, { createContext } from 'react'\n\nconst UserNameContext = createContext({})\n```\n\n然后我们把 Profile 和 Dashboard 封装在我们刚刚建立的`UserNameContext`中作为状态的**提供者**(Provider), 以供子级组件共享。\n\n```jsx\nexport const App: React.FC = () => {\n  return (\n    <UserNameContext.Provider\n      value={{\n        userName: 'Yang Li',\n      }}\n    >\n      <div className=\"app-container\">\n        <ProfileMenu />\n        <Dashboard />\n      </div>\n    </UserNameContext.Provider>\n  )\n}\n```\n\n然后我们就可以在 ProfileMenu 和 Dashboard 中引用我们`UserNameContext`的 userName\n\n```jsx\nexport const ProfileMenu: React.FC = () => {\n  const { userName } = useContext(UserNameContext)\n  return (\n    <div clasName=\"profile-menu-container\">\n      <p>{userName}</p>\n    </div>\n  )\n}\n\nexport const Dashboard: React.FC = () => {\n  const { userName } = useContext(UserNameContext)\n  return (\n    <div className=\"dashboard-container\">\n      <h2>Welcome Back {userName}</h2>\n    </div>\n  )\n}\n```\n\n## useReducer(): 状态管理\n\n首先来看一下 useReducer()的参数\n\n```jsx\nconst [state, dispatch] = useReducer(reducer, initialState)\n```\n\n其中第一个`state`即函数的状态值， `dispath`则是用来发送 action。`reduce`即我们我们之后 Reducer 的函数。`initialState`为状态的初始值。\n\n比如我们有 3 个按钮，分别对应着数字的加，减，归零。利用 useReducer()来实现即\n\n```jsx\nexport const Counter: React.FC = () => {\n  const counterReducer = (state, action) => {\n    switch (action.type) {\n      case 'increment':\n        return {\n          ...state,\n          count: state.count + 1,\n        }\n      case 'decrement':\n        return {\n          ...state,\n          count: state.count - 1,\n        }\n      case 'reset':\n        return {\n          ...state,\n          count: 0,\n        }\n      default:\n        return state\n    }\n  }\n\n  const [state, dispatch] = useReducer(counterReducer, { count: 0 })\n  return (\n    <div className=\"counter-container\">\n      <button onClick={() => dispatch({ type: 'increment' })}>Increment</button>\n      <button onClick={() => dispatch({ type: 'decrement' })}>Decrement</button>\n      <button onClick={() => dispatch({ type: 'reset' })}>Reset</button>\n\n      <p>{state.count}</p>\n    </div>\n  )\n}\n```\n\n<iframe src=\"https://stackblitz.com/edit/react-2ytrpj?embed=1&file=index.js&hideExplorer=1&hideNavigation=1\"></iframe>\n\n我们当然也可以利用 useState()来实现同样的效果，但是我们需要给 increment, decrement, reset 每个按钮都单独创建一个 useState()。然后每个按钮我们再利用 setIncrement()来实现状态的更新。\n\n很明显，利用 useReducer()可以让我们的代码更容易读，也增加了代码的维护性。一个开发团队，你永远都不知道下一个跟你合作的或者接手你的代码的人的技术性。因此提高代码的阅读性和维护性是至关重要的。\n\n## useRef()\n\n### DOM 渲染\n\n通过 useRef()我们可以记录组件渲染的次数但不重新渲染组件。比如下面的例子，假设我们想要每次 input 发生变化时，我们希望页面下方显示渲染了几次。当然我们可以用`useEffect`和`useState`来实现，但要注意的是，这种方法会每次都重新渲染组件，而我们只想获得一个数值记录渲染的次数。\n\n下面的代码每当 input 发生变化时，我们把`renderCnt`的数值加 1. 但不重新渲染我们的组件。\n\n```jsx\nimport React, {useState, useEffect, useRef} from 'react'\n\nexport const App = () => {\n  const [name, setName] = useState('')\n  const renderCnt = useRef(0)\n\n  useEffect(() => {\n    renderCnt.current = renderCnt.current + 1\n  })\n\n  return (\n    <div>\n      <input value={name} onChange={e => setName(e.target.value)}>\n      <p>My name is {name}</p>\n      <p>The app component rendered {renderCnt.current} times</p>\n    </div>\n  )\n}\n```\n\n### HTML DOM Node\n\n我们可以用 ref 来获取 HTML DOM node, 比如下面的例子，input 元素的 ref 等于我们定义的`inputRef`。当用户点击按钮触发`focusInput`函数时，ref 元素就会被 focus。\n\n```jsx\nimport React, {useState, useEffect, useRef} from 'react'\n\nexport const App = () => {\n  const [name, setName] = useState('')\n  const inputRef = useRef()\n\n  const focusInput = () => {\n    inputRef.current.focus()\n  }\n\n  return (\n    <div>\n      <input ref={inputRef} value={name} onChange={e => setName(e.target.value)}>\n      <p>My name is {name}</p>\n      <button onClick={focusInput}></button>\n    </div>\n  )\n}\n```\n\n### 保存之前的 state\n\n通过`.current`来保存之前的 state.\n\n```jsx\nimport React, {useState, useEffect, useRef} from 'react'\n\nexport const App = () => {\n  const [cnt, setCnt] = useState(0)\n  const prevCnt = useRef(0)\n\n  useEffect(() => {\n    prevCnt.current = cnt\n  },[cnt])\n\n  return (\n    <div>\n      <button onClick={() => setCnt(prevCnt => prevCnt + 1)}>\n      <p>Currnet Count: {cnt}</p>\n      <p>Previous Count: {prevCnt.current}</p>\n    </div>\n  )\n}\n```\n\n## useCallback()\n\n`useCallback`有两个参数，第一个参数即所执行的函数，第二个参数为执行的依赖，类似于`useEffect`。\n\n**App.js**\n\n```jsx\nimport React, { useState, useCallback } from 'react'\nimport Count from './Count'\nimport Button from './Button'\n\nexport const React.memo(App) = () => {\n  const [age, setAge] = useState(25)\n  const [salary, setSalary] = useState(5000)\n\n  const incrementAge = useCallback(() => {\n    setAge(age + 1)\n  }, [age])\n\n  const incrementSalary = useCallback(() => {\n    setSalary(salary + 1)\n  }, [salary])\n\n  return (\n    <div>\n      <Count text=\"Age\" count={age} />\n      <Button handleClick={incrementCnt}>Increment Age</Button>\n      <Count text=\"Salary\" count={salary} />\n      <Button handleClick={incrementAge}>Increment Salary</Button>\n    </div>\n  )\n}\n```\n\n**Count.js**\n\n```jsx\nexport const React.memo(Count) = ({ text, count }) => {\n  return (\n    <div>\n      {text} - {count}\n    </div>\n  )\n}\n```\n\n**Button.js**\n\n```jsx\nimport React from 'react'\n\nexport const React.memo(Button) = ({ handleClick, children }) => {\n  return <button onClick={handleClick}>{children}</button>\n}\n```\n","source":"_posts/13-userRef-useReduce.md","raw":"---\ntitle: React常用Hooks笔记\ndate: 2020-06-18 21:37:47\ntags: ['react', 'framework', 'front-end', 'react-hooks', 'notes']\ncategories: 笔记\ncover: 'https://www.educative.io/api/page/6018530514305024/image/download/5753173610332160'\n---\n\n> React Hooks 是 react 16.8 之后的新特性。相比于之前的在 class 组件中管理 state，我们现在可以在函数组件(function component)中管理状态和生命周期\n\n<!-- more -->\n\n## useState(): 管理状态 hooks\n\nuseState()有两个 parameters，期中第一个是变量，即指向状态的 value。第二个是管理该状态的函数，通常以 set 开头加状态名。\n\n比如我们声明一个用户登录的状态。\n\n```jsx\nimport React, {useState} from 'react'\n\nexport const App:React.FC = () => {\n    // 初始化isLogged的状态为false\n    const [isLogged, setIsLoggedIn] = useState<boolean>(false)\n\n    // 点击按钮后 更改isLogged的状态为true\n    const handleLogin = () {\n        setIsLoggedIn(true)\n    }\n\n    return (\n        <div>\n            <button onClick={handleLogin}>Login</button>\n        </div>\n    )\n}\n```\n\n### Custom Hooks Counter 例子\n\n除了利用 react 官方提供的 hooks API 之外，我们还可以把我们自己的函数封装成 hooks 重复利用。\n\n比如上面的 counter 我们可以封装为 useCounter()。\n\n```jsx\nimport React, {useState} from 'react'\n\nexport default const useCounter = (defaultValue) => {\n    const [count, setCount] = useState(defaultValue)\n\n    const increment = () {\n        setCount(prevCnt => prevCnt + 1)\n    }\n\n    //就像我们声明useState两个参数一样，第一个为变量，第二个为函数。\n    return [count, increment]\n}\n```\n\n在我们的 App 组件中运用我们的 useCounter hooks\n\n```jsx\nimport React, {useState} from 'react'\nimport useCounter from './useCounter'\n\nexport default const App = () => {\n    const [count, handleCount] = useCounter(10)\n\n    return (\n        <div className=\"app-container\">\n            <p>{count}</p>\n            <button onClick={handleCount}>Increment</button>\n        </div>\n    )\n}\n```\n\n### Form Hooks 例子\n\n首先创建一个`useForm()` Hooks\n\n```jsx\nimport { useState } from 'react'\n\nexport const useForm = initialValues => {\n  const [values, setValues] = useState(initialValues)\n\n  return [\n    values,\n    event => {\n      setValues({\n        ...values,\n        [event.target.name]: event.target.value,\n      })\n    },\n  ]\n}\n```\n\n在其他组件中利用`useForm()` Hooks\n\n```jsx\nimport React, { useState } from 'react'\nimport { useForm } from './useForm'\n\nexport const App = () => {\n  const [values, handleForm] = useForm({\n    username: '',\n    email: '',\n    password: '',\n  })\n\n  return (\n    <div>\n      <input name=\"username\" value={values.username} onChange={handleForm} />\n      <input name=\"password\" value={values.password} onChange={handleForm} />\n      <input name=\"email\" value={values.email} onChange={handleForm} />\n    </div>\n  )\n}\n```\n\n## useEffect(): 管理生命周期\n\n我们之前在 class 组件中可以利用`componentDidMount`以及其他函数来管理 state 的生命周期。现在，我们可以利用 useEffect 来管理组件的渲染或者处理第三方 API 的请求数据。useEffect()中有两个参数，第一个为 arrow 函数即我们要执行的操作。第二个参数为依赖，当依赖发生变化时就会执行 useEffect。\n\n```jsx\nuseEffect(() => {\n  //action\n}, [dependencies])\n```\n\n### 执行 effect 一次\n\n如果我们只想执行 useEffect 一次，类似于之前 componentDidMount。我们给第二个参数留空的数组即可。\n\n```jsx\nuseEffect(() => {\n  const url = 'https://whatevertheapiis/'\n  fetch(url)\n    .then(repsonse => response.json)\n    .then(data => {\n      console.log(data)\n    })\n}, [])\n```\n\n### 根据依赖来决定执行次数\n\n我们在第二个参数`[]`内写入依赖。比如我们想要这个 effect 每次`url`改变时执行。\n\n```jsx\nconst [url, setUrl] = useState('')\nuseEffect(() => {\n  fetch(`https://whatevertheapiis/${url}`)\n    .then(response => response.json)\n    .then(data => {\n      console.log(data)\n    })\n}, [url])\n```\n\n### 利用 callback 来 clean up\n\n有的时候你只希望`useEffect`在渲染的时候执行一次，但是会提示缺少依赖的警告。那我们可以把想要执行的函数作为第一个函数即可\n\n```jsx\nconst fetchUsers = () => {\n  firebase\n    .firestore()\n    .collection('user')\n    .get()\n    .then(querySnapshot => {\n      querySnapshot.forEach(docs => {\n        setUserLists(currUsers => [...currUsers, docs.data()])\n      })\n    })\n}\n\nuseEffect(fetchUsers, [])\n```\n\n或者直接在`useEffect()`中声明函数, 跟上面用`callback`同理\n\n```jsx\nuseEffect(() => {\n  const fetchUsers = () => {\n    return firebase\n      .firestore()\n      .collection('user')\n      .get()\n      .then(querySnapshot => {\n        querySnapshot.forEach(docs => {\n          setUserLists(currUsers => [...currUsers, docs.data()])\n        })\n      })\n  }\n  fetchUsers()\n}, [])\n```\n\n### 自定义 Fetch Hooks\n\n我们在处理多个组件都需要调用 API 时，除了上面在组件内用`useEffect()`只渲染一次的方法外，我们还可以自定义`userEffect()` hook 来重复利用相同的方法。那我们改变一下上面的`fetchUser`写法为`useFetchUser()`。\n\n**useFetch.js**\n\n```jsx\nimport { useState, useEffect } from 'react'\nimport firebase from 'firebase'\n\nexport const useFetch = (collection: string) => {\n  const [loading, setLoading] = useState < boolean > true\n  const [docs, setDocs] = useState < any > []\n\n  useEffect(() => {\n    const fetchCollection = async () => {\n      const querySnapshot = await firebase\n        .firestore()\n        .collection(collection)\n        .get()\n      querySnapshot.forEach(doc => {\n        setDocs((prevData: any) => [...prevData, doc.data()])\n        setLoading(false)\n      })\n    }\n    fetchCollection()\n  }, [])\n  return { docs, loading }\n}\n```\n\n**App.js**\n\n```js\nimport React, { useState, useEffect } from 'react'\nimport { useFetch } from './useFetch'\n\nexport const App = () => {\n  const { docs, loading } = useFetch('user')\n\n  return <div>{loading ? 'Loading Animaion...' : <p>{docs.username}</p>}</div>\n}\n```\n\n## useContext(): 跨组件传递状态\n\n在之前的版本中我们可以利用 context 来创建 Consumer 和 Provider。但是 useContext()可以更加方便。\n\n最简单的例子，用户登录之后，用户名是可以被多个组件使用。\n\n比如下面我们创建一个 ProfileMenu 和 Dashboard 组件。这两个组件都需要用到用户的姓名。\n\n```jsx\nexport const App: React.FC = () => {\n  return (\n    <div className=\"app-container\">\n      <ProfileMenu />\n      <Dashboard />\n    </div>\n  )\n}\n```\n\n首先我们需要给 Profile 和 Dashboard 组件创建一个 Context\n\n```jsx\nimport React, { createContext } from 'react'\n\nconst UserNameContext = createContext({})\n```\n\n然后我们把 Profile 和 Dashboard 封装在我们刚刚建立的`UserNameContext`中作为状态的**提供者**(Provider), 以供子级组件共享。\n\n```jsx\nexport const App: React.FC = () => {\n  return (\n    <UserNameContext.Provider\n      value={{\n        userName: 'Yang Li',\n      }}\n    >\n      <div className=\"app-container\">\n        <ProfileMenu />\n        <Dashboard />\n      </div>\n    </UserNameContext.Provider>\n  )\n}\n```\n\n然后我们就可以在 ProfileMenu 和 Dashboard 中引用我们`UserNameContext`的 userName\n\n```jsx\nexport const ProfileMenu: React.FC = () => {\n  const { userName } = useContext(UserNameContext)\n  return (\n    <div clasName=\"profile-menu-container\">\n      <p>{userName}</p>\n    </div>\n  )\n}\n\nexport const Dashboard: React.FC = () => {\n  const { userName } = useContext(UserNameContext)\n  return (\n    <div className=\"dashboard-container\">\n      <h2>Welcome Back {userName}</h2>\n    </div>\n  )\n}\n```\n\n## useReducer(): 状态管理\n\n首先来看一下 useReducer()的参数\n\n```jsx\nconst [state, dispatch] = useReducer(reducer, initialState)\n```\n\n其中第一个`state`即函数的状态值， `dispath`则是用来发送 action。`reduce`即我们我们之后 Reducer 的函数。`initialState`为状态的初始值。\n\n比如我们有 3 个按钮，分别对应着数字的加，减，归零。利用 useReducer()来实现即\n\n```jsx\nexport const Counter: React.FC = () => {\n  const counterReducer = (state, action) => {\n    switch (action.type) {\n      case 'increment':\n        return {\n          ...state,\n          count: state.count + 1,\n        }\n      case 'decrement':\n        return {\n          ...state,\n          count: state.count - 1,\n        }\n      case 'reset':\n        return {\n          ...state,\n          count: 0,\n        }\n      default:\n        return state\n    }\n  }\n\n  const [state, dispatch] = useReducer(counterReducer, { count: 0 })\n  return (\n    <div className=\"counter-container\">\n      <button onClick={() => dispatch({ type: 'increment' })}>Increment</button>\n      <button onClick={() => dispatch({ type: 'decrement' })}>Decrement</button>\n      <button onClick={() => dispatch({ type: 'reset' })}>Reset</button>\n\n      <p>{state.count}</p>\n    </div>\n  )\n}\n```\n\n<iframe src=\"https://stackblitz.com/edit/react-2ytrpj?embed=1&file=index.js&hideExplorer=1&hideNavigation=1\"></iframe>\n\n我们当然也可以利用 useState()来实现同样的效果，但是我们需要给 increment, decrement, reset 每个按钮都单独创建一个 useState()。然后每个按钮我们再利用 setIncrement()来实现状态的更新。\n\n很明显，利用 useReducer()可以让我们的代码更容易读，也增加了代码的维护性。一个开发团队，你永远都不知道下一个跟你合作的或者接手你的代码的人的技术性。因此提高代码的阅读性和维护性是至关重要的。\n\n## useRef()\n\n### DOM 渲染\n\n通过 useRef()我们可以记录组件渲染的次数但不重新渲染组件。比如下面的例子，假设我们想要每次 input 发生变化时，我们希望页面下方显示渲染了几次。当然我们可以用`useEffect`和`useState`来实现，但要注意的是，这种方法会每次都重新渲染组件，而我们只想获得一个数值记录渲染的次数。\n\n下面的代码每当 input 发生变化时，我们把`renderCnt`的数值加 1. 但不重新渲染我们的组件。\n\n```jsx\nimport React, {useState, useEffect, useRef} from 'react'\n\nexport const App = () => {\n  const [name, setName] = useState('')\n  const renderCnt = useRef(0)\n\n  useEffect(() => {\n    renderCnt.current = renderCnt.current + 1\n  })\n\n  return (\n    <div>\n      <input value={name} onChange={e => setName(e.target.value)}>\n      <p>My name is {name}</p>\n      <p>The app component rendered {renderCnt.current} times</p>\n    </div>\n  )\n}\n```\n\n### HTML DOM Node\n\n我们可以用 ref 来获取 HTML DOM node, 比如下面的例子，input 元素的 ref 等于我们定义的`inputRef`。当用户点击按钮触发`focusInput`函数时，ref 元素就会被 focus。\n\n```jsx\nimport React, {useState, useEffect, useRef} from 'react'\n\nexport const App = () => {\n  const [name, setName] = useState('')\n  const inputRef = useRef()\n\n  const focusInput = () => {\n    inputRef.current.focus()\n  }\n\n  return (\n    <div>\n      <input ref={inputRef} value={name} onChange={e => setName(e.target.value)}>\n      <p>My name is {name}</p>\n      <button onClick={focusInput}></button>\n    </div>\n  )\n}\n```\n\n### 保存之前的 state\n\n通过`.current`来保存之前的 state.\n\n```jsx\nimport React, {useState, useEffect, useRef} from 'react'\n\nexport const App = () => {\n  const [cnt, setCnt] = useState(0)\n  const prevCnt = useRef(0)\n\n  useEffect(() => {\n    prevCnt.current = cnt\n  },[cnt])\n\n  return (\n    <div>\n      <button onClick={() => setCnt(prevCnt => prevCnt + 1)}>\n      <p>Currnet Count: {cnt}</p>\n      <p>Previous Count: {prevCnt.current}</p>\n    </div>\n  )\n}\n```\n\n## useCallback()\n\n`useCallback`有两个参数，第一个参数即所执行的函数，第二个参数为执行的依赖，类似于`useEffect`。\n\n**App.js**\n\n```jsx\nimport React, { useState, useCallback } from 'react'\nimport Count from './Count'\nimport Button from './Button'\n\nexport const React.memo(App) = () => {\n  const [age, setAge] = useState(25)\n  const [salary, setSalary] = useState(5000)\n\n  const incrementAge = useCallback(() => {\n    setAge(age + 1)\n  }, [age])\n\n  const incrementSalary = useCallback(() => {\n    setSalary(salary + 1)\n  }, [salary])\n\n  return (\n    <div>\n      <Count text=\"Age\" count={age} />\n      <Button handleClick={incrementCnt}>Increment Age</Button>\n      <Count text=\"Salary\" count={salary} />\n      <Button handleClick={incrementAge}>Increment Salary</Button>\n    </div>\n  )\n}\n```\n\n**Count.js**\n\n```jsx\nexport const React.memo(Count) = ({ text, count }) => {\n  return (\n    <div>\n      {text} - {count}\n    </div>\n  )\n}\n```\n\n**Button.js**\n\n```jsx\nimport React from 'react'\n\nexport const React.memo(Button) = ({ handleClick, children }) => {\n  return <button onClick={handleClick}>{children}</button>\n}\n```\n","slug":"13-userRef-useReduce","published":1,"updated":"2020-07-17T07:03:57.689Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckdnmttd9000wrwui33xs79g7","content":"<blockquote>\n<p>React Hooks 是 react 16.8 之后的新特性。相比于之前的在 class 组件中管理 state，我们现在可以在函数组件(function component)中管理状态和生命周期</p>\n</blockquote>\n<a id=\"more\"></a>\n\n<h2 id=\"useState-管理状态-hooks\"><a href=\"#useState-管理状态-hooks\" class=\"headerlink\" title=\"useState(): 管理状态 hooks\"></a>useState(): 管理状态 hooks</h2><p>useState()有两个 parameters，期中第一个是变量，即指向状态的 value。第二个是管理该状态的函数，通常以 set 开头加状态名。</p>\n<p>比如我们声明一个用户登录的状态。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123;useState&#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App:React.FC = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 初始化isLogged的状态为false</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> [isLogged, setIsLoggedIn] = useState&lt;boolean&gt;(<span class=\"literal\">false</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 点击按钮后 更改isLogged的状态为true</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> handleLogin = () &#123;</span><br><span class=\"line\">        setIsLoggedIn(<span class=\"literal\">true</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">        &lt;div&gt;</span><br><span class=\"line\">            &lt;button onClick=&#123;handleLogin&#125;&gt;Login&lt;<span class=\"regexp\">/button&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;/</span>div&gt;</span><br><span class=\"line\">    )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Custom-Hooks-Counter-例子\"><a href=\"#Custom-Hooks-Counter-例子\" class=\"headerlink\" title=\"Custom Hooks Counter 例子\"></a>Custom Hooks Counter 例子</h3><p>除了利用 react 官方提供的 hooks API 之外，我们还可以把我们自己的函数封装成 hooks 重复利用。</p>\n<p>比如上面的 counter 我们可以封装为 useCounter()。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123;useState&#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">const</span> useCounter = <span class=\"function\">(<span class=\"params\">defaultValue</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> [count, setCount] = useState(defaultValue)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> increment = () &#123;</span><br><span class=\"line\">        setCount(<span class=\"function\"><span class=\"params\">prevCnt</span> =&gt;</span> prevCnt + <span class=\"number\">1</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//就像我们声明useState两个参数一样，第一个为变量，第二个为函数。</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> [count, increment]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在我们的 App 组件中运用我们的 useCounter hooks</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123;useState&#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> useCounter <span class=\"keyword\">from</span> <span class=\"string\">'./useCounter'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">const</span> App = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> [count, handleCount] = useCounter(<span class=\"number\">10</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">\"app-container\"</span>&gt;</span><br><span class=\"line\">            &lt;p&gt;&#123;count&#125;&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">            &lt;button onClick=&#123;handleCount&#125;&gt;Increment&lt;/</span>button&gt;</span><br><span class=\"line\">        &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Form-Hooks-例子\"><a href=\"#Form-Hooks-例子\" class=\"headerlink\" title=\"Form Hooks 例子\"></a>Form Hooks 例子</h3><p>首先创建一个<code>useForm()</code> Hooks</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> useForm = <span class=\"function\"><span class=\"params\">initialValues</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [values, setValues] = useState(initialValues)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> [</span><br><span class=\"line\">    values,</span><br><span class=\"line\">    event =&gt; &#123;</span><br><span class=\"line\">      setValues(&#123;</span><br><span class=\"line\">        ...values,</span><br><span class=\"line\">        [event.target.name]: event.target.value,</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在其他组件中利用<code>useForm()</code> Hooks</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useForm &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./useForm'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [values, handleForm] = useForm(&#123;</span><br><span class=\"line\">    username: <span class=\"string\">''</span>,</span><br><span class=\"line\">    email: <span class=\"string\">''</span>,</span><br><span class=\"line\">    password: <span class=\"string\">''</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;input name=<span class=\"string\">\"username\"</span> value=&#123;values.username&#125; onChange=&#123;handleForm&#125; /&gt;</span><br><span class=\"line\">      &lt;input name=<span class=\"string\">\"password\"</span> value=&#123;values.password&#125; onChange=&#123;handleForm&#125; /&gt;</span><br><span class=\"line\">      &lt;input name=<span class=\"string\">\"email\"</span> value=&#123;values.email&#125; onChange=&#123;handleForm&#125; /&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"useEffect-管理生命周期\"><a href=\"#useEffect-管理生命周期\" class=\"headerlink\" title=\"useEffect(): 管理生命周期\"></a>useEffect(): 管理生命周期</h2><p>我们之前在 class 组件中可以利用<code>componentDidMount</code>以及其他函数来管理 state 的生命周期。现在，我们可以利用 useEffect 来管理组件的渲染或者处理第三方 API 的请求数据。useEffect()中有两个参数，第一个为 arrow 函数即我们要执行的操作。第二个参数为依赖，当依赖发生变化时就会执行 useEffect。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">useEffect(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">//action</span></span><br><span class=\"line\">&#125;, [dependencies])</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"执行-effect-一次\"><a href=\"#执行-effect-一次\" class=\"headerlink\" title=\"执行 effect 一次\"></a>执行 effect 一次</h3><p>如果我们只想执行 useEffect 一次，类似于之前 componentDidMount。我们给第二个参数留空的数组即可。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">useEffect(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> url = <span class=\"string\">'https://whatevertheapiis/'</span></span><br><span class=\"line\">  fetch(url)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">repsonse</span> =&gt;</span> response.json)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(data)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;, [])</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"根据依赖来决定执行次数\"><a href=\"#根据依赖来决定执行次数\" class=\"headerlink\" title=\"根据依赖来决定执行次数\"></a>根据依赖来决定执行次数</h3><p>我们在第二个参数<code>[]</code>内写入依赖。比如我们想要这个 effect 每次<code>url</code>改变时执行。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> [url, setUrl] = useState(<span class=\"string\">''</span>)</span><br><span class=\"line\">useEffect(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  fetch(<span class=\"string\">`https://whatevertheapiis/<span class=\"subst\">$&#123;url&#125;</span>`</span>)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> response.json)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(data)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;, [url])</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"利用-callback-来-clean-up\"><a href=\"#利用-callback-来-clean-up\" class=\"headerlink\" title=\"利用 callback 来 clean up\"></a>利用 callback 来 clean up</h3><p>有的时候你只希望<code>useEffect</code>在渲染的时候执行一次，但是会提示缺少依赖的警告。那我们可以把想要执行的函数作为第一个函数即可</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fetchUsers = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  firebase</span><br><span class=\"line\">    .firestore()</span><br><span class=\"line\">    .collection(<span class=\"string\">'user'</span>)</span><br><span class=\"line\">    .get()</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">querySnapshot</span> =&gt;</span> &#123;</span><br><span class=\"line\">      querySnapshot.forEach(<span class=\"function\"><span class=\"params\">docs</span> =&gt;</span> &#123;</span><br><span class=\"line\">        setUserLists(<span class=\"function\"><span class=\"params\">currUsers</span> =&gt;</span> [...currUsers, docs.data()])</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">useEffect(fetchUsers, [])</span><br></pre></td></tr></table></figure>\n\n<p>或者直接在<code>useEffect()</code>中声明函数, 跟上面用<code>callback</code>同理</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">useEffect(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> fetchUsers = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> firebase</span><br><span class=\"line\">      .firestore()</span><br><span class=\"line\">      .collection(<span class=\"string\">'user'</span>)</span><br><span class=\"line\">      .get()</span><br><span class=\"line\">      .then(<span class=\"function\"><span class=\"params\">querySnapshot</span> =&gt;</span> &#123;</span><br><span class=\"line\">        querySnapshot.forEach(<span class=\"function\"><span class=\"params\">docs</span> =&gt;</span> &#123;</span><br><span class=\"line\">          setUserLists(<span class=\"function\"><span class=\"params\">currUsers</span> =&gt;</span> [...currUsers, docs.data()])</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  fetchUsers()</span><br><span class=\"line\">&#125;, [])</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"自定义-Fetch-Hooks\"><a href=\"#自定义-Fetch-Hooks\" class=\"headerlink\" title=\"自定义 Fetch Hooks\"></a>自定义 Fetch Hooks</h3><p>我们在处理多个组件都需要调用 API 时，除了上面在组件内用<code>useEffect()</code>只渲染一次的方法外，我们还可以自定义<code>userEffect()</code> hook 来重复利用相同的方法。那我们改变一下上面的<code>fetchUser</code>写法为<code>useFetchUser()</code>。</p>\n<p><strong>useFetch.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> firebase <span class=\"keyword\">from</span> <span class=\"string\">'firebase'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> useFetch = <span class=\"function\">(<span class=\"params\">collection: string</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [loading, setLoading] = useState &lt; boolean &gt; <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> [docs, setDocs] = useState &lt; any &gt; []</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> fetchCollection = <span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> querySnapshot = <span class=\"keyword\">await</span> firebase</span><br><span class=\"line\">        .firestore()</span><br><span class=\"line\">        .collection(collection)</span><br><span class=\"line\">        .get()</span><br><span class=\"line\">      querySnapshot.forEach(<span class=\"function\"><span class=\"params\">doc</span> =&gt;</span> &#123;</span><br><span class=\"line\">        setDocs(<span class=\"function\">(<span class=\"params\">prevData: any</span>) =&gt;</span> [...prevData, doc.data()])</span><br><span class=\"line\">        setLoading(<span class=\"literal\">false</span>)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    fetchCollection()</span><br><span class=\"line\">  &#125;, [])</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123; docs, loading &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>App.js</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useFetch &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./useFetch'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; docs, loading &#125; = useFetch(<span class=\"string\">'user'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>&#123;loading ? 'Loading Animaion...' : <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;docs.username&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span>&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"useContext-跨组件传递状态\"><a href=\"#useContext-跨组件传递状态\" class=\"headerlink\" title=\"useContext(): 跨组件传递状态\"></a>useContext(): 跨组件传递状态</h2><p>在之前的版本中我们可以利用 context 来创建 Consumer 和 Provider。但是 useContext()可以更加方便。</p>\n<p>最简单的例子，用户登录之后，用户名是可以被多个组件使用。</p>\n<p>比如下面我们创建一个 ProfileMenu 和 Dashboard 组件。这两个组件都需要用到用户的姓名。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App: React.FC = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">\"app-container\"</span>&gt;</span><br><span class=\"line\">      &lt;ProfileMenu /&gt;</span><br><span class=\"line\">      &lt;Dashboard /&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>首先我们需要给 Profile 和 Dashboard 组件创建一个 Context</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; createContext &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> UserNameContext = createContext(&#123;&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>然后我们把 Profile 和 Dashboard 封装在我们刚刚建立的<code>UserNameContext</code>中作为状态的<strong>提供者</strong>(Provider), 以供子级组件共享。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App: React.FC = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;UserNameContext.Provider</span><br><span class=\"line\">      value=&#123;&#123;</span><br><span class=\"line\">        userName: <span class=\"string\">'Yang Li'</span>,</span><br><span class=\"line\">      &#125;&#125;</span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">\"app-container\"</span>&gt;</span><br><span class=\"line\">        &lt;ProfileMenu /&gt;</span><br><span class=\"line\">        &lt;Dashboard /&gt;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>UserNameContext.Provider&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>然后我们就可以在 ProfileMenu 和 Dashboard 中引用我们<code>UserNameContext</code>的 userName</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> ProfileMenu: React.FC = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; userName &#125; = useContext(UserNameContext)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div clasName=<span class=\"string\">\"profile-menu-container\"</span>&gt;</span><br><span class=\"line\">      &lt;p&gt;&#123;userName&#125;&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>div&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> Dashboard: React.FC = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; userName &#125; = useContext(UserNameContext)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">\"dashboard-container\"</span>&gt;</span><br><span class=\"line\">      &lt;h2&gt;Welcome Back &#123;userName&#125;&lt;<span class=\"regexp\">/h2&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>div&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"useReducer-状态管理\"><a href=\"#useReducer-状态管理\" class=\"headerlink\" title=\"useReducer(): 状态管理\"></a>useReducer(): 状态管理</h2><p>首先来看一下 useReducer()的参数</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> [state, dispatch] = useReducer(reducer, initialState)</span><br></pre></td></tr></table></figure>\n\n<p>其中第一个<code>state</code>即函数的状态值， <code>dispath</code>则是用来发送 action。<code>reduce</code>即我们我们之后 Reducer 的函数。<code>initialState</code>为状态的初始值。</p>\n<p>比如我们有 3 个按钮，分别对应着数字的加，减，归零。利用 useReducer()来实现即</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> Counter: React.FC = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> counterReducer = <span class=\"function\">(<span class=\"params\">state, action</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (action.type) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'increment'</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">          ...state,</span><br><span class=\"line\">          count: state.count + <span class=\"number\">1</span>,</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'decrement'</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">          ...state,</span><br><span class=\"line\">          count: state.count - <span class=\"number\">1</span>,</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'reset'</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">          ...state,</span><br><span class=\"line\">          count: <span class=\"number\">0</span>,</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      <span class=\"keyword\">default</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> state</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> [state, dispatch] = useReducer(counterReducer, &#123; <span class=\"attr\">count</span>: <span class=\"number\">0</span> &#125;)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">\"counter-container\"</span>&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;() =&gt; dispatch(&#123; <span class=\"attr\">type</span>: <span class=\"string\">'increment'</span> &#125;)&#125;&gt;Increment&lt;<span class=\"regexp\">/button&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;button onClick=&#123;() =&gt; dispatch(&#123; type: 'decrement' &#125;)&#125;&gt;Decrement&lt;/</span>button&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;() =&gt; dispatch(&#123; <span class=\"attr\">type</span>: <span class=\"string\">'reset'</span> &#125;)&#125;&gt;Reset&lt;<span class=\"regexp\">/button&gt;</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;p&gt;&#123;state.count&#125;&lt;/</span>p&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<iframe src=\"https://stackblitz.com/edit/react-2ytrpj?embed=1&file=index.js&hideExplorer=1&hideNavigation=1\"></iframe>\n\n<p>我们当然也可以利用 useState()来实现同样的效果，但是我们需要给 increment, decrement, reset 每个按钮都单独创建一个 useState()。然后每个按钮我们再利用 setIncrement()来实现状态的更新。</p>\n<p>很明显，利用 useReducer()可以让我们的代码更容易读，也增加了代码的维护性。一个开发团队，你永远都不知道下一个跟你合作的或者接手你的代码的人的技术性。因此提高代码的阅读性和维护性是至关重要的。</p>\n<h2 id=\"useRef\"><a href=\"#useRef\" class=\"headerlink\" title=\"useRef()\"></a>useRef()</h2><h3 id=\"DOM-渲染\"><a href=\"#DOM-渲染\" class=\"headerlink\" title=\"DOM 渲染\"></a>DOM 渲染</h3><p>通过 useRef()我们可以记录组件渲染的次数但不重新渲染组件。比如下面的例子，假设我们想要每次 input 发生变化时，我们希望页面下方显示渲染了几次。当然我们可以用<code>useEffect</code>和<code>useState</code>来实现，但要注意的是，这种方法会每次都重新渲染组件，而我们只想获得一个数值记录渲染的次数。</p>\n<p>下面的代码每当 input 发生变化时，我们把<code>renderCnt</code>的数值加 1. 但不重新渲染我们的组件。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123;useState, useEffect, useRef&#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [name, setName] = useState(<span class=\"string\">''</span>)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> renderCnt = useRef(<span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    renderCnt.current = renderCnt.current + <span class=\"number\">1</span></span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;input value=&#123;name&#125; onChange=&#123;e =&gt; setName(e.target.value)&#125;&gt;</span><br><span class=\"line\">      &lt;p&gt;My name is &#123;name&#125;&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;p&gt;The app component rendered &#123;renderCnt.current&#125; times&lt;/</span>p&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"HTML-DOM-Node\"><a href=\"#HTML-DOM-Node\" class=\"headerlink\" title=\"HTML DOM Node\"></a>HTML DOM Node</h3><p>我们可以用 ref 来获取 HTML DOM node, 比如下面的例子，input 元素的 ref 等于我们定义的<code>inputRef</code>。当用户点击按钮触发<code>focusInput</code>函数时，ref 元素就会被 focus。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123;useState, useEffect, useRef&#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [name, setName] = useState(<span class=\"string\">''</span>)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> inputRef = useRef()</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> focusInput = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    inputRef.current.focus()</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;input ref=&#123;inputRef&#125; value=&#123;name&#125; onChange=&#123;e =&gt; setName(e.target.value)&#125;&gt;</span><br><span class=\"line\">      &lt;p&gt;My name is &#123;name&#125;&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;button onClick=&#123;focusInput&#125;&gt;&lt;/</span>button&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"保存之前的-state\"><a href=\"#保存之前的-state\" class=\"headerlink\" title=\"保存之前的 state\"></a>保存之前的 state</h3><p>通过<code>.current</code>来保存之前的 state.</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123;useState, useEffect, useRef&#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [cnt, setCnt] = useState(<span class=\"number\">0</span>)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> prevCnt = useRef(<span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    prevCnt.current = cnt</span><br><span class=\"line\">  &#125;,[cnt])</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;() =&gt; setCnt(<span class=\"function\"><span class=\"params\">prevCnt</span> =&gt;</span> prevCnt + <span class=\"number\">1</span>)&#125;&gt;</span><br><span class=\"line\">      &lt;p&gt;Currnet Count: &#123;cnt&#125;&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;p&gt;Previous Count: &#123;prevCnt.current&#125;&lt;/</span>p&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"useCallback\"><a href=\"#useCallback\" class=\"headerlink\" title=\"useCallback()\"></a>useCallback()</h2><p><code>useCallback</code>有两个参数，第一个参数即所执行的函数，第二个参数为执行的依赖，类似于<code>useEffect</code>。</p>\n<p><strong>App.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useCallback &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> Count <span class=\"keyword\">from</span> <span class=\"string\">'./Count'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> Button <span class=\"keyword\">from</span> <span class=\"string\">'./Button'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> React.memo(App) = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [age, setAge] = useState(<span class=\"number\">25</span>)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [salary, setSalary] = useState(<span class=\"number\">5000</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> incrementAge = useCallback(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    setAge(age + <span class=\"number\">1</span>)</span><br><span class=\"line\">  &#125;, [age])</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> incrementSalary = useCallback(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    setSalary(salary + <span class=\"number\">1</span>)</span><br><span class=\"line\">  &#125;, [salary])</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;Count text=<span class=\"string\">\"Age\"</span> count=&#123;age&#125; /&gt;</span><br><span class=\"line\">      &lt;Button handleClick=&#123;incrementCnt&#125;&gt;Increment Age&lt;<span class=\"regexp\">/Button&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;Count text=\"Salary\" count=&#123;salary&#125; /</span>&gt;</span><br><span class=\"line\">      &lt;Button handleClick=&#123;incrementAge&#125;&gt;Increment Salary&lt;<span class=\"regexp\">/Button&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>div&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>Count.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> React.memo(Count) = <span class=\"function\">(<span class=\"params\">&#123; text, count &#125;</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &#123;text&#125; - &#123;count&#125;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>Button.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> React.memo(Button) = <span class=\"function\">(<span class=\"params\">&#123; handleClick, children &#125;</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;handleClick&#125;</span>&gt;</span>&#123;children&#125;<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"<blockquote>\n<p>React Hooks 是 react 16.8 之后的新特性。相比于之前的在 class 组件中管理 state，我们现在可以在函数组件(function component)中管理状态和生命周期</p>\n</blockquote>","more":"<h2 id=\"useState-管理状态-hooks\"><a href=\"#useState-管理状态-hooks\" class=\"headerlink\" title=\"useState(): 管理状态 hooks\"></a>useState(): 管理状态 hooks</h2><p>useState()有两个 parameters，期中第一个是变量，即指向状态的 value。第二个是管理该状态的函数，通常以 set 开头加状态名。</p>\n<p>比如我们声明一个用户登录的状态。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123;useState&#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App:React.FC = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 初始化isLogged的状态为false</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> [isLogged, setIsLoggedIn] = useState&lt;boolean&gt;(<span class=\"literal\">false</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 点击按钮后 更改isLogged的状态为true</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> handleLogin = () &#123;</span><br><span class=\"line\">        setIsLoggedIn(<span class=\"literal\">true</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">        &lt;div&gt;</span><br><span class=\"line\">            &lt;button onClick=&#123;handleLogin&#125;&gt;Login&lt;<span class=\"regexp\">/button&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;/</span>div&gt;</span><br><span class=\"line\">    )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Custom-Hooks-Counter-例子\"><a href=\"#Custom-Hooks-Counter-例子\" class=\"headerlink\" title=\"Custom Hooks Counter 例子\"></a>Custom Hooks Counter 例子</h3><p>除了利用 react 官方提供的 hooks API 之外，我们还可以把我们自己的函数封装成 hooks 重复利用。</p>\n<p>比如上面的 counter 我们可以封装为 useCounter()。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123;useState&#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">const</span> useCounter = <span class=\"function\">(<span class=\"params\">defaultValue</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> [count, setCount] = useState(defaultValue)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> increment = () &#123;</span><br><span class=\"line\">        setCount(<span class=\"function\"><span class=\"params\">prevCnt</span> =&gt;</span> prevCnt + <span class=\"number\">1</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//就像我们声明useState两个参数一样，第一个为变量，第二个为函数。</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> [count, increment]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在我们的 App 组件中运用我们的 useCounter hooks</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123;useState&#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> useCounter <span class=\"keyword\">from</span> <span class=\"string\">'./useCounter'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">const</span> App = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> [count, handleCount] = useCounter(<span class=\"number\">10</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">\"app-container\"</span>&gt;</span><br><span class=\"line\">            &lt;p&gt;&#123;count&#125;&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">            &lt;button onClick=&#123;handleCount&#125;&gt;Increment&lt;/</span>button&gt;</span><br><span class=\"line\">        &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Form-Hooks-例子\"><a href=\"#Form-Hooks-例子\" class=\"headerlink\" title=\"Form Hooks 例子\"></a>Form Hooks 例子</h3><p>首先创建一个<code>useForm()</code> Hooks</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> useForm = <span class=\"function\"><span class=\"params\">initialValues</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [values, setValues] = useState(initialValues)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> [</span><br><span class=\"line\">    values,</span><br><span class=\"line\">    event =&gt; &#123;</span><br><span class=\"line\">      setValues(&#123;</span><br><span class=\"line\">        ...values,</span><br><span class=\"line\">        [event.target.name]: event.target.value,</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在其他组件中利用<code>useForm()</code> Hooks</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useForm &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./useForm'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [values, handleForm] = useForm(&#123;</span><br><span class=\"line\">    username: <span class=\"string\">''</span>,</span><br><span class=\"line\">    email: <span class=\"string\">''</span>,</span><br><span class=\"line\">    password: <span class=\"string\">''</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;input name=<span class=\"string\">\"username\"</span> value=&#123;values.username&#125; onChange=&#123;handleForm&#125; /&gt;</span><br><span class=\"line\">      &lt;input name=<span class=\"string\">\"password\"</span> value=&#123;values.password&#125; onChange=&#123;handleForm&#125; /&gt;</span><br><span class=\"line\">      &lt;input name=<span class=\"string\">\"email\"</span> value=&#123;values.email&#125; onChange=&#123;handleForm&#125; /&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"useEffect-管理生命周期\"><a href=\"#useEffect-管理生命周期\" class=\"headerlink\" title=\"useEffect(): 管理生命周期\"></a>useEffect(): 管理生命周期</h2><p>我们之前在 class 组件中可以利用<code>componentDidMount</code>以及其他函数来管理 state 的生命周期。现在，我们可以利用 useEffect 来管理组件的渲染或者处理第三方 API 的请求数据。useEffect()中有两个参数，第一个为 arrow 函数即我们要执行的操作。第二个参数为依赖，当依赖发生变化时就会执行 useEffect。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">useEffect(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">//action</span></span><br><span class=\"line\">&#125;, [dependencies])</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"执行-effect-一次\"><a href=\"#执行-effect-一次\" class=\"headerlink\" title=\"执行 effect 一次\"></a>执行 effect 一次</h3><p>如果我们只想执行 useEffect 一次，类似于之前 componentDidMount。我们给第二个参数留空的数组即可。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">useEffect(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> url = <span class=\"string\">'https://whatevertheapiis/'</span></span><br><span class=\"line\">  fetch(url)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">repsonse</span> =&gt;</span> response.json)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(data)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;, [])</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"根据依赖来决定执行次数\"><a href=\"#根据依赖来决定执行次数\" class=\"headerlink\" title=\"根据依赖来决定执行次数\"></a>根据依赖来决定执行次数</h3><p>我们在第二个参数<code>[]</code>内写入依赖。比如我们想要这个 effect 每次<code>url</code>改变时执行。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> [url, setUrl] = useState(<span class=\"string\">''</span>)</span><br><span class=\"line\">useEffect(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  fetch(<span class=\"string\">`https://whatevertheapiis/<span class=\"subst\">$&#123;url&#125;</span>`</span>)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> response.json)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(data)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;, [url])</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"利用-callback-来-clean-up\"><a href=\"#利用-callback-来-clean-up\" class=\"headerlink\" title=\"利用 callback 来 clean up\"></a>利用 callback 来 clean up</h3><p>有的时候你只希望<code>useEffect</code>在渲染的时候执行一次，但是会提示缺少依赖的警告。那我们可以把想要执行的函数作为第一个函数即可</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fetchUsers = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  firebase</span><br><span class=\"line\">    .firestore()</span><br><span class=\"line\">    .collection(<span class=\"string\">'user'</span>)</span><br><span class=\"line\">    .get()</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">querySnapshot</span> =&gt;</span> &#123;</span><br><span class=\"line\">      querySnapshot.forEach(<span class=\"function\"><span class=\"params\">docs</span> =&gt;</span> &#123;</span><br><span class=\"line\">        setUserLists(<span class=\"function\"><span class=\"params\">currUsers</span> =&gt;</span> [...currUsers, docs.data()])</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">useEffect(fetchUsers, [])</span><br></pre></td></tr></table></figure>\n\n<p>或者直接在<code>useEffect()</code>中声明函数, 跟上面用<code>callback</code>同理</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">useEffect(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> fetchUsers = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> firebase</span><br><span class=\"line\">      .firestore()</span><br><span class=\"line\">      .collection(<span class=\"string\">'user'</span>)</span><br><span class=\"line\">      .get()</span><br><span class=\"line\">      .then(<span class=\"function\"><span class=\"params\">querySnapshot</span> =&gt;</span> &#123;</span><br><span class=\"line\">        querySnapshot.forEach(<span class=\"function\"><span class=\"params\">docs</span> =&gt;</span> &#123;</span><br><span class=\"line\">          setUserLists(<span class=\"function\"><span class=\"params\">currUsers</span> =&gt;</span> [...currUsers, docs.data()])</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  fetchUsers()</span><br><span class=\"line\">&#125;, [])</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"自定义-Fetch-Hooks\"><a href=\"#自定义-Fetch-Hooks\" class=\"headerlink\" title=\"自定义 Fetch Hooks\"></a>自定义 Fetch Hooks</h3><p>我们在处理多个组件都需要调用 API 时，除了上面在组件内用<code>useEffect()</code>只渲染一次的方法外，我们还可以自定义<code>userEffect()</code> hook 来重复利用相同的方法。那我们改变一下上面的<code>fetchUser</code>写法为<code>useFetchUser()</code>。</p>\n<p><strong>useFetch.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> firebase <span class=\"keyword\">from</span> <span class=\"string\">'firebase'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> useFetch = <span class=\"function\">(<span class=\"params\">collection: string</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [loading, setLoading] = useState &lt; boolean &gt; <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> [docs, setDocs] = useState &lt; any &gt; []</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> fetchCollection = <span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> querySnapshot = <span class=\"keyword\">await</span> firebase</span><br><span class=\"line\">        .firestore()</span><br><span class=\"line\">        .collection(collection)</span><br><span class=\"line\">        .get()</span><br><span class=\"line\">      querySnapshot.forEach(<span class=\"function\"><span class=\"params\">doc</span> =&gt;</span> &#123;</span><br><span class=\"line\">        setDocs(<span class=\"function\">(<span class=\"params\">prevData: any</span>) =&gt;</span> [...prevData, doc.data()])</span><br><span class=\"line\">        setLoading(<span class=\"literal\">false</span>)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    fetchCollection()</span><br><span class=\"line\">  &#125;, [])</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123; docs, loading &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>App.js</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useFetch &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./useFetch'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; docs, loading &#125; = useFetch(<span class=\"string\">'user'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>&#123;loading ? 'Loading Animaion...' : <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;docs.username&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span>&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"useContext-跨组件传递状态\"><a href=\"#useContext-跨组件传递状态\" class=\"headerlink\" title=\"useContext(): 跨组件传递状态\"></a>useContext(): 跨组件传递状态</h2><p>在之前的版本中我们可以利用 context 来创建 Consumer 和 Provider。但是 useContext()可以更加方便。</p>\n<p>最简单的例子，用户登录之后，用户名是可以被多个组件使用。</p>\n<p>比如下面我们创建一个 ProfileMenu 和 Dashboard 组件。这两个组件都需要用到用户的姓名。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App: React.FC = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">\"app-container\"</span>&gt;</span><br><span class=\"line\">      &lt;ProfileMenu /&gt;</span><br><span class=\"line\">      &lt;Dashboard /&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>首先我们需要给 Profile 和 Dashboard 组件创建一个 Context</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; createContext &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> UserNameContext = createContext(&#123;&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>然后我们把 Profile 和 Dashboard 封装在我们刚刚建立的<code>UserNameContext</code>中作为状态的<strong>提供者</strong>(Provider), 以供子级组件共享。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App: React.FC = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;UserNameContext.Provider</span><br><span class=\"line\">      value=&#123;&#123;</span><br><span class=\"line\">        userName: <span class=\"string\">'Yang Li'</span>,</span><br><span class=\"line\">      &#125;&#125;</span><br><span class=\"line\">    &gt;</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">\"app-container\"</span>&gt;</span><br><span class=\"line\">        &lt;ProfileMenu /&gt;</span><br><span class=\"line\">        &lt;Dashboard /&gt;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>UserNameContext.Provider&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>然后我们就可以在 ProfileMenu 和 Dashboard 中引用我们<code>UserNameContext</code>的 userName</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> ProfileMenu: React.FC = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; userName &#125; = useContext(UserNameContext)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div clasName=<span class=\"string\">\"profile-menu-container\"</span>&gt;</span><br><span class=\"line\">      &lt;p&gt;&#123;userName&#125;&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>div&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> Dashboard: React.FC = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; userName &#125; = useContext(UserNameContext)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">\"dashboard-container\"</span>&gt;</span><br><span class=\"line\">      &lt;h2&gt;Welcome Back &#123;userName&#125;&lt;<span class=\"regexp\">/h2&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>div&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"useReducer-状态管理\"><a href=\"#useReducer-状态管理\" class=\"headerlink\" title=\"useReducer(): 状态管理\"></a>useReducer(): 状态管理</h2><p>首先来看一下 useReducer()的参数</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> [state, dispatch] = useReducer(reducer, initialState)</span><br></pre></td></tr></table></figure>\n\n<p>其中第一个<code>state</code>即函数的状态值， <code>dispath</code>则是用来发送 action。<code>reduce</code>即我们我们之后 Reducer 的函数。<code>initialState</code>为状态的初始值。</p>\n<p>比如我们有 3 个按钮，分别对应着数字的加，减，归零。利用 useReducer()来实现即</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> Counter: React.FC = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> counterReducer = <span class=\"function\">(<span class=\"params\">state, action</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (action.type) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'increment'</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">          ...state,</span><br><span class=\"line\">          count: state.count + <span class=\"number\">1</span>,</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'decrement'</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">          ...state,</span><br><span class=\"line\">          count: state.count - <span class=\"number\">1</span>,</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'reset'</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">          ...state,</span><br><span class=\"line\">          count: <span class=\"number\">0</span>,</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      <span class=\"keyword\">default</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> state</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> [state, dispatch] = useReducer(counterReducer, &#123; <span class=\"attr\">count</span>: <span class=\"number\">0</span> &#125;)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">\"counter-container\"</span>&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;() =&gt; dispatch(&#123; <span class=\"attr\">type</span>: <span class=\"string\">'increment'</span> &#125;)&#125;&gt;Increment&lt;<span class=\"regexp\">/button&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;button onClick=&#123;() =&gt; dispatch(&#123; type: 'decrement' &#125;)&#125;&gt;Decrement&lt;/</span>button&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;() =&gt; dispatch(&#123; <span class=\"attr\">type</span>: <span class=\"string\">'reset'</span> &#125;)&#125;&gt;Reset&lt;<span class=\"regexp\">/button&gt;</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;p&gt;&#123;state.count&#125;&lt;/</span>p&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<iframe src=\"https://stackblitz.com/edit/react-2ytrpj?embed=1&file=index.js&hideExplorer=1&hideNavigation=1\"></iframe>\n\n<p>我们当然也可以利用 useState()来实现同样的效果，但是我们需要给 increment, decrement, reset 每个按钮都单独创建一个 useState()。然后每个按钮我们再利用 setIncrement()来实现状态的更新。</p>\n<p>很明显，利用 useReducer()可以让我们的代码更容易读，也增加了代码的维护性。一个开发团队，你永远都不知道下一个跟你合作的或者接手你的代码的人的技术性。因此提高代码的阅读性和维护性是至关重要的。</p>\n<h2 id=\"useRef\"><a href=\"#useRef\" class=\"headerlink\" title=\"useRef()\"></a>useRef()</h2><h3 id=\"DOM-渲染\"><a href=\"#DOM-渲染\" class=\"headerlink\" title=\"DOM 渲染\"></a>DOM 渲染</h3><p>通过 useRef()我们可以记录组件渲染的次数但不重新渲染组件。比如下面的例子，假设我们想要每次 input 发生变化时，我们希望页面下方显示渲染了几次。当然我们可以用<code>useEffect</code>和<code>useState</code>来实现，但要注意的是，这种方法会每次都重新渲染组件，而我们只想获得一个数值记录渲染的次数。</p>\n<p>下面的代码每当 input 发生变化时，我们把<code>renderCnt</code>的数值加 1. 但不重新渲染我们的组件。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123;useState, useEffect, useRef&#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [name, setName] = useState(<span class=\"string\">''</span>)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> renderCnt = useRef(<span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    renderCnt.current = renderCnt.current + <span class=\"number\">1</span></span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;input value=&#123;name&#125; onChange=&#123;e =&gt; setName(e.target.value)&#125;&gt;</span><br><span class=\"line\">      &lt;p&gt;My name is &#123;name&#125;&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;p&gt;The app component rendered &#123;renderCnt.current&#125; times&lt;/</span>p&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"HTML-DOM-Node\"><a href=\"#HTML-DOM-Node\" class=\"headerlink\" title=\"HTML DOM Node\"></a>HTML DOM Node</h3><p>我们可以用 ref 来获取 HTML DOM node, 比如下面的例子，input 元素的 ref 等于我们定义的<code>inputRef</code>。当用户点击按钮触发<code>focusInput</code>函数时，ref 元素就会被 focus。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123;useState, useEffect, useRef&#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [name, setName] = useState(<span class=\"string\">''</span>)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> inputRef = useRef()</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> focusInput = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    inputRef.current.focus()</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;input ref=&#123;inputRef&#125; value=&#123;name&#125; onChange=&#123;e =&gt; setName(e.target.value)&#125;&gt;</span><br><span class=\"line\">      &lt;p&gt;My name is &#123;name&#125;&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;button onClick=&#123;focusInput&#125;&gt;&lt;/</span>button&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"保存之前的-state\"><a href=\"#保存之前的-state\" class=\"headerlink\" title=\"保存之前的 state\"></a>保存之前的 state</h3><p>通过<code>.current</code>来保存之前的 state.</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123;useState, useEffect, useRef&#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [cnt, setCnt] = useState(<span class=\"number\">0</span>)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> prevCnt = useRef(<span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    prevCnt.current = cnt</span><br><span class=\"line\">  &#125;,[cnt])</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;() =&gt; setCnt(<span class=\"function\"><span class=\"params\">prevCnt</span> =&gt;</span> prevCnt + <span class=\"number\">1</span>)&#125;&gt;</span><br><span class=\"line\">      &lt;p&gt;Currnet Count: &#123;cnt&#125;&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;p&gt;Previous Count: &#123;prevCnt.current&#125;&lt;/</span>p&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"useCallback\"><a href=\"#useCallback\" class=\"headerlink\" title=\"useCallback()\"></a>useCallback()</h2><p><code>useCallback</code>有两个参数，第一个参数即所执行的函数，第二个参数为执行的依赖，类似于<code>useEffect</code>。</p>\n<p><strong>App.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useCallback &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> Count <span class=\"keyword\">from</span> <span class=\"string\">'./Count'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> Button <span class=\"keyword\">from</span> <span class=\"string\">'./Button'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> React.memo(App) = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [age, setAge] = useState(<span class=\"number\">25</span>)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [salary, setSalary] = useState(<span class=\"number\">5000</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> incrementAge = useCallback(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    setAge(age + <span class=\"number\">1</span>)</span><br><span class=\"line\">  &#125;, [age])</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> incrementSalary = useCallback(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    setSalary(salary + <span class=\"number\">1</span>)</span><br><span class=\"line\">  &#125;, [salary])</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;Count text=<span class=\"string\">\"Age\"</span> count=&#123;age&#125; /&gt;</span><br><span class=\"line\">      &lt;Button handleClick=&#123;incrementCnt&#125;&gt;Increment Age&lt;<span class=\"regexp\">/Button&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;Count text=\"Salary\" count=&#123;salary&#125; /</span>&gt;</span><br><span class=\"line\">      &lt;Button handleClick=&#123;incrementAge&#125;&gt;Increment Salary&lt;<span class=\"regexp\">/Button&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>div&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>Count.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> React.memo(Count) = <span class=\"function\">(<span class=\"params\">&#123; text, count &#125;</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &#123;text&#125; - &#123;count&#125;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>Button.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> React.memo(Button) = <span class=\"function\">(<span class=\"params\">&#123; handleClick, children &#125;</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;handleClick&#125;</span>&gt;</span>&#123;children&#125;<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"正则表达式基础","date":"2020-06-19T18:31:47.000Z","cover":"https://blog.alexdevero.com/wp-content/uploads/2014/12/regex-e1517472406481.jpg","_content":"\n> A regular expression is a sequence of characters that define a search pattern.\n\n正则表达式简而言之我们可以对一个字符串组合进行查找，替换，以及字符验证等其他操作。举个例子，我们有一个 login 的登陆页面，我们希望对用户密码加以强度监测。用户密码必须要包含大写字母，数字，特殊符号，以及长度大于 8 的要求。正则表达式就是用来对密码字符串进行查找来判断是否满足我们的规则。\n\n这个网站可以让你在练习过程中更好的了解正则表达式https://regexr.com/\n\n<!-- more -->\n\n## Syntax 语法\n\n```bash\n/pattern/modifier\n```\n\npattern 即我们想要搜索字符串的 pattern，比如我们想查找一个字符串中所有的`play`。pattern 的两侧我们分别用`/`包裹起来，我们所有的规则都在这两个`/`之内。`modifier`即表达式的修饰符。\n\n## Anchors 插入符\n\n### Beginning ^\n\n匹配开头包含的字符。\n\n```js\nconst text = 'Regular expression string\\nThis is a new line'\nconsole.log(text.match(/^This/gim))\n// 返回 [\"T\"]\n```\n\n### End \\$\n\n匹配字符串结尾处的字符，或行的末尾如果启用`m`修饰符\n\n```js\nconst text = 'Regular expression string\\nThis is a new line'\nconsole.log(text.match(/line$/gi))\n```\n\n### Word Boundary\n\n这个插入符会查找一个字符与非字符之间的位置。\n\n比如我们下面代码中的例子，text 字符串中有`@`, `,` 和两个`whitespace`非字符。那么`/e\\b/gi`就会匹配所有与 e 相邻非字符的字符。\n\n```js\nconst text = 'This@one,is kind tricky'\n\nconsole.log(text.match(/e\\b/gi))\n\n//返回 [\"s\", \"s\"]\n```\n\n### Not Word Boundary\n\n跟上面的 word boundary 截然相反。\n\n### Not Word Boundary\n\n## Modifiers 修饰符\n\n下面将介绍`g`, `i`, `m`, `s`, `u`, `y`以及它们分别的作用。\n\n### Global 全局\n\n`g`修饰符可以让我们搜索整个字符串内所有匹配的字符。\n\n```js\nconst text =\n  'Hinata studies and is accepted to Karasuno, the same high school the Little Giant played for, but is shocked to discover that Kageyama has also chosen to attend Karasuno. What is karasuno?'\n\nlet karasuno = text.match(/Karasuno/g)\n\n// 返回[\"Karasuno\", \"Karasuno\"]\n```\n\n> 如果我们不包括`g`修饰符时，则只会返回查找的第一个匹配结果。\n\n### Case Insensitive 不区分大小写\n\n`i` 即让表达式不区分大小写。\n\n之前的例子，假设我们想返回所有`karasuno`但不区分大小写。\n\n```js\nlet karasuno = text.match(/karasuno/gi)\n\n//返回[\"Karasuno\", \"Karasuno\", \"karasuno\"]\n```\n\n### Multiline 多行搜索\n\n跟搜索整个字符串不同。当添加了`m`修饰符，`^`和`$`则只会匹配每行的开头和结尾。\n\n```js\nconst text =\n  'Hinata studies and is accepted to Karasuno\\nThe same high school the Little Giant played for but is shocked to discover that Kageyama has also chosen to attend Karasuno. What is karasuno'\n\nlet karasuno = text.match(/karasuno$/gim)\n\n//[\"Karasuno\", \"karasuno\"] 第一段和最后一段结尾处。\n```\n\n与之前字符串不同的是现在这个字符串在`Karasuno`出有新的一行开始。所以我们添加`m`修饰符来返回每行以`karasuno`为结尾的字符(不区分大小写)。\n\n如果我们不包括`m`修饰符，则只会返回整个字符串最后结尾处的`karasuno`。\n\n## Character Classes\n\n### Character set [abc]\n\n返回所有括号内包括的字符。\n\n```js\nconst text = 'Hinata studies and is accepted to Karasuno'\nconsole.log(text.match(/[ak]/g))\n\n//返回 [\"a\", \"a\", \"a\", \"a\", \"K\", \"a\", \"a\"]\n```\n\n### Negated set [^abc]\n\n返回所有括号内不包括的字符。\n\n```js\nconst text = 'Kit kat'\nconsole.log(text.match(/[^kt]/gi))\n// 返回 [\"i\", \" \", \"a\"]\n```\n\n### Range [a-z]\n\n返回字符串中所有在括号范围内的字符。\n\n```js\nconst text = 'Hinata studies and is accepted to Karasuno'\nconsole.log(text.match(/[a-c]/gi))\n//返回 [\"a\", \"a\", \"a\", \"a\", \"c\", \"c\", \"a\", \"a\"]\n```\n\n### Word \\w\n\n返回字符串中所有单字字符，包括字母数字和下划线。但不包括 ASCII 之外的字符。\n\nhttps://wiktel.com/standards/ascii.htm\n\n同等于`[A-Za-z0-9_]`\n\n```js\nconst text = 'Some Japanese pass by 最後の字符'\nconsole.log(text.match(/\\w/gi))\n// 返回 [\"S\", \"o\", \"m\", \"e\", \"J\", \"a\", \"p\", \"a\", \"n\", \"e\", \"s\", \"e\", \"p\", \"a\", \"s\", \"s\", \"b\", \"y\"]\n```\n\n### Not Word \\W\n\n与`\\w`截然相反，返回字符串中所有非单字字符。\n\n同等于`[^A-Za-z0-9_]`\n\n```js\nconst text = 'Some Japanese pass by 最後の字符'\n\nconsole.log(text.match(/\\W/gi))\n// 返回 [\" \", \" \", \" \", \" \", \"最\", \"後\", \"の\", \"字\", \"符\"]\n\nconsole.log(text.match(/[^A-Za-z0-9_ ,]/gi))\n// 返回 [\"最\", \"後\", \"の\", \"字\", \"符\"]\n```\n\n### Digit \\d\n\n返回所有数字(0-9)。等同于`[0-9]`\n\n### Not Digit \\D\n\n返回所有非数字。等同于`[^0-9]`\n\n### Whitespace \\s\n\n返回所有空格字符(space, tabs, line breaks)\n\n### Not Whitespace \\S\n\n返回所有非空格字符(space, tabs, line breaks)\n\n## Escaped Characters 转义字符\n\n### Reserved Characters 保留字符\n\n以下字符为保留字符\n\n```bash\n+\n*\n?\n^\n$\n\\\n.\n[]\n{}\n()\n|\n/\n```\n\n## Groups 组合\n\n### Capturing Group (abc)\n\n组合括号内的字符并创建为一个新的组合\n\n```js\nconst text = 'some random value for rand function'\n\nconsole.log(text.match(/(rand)/gi))\n\n// 返回 [\"rand\", \"rand\"]\n```\n\n## Lookaround 查找\n\n### Positive Lookahead (?=abc)\n\n匹配一个不包括括号内的组合。比如下面的例子我们首先匹配所有字母字符数字，这时候我们匹配到`1, 2, 3, 4`。然后我们`?=(px)`匹配所有包括 px 的数字。即 2 和 4\n\n```js\nconst text = '1pt 2px 3em 4px'\nconsole.log(text.match(/\\d(?=px)/gi))\n```\n\n### Negative Lookahead (?!abc)\n\n下面我们先匹配所有数字，然后匹配数字中所有不是 px 的字符。\n\n```js\nconst text = '1pt 2px 3em 4px'\nconsole.log(text.match(/\\d(?!px)/gi))\n\n// 返回 [\"1\", \"3\"]\n```\n\n## Quantifiers & Alternation\n\n### Plus +\n\n返回一个或多个之前的的规则\n\n```js\nconst text = 'b be bee beer beers'\nconsole.log(text.match(/b\\w+/gi))\n```\n\n### Star \\*\n\n返回 0 个或多个之前的规则\n\n```js\nconst text = 'b be bee beer beers'\nconsole.log(text.match(/b\\w*/gi))\n```\n\n### Quantifier {}\n\n返回定义的数量。\n\n```js\nconst text = 'b be bee beer beers'\nconsole.log(text.match(/b\\w{1}/gi))\n\n//返回 [\"be\", \"be\", \"be\", \"be\"]\n```\n\n### Optional ?\n\n```js\nconst text = 'color colour color colour'\n//u设定为optional\nconsole.log(text.match(/colou?r/gi))\n\n//返回 [\"color\", \"colour\", \"color\", \"colour\"]\n```\n\n### Alternation |\n\n```js\nconst text = 'bad bud bod bed bid'\nconsole.log(text.match(/b(a|u|o)/gi))\n\n//返回[\"ba\", \"bu\", \"bo\"]\n```\n","source":"_posts/14-regular-expression.md","raw":"---\ntitle: 正则表达式基础\ndate: 2020-06-19 11:31:47\ntags: ['regular expression', 'javascript', 'learning everyday']\ncategories: Notes\ncover: 'https://blog.alexdevero.com/wp-content/uploads/2014/12/regex-e1517472406481.jpg'\n---\n\n> A regular expression is a sequence of characters that define a search pattern.\n\n正则表达式简而言之我们可以对一个字符串组合进行查找，替换，以及字符验证等其他操作。举个例子，我们有一个 login 的登陆页面，我们希望对用户密码加以强度监测。用户密码必须要包含大写字母，数字，特殊符号，以及长度大于 8 的要求。正则表达式就是用来对密码字符串进行查找来判断是否满足我们的规则。\n\n这个网站可以让你在练习过程中更好的了解正则表达式https://regexr.com/\n\n<!-- more -->\n\n## Syntax 语法\n\n```bash\n/pattern/modifier\n```\n\npattern 即我们想要搜索字符串的 pattern，比如我们想查找一个字符串中所有的`play`。pattern 的两侧我们分别用`/`包裹起来，我们所有的规则都在这两个`/`之内。`modifier`即表达式的修饰符。\n\n## Anchors 插入符\n\n### Beginning ^\n\n匹配开头包含的字符。\n\n```js\nconst text = 'Regular expression string\\nThis is a new line'\nconsole.log(text.match(/^This/gim))\n// 返回 [\"T\"]\n```\n\n### End \\$\n\n匹配字符串结尾处的字符，或行的末尾如果启用`m`修饰符\n\n```js\nconst text = 'Regular expression string\\nThis is a new line'\nconsole.log(text.match(/line$/gi))\n```\n\n### Word Boundary\n\n这个插入符会查找一个字符与非字符之间的位置。\n\n比如我们下面代码中的例子，text 字符串中有`@`, `,` 和两个`whitespace`非字符。那么`/e\\b/gi`就会匹配所有与 e 相邻非字符的字符。\n\n```js\nconst text = 'This@one,is kind tricky'\n\nconsole.log(text.match(/e\\b/gi))\n\n//返回 [\"s\", \"s\"]\n```\n\n### Not Word Boundary\n\n跟上面的 word boundary 截然相反。\n\n### Not Word Boundary\n\n## Modifiers 修饰符\n\n下面将介绍`g`, `i`, `m`, `s`, `u`, `y`以及它们分别的作用。\n\n### Global 全局\n\n`g`修饰符可以让我们搜索整个字符串内所有匹配的字符。\n\n```js\nconst text =\n  'Hinata studies and is accepted to Karasuno, the same high school the Little Giant played for, but is shocked to discover that Kageyama has also chosen to attend Karasuno. What is karasuno?'\n\nlet karasuno = text.match(/Karasuno/g)\n\n// 返回[\"Karasuno\", \"Karasuno\"]\n```\n\n> 如果我们不包括`g`修饰符时，则只会返回查找的第一个匹配结果。\n\n### Case Insensitive 不区分大小写\n\n`i` 即让表达式不区分大小写。\n\n之前的例子，假设我们想返回所有`karasuno`但不区分大小写。\n\n```js\nlet karasuno = text.match(/karasuno/gi)\n\n//返回[\"Karasuno\", \"Karasuno\", \"karasuno\"]\n```\n\n### Multiline 多行搜索\n\n跟搜索整个字符串不同。当添加了`m`修饰符，`^`和`$`则只会匹配每行的开头和结尾。\n\n```js\nconst text =\n  'Hinata studies and is accepted to Karasuno\\nThe same high school the Little Giant played for but is shocked to discover that Kageyama has also chosen to attend Karasuno. What is karasuno'\n\nlet karasuno = text.match(/karasuno$/gim)\n\n//[\"Karasuno\", \"karasuno\"] 第一段和最后一段结尾处。\n```\n\n与之前字符串不同的是现在这个字符串在`Karasuno`出有新的一行开始。所以我们添加`m`修饰符来返回每行以`karasuno`为结尾的字符(不区分大小写)。\n\n如果我们不包括`m`修饰符，则只会返回整个字符串最后结尾处的`karasuno`。\n\n## Character Classes\n\n### Character set [abc]\n\n返回所有括号内包括的字符。\n\n```js\nconst text = 'Hinata studies and is accepted to Karasuno'\nconsole.log(text.match(/[ak]/g))\n\n//返回 [\"a\", \"a\", \"a\", \"a\", \"K\", \"a\", \"a\"]\n```\n\n### Negated set [^abc]\n\n返回所有括号内不包括的字符。\n\n```js\nconst text = 'Kit kat'\nconsole.log(text.match(/[^kt]/gi))\n// 返回 [\"i\", \" \", \"a\"]\n```\n\n### Range [a-z]\n\n返回字符串中所有在括号范围内的字符。\n\n```js\nconst text = 'Hinata studies and is accepted to Karasuno'\nconsole.log(text.match(/[a-c]/gi))\n//返回 [\"a\", \"a\", \"a\", \"a\", \"c\", \"c\", \"a\", \"a\"]\n```\n\n### Word \\w\n\n返回字符串中所有单字字符，包括字母数字和下划线。但不包括 ASCII 之外的字符。\n\nhttps://wiktel.com/standards/ascii.htm\n\n同等于`[A-Za-z0-9_]`\n\n```js\nconst text = 'Some Japanese pass by 最後の字符'\nconsole.log(text.match(/\\w/gi))\n// 返回 [\"S\", \"o\", \"m\", \"e\", \"J\", \"a\", \"p\", \"a\", \"n\", \"e\", \"s\", \"e\", \"p\", \"a\", \"s\", \"s\", \"b\", \"y\"]\n```\n\n### Not Word \\W\n\n与`\\w`截然相反，返回字符串中所有非单字字符。\n\n同等于`[^A-Za-z0-9_]`\n\n```js\nconst text = 'Some Japanese pass by 最後の字符'\n\nconsole.log(text.match(/\\W/gi))\n// 返回 [\" \", \" \", \" \", \" \", \"最\", \"後\", \"の\", \"字\", \"符\"]\n\nconsole.log(text.match(/[^A-Za-z0-9_ ,]/gi))\n// 返回 [\"最\", \"後\", \"の\", \"字\", \"符\"]\n```\n\n### Digit \\d\n\n返回所有数字(0-9)。等同于`[0-9]`\n\n### Not Digit \\D\n\n返回所有非数字。等同于`[^0-9]`\n\n### Whitespace \\s\n\n返回所有空格字符(space, tabs, line breaks)\n\n### Not Whitespace \\S\n\n返回所有非空格字符(space, tabs, line breaks)\n\n## Escaped Characters 转义字符\n\n### Reserved Characters 保留字符\n\n以下字符为保留字符\n\n```bash\n+\n*\n?\n^\n$\n\\\n.\n[]\n{}\n()\n|\n/\n```\n\n## Groups 组合\n\n### Capturing Group (abc)\n\n组合括号内的字符并创建为一个新的组合\n\n```js\nconst text = 'some random value for rand function'\n\nconsole.log(text.match(/(rand)/gi))\n\n// 返回 [\"rand\", \"rand\"]\n```\n\n## Lookaround 查找\n\n### Positive Lookahead (?=abc)\n\n匹配一个不包括括号内的组合。比如下面的例子我们首先匹配所有字母字符数字，这时候我们匹配到`1, 2, 3, 4`。然后我们`?=(px)`匹配所有包括 px 的数字。即 2 和 4\n\n```js\nconst text = '1pt 2px 3em 4px'\nconsole.log(text.match(/\\d(?=px)/gi))\n```\n\n### Negative Lookahead (?!abc)\n\n下面我们先匹配所有数字，然后匹配数字中所有不是 px 的字符。\n\n```js\nconst text = '1pt 2px 3em 4px'\nconsole.log(text.match(/\\d(?!px)/gi))\n\n// 返回 [\"1\", \"3\"]\n```\n\n## Quantifiers & Alternation\n\n### Plus +\n\n返回一个或多个之前的的规则\n\n```js\nconst text = 'b be bee beer beers'\nconsole.log(text.match(/b\\w+/gi))\n```\n\n### Star \\*\n\n返回 0 个或多个之前的规则\n\n```js\nconst text = 'b be bee beer beers'\nconsole.log(text.match(/b\\w*/gi))\n```\n\n### Quantifier {}\n\n返回定义的数量。\n\n```js\nconst text = 'b be bee beer beers'\nconsole.log(text.match(/b\\w{1}/gi))\n\n//返回 [\"be\", \"be\", \"be\", \"be\"]\n```\n\n### Optional ?\n\n```js\nconst text = 'color colour color colour'\n//u设定为optional\nconsole.log(text.match(/colou?r/gi))\n\n//返回 [\"color\", \"colour\", \"color\", \"colour\"]\n```\n\n### Alternation |\n\n```js\nconst text = 'bad bud bod bed bid'\nconsole.log(text.match(/b(a|u|o)/gi))\n\n//返回[\"ba\", \"bu\", \"bo\"]\n```\n","slug":"14-regular-expression","published":1,"updated":"2020-07-01T07:15:11.854Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckdnmttd9000yrwui3ntxfkxw","content":"<blockquote>\n<p>A regular expression is a sequence of characters that define a search pattern.</p>\n</blockquote>\n<p>正则表达式简而言之我们可以对一个字符串组合进行查找，替换，以及字符验证等其他操作。举个例子，我们有一个 login 的登陆页面，我们希望对用户密码加以强度监测。用户密码必须要包含大写字母，数字，特殊符号，以及长度大于 8 的要求。正则表达式就是用来对密码字符串进行查找来判断是否满足我们的规则。</p>\n<p>这个网站可以让你在练习过程中更好的了解正则表达式<a href=\"https://regexr.com/\" target=\"_blank\" rel=\"noopener\">https://regexr.com/</a></p>\n<a id=\"more\"></a>\n\n<h2 id=\"Syntax-语法\"><a href=\"#Syntax-语法\" class=\"headerlink\" title=\"Syntax 语法\"></a>Syntax 语法</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/pattern/modifier</span><br></pre></td></tr></table></figure>\n\n<p>pattern 即我们想要搜索字符串的 pattern，比如我们想查找一个字符串中所有的<code>play</code>。pattern 的两侧我们分别用<code>/</code>包裹起来，我们所有的规则都在这两个<code>/</code>之内。<code>modifier</code>即表达式的修饰符。</p>\n<h2 id=\"Anchors-插入符\"><a href=\"#Anchors-插入符\" class=\"headerlink\" title=\"Anchors 插入符\"></a>Anchors 插入符</h2><h3 id=\"Beginning\"><a href=\"#Beginning\" class=\"headerlink\" title=\"Beginning ^\"></a>Beginning ^</h3><p>匹配开头包含的字符。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'Regular expression string\\nThis is a new line'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/^This/gim</span>))</span><br><span class=\"line\"><span class=\"comment\">// 返回 [\"T\"]</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"End\"><a href=\"#End\" class=\"headerlink\" title=\"End $\"></a>End $</h3><p>匹配字符串结尾处的字符，或行的末尾如果启用<code>m</code>修饰符</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'Regular expression string\\nThis is a new line'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/line$/gi</span>))</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Word-Boundary\"><a href=\"#Word-Boundary\" class=\"headerlink\" title=\"Word Boundary\"></a>Word Boundary</h3><p>这个插入符会查找一个字符与非字符之间的位置。</p>\n<p>比如我们下面代码中的例子，text 字符串中有<code>@</code>, <code>,</code> 和两个<code>whitespace</code>非字符。那么<code>/e\\b/gi</code>就会匹配所有与 e 相邻非字符的字符。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'This@one,is kind tricky'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/e\\b/gi</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//返回 [\"s\", \"s\"]</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Not-Word-Boundary\"><a href=\"#Not-Word-Boundary\" class=\"headerlink\" title=\"Not Word Boundary\"></a>Not Word Boundary</h3><p>跟上面的 word boundary 截然相反。</p>\n<h3 id=\"Not-Word-Boundary-1\"><a href=\"#Not-Word-Boundary-1\" class=\"headerlink\" title=\"Not Word Boundary\"></a>Not Word Boundary</h3><h2 id=\"Modifiers-修饰符\"><a href=\"#Modifiers-修饰符\" class=\"headerlink\" title=\"Modifiers 修饰符\"></a>Modifiers 修饰符</h2><p>下面将介绍<code>g</code>, <code>i</code>, <code>m</code>, <code>s</code>, <code>u</code>, <code>y</code>以及它们分别的作用。</p>\n<h3 id=\"Global-全局\"><a href=\"#Global-全局\" class=\"headerlink\" title=\"Global 全局\"></a>Global 全局</h3><p><code>g</code>修饰符可以让我们搜索整个字符串内所有匹配的字符。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text =</span><br><span class=\"line\">  <span class=\"string\">'Hinata studies and is accepted to Karasuno, the same high school the Little Giant played for, but is shocked to discover that Kageyama has also chosen to attend Karasuno. What is karasuno?'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> karasuno = text.match(<span class=\"regexp\">/Karasuno/g</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 返回[\"Karasuno\", \"Karasuno\"]</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>如果我们不包括<code>g</code>修饰符时，则只会返回查找的第一个匹配结果。</p>\n</blockquote>\n<h3 id=\"Case-Insensitive-不区分大小写\"><a href=\"#Case-Insensitive-不区分大小写\" class=\"headerlink\" title=\"Case Insensitive 不区分大小写\"></a>Case Insensitive 不区分大小写</h3><p><code>i</code> 即让表达式不区分大小写。</p>\n<p>之前的例子，假设我们想返回所有<code>karasuno</code>但不区分大小写。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> karasuno = text.match(<span class=\"regexp\">/karasuno/gi</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//返回[\"Karasuno\", \"Karasuno\", \"karasuno\"]</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Multiline-多行搜索\"><a href=\"#Multiline-多行搜索\" class=\"headerlink\" title=\"Multiline 多行搜索\"></a>Multiline 多行搜索</h3><p>跟搜索整个字符串不同。当添加了<code>m</code>修饰符，<code>^</code>和<code>$</code>则只会匹配每行的开头和结尾。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text =</span><br><span class=\"line\">  <span class=\"string\">'Hinata studies and is accepted to Karasuno\\nThe same high school the Little Giant played for but is shocked to discover that Kageyama has also chosen to attend Karasuno. What is karasuno'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> karasuno = text.match(<span class=\"regexp\">/karasuno$/gim</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//[\"Karasuno\", \"karasuno\"] 第一段和最后一段结尾处。</span></span><br></pre></td></tr></table></figure>\n\n<p>与之前字符串不同的是现在这个字符串在<code>Karasuno</code>出有新的一行开始。所以我们添加<code>m</code>修饰符来返回每行以<code>karasuno</code>为结尾的字符(不区分大小写)。</p>\n<p>如果我们不包括<code>m</code>修饰符，则只会返回整个字符串最后结尾处的<code>karasuno</code>。</p>\n<h2 id=\"Character-Classes\"><a href=\"#Character-Classes\" class=\"headerlink\" title=\"Character Classes\"></a>Character Classes</h2><h3 id=\"Character-set-abc\"><a href=\"#Character-set-abc\" class=\"headerlink\" title=\"Character set [abc]\"></a>Character set [abc]</h3><p>返回所有括号内包括的字符。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'Hinata studies and is accepted to Karasuno'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/[ak]/g</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//返回 [\"a\", \"a\", \"a\", \"a\", \"K\", \"a\", \"a\"]</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Negated-set-abc\"><a href=\"#Negated-set-abc\" class=\"headerlink\" title=\"Negated set [^abc]\"></a>Negated set [^abc]</h3><p>返回所有括号内不包括的字符。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'Kit kat'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/[^kt]/gi</span>))</span><br><span class=\"line\"><span class=\"comment\">// 返回 [\"i\", \" \", \"a\"]</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Range-a-z\"><a href=\"#Range-a-z\" class=\"headerlink\" title=\"Range [a-z]\"></a>Range [a-z]</h3><p>返回字符串中所有在括号范围内的字符。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'Hinata studies and is accepted to Karasuno'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/[a-c]/gi</span>))</span><br><span class=\"line\"><span class=\"comment\">//返回 [\"a\", \"a\", \"a\", \"a\", \"c\", \"c\", \"a\", \"a\"]</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Word-w\"><a href=\"#Word-w\" class=\"headerlink\" title=\"Word \\w\"></a>Word \\w</h3><p>返回字符串中所有单字字符，包括字母数字和下划线。但不包括 ASCII 之外的字符。</p>\n<p><a href=\"https://wiktel.com/standards/ascii.htm\" target=\"_blank\" rel=\"noopener\">https://wiktel.com/standards/ascii.htm</a></p>\n<p>同等于<code>[A-Za-z0-9_]</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'Some Japanese pass by 最後の字符'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/\\w/gi</span>))</span><br><span class=\"line\"><span class=\"comment\">// 返回 [\"S\", \"o\", \"m\", \"e\", \"J\", \"a\", \"p\", \"a\", \"n\", \"e\", \"s\", \"e\", \"p\", \"a\", \"s\", \"s\", \"b\", \"y\"]</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Not-Word-W\"><a href=\"#Not-Word-W\" class=\"headerlink\" title=\"Not Word \\W\"></a>Not Word \\W</h3><p>与<code>\\w</code>截然相反，返回字符串中所有非单字字符。</p>\n<p>同等于<code>[^A-Za-z0-9_]</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'Some Japanese pass by 最後の字符'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/\\W/gi</span>))</span><br><span class=\"line\"><span class=\"comment\">// 返回 [\" \", \" \", \" \", \" \", \"最\", \"後\", \"の\", \"字\", \"符\"]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/[^A-Za-z0-9_ ,]/gi</span>))</span><br><span class=\"line\"><span class=\"comment\">// 返回 [\"最\", \"後\", \"の\", \"字\", \"符\"]</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Digit-d\"><a href=\"#Digit-d\" class=\"headerlink\" title=\"Digit \\d\"></a>Digit \\d</h3><p>返回所有数字(0-9)。等同于<code>[0-9]</code></p>\n<h3 id=\"Not-Digit-D\"><a href=\"#Not-Digit-D\" class=\"headerlink\" title=\"Not Digit \\D\"></a>Not Digit \\D</h3><p>返回所有非数字。等同于<code>[^0-9]</code></p>\n<h3 id=\"Whitespace-s\"><a href=\"#Whitespace-s\" class=\"headerlink\" title=\"Whitespace \\s\"></a>Whitespace \\s</h3><p>返回所有空格字符(space, tabs, line breaks)</p>\n<h3 id=\"Not-Whitespace-S\"><a href=\"#Not-Whitespace-S\" class=\"headerlink\" title=\"Not Whitespace \\S\"></a>Not Whitespace \\S</h3><p>返回所有非空格字符(space, tabs, line breaks)</p>\n<h2 id=\"Escaped-Characters-转义字符\"><a href=\"#Escaped-Characters-转义字符\" class=\"headerlink\" title=\"Escaped Characters 转义字符\"></a>Escaped Characters 转义字符</h2><h3 id=\"Reserved-Characters-保留字符\"><a href=\"#Reserved-Characters-保留字符\" class=\"headerlink\" title=\"Reserved Characters 保留字符\"></a>Reserved Characters 保留字符</h3><p>以下字符为保留字符</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">+</span><br><span class=\"line\">*</span><br><span class=\"line\">?</span><br><span class=\"line\">^</span><br><span class=\"line\">$</span><br><span class=\"line\">\\</span><br><span class=\"line\">.</span><br><span class=\"line\">[]</span><br><span class=\"line\">&#123;&#125;</span><br><span class=\"line\">()</span><br><span class=\"line\">|</span><br><span class=\"line\">/</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Groups-组合\"><a href=\"#Groups-组合\" class=\"headerlink\" title=\"Groups 组合\"></a>Groups 组合</h2><h3 id=\"Capturing-Group-abc\"><a href=\"#Capturing-Group-abc\" class=\"headerlink\" title=\"Capturing Group (abc)\"></a>Capturing Group (abc)</h3><p>组合括号内的字符并创建为一个新的组合</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'some random value for rand function'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/(rand)/gi</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 返回 [\"rand\", \"rand\"]</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Lookaround-查找\"><a href=\"#Lookaround-查找\" class=\"headerlink\" title=\"Lookaround 查找\"></a>Lookaround 查找</h2><h3 id=\"Positive-Lookahead-abc\"><a href=\"#Positive-Lookahead-abc\" class=\"headerlink\" title=\"Positive Lookahead (?=abc)\"></a>Positive Lookahead (?=abc)</h3><p>匹配一个不包括括号内的组合。比如下面的例子我们首先匹配所有字母字符数字，这时候我们匹配到<code>1, 2, 3, 4</code>。然后我们<code>?=(px)</code>匹配所有包括 px 的数字。即 2 和 4</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'1pt 2px 3em 4px'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/\\d(?=px)/gi</span>))</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Negative-Lookahead-abc\"><a href=\"#Negative-Lookahead-abc\" class=\"headerlink\" title=\"Negative Lookahead (?!abc)\"></a>Negative Lookahead (?!abc)</h3><p>下面我们先匹配所有数字，然后匹配数字中所有不是 px 的字符。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'1pt 2px 3em 4px'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/\\d(?!px)/gi</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 返回 [\"1\", \"3\"]</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Quantifiers-amp-Alternation\"><a href=\"#Quantifiers-amp-Alternation\" class=\"headerlink\" title=\"Quantifiers &amp; Alternation\"></a>Quantifiers &amp; Alternation</h2><h3 id=\"Plus\"><a href=\"#Plus\" class=\"headerlink\" title=\"Plus +\"></a>Plus +</h3><p>返回一个或多个之前的的规则</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'b be bee beer beers'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/b\\w+/gi</span>))</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Star\"><a href=\"#Star\" class=\"headerlink\" title=\"Star *\"></a>Star *</h3><p>返回 0 个或多个之前的规则</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'b be bee beer beers'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/b\\w*/gi</span>))</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Quantifier\"><a href=\"#Quantifier\" class=\"headerlink\" title=\"Quantifier {}\"></a>Quantifier {}</h3><p>返回定义的数量。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'b be bee beer beers'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/b\\w&#123;1&#125;/gi</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//返回 [\"be\", \"be\", \"be\", \"be\"]</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Optional\"><a href=\"#Optional\" class=\"headerlink\" title=\"Optional ?\"></a>Optional ?</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'color colour color colour'</span></span><br><span class=\"line\"><span class=\"comment\">//u设定为optional</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/colou?r/gi</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//返回 [\"color\", \"colour\", \"color\", \"colour\"]</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Alternation\"><a href=\"#Alternation\" class=\"headerlink\" title=\"Alternation |\"></a>Alternation |</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'bad bud bod bed bid'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/b(a|u|o)/gi</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//返回[\"ba\", \"bu\", \"bo\"]</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"<blockquote>\n<p>A regular expression is a sequence of characters that define a search pattern.</p>\n</blockquote>\n<p>正则表达式简而言之我们可以对一个字符串组合进行查找，替换，以及字符验证等其他操作。举个例子，我们有一个 login 的登陆页面，我们希望对用户密码加以强度监测。用户密码必须要包含大写字母，数字，特殊符号，以及长度大于 8 的要求。正则表达式就是用来对密码字符串进行查找来判断是否满足我们的规则。</p>\n<p>这个网站可以让你在练习过程中更好的了解正则表达式<a href=\"https://regexr.com/\" target=\"_blank\" rel=\"noopener\">https://regexr.com/</a></p>","more":"<h2 id=\"Syntax-语法\"><a href=\"#Syntax-语法\" class=\"headerlink\" title=\"Syntax 语法\"></a>Syntax 语法</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/pattern/modifier</span><br></pre></td></tr></table></figure>\n\n<p>pattern 即我们想要搜索字符串的 pattern，比如我们想查找一个字符串中所有的<code>play</code>。pattern 的两侧我们分别用<code>/</code>包裹起来，我们所有的规则都在这两个<code>/</code>之内。<code>modifier</code>即表达式的修饰符。</p>\n<h2 id=\"Anchors-插入符\"><a href=\"#Anchors-插入符\" class=\"headerlink\" title=\"Anchors 插入符\"></a>Anchors 插入符</h2><h3 id=\"Beginning\"><a href=\"#Beginning\" class=\"headerlink\" title=\"Beginning ^\"></a>Beginning ^</h3><p>匹配开头包含的字符。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'Regular expression string\\nThis is a new line'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/^This/gim</span>))</span><br><span class=\"line\"><span class=\"comment\">// 返回 [\"T\"]</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"End\"><a href=\"#End\" class=\"headerlink\" title=\"End $\"></a>End $</h3><p>匹配字符串结尾处的字符，或行的末尾如果启用<code>m</code>修饰符</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'Regular expression string\\nThis is a new line'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/line$/gi</span>))</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Word-Boundary\"><a href=\"#Word-Boundary\" class=\"headerlink\" title=\"Word Boundary\"></a>Word Boundary</h3><p>这个插入符会查找一个字符与非字符之间的位置。</p>\n<p>比如我们下面代码中的例子，text 字符串中有<code>@</code>, <code>,</code> 和两个<code>whitespace</code>非字符。那么<code>/e\\b/gi</code>就会匹配所有与 e 相邻非字符的字符。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'This@one,is kind tricky'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/e\\b/gi</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//返回 [\"s\", \"s\"]</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Not-Word-Boundary\"><a href=\"#Not-Word-Boundary\" class=\"headerlink\" title=\"Not Word Boundary\"></a>Not Word Boundary</h3><p>跟上面的 word boundary 截然相反。</p>\n<h3 id=\"Not-Word-Boundary-1\"><a href=\"#Not-Word-Boundary-1\" class=\"headerlink\" title=\"Not Word Boundary\"></a>Not Word Boundary</h3><h2 id=\"Modifiers-修饰符\"><a href=\"#Modifiers-修饰符\" class=\"headerlink\" title=\"Modifiers 修饰符\"></a>Modifiers 修饰符</h2><p>下面将介绍<code>g</code>, <code>i</code>, <code>m</code>, <code>s</code>, <code>u</code>, <code>y</code>以及它们分别的作用。</p>\n<h3 id=\"Global-全局\"><a href=\"#Global-全局\" class=\"headerlink\" title=\"Global 全局\"></a>Global 全局</h3><p><code>g</code>修饰符可以让我们搜索整个字符串内所有匹配的字符。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text =</span><br><span class=\"line\">  <span class=\"string\">'Hinata studies and is accepted to Karasuno, the same high school the Little Giant played for, but is shocked to discover that Kageyama has also chosen to attend Karasuno. What is karasuno?'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> karasuno = text.match(<span class=\"regexp\">/Karasuno/g</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 返回[\"Karasuno\", \"Karasuno\"]</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>如果我们不包括<code>g</code>修饰符时，则只会返回查找的第一个匹配结果。</p>\n</blockquote>\n<h3 id=\"Case-Insensitive-不区分大小写\"><a href=\"#Case-Insensitive-不区分大小写\" class=\"headerlink\" title=\"Case Insensitive 不区分大小写\"></a>Case Insensitive 不区分大小写</h3><p><code>i</code> 即让表达式不区分大小写。</p>\n<p>之前的例子，假设我们想返回所有<code>karasuno</code>但不区分大小写。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> karasuno = text.match(<span class=\"regexp\">/karasuno/gi</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//返回[\"Karasuno\", \"Karasuno\", \"karasuno\"]</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Multiline-多行搜索\"><a href=\"#Multiline-多行搜索\" class=\"headerlink\" title=\"Multiline 多行搜索\"></a>Multiline 多行搜索</h3><p>跟搜索整个字符串不同。当添加了<code>m</code>修饰符，<code>^</code>和<code>$</code>则只会匹配每行的开头和结尾。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text =</span><br><span class=\"line\">  <span class=\"string\">'Hinata studies and is accepted to Karasuno\\nThe same high school the Little Giant played for but is shocked to discover that Kageyama has also chosen to attend Karasuno. What is karasuno'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> karasuno = text.match(<span class=\"regexp\">/karasuno$/gim</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//[\"Karasuno\", \"karasuno\"] 第一段和最后一段结尾处。</span></span><br></pre></td></tr></table></figure>\n\n<p>与之前字符串不同的是现在这个字符串在<code>Karasuno</code>出有新的一行开始。所以我们添加<code>m</code>修饰符来返回每行以<code>karasuno</code>为结尾的字符(不区分大小写)。</p>\n<p>如果我们不包括<code>m</code>修饰符，则只会返回整个字符串最后结尾处的<code>karasuno</code>。</p>\n<h2 id=\"Character-Classes\"><a href=\"#Character-Classes\" class=\"headerlink\" title=\"Character Classes\"></a>Character Classes</h2><h3 id=\"Character-set-abc\"><a href=\"#Character-set-abc\" class=\"headerlink\" title=\"Character set [abc]\"></a>Character set [abc]</h3><p>返回所有括号内包括的字符。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'Hinata studies and is accepted to Karasuno'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/[ak]/g</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//返回 [\"a\", \"a\", \"a\", \"a\", \"K\", \"a\", \"a\"]</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Negated-set-abc\"><a href=\"#Negated-set-abc\" class=\"headerlink\" title=\"Negated set [^abc]\"></a>Negated set [^abc]</h3><p>返回所有括号内不包括的字符。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'Kit kat'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/[^kt]/gi</span>))</span><br><span class=\"line\"><span class=\"comment\">// 返回 [\"i\", \" \", \"a\"]</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Range-a-z\"><a href=\"#Range-a-z\" class=\"headerlink\" title=\"Range [a-z]\"></a>Range [a-z]</h3><p>返回字符串中所有在括号范围内的字符。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'Hinata studies and is accepted to Karasuno'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/[a-c]/gi</span>))</span><br><span class=\"line\"><span class=\"comment\">//返回 [\"a\", \"a\", \"a\", \"a\", \"c\", \"c\", \"a\", \"a\"]</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Word-w\"><a href=\"#Word-w\" class=\"headerlink\" title=\"Word \\w\"></a>Word \\w</h3><p>返回字符串中所有单字字符，包括字母数字和下划线。但不包括 ASCII 之外的字符。</p>\n<p><a href=\"https://wiktel.com/standards/ascii.htm\" target=\"_blank\" rel=\"noopener\">https://wiktel.com/standards/ascii.htm</a></p>\n<p>同等于<code>[A-Za-z0-9_]</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'Some Japanese pass by 最後の字符'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/\\w/gi</span>))</span><br><span class=\"line\"><span class=\"comment\">// 返回 [\"S\", \"o\", \"m\", \"e\", \"J\", \"a\", \"p\", \"a\", \"n\", \"e\", \"s\", \"e\", \"p\", \"a\", \"s\", \"s\", \"b\", \"y\"]</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Not-Word-W\"><a href=\"#Not-Word-W\" class=\"headerlink\" title=\"Not Word \\W\"></a>Not Word \\W</h3><p>与<code>\\w</code>截然相反，返回字符串中所有非单字字符。</p>\n<p>同等于<code>[^A-Za-z0-9_]</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'Some Japanese pass by 最後の字符'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/\\W/gi</span>))</span><br><span class=\"line\"><span class=\"comment\">// 返回 [\" \", \" \", \" \", \" \", \"最\", \"後\", \"の\", \"字\", \"符\"]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/[^A-Za-z0-9_ ,]/gi</span>))</span><br><span class=\"line\"><span class=\"comment\">// 返回 [\"最\", \"後\", \"の\", \"字\", \"符\"]</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Digit-d\"><a href=\"#Digit-d\" class=\"headerlink\" title=\"Digit \\d\"></a>Digit \\d</h3><p>返回所有数字(0-9)。等同于<code>[0-9]</code></p>\n<h3 id=\"Not-Digit-D\"><a href=\"#Not-Digit-D\" class=\"headerlink\" title=\"Not Digit \\D\"></a>Not Digit \\D</h3><p>返回所有非数字。等同于<code>[^0-9]</code></p>\n<h3 id=\"Whitespace-s\"><a href=\"#Whitespace-s\" class=\"headerlink\" title=\"Whitespace \\s\"></a>Whitespace \\s</h3><p>返回所有空格字符(space, tabs, line breaks)</p>\n<h3 id=\"Not-Whitespace-S\"><a href=\"#Not-Whitespace-S\" class=\"headerlink\" title=\"Not Whitespace \\S\"></a>Not Whitespace \\S</h3><p>返回所有非空格字符(space, tabs, line breaks)</p>\n<h2 id=\"Escaped-Characters-转义字符\"><a href=\"#Escaped-Characters-转义字符\" class=\"headerlink\" title=\"Escaped Characters 转义字符\"></a>Escaped Characters 转义字符</h2><h3 id=\"Reserved-Characters-保留字符\"><a href=\"#Reserved-Characters-保留字符\" class=\"headerlink\" title=\"Reserved Characters 保留字符\"></a>Reserved Characters 保留字符</h3><p>以下字符为保留字符</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">+</span><br><span class=\"line\">*</span><br><span class=\"line\">?</span><br><span class=\"line\">^</span><br><span class=\"line\">$</span><br><span class=\"line\">\\</span><br><span class=\"line\">.</span><br><span class=\"line\">[]</span><br><span class=\"line\">&#123;&#125;</span><br><span class=\"line\">()</span><br><span class=\"line\">|</span><br><span class=\"line\">/</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Groups-组合\"><a href=\"#Groups-组合\" class=\"headerlink\" title=\"Groups 组合\"></a>Groups 组合</h2><h3 id=\"Capturing-Group-abc\"><a href=\"#Capturing-Group-abc\" class=\"headerlink\" title=\"Capturing Group (abc)\"></a>Capturing Group (abc)</h3><p>组合括号内的字符并创建为一个新的组合</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'some random value for rand function'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/(rand)/gi</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 返回 [\"rand\", \"rand\"]</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Lookaround-查找\"><a href=\"#Lookaround-查找\" class=\"headerlink\" title=\"Lookaround 查找\"></a>Lookaround 查找</h2><h3 id=\"Positive-Lookahead-abc\"><a href=\"#Positive-Lookahead-abc\" class=\"headerlink\" title=\"Positive Lookahead (?=abc)\"></a>Positive Lookahead (?=abc)</h3><p>匹配一个不包括括号内的组合。比如下面的例子我们首先匹配所有字母字符数字，这时候我们匹配到<code>1, 2, 3, 4</code>。然后我们<code>?=(px)</code>匹配所有包括 px 的数字。即 2 和 4</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'1pt 2px 3em 4px'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/\\d(?=px)/gi</span>))</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Negative-Lookahead-abc\"><a href=\"#Negative-Lookahead-abc\" class=\"headerlink\" title=\"Negative Lookahead (?!abc)\"></a>Negative Lookahead (?!abc)</h3><p>下面我们先匹配所有数字，然后匹配数字中所有不是 px 的字符。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'1pt 2px 3em 4px'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/\\d(?!px)/gi</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 返回 [\"1\", \"3\"]</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Quantifiers-amp-Alternation\"><a href=\"#Quantifiers-amp-Alternation\" class=\"headerlink\" title=\"Quantifiers &amp; Alternation\"></a>Quantifiers &amp; Alternation</h2><h3 id=\"Plus\"><a href=\"#Plus\" class=\"headerlink\" title=\"Plus +\"></a>Plus +</h3><p>返回一个或多个之前的的规则</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'b be bee beer beers'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/b\\w+/gi</span>))</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Star\"><a href=\"#Star\" class=\"headerlink\" title=\"Star *\"></a>Star *</h3><p>返回 0 个或多个之前的规则</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'b be bee beer beers'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/b\\w*/gi</span>))</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Quantifier\"><a href=\"#Quantifier\" class=\"headerlink\" title=\"Quantifier {}\"></a>Quantifier {}</h3><p>返回定义的数量。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'b be bee beer beers'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/b\\w&#123;1&#125;/gi</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//返回 [\"be\", \"be\", \"be\", \"be\"]</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Optional\"><a href=\"#Optional\" class=\"headerlink\" title=\"Optional ?\"></a>Optional ?</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'color colour color colour'</span></span><br><span class=\"line\"><span class=\"comment\">//u设定为optional</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/colou?r/gi</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//返回 [\"color\", \"colour\", \"color\", \"colour\"]</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Alternation\"><a href=\"#Alternation\" class=\"headerlink\" title=\"Alternation |\"></a>Alternation |</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"string\">'bad bud bod bed bid'</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(text.match(<span class=\"regexp\">/b(a|u|o)/gi</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//返回[\"ba\", \"bu\", \"bo\"]</span></span><br></pre></td></tr></table></figure>"},{"title":"Python爬虫之Request库","date":"2020-06-23T23:37:13.000Z","cover":"https://programmer.help/images/blog/a3fce23eb3fdd08341287253f42bb04f.jpg","_content":"\n> Python 爬虫系列之如何使用`requests`库。教程参考 Real Python。\n\n## 安装和导入 reuqest 库\n\n```shell\npip install request\n```\n\n```python\nimport requests\n```\n\n## GET Request\n\nHTTP 的请求方式有很多种，常见比如有 GET, POST, PUT 等等。不同的请求方式也想对应其所执行的动作。比如 GET 请求，我们一般可以用来请求 API 返回的数据。比如下面的代码我们对`wallpaperplay.com`发起 GET 请求。如果请求成功我们会得到`200`的代码即代表成功。\n\n```Python\nimport requests\nurl = 'https://wallpaperplay.com/search?term=anime'\nprint(requests.get(url)) # <Response [200]>\n```\n\n### Status Code\n\n其他的`Status Code`比较常见的有`404`, 即代表请求错误。更详细的 HTTP status code 可以参考[维基百科](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes)\n\n```Python\nimport requests\nurl = 'https://wallpaperplay.com/search?term=anime'\nresponse = requests.get(url)\nstatus = response.status_code\n\nif status:\n    # ... do something\n    print('Request successfully')\nelse:\n    print('Request failed')\n```\n\n### Content\n\n当我们对一个服务器发起请求时，我们通常是希望能够返回一些我们需要的数据。\n\n比如[这个壁纸网站](https://wallpaperplay.com/search?term=anime)展示了很多二次元的高清壁纸，我们的目标就是想要获得该网站的所有内容, 那我们可以用`.content`或者`.text`方法来获取所有响应内容。`.content`返回内容格式需要我们首先转化为`utf-8`编码格式。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-06-23%20170046.png?alt=media&token=fbb9f5bc-48f9-46fe-8a6f-6881e46ed47b\" alt=\"cs\" />\n\n<br />\n\n```python\nimport reuqests\nurl = 'https://wallpaperplay.com/search?term=anime'\nresponse = requests.get(url)\nprint(response.text)\n```\n\n打印的结果为\n\n```HTML\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n\n    <title>Search result for anime</title>\n    <meta name=\"description\" content=\"\">\n            <link rel=\"shortcut icon\" type=\"image/ico\" href=\"/favicon.ico\"/>\n    <meta name=\"csrf-token\" content=\"SdGboAl48dNsvQhX9xAvY8oYzsDcReXqweWUNyrT\">\n    <link href=\"https://fonts.googleapis.com/css?family=Lobster|Roboto\"\n          rel=\"stylesheet\">\n\n    <!-- ...... More ......-->\n```\n\n### Headers\n\n请求头可以返回响应内容的类型，我们在爬虫的时候更多的是伪造请求头/\n\n`request.get()`第二个参数就可以接受一个`dict`类型的请求头。\n\n```python\nheaders = {\n    'User-Agent': 'Aweme 10.3.0 rv:103020 (iPhone; iOS 12.2; en_CA) Cronet',\n    'Accept-Encoding': 'gzip, deflate, br',\n    'Host': 'api3-core-c-lq.amemv.com',\n    'Connection': 'keep-alive',\n}\n\nurl = 'someurlyourequest'\n\nresponse = requests.get(url, headers=headers).content\n\n```\n","source":"_posts/17-python-request.md","raw":"---\ntitle: Python爬虫之Request库\ndate: 2020-06-23 16:37:13\ntags: ['python', 'web crawler', 'notes']\ncategories: Python爬虫\ncover: 'https://programmer.help/images/blog/a3fce23eb3fdd08341287253f42bb04f.jpg'\n---\n\n> Python 爬虫系列之如何使用`requests`库。教程参考 Real Python。\n\n## 安装和导入 reuqest 库\n\n```shell\npip install request\n```\n\n```python\nimport requests\n```\n\n## GET Request\n\nHTTP 的请求方式有很多种，常见比如有 GET, POST, PUT 等等。不同的请求方式也想对应其所执行的动作。比如 GET 请求，我们一般可以用来请求 API 返回的数据。比如下面的代码我们对`wallpaperplay.com`发起 GET 请求。如果请求成功我们会得到`200`的代码即代表成功。\n\n```Python\nimport requests\nurl = 'https://wallpaperplay.com/search?term=anime'\nprint(requests.get(url)) # <Response [200]>\n```\n\n### Status Code\n\n其他的`Status Code`比较常见的有`404`, 即代表请求错误。更详细的 HTTP status code 可以参考[维基百科](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes)\n\n```Python\nimport requests\nurl = 'https://wallpaperplay.com/search?term=anime'\nresponse = requests.get(url)\nstatus = response.status_code\n\nif status:\n    # ... do something\n    print('Request successfully')\nelse:\n    print('Request failed')\n```\n\n### Content\n\n当我们对一个服务器发起请求时，我们通常是希望能够返回一些我们需要的数据。\n\n比如[这个壁纸网站](https://wallpaperplay.com/search?term=anime)展示了很多二次元的高清壁纸，我们的目标就是想要获得该网站的所有内容, 那我们可以用`.content`或者`.text`方法来获取所有响应内容。`.content`返回内容格式需要我们首先转化为`utf-8`编码格式。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-06-23%20170046.png?alt=media&token=fbb9f5bc-48f9-46fe-8a6f-6881e46ed47b\" alt=\"cs\" />\n\n<br />\n\n```python\nimport reuqests\nurl = 'https://wallpaperplay.com/search?term=anime'\nresponse = requests.get(url)\nprint(response.text)\n```\n\n打印的结果为\n\n```HTML\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n\n    <title>Search result for anime</title>\n    <meta name=\"description\" content=\"\">\n            <link rel=\"shortcut icon\" type=\"image/ico\" href=\"/favicon.ico\"/>\n    <meta name=\"csrf-token\" content=\"SdGboAl48dNsvQhX9xAvY8oYzsDcReXqweWUNyrT\">\n    <link href=\"https://fonts.googleapis.com/css?family=Lobster|Roboto\"\n          rel=\"stylesheet\">\n\n    <!-- ...... More ......-->\n```\n\n### Headers\n\n请求头可以返回响应内容的类型，我们在爬虫的时候更多的是伪造请求头/\n\n`request.get()`第二个参数就可以接受一个`dict`类型的请求头。\n\n```python\nheaders = {\n    'User-Agent': 'Aweme 10.3.0 rv:103020 (iPhone; iOS 12.2; en_CA) Cronet',\n    'Accept-Encoding': 'gzip, deflate, br',\n    'Host': 'api3-core-c-lq.amemv.com',\n    'Connection': 'keep-alive',\n}\n\nurl = 'someurlyourequest'\n\nresponse = requests.get(url, headers=headers).content\n\n```\n","slug":"17-python-request","published":1,"updated":"2020-07-16T23:33:31.630Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckdnmttdb0012rwui2a8j726z","content":"<blockquote>\n<p>Python 爬虫系列之如何使用<code>requests</code>库。教程参考 Real Python。</p>\n</blockquote>\n<h2 id=\"安装和导入-reuqest-库\"><a href=\"#安装和导入-reuqest-库\" class=\"headerlink\" title=\"安装和导入 reuqest 库\"></a>安装和导入 reuqest 库</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install request</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"GET-Request\"><a href=\"#GET-Request\" class=\"headerlink\" title=\"GET Request\"></a>GET Request</h2><p>HTTP 的请求方式有很多种，常见比如有 GET, POST, PUT 等等。不同的请求方式也想对应其所执行的动作。比如 GET 请求，我们一般可以用来请求 API 返回的数据。比如下面的代码我们对<code>wallpaperplay.com</code>发起 GET 请求。如果请求成功我们会得到<code>200</code>的代码即代表成功。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\">url = <span class=\"string\">'https://wallpaperplay.com/search?term=anime'</span></span><br><span class=\"line\">print(requests.get(url)) <span class=\"comment\"># &lt;Response [200]&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Status-Code\"><a href=\"#Status-Code\" class=\"headerlink\" title=\"Status Code\"></a>Status Code</h3><p>其他的<code>Status Code</code>比较常见的有<code>404</code>, 即代表请求错误。更详细的 HTTP status code 可以参考<a href=\"https://en.wikipedia.org/wiki/List_of_HTTP_status_codes\" target=\"_blank\" rel=\"noopener\">维基百科</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\">url = <span class=\"string\">'https://wallpaperplay.com/search?term=anime'</span></span><br><span class=\"line\">response = requests.get(url)</span><br><span class=\"line\">status = response.status_code</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> status:</span><br><span class=\"line\">    <span class=\"comment\"># ... do something</span></span><br><span class=\"line\">    print(<span class=\"string\">'Request successfully'</span>)</span><br><span class=\"line\"><span class=\"keyword\">else</span>:</span><br><span class=\"line\">    print(<span class=\"string\">'Request failed'</span>)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Content\"><a href=\"#Content\" class=\"headerlink\" title=\"Content\"></a>Content</h3><p>当我们对一个服务器发起请求时，我们通常是希望能够返回一些我们需要的数据。</p>\n<p>比如<a href=\"https://wallpaperplay.com/search?term=anime\" target=\"_blank\" rel=\"noopener\">这个壁纸网站</a>展示了很多二次元的高清壁纸，我们的目标就是想要获得该网站的所有内容, 那我们可以用<code>.content</code>或者<code>.text</code>方法来获取所有响应内容。<code>.content</code>返回内容格式需要我们首先转化为<code>utf-8</code>编码格式。</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-06-23%20170046.png?alt=media&token=fbb9f5bc-48f9-46fe-8a6f-6881e46ed47b\" alt=\"cs\">\n\n<br>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> reuqests</span><br><span class=\"line\">url = <span class=\"string\">'https://wallpaperplay.com/search?term=anime'</span></span><br><span class=\"line\">response = requests.get(url)</span><br><span class=\"line\">print(response.text)</span><br></pre></td></tr></table></figure>\n\n<p>打印的结果为</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Search result for anime<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"description\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"\"</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"shortcut icon\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"image/ico\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"/favicon.ico\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"csrf-token\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"SdGboAl48dNsvQhX9xAvY8oYzsDcReXqweWUNyrT\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">href</span>=<span class=\"string\">\"https://fonts.googleapis.com/css?family=Lobster|Roboto\"</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- ...... More ......--&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Headers\"><a href=\"#Headers\" class=\"headerlink\" title=\"Headers\"></a>Headers</h3><p>请求头可以返回响应内容的类型，我们在爬虫的时候更多的是伪造请求头/</p>\n<p><code>request.get()</code>第二个参数就可以接受一个<code>dict</code>类型的请求头。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">headers = &#123;</span><br><span class=\"line\">    <span class=\"string\">'User-Agent'</span>: <span class=\"string\">'Aweme 10.3.0 rv:103020 (iPhone; iOS 12.2; en_CA) Cronet'</span>,</span><br><span class=\"line\">    <span class=\"string\">'Accept-Encoding'</span>: <span class=\"string\">'gzip, deflate, br'</span>,</span><br><span class=\"line\">    <span class=\"string\">'Host'</span>: <span class=\"string\">'api3-core-c-lq.amemv.com'</span>,</span><br><span class=\"line\">    <span class=\"string\">'Connection'</span>: <span class=\"string\">'keep-alive'</span>,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">url = <span class=\"string\">'someurlyourequest'</span></span><br><span class=\"line\"></span><br><span class=\"line\">response = requests.get(url, headers=headers).content</span><br></pre></td></tr></table></figure>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"","more":"<blockquote>\n<p>Python 爬虫系列之如何使用<code>requests</code>库。教程参考 Real Python。</p>\n</blockquote>\n<h2 id=\"安装和导入-reuqest-库\"><a href=\"#安装和导入-reuqest-库\" class=\"headerlink\" title=\"安装和导入 reuqest 库\"></a>安装和导入 reuqest 库</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install request</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"GET-Request\"><a href=\"#GET-Request\" class=\"headerlink\" title=\"GET Request\"></a>GET Request</h2><p>HTTP 的请求方式有很多种，常见比如有 GET, POST, PUT 等等。不同的请求方式也想对应其所执行的动作。比如 GET 请求，我们一般可以用来请求 API 返回的数据。比如下面的代码我们对<code>wallpaperplay.com</code>发起 GET 请求。如果请求成功我们会得到<code>200</code>的代码即代表成功。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\">url = <span class=\"string\">'https://wallpaperplay.com/search?term=anime'</span></span><br><span class=\"line\">print(requests.get(url)) <span class=\"comment\"># &lt;Response [200]&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Status-Code\"><a href=\"#Status-Code\" class=\"headerlink\" title=\"Status Code\"></a>Status Code</h3><p>其他的<code>Status Code</code>比较常见的有<code>404</code>, 即代表请求错误。更详细的 HTTP status code 可以参考<a href=\"https://en.wikipedia.org/wiki/List_of_HTTP_status_codes\" target=\"_blank\" rel=\"noopener\">维基百科</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\">url = <span class=\"string\">'https://wallpaperplay.com/search?term=anime'</span></span><br><span class=\"line\">response = requests.get(url)</span><br><span class=\"line\">status = response.status_code</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> status:</span><br><span class=\"line\">    <span class=\"comment\"># ... do something</span></span><br><span class=\"line\">    print(<span class=\"string\">'Request successfully'</span>)</span><br><span class=\"line\"><span class=\"keyword\">else</span>:</span><br><span class=\"line\">    print(<span class=\"string\">'Request failed'</span>)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Content\"><a href=\"#Content\" class=\"headerlink\" title=\"Content\"></a>Content</h3><p>当我们对一个服务器发起请求时，我们通常是希望能够返回一些我们需要的数据。</p>\n<p>比如<a href=\"https://wallpaperplay.com/search?term=anime\" target=\"_blank\" rel=\"noopener\">这个壁纸网站</a>展示了很多二次元的高清壁纸，我们的目标就是想要获得该网站的所有内容, 那我们可以用<code>.content</code>或者<code>.text</code>方法来获取所有响应内容。<code>.content</code>返回内容格式需要我们首先转化为<code>utf-8</code>编码格式。</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-06-23%20170046.png?alt=media&token=fbb9f5bc-48f9-46fe-8a6f-6881e46ed47b\" alt=\"cs\">\n\n<br>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> reuqests</span><br><span class=\"line\">url = <span class=\"string\">'https://wallpaperplay.com/search?term=anime'</span></span><br><span class=\"line\">response = requests.get(url)</span><br><span class=\"line\">print(response.text)</span><br></pre></td></tr></table></figure>\n\n<p>打印的结果为</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Search result for anime<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"description\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"\"</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"shortcut icon\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"image/ico\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"/favicon.ico\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"csrf-token\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"SdGboAl48dNsvQhX9xAvY8oYzsDcReXqweWUNyrT\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">href</span>=<span class=\"string\">\"https://fonts.googleapis.com/css?family=Lobster|Roboto\"</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- ...... More ......--&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Headers\"><a href=\"#Headers\" class=\"headerlink\" title=\"Headers\"></a>Headers</h3><p>请求头可以返回响应内容的类型，我们在爬虫的时候更多的是伪造请求头/</p>\n<p><code>request.get()</code>第二个参数就可以接受一个<code>dict</code>类型的请求头。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">headers = &#123;</span><br><span class=\"line\">    <span class=\"string\">'User-Agent'</span>: <span class=\"string\">'Aweme 10.3.0 rv:103020 (iPhone; iOS 12.2; en_CA) Cronet'</span>,</span><br><span class=\"line\">    <span class=\"string\">'Accept-Encoding'</span>: <span class=\"string\">'gzip, deflate, br'</span>,</span><br><span class=\"line\">    <span class=\"string\">'Host'</span>: <span class=\"string\">'api3-core-c-lq.amemv.com'</span>,</span><br><span class=\"line\">    <span class=\"string\">'Connection'</span>: <span class=\"string\">'keep-alive'</span>,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">url = <span class=\"string\">'someurlyourequest'</span></span><br><span class=\"line\"></span><br><span class=\"line\">response = requests.get(url, headers=headers).content</span><br></pre></td></tr></table></figure>\n"},{"title":"数据通信课程笔记","date":"2020-06-20T19:25:43.000Z","cover":"https://wallpaperplay.com/walls/full/b/1/e/42765.jpg","_content":"\n> 暑假报了一门数据通信课程，本就是一门比较难理解的课程，我们的老师，Chi 让这门难上加难。简直不敢相信还有人粗体斜体下划线一齐上用在 ppt 上....但自己报的课，无论如何也要过...\n\n# Chapter 6: Multiplexing\n\n> Multiplexing(多路复用) is a set of techniques that allow the **simultaneous transmission** of multiple signals across a **single data link**\n\n即 Multiplexing 可以在一个信号传输的通道中传输**多路信号**的技术。\n\n## Multiplexing Categories\n\nThere are three categories of multiplexing: Frequency-division, Wavelength-division, and Time-division.\n\n### 1. Frequency-Division Multiplexing (FDM) 频分多路复用\n\nFDM is an analog multiplexing technique can can be applied when the bandwidth of a link is greater than the combined bandwidths of the signals to be transmitted. In addition, the signals from sending device will be separated to different carrier frequencies by sufficient bandwidth。\n\n就是说，FDM 可以将用于传输信道的总带宽**划分**成若干个子频道。同时，总频率带宽要大于所有子信道组合的贷款。\n\n#### Exercise 1\n\n> Assume that a voice channel occupies a bandwidth of 4kHz. We need to combine three voice channels into a link with a bandwidth of 12kHz, from 20 to 32 kHz. Show the FDM confirguration, assuming there are no guard bands\n\n首先们需要组合 3 个语音频道的信号到一个总传输通道。总传输通道带宽为 12kHz，范围在 20-32kHz。那么每个子频道的带宽即为 4kHz(其实题目已经给了)。我们同时可以得出每个子频道的范围为 4kHz, 所有得出 20-24kHz, 24-28kHz, 28-32kHz。\n\n#### Exercise 2\n\n> Five channels, each with a 100 kHz bandwidth, are to be multiplexed together. What is the minimum bandwidth of the link if there is a need for a guard band of 10 kHz between the channels to prevent interference?\n\n首先 5 个子频道每个带宽为 100kHz, 于是我们可以得出子频道组合需要的带宽为 `5x100 = 500kHz`。\n\n然后每个子频道需要有一个`guard band`为 10kHz。那么总共 guard band 所需要的带宽为`(n-1) * 10kHz = (5 - 1) * 10kHz = 40kHz`。最后相加即可得出所需带宽为`500kHz + 40kHz`为`540kHz`。\n\n#### Exercise 3\n\n> Four digital data channels, each transmitting at 1Mbps, use a satellite channel of 1MHz. Design an appropriate FDM confirguration\n\n给定 4 个信号数据频道，每个频道传输 1Mbps。于是每个频道需要的带宽为`1MHz / 4 - 250kHz`。\n\n### Wavelength-Division Multiplexing (WDM) 波分复用\n\nWDM is an analog multiplexing technique used to combine **optical signals** to take advantage of the high data rate capability of **fiber optic cable**\n\n简单来说，WDM 就是通过组合多个不同的波长到一个单个光源。\n\n### Time-Division Multiplexing (TDM) 时分复用\n\nTDM, aka **synchronous**, aka **statistical** is a digital multiplexing technique that allows several connections to share the **high bandwidth of a link**\n\n时分复用是通过采用同一物理连接的**不同时段**来传输不同的信号以达到多路传输的目的。\n\n#### Exercise 1\n\n> Consider the following synchronous TDM system. The data rate for each input connection is 1kbps. If 1 bit at a time is multiplexed, answer the folllowing: 1. what is the duration of each input time slot? 2. What is the output time slot for each? 3. What is the output frame for each?\n\n1. What is the **duration** of each input time slot?\n   每个输入的 data rate 为 1kbps。如果每次有 1bit 复用。那么 duration 为`1bit / 1kbps = 1 millisecond`\n2. What is the **output time slot** for each connection?\n   从上题我们得出**input time slot**为`1 millisecond`。题中的 TDM system 有 3 个 input connections。那么每个 output time slot 均分即为 `1 / 3 millisecond`\n3. What is the **output frame** for each?\n   每个 frame 携带 3 个 output time slots。如上图，Frame 3 携带 C3, B3, A3。由此我们可得出每个 frame 的 duration 为`3 * 1/3 = 1 millisecond`\n\n#### Exercise 2\n\n> Consider the following synchronous TDM with a data stream for each input and adata stream for the output. 1 bit is multiplexed at a time. Determine the output bit rate and output frame rate.\n\n给定 4 个 input connections 且每个为 1 Mbps。Output bit rate 为`4 x 1 Mbps = 4 Mbps`\n\nOutput frame rate 等同于 input connection rate，即 1 M frames/second\n\n#### Exercise 3\n\n> Four channels are multiplexed using synchronous TDM. Each channel sends 100 bytes/s and we multiplex 1 byte per channel. Determine the size of the TDM frame, the TDM frame rate, the duration of a TDM frame and the bit rate for the link\n\n1. The size of the TDM frame\n   Each TDM frame carries 1 byte from each channel. Thus, the size of each TDM frame is 4 bytes\n2. The TDM frame rate\n   TDM frame rate 等同于 input connection rate。即 100 frames / seconds\n3. The duration of a TDM frame\n   `1 byte / 100bytes/s = 10 millisecond`\n4. The bit rate for the link\n   `100 * 4 * 8 = 3200bps`\n\n#### Exercise 4\n\n> We have four sources, each creating 250 8-bit characters per second. The interleaved unit is 1 character and 1 synchronizing bit is added to each TDM frame. Determine the data rate of each source, the duration of each character in each source, the TDM frame rate, the number of bits in each TDM frame, and the data rate of the link\n\n1. The data rate of each source\n   250 \\* 8 bit = 2000 bps\n2. The duration of each character in each source\n   Each source creating 250 characters per second. The duration of each character is 1 / 250s\n3. The TDM frame rate\n   The link needs to send 250 frames per second\n4. The number of bits in each TDM frame\n   Each frame carries 4 characters and 1 extra synchronizing bit. The number of bits in each TDM frame is (4x8)+1 = 33 bits\n5. The data rate of the link\n   The link sends 250 frames per second, and each frame contains 33 bits. The data rate of the link is 250 x 33 = 8250 bps\n\n# Chapter 8: Switching\n\n## Introduction\n\n> A switched network consists of a series of interlinked nodes called switches. Switches are devices capable of creating temporary connections between two or more devices linked to the switch\n\n### Three Methods of Switching\n\n1. Circuit Switching\n2. Packet Switching\n   - Virtual-circuit approach\n   - Datagram approach\n3. Message Switching\n\n## Circuit-switched Networks\n\n> A circuit-switched network consists of a set of switches connected by physical links, in which each link is divided into n channels\n\n### Phases\n\n1. Connection Setup\n   - Before the entities can communicate, a dedicated circuit needs to be established\n   - end-to-end addressing is required for creating a connection between the two end systems\n2. Data Transfer\n   - After establish the dedicated, two entities can transfer data\n3. Connection Teardown\n   - When one of the entities needs to disconnect, a signal is sent to each switch to release the resources\n\n### Efficiency\n\nNot as efficient as packet or message switched networks because resources are allocated for the **entire duration** of the connection\n\nHowever, the delay is **minimal** as the resource are allocated for the duration of the connection\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-06-27%20130744.png?alt=media&token=f1150738-ff43-4c5a-8abb-785c968a71d4\" />\n\n## Packet Switching\n\n> In data communications, we need to send messages from one end system to another. If the message is going to pass through a **packet-switched** network, the message needs to be divided into packets of fixed or variable size.\n\nHowever, resource are allocated on-demand on a first-come, first served basis.\n\n### 1. Datagram Networks\n\nIn a datagram network, each packet is treated independently of all others.\n\nDatagram switching is normally done at the network layer\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-06-27%20143510.png?alt=media&token=4384e092-b327-43a5-b532-888b53c8d00b\" />\n\n### 2. Virtual-Circuit Networks\n\nA virtual-circuit network is a cross between a circuit-switched network and a datagram network.\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-06-27%20143357.png?alt=media&token=24092371-ef1a-4f13-a128-26d40c665936\" />\n\n# Chapter 9: Introduction to Data-Link Layer\n\n## Introduction\n\n## Link-Layer Addressing\n\n> The Internet is a combination of networks glued together by connecting devices. If a packet is to travel from a host to another, it needs to pass through these networks\n","source":"_posts/15-data-comm.md","raw":"---\ntitle: 数据通信课程笔记\ndate: 2020-06-20 12:25:43\ntags: ['data communication', 'BCIT', 'notes']\ncategories: 'Notes'\ncover: 'https://wallpaperplay.com/walls/full/b/1/e/42765.jpg'\n---\n\n> 暑假报了一门数据通信课程，本就是一门比较难理解的课程，我们的老师，Chi 让这门难上加难。简直不敢相信还有人粗体斜体下划线一齐上用在 ppt 上....但自己报的课，无论如何也要过...\n\n# Chapter 6: Multiplexing\n\n> Multiplexing(多路复用) is a set of techniques that allow the **simultaneous transmission** of multiple signals across a **single data link**\n\n即 Multiplexing 可以在一个信号传输的通道中传输**多路信号**的技术。\n\n## Multiplexing Categories\n\nThere are three categories of multiplexing: Frequency-division, Wavelength-division, and Time-division.\n\n### 1. Frequency-Division Multiplexing (FDM) 频分多路复用\n\nFDM is an analog multiplexing technique can can be applied when the bandwidth of a link is greater than the combined bandwidths of the signals to be transmitted. In addition, the signals from sending device will be separated to different carrier frequencies by sufficient bandwidth。\n\n就是说，FDM 可以将用于传输信道的总带宽**划分**成若干个子频道。同时，总频率带宽要大于所有子信道组合的贷款。\n\n#### Exercise 1\n\n> Assume that a voice channel occupies a bandwidth of 4kHz. We need to combine three voice channels into a link with a bandwidth of 12kHz, from 20 to 32 kHz. Show the FDM confirguration, assuming there are no guard bands\n\n首先们需要组合 3 个语音频道的信号到一个总传输通道。总传输通道带宽为 12kHz，范围在 20-32kHz。那么每个子频道的带宽即为 4kHz(其实题目已经给了)。我们同时可以得出每个子频道的范围为 4kHz, 所有得出 20-24kHz, 24-28kHz, 28-32kHz。\n\n#### Exercise 2\n\n> Five channels, each with a 100 kHz bandwidth, are to be multiplexed together. What is the minimum bandwidth of the link if there is a need for a guard band of 10 kHz between the channels to prevent interference?\n\n首先 5 个子频道每个带宽为 100kHz, 于是我们可以得出子频道组合需要的带宽为 `5x100 = 500kHz`。\n\n然后每个子频道需要有一个`guard band`为 10kHz。那么总共 guard band 所需要的带宽为`(n-1) * 10kHz = (5 - 1) * 10kHz = 40kHz`。最后相加即可得出所需带宽为`500kHz + 40kHz`为`540kHz`。\n\n#### Exercise 3\n\n> Four digital data channels, each transmitting at 1Mbps, use a satellite channel of 1MHz. Design an appropriate FDM confirguration\n\n给定 4 个信号数据频道，每个频道传输 1Mbps。于是每个频道需要的带宽为`1MHz / 4 - 250kHz`。\n\n### Wavelength-Division Multiplexing (WDM) 波分复用\n\nWDM is an analog multiplexing technique used to combine **optical signals** to take advantage of the high data rate capability of **fiber optic cable**\n\n简单来说，WDM 就是通过组合多个不同的波长到一个单个光源。\n\n### Time-Division Multiplexing (TDM) 时分复用\n\nTDM, aka **synchronous**, aka **statistical** is a digital multiplexing technique that allows several connections to share the **high bandwidth of a link**\n\n时分复用是通过采用同一物理连接的**不同时段**来传输不同的信号以达到多路传输的目的。\n\n#### Exercise 1\n\n> Consider the following synchronous TDM system. The data rate for each input connection is 1kbps. If 1 bit at a time is multiplexed, answer the folllowing: 1. what is the duration of each input time slot? 2. What is the output time slot for each? 3. What is the output frame for each?\n\n1. What is the **duration** of each input time slot?\n   每个输入的 data rate 为 1kbps。如果每次有 1bit 复用。那么 duration 为`1bit / 1kbps = 1 millisecond`\n2. What is the **output time slot** for each connection?\n   从上题我们得出**input time slot**为`1 millisecond`。题中的 TDM system 有 3 个 input connections。那么每个 output time slot 均分即为 `1 / 3 millisecond`\n3. What is the **output frame** for each?\n   每个 frame 携带 3 个 output time slots。如上图，Frame 3 携带 C3, B3, A3。由此我们可得出每个 frame 的 duration 为`3 * 1/3 = 1 millisecond`\n\n#### Exercise 2\n\n> Consider the following synchronous TDM with a data stream for each input and adata stream for the output. 1 bit is multiplexed at a time. Determine the output bit rate and output frame rate.\n\n给定 4 个 input connections 且每个为 1 Mbps。Output bit rate 为`4 x 1 Mbps = 4 Mbps`\n\nOutput frame rate 等同于 input connection rate，即 1 M frames/second\n\n#### Exercise 3\n\n> Four channels are multiplexed using synchronous TDM. Each channel sends 100 bytes/s and we multiplex 1 byte per channel. Determine the size of the TDM frame, the TDM frame rate, the duration of a TDM frame and the bit rate for the link\n\n1. The size of the TDM frame\n   Each TDM frame carries 1 byte from each channel. Thus, the size of each TDM frame is 4 bytes\n2. The TDM frame rate\n   TDM frame rate 等同于 input connection rate。即 100 frames / seconds\n3. The duration of a TDM frame\n   `1 byte / 100bytes/s = 10 millisecond`\n4. The bit rate for the link\n   `100 * 4 * 8 = 3200bps`\n\n#### Exercise 4\n\n> We have four sources, each creating 250 8-bit characters per second. The interleaved unit is 1 character and 1 synchronizing bit is added to each TDM frame. Determine the data rate of each source, the duration of each character in each source, the TDM frame rate, the number of bits in each TDM frame, and the data rate of the link\n\n1. The data rate of each source\n   250 \\* 8 bit = 2000 bps\n2. The duration of each character in each source\n   Each source creating 250 characters per second. The duration of each character is 1 / 250s\n3. The TDM frame rate\n   The link needs to send 250 frames per second\n4. The number of bits in each TDM frame\n   Each frame carries 4 characters and 1 extra synchronizing bit. The number of bits in each TDM frame is (4x8)+1 = 33 bits\n5. The data rate of the link\n   The link sends 250 frames per second, and each frame contains 33 bits. The data rate of the link is 250 x 33 = 8250 bps\n\n# Chapter 8: Switching\n\n## Introduction\n\n> A switched network consists of a series of interlinked nodes called switches. Switches are devices capable of creating temporary connections between two or more devices linked to the switch\n\n### Three Methods of Switching\n\n1. Circuit Switching\n2. Packet Switching\n   - Virtual-circuit approach\n   - Datagram approach\n3. Message Switching\n\n## Circuit-switched Networks\n\n> A circuit-switched network consists of a set of switches connected by physical links, in which each link is divided into n channels\n\n### Phases\n\n1. Connection Setup\n   - Before the entities can communicate, a dedicated circuit needs to be established\n   - end-to-end addressing is required for creating a connection between the two end systems\n2. Data Transfer\n   - After establish the dedicated, two entities can transfer data\n3. Connection Teardown\n   - When one of the entities needs to disconnect, a signal is sent to each switch to release the resources\n\n### Efficiency\n\nNot as efficient as packet or message switched networks because resources are allocated for the **entire duration** of the connection\n\nHowever, the delay is **minimal** as the resource are allocated for the duration of the connection\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-06-27%20130744.png?alt=media&token=f1150738-ff43-4c5a-8abb-785c968a71d4\" />\n\n## Packet Switching\n\n> In data communications, we need to send messages from one end system to another. If the message is going to pass through a **packet-switched** network, the message needs to be divided into packets of fixed or variable size.\n\nHowever, resource are allocated on-demand on a first-come, first served basis.\n\n### 1. Datagram Networks\n\nIn a datagram network, each packet is treated independently of all others.\n\nDatagram switching is normally done at the network layer\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-06-27%20143510.png?alt=media&token=4384e092-b327-43a5-b532-888b53c8d00b\" />\n\n### 2. Virtual-Circuit Networks\n\nA virtual-circuit network is a cross between a circuit-switched network and a datagram network.\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-06-27%20143357.png?alt=media&token=24092371-ef1a-4f13-a128-26d40c665936\" />\n\n# Chapter 9: Introduction to Data-Link Layer\n\n## Introduction\n\n## Link-Layer Addressing\n\n> The Internet is a combination of networks glued together by connecting devices. If a packet is to travel from a host to another, it needs to pass through these networks\n","slug":"15-data-comm","published":1,"updated":"2020-07-03T19:31:46.476Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckdnmttdc0016rwui6tys1w1c","content":"<blockquote>\n<p>暑假报了一门数据通信课程，本就是一门比较难理解的课程，我们的老师，Chi 让这门难上加难。简直不敢相信还有人粗体斜体下划线一齐上用在 ppt 上….但自己报的课，无论如何也要过…</p>\n</blockquote>\n<h1 id=\"Chapter-6-Multiplexing\"><a href=\"#Chapter-6-Multiplexing\" class=\"headerlink\" title=\"Chapter 6: Multiplexing\"></a>Chapter 6: Multiplexing</h1><blockquote>\n<p>Multiplexing(多路复用) is a set of techniques that allow the <strong>simultaneous transmission</strong> of multiple signals across a <strong>single data link</strong></p>\n</blockquote>\n<p>即 Multiplexing 可以在一个信号传输的通道中传输<strong>多路信号</strong>的技术。</p>\n<h2 id=\"Multiplexing-Categories\"><a href=\"#Multiplexing-Categories\" class=\"headerlink\" title=\"Multiplexing Categories\"></a>Multiplexing Categories</h2><p>There are three categories of multiplexing: Frequency-division, Wavelength-division, and Time-division.</p>\n<h3 id=\"1-Frequency-Division-Multiplexing-FDM-频分多路复用\"><a href=\"#1-Frequency-Division-Multiplexing-FDM-频分多路复用\" class=\"headerlink\" title=\"1. Frequency-Division Multiplexing (FDM) 频分多路复用\"></a>1. Frequency-Division Multiplexing (FDM) 频分多路复用</h3><p>FDM is an analog multiplexing technique can can be applied when the bandwidth of a link is greater than the combined bandwidths of the signals to be transmitted. In addition, the signals from sending device will be separated to different carrier frequencies by sufficient bandwidth。</p>\n<p>就是说，FDM 可以将用于传输信道的总带宽<strong>划分</strong>成若干个子频道。同时，总频率带宽要大于所有子信道组合的贷款。</p>\n<h4 id=\"Exercise-1\"><a href=\"#Exercise-1\" class=\"headerlink\" title=\"Exercise 1\"></a>Exercise 1</h4><blockquote>\n<p>Assume that a voice channel occupies a bandwidth of 4kHz. We need to combine three voice channels into a link with a bandwidth of 12kHz, from 20 to 32 kHz. Show the FDM confirguration, assuming there are no guard bands</p>\n</blockquote>\n<p>首先们需要组合 3 个语音频道的信号到一个总传输通道。总传输通道带宽为 12kHz，范围在 20-32kHz。那么每个子频道的带宽即为 4kHz(其实题目已经给了)。我们同时可以得出每个子频道的范围为 4kHz, 所有得出 20-24kHz, 24-28kHz, 28-32kHz。</p>\n<h4 id=\"Exercise-2\"><a href=\"#Exercise-2\" class=\"headerlink\" title=\"Exercise 2\"></a>Exercise 2</h4><blockquote>\n<p>Five channels, each with a 100 kHz bandwidth, are to be multiplexed together. What is the minimum bandwidth of the link if there is a need for a guard band of 10 kHz between the channels to prevent interference?</p>\n</blockquote>\n<p>首先 5 个子频道每个带宽为 100kHz, 于是我们可以得出子频道组合需要的带宽为 <code>5x100 = 500kHz</code>。</p>\n<p>然后每个子频道需要有一个<code>guard band</code>为 10kHz。那么总共 guard band 所需要的带宽为<code>(n-1) * 10kHz = (5 - 1) * 10kHz = 40kHz</code>。最后相加即可得出所需带宽为<code>500kHz + 40kHz</code>为<code>540kHz</code>。</p>\n<h4 id=\"Exercise-3\"><a href=\"#Exercise-3\" class=\"headerlink\" title=\"Exercise 3\"></a>Exercise 3</h4><blockquote>\n<p>Four digital data channels, each transmitting at 1Mbps, use a satellite channel of 1MHz. Design an appropriate FDM confirguration</p>\n</blockquote>\n<p>给定 4 个信号数据频道，每个频道传输 1Mbps。于是每个频道需要的带宽为<code>1MHz / 4 - 250kHz</code>。</p>\n<h3 id=\"Wavelength-Division-Multiplexing-WDM-波分复用\"><a href=\"#Wavelength-Division-Multiplexing-WDM-波分复用\" class=\"headerlink\" title=\"Wavelength-Division Multiplexing (WDM) 波分复用\"></a>Wavelength-Division Multiplexing (WDM) 波分复用</h3><p>WDM is an analog multiplexing technique used to combine <strong>optical signals</strong> to take advantage of the high data rate capability of <strong>fiber optic cable</strong></p>\n<p>简单来说，WDM 就是通过组合多个不同的波长到一个单个光源。</p>\n<h3 id=\"Time-Division-Multiplexing-TDM-时分复用\"><a href=\"#Time-Division-Multiplexing-TDM-时分复用\" class=\"headerlink\" title=\"Time-Division Multiplexing (TDM) 时分复用\"></a>Time-Division Multiplexing (TDM) 时分复用</h3><p>TDM, aka <strong>synchronous</strong>, aka <strong>statistical</strong> is a digital multiplexing technique that allows several connections to share the <strong>high bandwidth of a link</strong></p>\n<p>时分复用是通过采用同一物理连接的<strong>不同时段</strong>来传输不同的信号以达到多路传输的目的。</p>\n<h4 id=\"Exercise-1-1\"><a href=\"#Exercise-1-1\" class=\"headerlink\" title=\"Exercise 1\"></a>Exercise 1</h4><blockquote>\n<p>Consider the following synchronous TDM system. The data rate for each input connection is 1kbps. If 1 bit at a time is multiplexed, answer the folllowing: 1. what is the duration of each input time slot? 2. What is the output time slot for each? 3. What is the output frame for each?</p>\n</blockquote>\n<ol>\n<li>What is the <strong>duration</strong> of each input time slot?<br>每个输入的 data rate 为 1kbps。如果每次有 1bit 复用。那么 duration 为<code>1bit / 1kbps = 1 millisecond</code></li>\n<li>What is the <strong>output time slot</strong> for each connection?<br>从上题我们得出<strong>input time slot</strong>为<code>1 millisecond</code>。题中的 TDM system 有 3 个 input connections。那么每个 output time slot 均分即为 <code>1 / 3 millisecond</code></li>\n<li>What is the <strong>output frame</strong> for each?<br>每个 frame 携带 3 个 output time slots。如上图，Frame 3 携带 C3, B3, A3。由此我们可得出每个 frame 的 duration 为<code>3 * 1/3 = 1 millisecond</code></li>\n</ol>\n<h4 id=\"Exercise-2-1\"><a href=\"#Exercise-2-1\" class=\"headerlink\" title=\"Exercise 2\"></a>Exercise 2</h4><blockquote>\n<p>Consider the following synchronous TDM with a data stream for each input and adata stream for the output. 1 bit is multiplexed at a time. Determine the output bit rate and output frame rate.</p>\n</blockquote>\n<p>给定 4 个 input connections 且每个为 1 Mbps。Output bit rate 为<code>4 x 1 Mbps = 4 Mbps</code></p>\n<p>Output frame rate 等同于 input connection rate，即 1 M frames/second</p>\n<h4 id=\"Exercise-3-1\"><a href=\"#Exercise-3-1\" class=\"headerlink\" title=\"Exercise 3\"></a>Exercise 3</h4><blockquote>\n<p>Four channels are multiplexed using synchronous TDM. Each channel sends 100 bytes/s and we multiplex 1 byte per channel. Determine the size of the TDM frame, the TDM frame rate, the duration of a TDM frame and the bit rate for the link</p>\n</blockquote>\n<ol>\n<li>The size of the TDM frame<br>Each TDM frame carries 1 byte from each channel. Thus, the size of each TDM frame is 4 bytes</li>\n<li>The TDM frame rate<br>TDM frame rate 等同于 input connection rate。即 100 frames / seconds</li>\n<li>The duration of a TDM frame<br><code>1 byte / 100bytes/s = 10 millisecond</code></li>\n<li>The bit rate for the link<br><code>100 * 4 * 8 = 3200bps</code></li>\n</ol>\n<h4 id=\"Exercise-4\"><a href=\"#Exercise-4\" class=\"headerlink\" title=\"Exercise 4\"></a>Exercise 4</h4><blockquote>\n<p>We have four sources, each creating 250 8-bit characters per second. The interleaved unit is 1 character and 1 synchronizing bit is added to each TDM frame. Determine the data rate of each source, the duration of each character in each source, the TDM frame rate, the number of bits in each TDM frame, and the data rate of the link</p>\n</blockquote>\n<ol>\n<li>The data rate of each source<br>250 * 8 bit = 2000 bps</li>\n<li>The duration of each character in each source<br>Each source creating 250 characters per second. The duration of each character is 1 / 250s</li>\n<li>The TDM frame rate<br>The link needs to send 250 frames per second</li>\n<li>The number of bits in each TDM frame<br>Each frame carries 4 characters and 1 extra synchronizing bit. The number of bits in each TDM frame is (4x8)+1 = 33 bits</li>\n<li>The data rate of the link<br>The link sends 250 frames per second, and each frame contains 33 bits. The data rate of the link is 250 x 33 = 8250 bps</li>\n</ol>\n<h1 id=\"Chapter-8-Switching\"><a href=\"#Chapter-8-Switching\" class=\"headerlink\" title=\"Chapter 8: Switching\"></a>Chapter 8: Switching</h1><h2 id=\"Introduction\"><a href=\"#Introduction\" class=\"headerlink\" title=\"Introduction\"></a>Introduction</h2><blockquote>\n<p>A switched network consists of a series of interlinked nodes called switches. Switches are devices capable of creating temporary connections between two or more devices linked to the switch</p>\n</blockquote>\n<h3 id=\"Three-Methods-of-Switching\"><a href=\"#Three-Methods-of-Switching\" class=\"headerlink\" title=\"Three Methods of Switching\"></a>Three Methods of Switching</h3><ol>\n<li>Circuit Switching</li>\n<li>Packet Switching<ul>\n<li>Virtual-circuit approach</li>\n<li>Datagram approach</li>\n</ul>\n</li>\n<li>Message Switching</li>\n</ol>\n<h2 id=\"Circuit-switched-Networks\"><a href=\"#Circuit-switched-Networks\" class=\"headerlink\" title=\"Circuit-switched Networks\"></a>Circuit-switched Networks</h2><blockquote>\n<p>A circuit-switched network consists of a set of switches connected by physical links, in which each link is divided into n channels</p>\n</blockquote>\n<h3 id=\"Phases\"><a href=\"#Phases\" class=\"headerlink\" title=\"Phases\"></a>Phases</h3><ol>\n<li>Connection Setup<ul>\n<li>Before the entities can communicate, a dedicated circuit needs to be established</li>\n<li>end-to-end addressing is required for creating a connection between the two end systems</li>\n</ul>\n</li>\n<li>Data Transfer<ul>\n<li>After establish the dedicated, two entities can transfer data</li>\n</ul>\n</li>\n<li>Connection Teardown<ul>\n<li>When one of the entities needs to disconnect, a signal is sent to each switch to release the resources</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"Efficiency\"><a href=\"#Efficiency\" class=\"headerlink\" title=\"Efficiency\"></a>Efficiency</h3><p>Not as efficient as packet or message switched networks because resources are allocated for the <strong>entire duration</strong> of the connection</p>\n<p>However, the delay is <strong>minimal</strong> as the resource are allocated for the duration of the connection</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-06-27%20130744.png?alt=media&token=f1150738-ff43-4c5a-8abb-785c968a71d4\">\n\n<h2 id=\"Packet-Switching\"><a href=\"#Packet-Switching\" class=\"headerlink\" title=\"Packet Switching\"></a>Packet Switching</h2><blockquote>\n<p>In data communications, we need to send messages from one end system to another. If the message is going to pass through a <strong>packet-switched</strong> network, the message needs to be divided into packets of fixed or variable size.</p>\n</blockquote>\n<p>However, resource are allocated on-demand on a first-come, first served basis.</p>\n<h3 id=\"1-Datagram-Networks\"><a href=\"#1-Datagram-Networks\" class=\"headerlink\" title=\"1. Datagram Networks\"></a>1. Datagram Networks</h3><p>In a datagram network, each packet is treated independently of all others.</p>\n<p>Datagram switching is normally done at the network layer</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-06-27%20143510.png?alt=media&token=4384e092-b327-43a5-b532-888b53c8d00b\">\n\n<h3 id=\"2-Virtual-Circuit-Networks\"><a href=\"#2-Virtual-Circuit-Networks\" class=\"headerlink\" title=\"2. Virtual-Circuit Networks\"></a>2. Virtual-Circuit Networks</h3><p>A virtual-circuit network is a cross between a circuit-switched network and a datagram network.</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-06-27%20143357.png?alt=media&token=24092371-ef1a-4f13-a128-26d40c665936\">\n\n<h1 id=\"Chapter-9-Introduction-to-Data-Link-Layer\"><a href=\"#Chapter-9-Introduction-to-Data-Link-Layer\" class=\"headerlink\" title=\"Chapter 9: Introduction to Data-Link Layer\"></a>Chapter 9: Introduction to Data-Link Layer</h1><h2 id=\"Introduction-1\"><a href=\"#Introduction-1\" class=\"headerlink\" title=\"Introduction\"></a>Introduction</h2><h2 id=\"Link-Layer-Addressing\"><a href=\"#Link-Layer-Addressing\" class=\"headerlink\" title=\"Link-Layer Addressing\"></a>Link-Layer Addressing</h2><blockquote>\n<p>The Internet is a combination of networks glued together by connecting devices. If a packet is to travel from a host to another, it needs to pass through these networks</p>\n</blockquote>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"","more":"<blockquote>\n<p>暑假报了一门数据通信课程，本就是一门比较难理解的课程，我们的老师，Chi 让这门难上加难。简直不敢相信还有人粗体斜体下划线一齐上用在 ppt 上….但自己报的课，无论如何也要过…</p>\n</blockquote>\n<h1 id=\"Chapter-6-Multiplexing\"><a href=\"#Chapter-6-Multiplexing\" class=\"headerlink\" title=\"Chapter 6: Multiplexing\"></a>Chapter 6: Multiplexing</h1><blockquote>\n<p>Multiplexing(多路复用) is a set of techniques that allow the <strong>simultaneous transmission</strong> of multiple signals across a <strong>single data link</strong></p>\n</blockquote>\n<p>即 Multiplexing 可以在一个信号传输的通道中传输<strong>多路信号</strong>的技术。</p>\n<h2 id=\"Multiplexing-Categories\"><a href=\"#Multiplexing-Categories\" class=\"headerlink\" title=\"Multiplexing Categories\"></a>Multiplexing Categories</h2><p>There are three categories of multiplexing: Frequency-division, Wavelength-division, and Time-division.</p>\n<h3 id=\"1-Frequency-Division-Multiplexing-FDM-频分多路复用\"><a href=\"#1-Frequency-Division-Multiplexing-FDM-频分多路复用\" class=\"headerlink\" title=\"1. Frequency-Division Multiplexing (FDM) 频分多路复用\"></a>1. Frequency-Division Multiplexing (FDM) 频分多路复用</h3><p>FDM is an analog multiplexing technique can can be applied when the bandwidth of a link is greater than the combined bandwidths of the signals to be transmitted. In addition, the signals from sending device will be separated to different carrier frequencies by sufficient bandwidth。</p>\n<p>就是说，FDM 可以将用于传输信道的总带宽<strong>划分</strong>成若干个子频道。同时，总频率带宽要大于所有子信道组合的贷款。</p>\n<h4 id=\"Exercise-1\"><a href=\"#Exercise-1\" class=\"headerlink\" title=\"Exercise 1\"></a>Exercise 1</h4><blockquote>\n<p>Assume that a voice channel occupies a bandwidth of 4kHz. We need to combine three voice channels into a link with a bandwidth of 12kHz, from 20 to 32 kHz. Show the FDM confirguration, assuming there are no guard bands</p>\n</blockquote>\n<p>首先们需要组合 3 个语音频道的信号到一个总传输通道。总传输通道带宽为 12kHz，范围在 20-32kHz。那么每个子频道的带宽即为 4kHz(其实题目已经给了)。我们同时可以得出每个子频道的范围为 4kHz, 所有得出 20-24kHz, 24-28kHz, 28-32kHz。</p>\n<h4 id=\"Exercise-2\"><a href=\"#Exercise-2\" class=\"headerlink\" title=\"Exercise 2\"></a>Exercise 2</h4><blockquote>\n<p>Five channels, each with a 100 kHz bandwidth, are to be multiplexed together. What is the minimum bandwidth of the link if there is a need for a guard band of 10 kHz between the channels to prevent interference?</p>\n</blockquote>\n<p>首先 5 个子频道每个带宽为 100kHz, 于是我们可以得出子频道组合需要的带宽为 <code>5x100 = 500kHz</code>。</p>\n<p>然后每个子频道需要有一个<code>guard band</code>为 10kHz。那么总共 guard band 所需要的带宽为<code>(n-1) * 10kHz = (5 - 1) * 10kHz = 40kHz</code>。最后相加即可得出所需带宽为<code>500kHz + 40kHz</code>为<code>540kHz</code>。</p>\n<h4 id=\"Exercise-3\"><a href=\"#Exercise-3\" class=\"headerlink\" title=\"Exercise 3\"></a>Exercise 3</h4><blockquote>\n<p>Four digital data channels, each transmitting at 1Mbps, use a satellite channel of 1MHz. Design an appropriate FDM confirguration</p>\n</blockquote>\n<p>给定 4 个信号数据频道，每个频道传输 1Mbps。于是每个频道需要的带宽为<code>1MHz / 4 - 250kHz</code>。</p>\n<h3 id=\"Wavelength-Division-Multiplexing-WDM-波分复用\"><a href=\"#Wavelength-Division-Multiplexing-WDM-波分复用\" class=\"headerlink\" title=\"Wavelength-Division Multiplexing (WDM) 波分复用\"></a>Wavelength-Division Multiplexing (WDM) 波分复用</h3><p>WDM is an analog multiplexing technique used to combine <strong>optical signals</strong> to take advantage of the high data rate capability of <strong>fiber optic cable</strong></p>\n<p>简单来说，WDM 就是通过组合多个不同的波长到一个单个光源。</p>\n<h3 id=\"Time-Division-Multiplexing-TDM-时分复用\"><a href=\"#Time-Division-Multiplexing-TDM-时分复用\" class=\"headerlink\" title=\"Time-Division Multiplexing (TDM) 时分复用\"></a>Time-Division Multiplexing (TDM) 时分复用</h3><p>TDM, aka <strong>synchronous</strong>, aka <strong>statistical</strong> is a digital multiplexing technique that allows several connections to share the <strong>high bandwidth of a link</strong></p>\n<p>时分复用是通过采用同一物理连接的<strong>不同时段</strong>来传输不同的信号以达到多路传输的目的。</p>\n<h4 id=\"Exercise-1-1\"><a href=\"#Exercise-1-1\" class=\"headerlink\" title=\"Exercise 1\"></a>Exercise 1</h4><blockquote>\n<p>Consider the following synchronous TDM system. The data rate for each input connection is 1kbps. If 1 bit at a time is multiplexed, answer the folllowing: 1. what is the duration of each input time slot? 2. What is the output time slot for each? 3. What is the output frame for each?</p>\n</blockquote>\n<ol>\n<li>What is the <strong>duration</strong> of each input time slot?<br>每个输入的 data rate 为 1kbps。如果每次有 1bit 复用。那么 duration 为<code>1bit / 1kbps = 1 millisecond</code></li>\n<li>What is the <strong>output time slot</strong> for each connection?<br>从上题我们得出<strong>input time slot</strong>为<code>1 millisecond</code>。题中的 TDM system 有 3 个 input connections。那么每个 output time slot 均分即为 <code>1 / 3 millisecond</code></li>\n<li>What is the <strong>output frame</strong> for each?<br>每个 frame 携带 3 个 output time slots。如上图，Frame 3 携带 C3, B3, A3。由此我们可得出每个 frame 的 duration 为<code>3 * 1/3 = 1 millisecond</code></li>\n</ol>\n<h4 id=\"Exercise-2-1\"><a href=\"#Exercise-2-1\" class=\"headerlink\" title=\"Exercise 2\"></a>Exercise 2</h4><blockquote>\n<p>Consider the following synchronous TDM with a data stream for each input and adata stream for the output. 1 bit is multiplexed at a time. Determine the output bit rate and output frame rate.</p>\n</blockquote>\n<p>给定 4 个 input connections 且每个为 1 Mbps。Output bit rate 为<code>4 x 1 Mbps = 4 Mbps</code></p>\n<p>Output frame rate 等同于 input connection rate，即 1 M frames/second</p>\n<h4 id=\"Exercise-3-1\"><a href=\"#Exercise-3-1\" class=\"headerlink\" title=\"Exercise 3\"></a>Exercise 3</h4><blockquote>\n<p>Four channels are multiplexed using synchronous TDM. Each channel sends 100 bytes/s and we multiplex 1 byte per channel. Determine the size of the TDM frame, the TDM frame rate, the duration of a TDM frame and the bit rate for the link</p>\n</blockquote>\n<ol>\n<li>The size of the TDM frame<br>Each TDM frame carries 1 byte from each channel. Thus, the size of each TDM frame is 4 bytes</li>\n<li>The TDM frame rate<br>TDM frame rate 等同于 input connection rate。即 100 frames / seconds</li>\n<li>The duration of a TDM frame<br><code>1 byte / 100bytes/s = 10 millisecond</code></li>\n<li>The bit rate for the link<br><code>100 * 4 * 8 = 3200bps</code></li>\n</ol>\n<h4 id=\"Exercise-4\"><a href=\"#Exercise-4\" class=\"headerlink\" title=\"Exercise 4\"></a>Exercise 4</h4><blockquote>\n<p>We have four sources, each creating 250 8-bit characters per second. The interleaved unit is 1 character and 1 synchronizing bit is added to each TDM frame. Determine the data rate of each source, the duration of each character in each source, the TDM frame rate, the number of bits in each TDM frame, and the data rate of the link</p>\n</blockquote>\n<ol>\n<li>The data rate of each source<br>250 * 8 bit = 2000 bps</li>\n<li>The duration of each character in each source<br>Each source creating 250 characters per second. The duration of each character is 1 / 250s</li>\n<li>The TDM frame rate<br>The link needs to send 250 frames per second</li>\n<li>The number of bits in each TDM frame<br>Each frame carries 4 characters and 1 extra synchronizing bit. The number of bits in each TDM frame is (4x8)+1 = 33 bits</li>\n<li>The data rate of the link<br>The link sends 250 frames per second, and each frame contains 33 bits. The data rate of the link is 250 x 33 = 8250 bps</li>\n</ol>\n<h1 id=\"Chapter-8-Switching\"><a href=\"#Chapter-8-Switching\" class=\"headerlink\" title=\"Chapter 8: Switching\"></a>Chapter 8: Switching</h1><h2 id=\"Introduction\"><a href=\"#Introduction\" class=\"headerlink\" title=\"Introduction\"></a>Introduction</h2><blockquote>\n<p>A switched network consists of a series of interlinked nodes called switches. Switches are devices capable of creating temporary connections between two or more devices linked to the switch</p>\n</blockquote>\n<h3 id=\"Three-Methods-of-Switching\"><a href=\"#Three-Methods-of-Switching\" class=\"headerlink\" title=\"Three Methods of Switching\"></a>Three Methods of Switching</h3><ol>\n<li>Circuit Switching</li>\n<li>Packet Switching<ul>\n<li>Virtual-circuit approach</li>\n<li>Datagram approach</li>\n</ul>\n</li>\n<li>Message Switching</li>\n</ol>\n<h2 id=\"Circuit-switched-Networks\"><a href=\"#Circuit-switched-Networks\" class=\"headerlink\" title=\"Circuit-switched Networks\"></a>Circuit-switched Networks</h2><blockquote>\n<p>A circuit-switched network consists of a set of switches connected by physical links, in which each link is divided into n channels</p>\n</blockquote>\n<h3 id=\"Phases\"><a href=\"#Phases\" class=\"headerlink\" title=\"Phases\"></a>Phases</h3><ol>\n<li>Connection Setup<ul>\n<li>Before the entities can communicate, a dedicated circuit needs to be established</li>\n<li>end-to-end addressing is required for creating a connection between the two end systems</li>\n</ul>\n</li>\n<li>Data Transfer<ul>\n<li>After establish the dedicated, two entities can transfer data</li>\n</ul>\n</li>\n<li>Connection Teardown<ul>\n<li>When one of the entities needs to disconnect, a signal is sent to each switch to release the resources</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"Efficiency\"><a href=\"#Efficiency\" class=\"headerlink\" title=\"Efficiency\"></a>Efficiency</h3><p>Not as efficient as packet or message switched networks because resources are allocated for the <strong>entire duration</strong> of the connection</p>\n<p>However, the delay is <strong>minimal</strong> as the resource are allocated for the duration of the connection</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-06-27%20130744.png?alt=media&token=f1150738-ff43-4c5a-8abb-785c968a71d4\">\n\n<h2 id=\"Packet-Switching\"><a href=\"#Packet-Switching\" class=\"headerlink\" title=\"Packet Switching\"></a>Packet Switching</h2><blockquote>\n<p>In data communications, we need to send messages from one end system to another. If the message is going to pass through a <strong>packet-switched</strong> network, the message needs to be divided into packets of fixed or variable size.</p>\n</blockquote>\n<p>However, resource are allocated on-demand on a first-come, first served basis.</p>\n<h3 id=\"1-Datagram-Networks\"><a href=\"#1-Datagram-Networks\" class=\"headerlink\" title=\"1. Datagram Networks\"></a>1. Datagram Networks</h3><p>In a datagram network, each packet is treated independently of all others.</p>\n<p>Datagram switching is normally done at the network layer</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-06-27%20143510.png?alt=media&token=4384e092-b327-43a5-b532-888b53c8d00b\">\n\n<h3 id=\"2-Virtual-Circuit-Networks\"><a href=\"#2-Virtual-Circuit-Networks\" class=\"headerlink\" title=\"2. Virtual-Circuit Networks\"></a>2. Virtual-Circuit Networks</h3><p>A virtual-circuit network is a cross between a circuit-switched network and a datagram network.</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-06-27%20143357.png?alt=media&token=24092371-ef1a-4f13-a128-26d40c665936\">\n\n<h1 id=\"Chapter-9-Introduction-to-Data-Link-Layer\"><a href=\"#Chapter-9-Introduction-to-Data-Link-Layer\" class=\"headerlink\" title=\"Chapter 9: Introduction to Data-Link Layer\"></a>Chapter 9: Introduction to Data-Link Layer</h1><h2 id=\"Introduction-1\"><a href=\"#Introduction-1\" class=\"headerlink\" title=\"Introduction\"></a>Introduction</h2><h2 id=\"Link-Layer-Addressing\"><a href=\"#Link-Layer-Addressing\" class=\"headerlink\" title=\"Link-Layer Addressing\"></a>Link-Layer Addressing</h2><blockquote>\n<p>The Internet is a combination of networks glued together by connecting devices. If a packet is to travel from a host to another, it needs to pass through these networks</p>\n</blockquote>\n"},{"title":"如何用Vuepress写一个技术文档","date":"2020-07-01T06:57:53.000Z","cover":"https://d2jq2hx2dbkw6t.cloudfront.net/662/vue-press-feed-generator.jpg","_content":"\n> Recently I was building some React compoents and decided to write the documentation, since it's better to manage and keep everything in handy with so many properties.\n","source":"_posts/18-vuepress-doc.md","raw":"---\ntitle: 如何用Vuepress写一个技术文档\ndate: 2020-06-30 23:57:53\ntags: ['vuepress', 'documentation', 'articles']\ncategories: Notes\ncover: 'https://d2jq2hx2dbkw6t.cloudfront.net/662/vue-press-feed-generator.jpg'\n---\n\n> Recently I was building some React compoents and decided to write the documentation, since it's better to manage and keep everything in handy with so many properties.\n","slug":"18-vuepress-doc","published":1,"updated":"2020-07-03T19:35:24.210Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckdnmttdd001arwuianasctfe","content":"<blockquote>\n<p>Recently I was building some React compoents and decided to write the documentation, since it’s better to manage and keep everything in handy with so many properties.</p>\n</blockquote>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"","more":"<blockquote>\n<p>Recently I was building some React compoents and decided to write the documentation, since it’s better to manage and keep everything in handy with so many properties.</p>\n</blockquote>\n"},{"title":"Python爬虫之BeautifulSoup","date":"2020-07-01T07:06:00.000Z","cover":"https://camo.githubusercontent.com/7f296c12bff3c6f017c3304b37d03f4b41172174/68747470733a2f2f7374617469632e64617461736369656e6365646f6a6f2e636f6d2f77702d636f6e74656e742f75706c6f6164732f507974686f6e42656175746966756c536f75702d30342e706e67","_content":"\n> Life is short, use python\n\n# BeautifulSoup Library\n\n## Reformat HTML elements\n\nWe could using `request` library to get the HTML elements first and then use `BeautifulSoup` format the structures\n\n```Python\nimport requests\nfrom bs4 import BeautifulSoup\n\nurl = 'https://github.com/yang052513'\n\nresponse = requests.get(url).text\nhtml = BeautifulSoup(response, 'html.parser')\n\n# copy to a new html file\nwith open('demo.html', 'w', encoding='utf-8') as file:\n    file.write(str(html.prettify()))\n\n```\n\n## Element Tag Search and Find\n\n```Python\n# find the first p element and return as <p>some content</p>\nhtml.p\n\n# convert the first p element content to string as 'some content'\nhtml.p.string\n\n# return the first p element parent name, e.g. <div>\nhtml.p.parent.name\n\n# return the first p element parent content\nhtml.p.parent.string\n\n# return the first p element class name\nhtml.p['class']\n\n# find all the a tag element\nhtml.find_all('a')\n\n# find all the a tag element with id \"selector_id\"\nhtml.find_all(id=\"selector_id\")\n\n# find all the img tag with class name \"thumb_img\"\nhtml.find_all(\"img\", {\"class\": \"thumb_img\"})\n\n# get all the text from the html\nhtml.get_text()\n```\n","source":"_posts/19-python-bs4.md","raw":"---\ntitle: Python爬虫之BeautifulSoup\ndate: 2020-07-01 00:06:00\ntags: ['python', 'web crawler', 'notes', 'python-crawler-series']\ncategories: Python爬虫\ncover: 'https://camo.githubusercontent.com/7f296c12bff3c6f017c3304b37d03f4b41172174/68747470733a2f2f7374617469632e64617461736369656e6365646f6a6f2e636f6d2f77702d636f6e74656e742f75706c6f6164732f507974686f6e42656175746966756c536f75702d30342e706e67'\n---\n\n> Life is short, use python\n\n# BeautifulSoup Library\n\n## Reformat HTML elements\n\nWe could using `request` library to get the HTML elements first and then use `BeautifulSoup` format the structures\n\n```Python\nimport requests\nfrom bs4 import BeautifulSoup\n\nurl = 'https://github.com/yang052513'\n\nresponse = requests.get(url).text\nhtml = BeautifulSoup(response, 'html.parser')\n\n# copy to a new html file\nwith open('demo.html', 'w', encoding='utf-8') as file:\n    file.write(str(html.prettify()))\n\n```\n\n## Element Tag Search and Find\n\n```Python\n# find the first p element and return as <p>some content</p>\nhtml.p\n\n# convert the first p element content to string as 'some content'\nhtml.p.string\n\n# return the first p element parent name, e.g. <div>\nhtml.p.parent.name\n\n# return the first p element parent content\nhtml.p.parent.string\n\n# return the first p element class name\nhtml.p['class']\n\n# find all the a tag element\nhtml.find_all('a')\n\n# find all the a tag element with id \"selector_id\"\nhtml.find_all(id=\"selector_id\")\n\n# find all the img tag with class name \"thumb_img\"\nhtml.find_all(\"img\", {\"class\": \"thumb_img\"})\n\n# get all the text from the html\nhtml.get_text()\n```\n","slug":"19-python-bs4","published":1,"updated":"2020-07-03T19:38:07.308Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckdnmttde001drwuihy5h2e9z","content":"<blockquote>\n<p>Life is short, use python</p>\n</blockquote>\n<h1 id=\"BeautifulSoup-Library\"><a href=\"#BeautifulSoup-Library\" class=\"headerlink\" title=\"BeautifulSoup Library\"></a>BeautifulSoup Library</h1><h2 id=\"Reformat-HTML-elements\"><a href=\"#Reformat-HTML-elements\" class=\"headerlink\" title=\"Reformat HTML elements\"></a>Reformat HTML elements</h2><p>We could using <code>request</code> library to get the HTML elements first and then use <code>BeautifulSoup</code> format the structures</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"><span class=\"keyword\">from</span> bs4 <span class=\"keyword\">import</span> BeautifulSoup</span><br><span class=\"line\"></span><br><span class=\"line\">url = <span class=\"string\">'https://github.com/yang052513'</span></span><br><span class=\"line\"></span><br><span class=\"line\">response = requests.get(url).text</span><br><span class=\"line\">html = BeautifulSoup(response, <span class=\"string\">'html.parser'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># copy to a new html file</span></span><br><span class=\"line\"><span class=\"keyword\">with</span> open(<span class=\"string\">'demo.html'</span>, <span class=\"string\">'w'</span>, encoding=<span class=\"string\">'utf-8'</span>) <span class=\"keyword\">as</span> file:</span><br><span class=\"line\">    file.write(str(html.prettify()))</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Element-Tag-Search-and-Find\"><a href=\"#Element-Tag-Search-and-Find\" class=\"headerlink\" title=\"Element Tag Search and Find\"></a>Element Tag Search and Find</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># find the first p element and return as &lt;p&gt;some content&lt;/p&gt;</span></span><br><span class=\"line\">html.p</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># convert the first p element content to string as 'some content'</span></span><br><span class=\"line\">html.p.string</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># return the first p element parent name, e.g. &lt;div&gt;</span></span><br><span class=\"line\">html.p.parent.name</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># return the first p element parent content</span></span><br><span class=\"line\">html.p.parent.string</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># return the first p element class name</span></span><br><span class=\"line\">html.p[<span class=\"string\">'class'</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># find all the a tag element</span></span><br><span class=\"line\">html.find_all(<span class=\"string\">'a'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># find all the a tag element with id \"selector_id\"</span></span><br><span class=\"line\">html.find_all(id=<span class=\"string\">\"selector_id\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># find all the img tag with class name \"thumb_img\"</span></span><br><span class=\"line\">html.find_all(<span class=\"string\">\"img\"</span>, &#123;<span class=\"string\">\"class\"</span>: <span class=\"string\">\"thumb_img\"</span>&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># get all the text from the html</span></span><br><span class=\"line\">html.get_text()</span><br></pre></td></tr></table></figure>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"","more":"<blockquote>\n<p>Life is short, use python</p>\n</blockquote>\n<h1 id=\"BeautifulSoup-Library\"><a href=\"#BeautifulSoup-Library\" class=\"headerlink\" title=\"BeautifulSoup Library\"></a>BeautifulSoup Library</h1><h2 id=\"Reformat-HTML-elements\"><a href=\"#Reformat-HTML-elements\" class=\"headerlink\" title=\"Reformat HTML elements\"></a>Reformat HTML elements</h2><p>We could using <code>request</code> library to get the HTML elements first and then use <code>BeautifulSoup</code> format the structures</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"><span class=\"keyword\">from</span> bs4 <span class=\"keyword\">import</span> BeautifulSoup</span><br><span class=\"line\"></span><br><span class=\"line\">url = <span class=\"string\">'https://github.com/yang052513'</span></span><br><span class=\"line\"></span><br><span class=\"line\">response = requests.get(url).text</span><br><span class=\"line\">html = BeautifulSoup(response, <span class=\"string\">'html.parser'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># copy to a new html file</span></span><br><span class=\"line\"><span class=\"keyword\">with</span> open(<span class=\"string\">'demo.html'</span>, <span class=\"string\">'w'</span>, encoding=<span class=\"string\">'utf-8'</span>) <span class=\"keyword\">as</span> file:</span><br><span class=\"line\">    file.write(str(html.prettify()))</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Element-Tag-Search-and-Find\"><a href=\"#Element-Tag-Search-and-Find\" class=\"headerlink\" title=\"Element Tag Search and Find\"></a>Element Tag Search and Find</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># find the first p element and return as &lt;p&gt;some content&lt;/p&gt;</span></span><br><span class=\"line\">html.p</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># convert the first p element content to string as 'some content'</span></span><br><span class=\"line\">html.p.string</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># return the first p element parent name, e.g. &lt;div&gt;</span></span><br><span class=\"line\">html.p.parent.name</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># return the first p element parent content</span></span><br><span class=\"line\">html.p.parent.string</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># return the first p element class name</span></span><br><span class=\"line\">html.p[<span class=\"string\">'class'</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># find all the a tag element</span></span><br><span class=\"line\">html.find_all(<span class=\"string\">'a'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># find all the a tag element with id \"selector_id\"</span></span><br><span class=\"line\">html.find_all(id=<span class=\"string\">\"selector_id\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># find all the img tag with class name \"thumb_img\"</span></span><br><span class=\"line\">html.find_all(<span class=\"string\">\"img\"</span>, &#123;<span class=\"string\">\"class\"</span>: <span class=\"string\">\"thumb_img\"</span>&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># get all the text from the html</span></span><br><span class=\"line\">html.get_text()</span><br></pre></td></tr></table></figure>\n"},{"title":"Angular框架学习笔记","date":"2020-06-20T23:55:44.000Z","cover":"https://www.freecodecamp.org/news/content/images/2020/04/Copy-of-Copy-of-Travel-Photography.png","_content":"\n> 在学习 typescript 的过程中发现 Angular 原来是用 typescript 来写。咦，那顺路把 Angular 也学了吧。毕竟多一个框架的学习就能让我多一个吹牛的机会等面试的时候。\n\n# Setup Angular Project 配置\n\n```markdown\nnpm install -g @angular/cli <!-- install Angular CLI globally -->\n\nng new project-name <!-- create an angular template called project-name -->\n\ncd project-name\n\nng serve <!-- ng serve running application -->\n```\n\n# Components 组件\n\nBasically, Angular componet has three parts:\n\n1. Template, also the view of our component, is where we write our HTML code to it;\n2. Class, has the methods and functionality of our component,\n3. Metadata which contains the information of our components\n\nBelow is the basic app component `class` file.\n\n```ts\n// import angular necessary libryaries\nimport { Component } from '@angular/core'\n\n// decorator\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css'],\n})\nexport class AppComponent {}\n```\n\nIn the decorator, we have `selecotor`, `templateUrl`, and `styleUrls`。\n\n`selectoor` is how can we specify our component in HTML template. For example, we could use `<app-root></app-root>` to display our component.\n\n`templateUrl` will direct our HTML file inside our component folder. We could also use `template` to write inline HTML for shorter codes.\n\n`styleUrls` is point to our css file.\n\n# Interpolation\n\n```ts\nimport { Component, OnInit } from '@angular/core'\n\n@Component({\n  selector: 'app-card',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css'],\n})\nexport class CardComponent implements OnInit {\n  name: Auotoria\n  category: saber\n\n  sayMsg() {\n    return 'Excalibur!!!'\n  }\n}\n```\n\n```html\n<div>\n  <p>\n    <!-- return name and category from CardComponent -->\n    Card Name:{{ name }} Card Category:{{ category }}\n  </p>\n  <p>{{ sayMsg() }}</p>\n</div>\n```\n\n# Data Binding\n\n## Style Binding\n\nWe could bind style to HTML element with variable, conditional statements, or objects.\n\n```html\n<div class=\"style-binding-demo\">\n  <p [style.color]=\"errorColor\">Binding with variable</p>\n  <p [style.color]=\"isError ? 'red' : null\">\n    Binding with conditional statement\n  </p>\n  <p [ngStyle]=\"titleStyle\">Biding with object styles</p>\n</div>\n```\n\n```ts\nexport class AppComponent {\n  public errorColor = 'red'\n  public isError = true\n  public titleStyle = {\n    fontWeight: 'bold',\n    color: 'red',\n  }\n  constructor() {}\n}\n```\n\n## Event Binding\n\n```html\n<div class=\"event-binding-demo\">\n  <button (click)=\"handleClick()\">Submit</button>\n  <button (click)=\"welcomeMsg='Hello Yang!'\">Display in HTML</button>\n\n  <button (click)=\"handleMsg()\">Conditional Render</button>\n  {{welcomeMsg}}\n</div>\n```\n\n```ts\nexport class AppComponent {\n  public welcomeMsg = ''\n  public userName = 'Yang Li'\n\n  constructor() {}\n\n  handleSubmit() {\n    alert('Submit success')\n  }\n\n  handleMsg() {\n    welcomeMsg = `Hello ${userName}!`\n  }\n}\n```\n\n## Template Reference Variables\n\nAssume we have an input field and we want to get the user's input after click the button\n\n```html\n<div className=\"input-reference-demo\">\n  <input #userName type=\"text\" placeholder=\"what is your name?\" />\n  <button (click)=\"handleSubmit(userName.value)\">Submit</button>\n</div>\n```\n\n```ts\nexport class AppComponent {\n  constructor() {}\n\n  handleSubmit(name) {\n    console.log(name)\n  }\n}\n```\n\n## Two-way Binding\n\nIn the above example, we have to click to button in order to get the value of the input. What if we want to the variable in Class component are updating with the interpolation in HTML view at same time? We could use Angular ngModal Forms.\n\n**app.modules.ts**\n\n```typescript\nimport { FormsModule } from '@angular/forms'\n\n@NgModule({\n  //......\n  imports: [\n    //......\n    FormsModule\n  ],\n  //......\n})\n```\n\n```HTML\n<div className=\"two-way-binding-demo\">\n    <input [(ngModel)]=\"userName\" type=\"text\" placeholder=\"user name\" />\n    <p>{{ userName }}</p>\n</div>\n```\n\n```Typescript\nexport class AppComponent {\n  public userName = \"\"\n}\n```\n\n# Directive\n\n## ngIf Directive\n\n### ngIf with only if statements\n\n```Typescript\nexport class AppComponent {\n  public isDisplay = false\n}\n```\n\n```HTML\n<div class=\"ngIf-directive-demo\">\n  <h2 *ngIf=\"isDisplay\">You Can see me now!</h2>\n</div>\n```\n\n### ngIf with else statement\n\n```Typescript\nexport class AppComponent {\n  public isLoggedIn = false\n}\n```\n\n```HTML\n<div class=\"ngIf-else-demo\">\n  <h2 *ngIf=\"isLoggedIn; else notLoginBlock\">Hello User!</h2>\n\n  <ng-template #notLoginBlock>\n      <h2>Please Log In</h2>\n  </ng-template>\n</div>\n```\n\n### ngIf with then and else statement\n\n```Typescript\nexport class AppComponent {\n  public isLoggedIn = false\n}\n```\n\n```HTML\n<p *ngIf=\"isLoggedIn; then loggedInBlock; else publicBlock\" class=\"ng-if-then-else-demo\">\n</p>\n\n<ng-template #loggedInBlock>\n  <h2>Welcome back User!</h2>\n</ng-template>\n\n<ng-template #publicBlock>\n  <h2>Please login</h2>\n</ng-template>\n```\n\n## ngSwitch Directive\n\nFor mulitiple conditional statements\n\n```Typescript\nexport class AppComponent {\n  public category=\"Anime\"\n}\n```\n\n```HTML\n<div [ngSwitch]=\"category\">\n  <p *ngSwitchCase=\"'anime'\">Anime</p>\n  <p *ngSwitchCase=\"'music'\">Music</p>\n  <p *ngSwitchCase=\"'manga'\">Manga</p>\n  <p *ngSwitchCase=\"'game'\">Game</p>\n  <p *ngSwitchDefault>N/A</p>\n</div>\n```\n\n## ngFor Directive\n\nFor looping and rendering\n\n```Typescript\nexport class AppComponent {\n  public animes = ['Fate Stay Night', 'Clannad', 'Haikyuu', 'Attack on Titan'];\n}\n\n```\n\n```HTML\n<ul>\n  <li\n    *ngFor=\"\n      let item of animes;\n      index as i;\n      first as f;\n      last as l;\n      even as e;\n      odd as o\n    \"\n  >\n    Index: {{ i }} Elements: {{ item }} isFirst: {{ f }} isLast: {{ l }} isEven:\n    {{ e }} isOdd: {{ o }}\n  </li>\n</ul>\n\n```\n\n# @Input() @Output()\n\n## @Input()\n\nPassing props from parent to child components. The code below pass the `title` props from `AppComponent` to `CardComponent`\n\n**app.component.ts**\n\n```Typescript\nexport class AppComponent {\n  //The props we want to pass to card components\n  public title = 'Attack on Titan'\n}\n```\n\n**app.components.html**\n\n```HTML\n<h2>All my cards</h2>\n<!-- Inside [] is the name we want to call in our child component -->\n<app-card [title]=\"title\"></app-card>\n```\n\n**card.components.ts**\n\n```Typescript\nimport { Component, OnInit, Input } from '@angular/core';\n\n// ......\n\nexport class CardComponent implements OnInit {\n    //We use @Input() decorator to declare the passed props\n    @Input() public title: string;\n    // ......\n}\n```\n\n**card.components.html**\n\n```HTML\n<!-- Then we can just use as normal interpolation -->\n<p>{{title}}</p>\n```\n\n## @Output()\n\nPassing props from child component to parent component, we need to use event and @Output() decorator\n\n**card.component.ts**\n\n```Typescript\nimport { Component, OnInit, Output, EventEmitter } from '@angular/core';\n\n// ......\n\nexport class TestComponent implements OnInit {\n  @Output() public childEvent = new EventEmitter();\n\n  // ......\n\n  handleEvent() {\n    //the message we want to pass\n    this.childEvent.emit('Fate Stay Night');\n  }\n}\n\n```\n\n**card.component.html**\n\n```HTML\n<button (click)=\"handleEvent()\">Pass Back</button>\n```\n\n**app.component.ts**\n\n```Typescript\nexport class AppComponent {\n  public title = \"\"\n}\n```\n\n**app.component.html**\n\n```HTML\n<app-card (childEvent)=\"title = $event\"></app-card>\n\n{{ title }}\n\n```\n\n# Pipes\n\nAngular pipes allows us to write data transformation that we declare in HTML. Some common pipes listed below\n\n```Typescript\nexport class AppComponent {\n  public name = 'Attack on Titan';\n  public date = new Date();\n  public anime = {\n    name: 'Fate stay night',\n    category: 'action',\n  };\n}\n```\n\n```HTML\n<!-- attack on titan -->\n<p>{{ name | lowercase }}</p>\n\n<!-- ATTACK ON TITAN -->\n<p>{{ name | uppercase }}</p>\n\n<!-- Attack On Titan -->\n<p>{{ name | titlecase }}</p>\n\n<!-- At -->\n<p>{{ name | slice: 0:2 }}</p>\n\n<!-- { \"name\": \"Fate stay night\", \"category\": \"action\" } -->\n<p>{{ anime | json }}</p>\n\n<!-- 25% -->\n<p>{{ 0.25 | percent }}</p>\n\n<!-- $0.25 -->\n<p>{{ 0.25 | currency }}</p>\n\n<!-- £0.25 -->\n<p>{{ 0.25 | currency: \"GBP\" }}</p>\n\n<!-- Sun Jun 21 2020 22:52:43 GMT-0700 (北美太平洋夏令时间) -->\n<p>{{ date }}</p>\n\n<!-- 6/21/20, 10:52 PM -->\n<p>{{ date | date: \"short\" }}</p>\n\n<!-- 6/21/20 -->\n<p>{{ date | date: \"shortDate\" }}</p>\n\n<!-- 10:52 PM -->\n<p>{{ date | date: \"shortTime\" }}</p>\n```\n\n# Services\n\nComponents should used for displaying data as views, and we need `services` to fetch and store datas, in which all the componets could communicate with the data we retrieved. The following are the three steps to use the service\n\n## Using Services to store data\n\n1. Define a service that store the data we want\n2. Register the service with injector in our moudle\n3. Declare as dependency in `ngOnInit` in our sub components\n\n### Define a new service\n\n```bash\nng generate service servicename\n```\n\n```Typescript\nimport {Injectable} from '@angular/core'\n\n@Injectable()\n\nexport class AnimeService {\n  constructor() {\n  }\n\n  getAnime() {\n    return [\n      {\"id\": \"1\", \"name\": \"Fate Stay Night\", \"rank\": 9.4},\n      {\"id\": \"2\", \"name\": \"Haikyuu\", \"rank\": 19.0},\n      {\"id\": \"3\", \"name\": \"Clannad\", \"rank\": 9.5},\n      {\"id\": \"4\", \"name\": \"Attack on Titan\", \"rank\": 8.5},\n      {\"id\": \"5\", \"name\": \"Tamako Love Story\", \"rank\": 8.8},\n    ]\n  }\n}\n```\n\n### Register service with Injector\n\nIn our app module\n\n```Typescript\nimport {AnimeService} from './anime.service';\n// .......\n\n@NgModule({\n  // ......\n  providers: [AnimeService]\n})\n```\n\n### Declare as dependency\n\nIn our anime list components, we could then use the service that we register\n\n```Typescript\nexport class AnimeListComponent implements OnInit {\n  public anime = []\n  constructor(private _animeService: AnimeService) {}\n  ngOnInit() {\n    this.anime = this._animeService.getAnime()\n  }\n}\n\n```\n\n```HTML\n<ul>\n  <li *ngFor=\"let item of anime\">\n    {{ item.id }} {{ item.name }} {{ item.rank }}\n  </li>\n</ul>\n\n```\n\n```markdown\n- 1 Fate Stay Night 9.4\n- 2 Haikyuu 19\n- 3 Clannad 9.5\n- 4 Attack on Titan 8.5\n- 5 Tamako Love Story 8.8\n```\n\n## Using service and Http modules to fetch data\n\n### 1. Import Http module\n\n**app.module.ts**\n\n```Typescript\nimport {HttpClientModule} from '@angular/common/http';\n\n@NgModule({\n  imports: [\n    HttpClientModule\n  ]\n})\n```\n\n### 2. Receive the response\n\n**anime.service.ts**\n\n```Typescript\nimport {Injectable} from '@angular/core'\nimport {HttpClient} from '@angular/common/http';\nimport {Observable } from 'rxjs';\n\nexport class AnimeService {\n  private url: string = 'https://v1.hitokoto.cn/?c=a&c=b&c=c&c=d&c=k'\n\n  constructor(private http: HttpClient) {}\n\n  getAnime(): Observable<[]> {\n    return this.http.get<[]>(this.url);\n  }\n}\n```\n\n### 3. Subscribe to the observable from AnimeList component\n\n```Typescript\nimport { AnimeService } from '../anime.service';\n\nexport class AnimeListComponent implements OnInit {\n  public anime = []\n  constructor(private animeService: AnimeService) {}\n  ngOnInit() {\n    this.animeService.getAnime()\n      .subscribe(data => this.anime = data)\n  }\n}\n```\n\n# Router\n\n## Routing and Navigation\n\n### 1. Install the routing module to the project\n\nFor creating a new project with adding router options\n\n```bash\nng new projectname --routing\n```\n\nFor existing project: add the following tag in `index.html` head\n**index.html**\n\n```HTML\n<base href=\"/\">\n```\n\n### 2. Configure the router\n\nCreating a new file in app folder and copy the code below: `app-routing.module.ts`\n\n**app-routing-module.ts**\n\n```Typescript\nimport {NgModule} from '@angular/core';\nimport {Routes, RouterModule} from '@angular/router';\n\nconst routes: Routes = [\n  {path: 'cardlist', component: CardListComponent},\n  {path: 'about', component: AboutComponent}\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\n\nexport class AppRoutingModule { }\n\n// exporting all the routing components\nexport const routingComponents = [CardListComponent, AboutComponent]\n```\n\n### 3. Add the routing module to **app.modules.ts**\n\n**app.module.ts**\n\n```Typescript\n// we import all the routing comonents so no need to specify here\nimport {AppRoutingModule, routingComponents} from './app-routing.module';\n\n// .......\n\n@NgModule({\n  imports: [\n    AppRoutingModule,\n    routingComponents\n  ]\n})\n```\n\n### 4. Add the link in HTML\n\n**app.component.html**\n\n```HTML\n<a routerLink=\"/cardlist\" routerLinkActive=\"active\">All Cards</a>\n<a routerlink=\"/about\" routerLinkActive=\"active\">About Us</a>\n<router-outlet></router-outlet>\n```\n\n## Router Parameters: Dynamic Routing\n\nFor example, we have a `CardComponent` which display all the cards in the view. When we click each of the card, we want to navigate to the specific `CardDetailComponent` for that card. Other examples will be product view and each product has a detail page.\n\n**anime-card.component.html**\nDisplay all the anime card (only name for demo)\n\n```HTML\n<div>\n  <ul>\n    <li (click)=\"onSelect(anime)\" *ngFor=\"let anime of animes\">{{anime.name}}</li>\n  </ul>\n</div>\n```\n\n**anime-card.component.ts**\n\n```Typescript\nimport {Router} from '@angular/router'\n\nexport class AnimeCardComponent implements OnInit {\n  animes = [\n    {\"id\": 1, \"name\": \"Fate Stay Night\"},\n    {\"id\": 2, \"name\": \"Clannad\"},\n    {\"id\": 3, \"name\": \"Haikyuu\"},\n    {\"id\": 4, \"name\": \"Tamako Love Story\"},\n  ]\n\n  constructor(private router: Router) {\n\n  }\n\n  onSelect(anime) {\n    this.router.navigate(['/animecard', anime.id])\n  }\n}\n```\n\n**app.routing.module.ts**\n\n```Typescript\nimport {AnimeCardDetail} from './anime-card-detail/anime-card-detail.component.ts';\n\nconst routes: Routes = [\n  // ......\n  {path: 'animecard/:id', component: AnimeCardDetailComponent},\n]\n\n// ......\nexport const routingComponents = [\n  // ......\n  AnimeCardDetailComponent\n]\n```\n\n**anime-card-detail.components.ts**\n\n```Typescript\nimport {ActivatedRoute} from '@angular/router'\n\nexport class AnimeCardDetailComponent implements OnInit {\n  public animeId\n  constructor(private router: ActivatedRoute) {\n\n  }\n\n  ngOnInit() {\n    //from the current snapshot get the id props\n    this.animeId = parseInt(this.route.snapshot.paramMap.get('id'))\n  }\n}\n```\n","source":"_posts/16-angular.md","raw":"---\ntitle: Angular框架学习笔记\ndate: 2020-06-20 16:55:44\ntags: ['front-end', 'frameword', 'angular', 'notes', 'javascript']\ncategories: Notes\ncover: 'https://www.freecodecamp.org/news/content/images/2020/04/Copy-of-Copy-of-Travel-Photography.png'\n---\n\n> 在学习 typescript 的过程中发现 Angular 原来是用 typescript 来写。咦，那顺路把 Angular 也学了吧。毕竟多一个框架的学习就能让我多一个吹牛的机会等面试的时候。\n\n# Setup Angular Project 配置\n\n```markdown\nnpm install -g @angular/cli <!-- install Angular CLI globally -->\n\nng new project-name <!-- create an angular template called project-name -->\n\ncd project-name\n\nng serve <!-- ng serve running application -->\n```\n\n# Components 组件\n\nBasically, Angular componet has three parts:\n\n1. Template, also the view of our component, is where we write our HTML code to it;\n2. Class, has the methods and functionality of our component,\n3. Metadata which contains the information of our components\n\nBelow is the basic app component `class` file.\n\n```ts\n// import angular necessary libryaries\nimport { Component } from '@angular/core'\n\n// decorator\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css'],\n})\nexport class AppComponent {}\n```\n\nIn the decorator, we have `selecotor`, `templateUrl`, and `styleUrls`。\n\n`selectoor` is how can we specify our component in HTML template. For example, we could use `<app-root></app-root>` to display our component.\n\n`templateUrl` will direct our HTML file inside our component folder. We could also use `template` to write inline HTML for shorter codes.\n\n`styleUrls` is point to our css file.\n\n# Interpolation\n\n```ts\nimport { Component, OnInit } from '@angular/core'\n\n@Component({\n  selector: 'app-card',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css'],\n})\nexport class CardComponent implements OnInit {\n  name: Auotoria\n  category: saber\n\n  sayMsg() {\n    return 'Excalibur!!!'\n  }\n}\n```\n\n```html\n<div>\n  <p>\n    <!-- return name and category from CardComponent -->\n    Card Name:{{ name }} Card Category:{{ category }}\n  </p>\n  <p>{{ sayMsg() }}</p>\n</div>\n```\n\n# Data Binding\n\n## Style Binding\n\nWe could bind style to HTML element with variable, conditional statements, or objects.\n\n```html\n<div class=\"style-binding-demo\">\n  <p [style.color]=\"errorColor\">Binding with variable</p>\n  <p [style.color]=\"isError ? 'red' : null\">\n    Binding with conditional statement\n  </p>\n  <p [ngStyle]=\"titleStyle\">Biding with object styles</p>\n</div>\n```\n\n```ts\nexport class AppComponent {\n  public errorColor = 'red'\n  public isError = true\n  public titleStyle = {\n    fontWeight: 'bold',\n    color: 'red',\n  }\n  constructor() {}\n}\n```\n\n## Event Binding\n\n```html\n<div class=\"event-binding-demo\">\n  <button (click)=\"handleClick()\">Submit</button>\n  <button (click)=\"welcomeMsg='Hello Yang!'\">Display in HTML</button>\n\n  <button (click)=\"handleMsg()\">Conditional Render</button>\n  {{welcomeMsg}}\n</div>\n```\n\n```ts\nexport class AppComponent {\n  public welcomeMsg = ''\n  public userName = 'Yang Li'\n\n  constructor() {}\n\n  handleSubmit() {\n    alert('Submit success')\n  }\n\n  handleMsg() {\n    welcomeMsg = `Hello ${userName}!`\n  }\n}\n```\n\n## Template Reference Variables\n\nAssume we have an input field and we want to get the user's input after click the button\n\n```html\n<div className=\"input-reference-demo\">\n  <input #userName type=\"text\" placeholder=\"what is your name?\" />\n  <button (click)=\"handleSubmit(userName.value)\">Submit</button>\n</div>\n```\n\n```ts\nexport class AppComponent {\n  constructor() {}\n\n  handleSubmit(name) {\n    console.log(name)\n  }\n}\n```\n\n## Two-way Binding\n\nIn the above example, we have to click to button in order to get the value of the input. What if we want to the variable in Class component are updating with the interpolation in HTML view at same time? We could use Angular ngModal Forms.\n\n**app.modules.ts**\n\n```typescript\nimport { FormsModule } from '@angular/forms'\n\n@NgModule({\n  //......\n  imports: [\n    //......\n    FormsModule\n  ],\n  //......\n})\n```\n\n```HTML\n<div className=\"two-way-binding-demo\">\n    <input [(ngModel)]=\"userName\" type=\"text\" placeholder=\"user name\" />\n    <p>{{ userName }}</p>\n</div>\n```\n\n```Typescript\nexport class AppComponent {\n  public userName = \"\"\n}\n```\n\n# Directive\n\n## ngIf Directive\n\n### ngIf with only if statements\n\n```Typescript\nexport class AppComponent {\n  public isDisplay = false\n}\n```\n\n```HTML\n<div class=\"ngIf-directive-demo\">\n  <h2 *ngIf=\"isDisplay\">You Can see me now!</h2>\n</div>\n```\n\n### ngIf with else statement\n\n```Typescript\nexport class AppComponent {\n  public isLoggedIn = false\n}\n```\n\n```HTML\n<div class=\"ngIf-else-demo\">\n  <h2 *ngIf=\"isLoggedIn; else notLoginBlock\">Hello User!</h2>\n\n  <ng-template #notLoginBlock>\n      <h2>Please Log In</h2>\n  </ng-template>\n</div>\n```\n\n### ngIf with then and else statement\n\n```Typescript\nexport class AppComponent {\n  public isLoggedIn = false\n}\n```\n\n```HTML\n<p *ngIf=\"isLoggedIn; then loggedInBlock; else publicBlock\" class=\"ng-if-then-else-demo\">\n</p>\n\n<ng-template #loggedInBlock>\n  <h2>Welcome back User!</h2>\n</ng-template>\n\n<ng-template #publicBlock>\n  <h2>Please login</h2>\n</ng-template>\n```\n\n## ngSwitch Directive\n\nFor mulitiple conditional statements\n\n```Typescript\nexport class AppComponent {\n  public category=\"Anime\"\n}\n```\n\n```HTML\n<div [ngSwitch]=\"category\">\n  <p *ngSwitchCase=\"'anime'\">Anime</p>\n  <p *ngSwitchCase=\"'music'\">Music</p>\n  <p *ngSwitchCase=\"'manga'\">Manga</p>\n  <p *ngSwitchCase=\"'game'\">Game</p>\n  <p *ngSwitchDefault>N/A</p>\n</div>\n```\n\n## ngFor Directive\n\nFor looping and rendering\n\n```Typescript\nexport class AppComponent {\n  public animes = ['Fate Stay Night', 'Clannad', 'Haikyuu', 'Attack on Titan'];\n}\n\n```\n\n```HTML\n<ul>\n  <li\n    *ngFor=\"\n      let item of animes;\n      index as i;\n      first as f;\n      last as l;\n      even as e;\n      odd as o\n    \"\n  >\n    Index: {{ i }} Elements: {{ item }} isFirst: {{ f }} isLast: {{ l }} isEven:\n    {{ e }} isOdd: {{ o }}\n  </li>\n</ul>\n\n```\n\n# @Input() @Output()\n\n## @Input()\n\nPassing props from parent to child components. The code below pass the `title` props from `AppComponent` to `CardComponent`\n\n**app.component.ts**\n\n```Typescript\nexport class AppComponent {\n  //The props we want to pass to card components\n  public title = 'Attack on Titan'\n}\n```\n\n**app.components.html**\n\n```HTML\n<h2>All my cards</h2>\n<!-- Inside [] is the name we want to call in our child component -->\n<app-card [title]=\"title\"></app-card>\n```\n\n**card.components.ts**\n\n```Typescript\nimport { Component, OnInit, Input } from '@angular/core';\n\n// ......\n\nexport class CardComponent implements OnInit {\n    //We use @Input() decorator to declare the passed props\n    @Input() public title: string;\n    // ......\n}\n```\n\n**card.components.html**\n\n```HTML\n<!-- Then we can just use as normal interpolation -->\n<p>{{title}}</p>\n```\n\n## @Output()\n\nPassing props from child component to parent component, we need to use event and @Output() decorator\n\n**card.component.ts**\n\n```Typescript\nimport { Component, OnInit, Output, EventEmitter } from '@angular/core';\n\n// ......\n\nexport class TestComponent implements OnInit {\n  @Output() public childEvent = new EventEmitter();\n\n  // ......\n\n  handleEvent() {\n    //the message we want to pass\n    this.childEvent.emit('Fate Stay Night');\n  }\n}\n\n```\n\n**card.component.html**\n\n```HTML\n<button (click)=\"handleEvent()\">Pass Back</button>\n```\n\n**app.component.ts**\n\n```Typescript\nexport class AppComponent {\n  public title = \"\"\n}\n```\n\n**app.component.html**\n\n```HTML\n<app-card (childEvent)=\"title = $event\"></app-card>\n\n{{ title }}\n\n```\n\n# Pipes\n\nAngular pipes allows us to write data transformation that we declare in HTML. Some common pipes listed below\n\n```Typescript\nexport class AppComponent {\n  public name = 'Attack on Titan';\n  public date = new Date();\n  public anime = {\n    name: 'Fate stay night',\n    category: 'action',\n  };\n}\n```\n\n```HTML\n<!-- attack on titan -->\n<p>{{ name | lowercase }}</p>\n\n<!-- ATTACK ON TITAN -->\n<p>{{ name | uppercase }}</p>\n\n<!-- Attack On Titan -->\n<p>{{ name | titlecase }}</p>\n\n<!-- At -->\n<p>{{ name | slice: 0:2 }}</p>\n\n<!-- { \"name\": \"Fate stay night\", \"category\": \"action\" } -->\n<p>{{ anime | json }}</p>\n\n<!-- 25% -->\n<p>{{ 0.25 | percent }}</p>\n\n<!-- $0.25 -->\n<p>{{ 0.25 | currency }}</p>\n\n<!-- £0.25 -->\n<p>{{ 0.25 | currency: \"GBP\" }}</p>\n\n<!-- Sun Jun 21 2020 22:52:43 GMT-0700 (北美太平洋夏令时间) -->\n<p>{{ date }}</p>\n\n<!-- 6/21/20, 10:52 PM -->\n<p>{{ date | date: \"short\" }}</p>\n\n<!-- 6/21/20 -->\n<p>{{ date | date: \"shortDate\" }}</p>\n\n<!-- 10:52 PM -->\n<p>{{ date | date: \"shortTime\" }}</p>\n```\n\n# Services\n\nComponents should used for displaying data as views, and we need `services` to fetch and store datas, in which all the componets could communicate with the data we retrieved. The following are the three steps to use the service\n\n## Using Services to store data\n\n1. Define a service that store the data we want\n2. Register the service with injector in our moudle\n3. Declare as dependency in `ngOnInit` in our sub components\n\n### Define a new service\n\n```bash\nng generate service servicename\n```\n\n```Typescript\nimport {Injectable} from '@angular/core'\n\n@Injectable()\n\nexport class AnimeService {\n  constructor() {\n  }\n\n  getAnime() {\n    return [\n      {\"id\": \"1\", \"name\": \"Fate Stay Night\", \"rank\": 9.4},\n      {\"id\": \"2\", \"name\": \"Haikyuu\", \"rank\": 19.0},\n      {\"id\": \"3\", \"name\": \"Clannad\", \"rank\": 9.5},\n      {\"id\": \"4\", \"name\": \"Attack on Titan\", \"rank\": 8.5},\n      {\"id\": \"5\", \"name\": \"Tamako Love Story\", \"rank\": 8.8},\n    ]\n  }\n}\n```\n\n### Register service with Injector\n\nIn our app module\n\n```Typescript\nimport {AnimeService} from './anime.service';\n// .......\n\n@NgModule({\n  // ......\n  providers: [AnimeService]\n})\n```\n\n### Declare as dependency\n\nIn our anime list components, we could then use the service that we register\n\n```Typescript\nexport class AnimeListComponent implements OnInit {\n  public anime = []\n  constructor(private _animeService: AnimeService) {}\n  ngOnInit() {\n    this.anime = this._animeService.getAnime()\n  }\n}\n\n```\n\n```HTML\n<ul>\n  <li *ngFor=\"let item of anime\">\n    {{ item.id }} {{ item.name }} {{ item.rank }}\n  </li>\n</ul>\n\n```\n\n```markdown\n- 1 Fate Stay Night 9.4\n- 2 Haikyuu 19\n- 3 Clannad 9.5\n- 4 Attack on Titan 8.5\n- 5 Tamako Love Story 8.8\n```\n\n## Using service and Http modules to fetch data\n\n### 1. Import Http module\n\n**app.module.ts**\n\n```Typescript\nimport {HttpClientModule} from '@angular/common/http';\n\n@NgModule({\n  imports: [\n    HttpClientModule\n  ]\n})\n```\n\n### 2. Receive the response\n\n**anime.service.ts**\n\n```Typescript\nimport {Injectable} from '@angular/core'\nimport {HttpClient} from '@angular/common/http';\nimport {Observable } from 'rxjs';\n\nexport class AnimeService {\n  private url: string = 'https://v1.hitokoto.cn/?c=a&c=b&c=c&c=d&c=k'\n\n  constructor(private http: HttpClient) {}\n\n  getAnime(): Observable<[]> {\n    return this.http.get<[]>(this.url);\n  }\n}\n```\n\n### 3. Subscribe to the observable from AnimeList component\n\n```Typescript\nimport { AnimeService } from '../anime.service';\n\nexport class AnimeListComponent implements OnInit {\n  public anime = []\n  constructor(private animeService: AnimeService) {}\n  ngOnInit() {\n    this.animeService.getAnime()\n      .subscribe(data => this.anime = data)\n  }\n}\n```\n\n# Router\n\n## Routing and Navigation\n\n### 1. Install the routing module to the project\n\nFor creating a new project with adding router options\n\n```bash\nng new projectname --routing\n```\n\nFor existing project: add the following tag in `index.html` head\n**index.html**\n\n```HTML\n<base href=\"/\">\n```\n\n### 2. Configure the router\n\nCreating a new file in app folder and copy the code below: `app-routing.module.ts`\n\n**app-routing-module.ts**\n\n```Typescript\nimport {NgModule} from '@angular/core';\nimport {Routes, RouterModule} from '@angular/router';\n\nconst routes: Routes = [\n  {path: 'cardlist', component: CardListComponent},\n  {path: 'about', component: AboutComponent}\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\n\nexport class AppRoutingModule { }\n\n// exporting all the routing components\nexport const routingComponents = [CardListComponent, AboutComponent]\n```\n\n### 3. Add the routing module to **app.modules.ts**\n\n**app.module.ts**\n\n```Typescript\n// we import all the routing comonents so no need to specify here\nimport {AppRoutingModule, routingComponents} from './app-routing.module';\n\n// .......\n\n@NgModule({\n  imports: [\n    AppRoutingModule,\n    routingComponents\n  ]\n})\n```\n\n### 4. Add the link in HTML\n\n**app.component.html**\n\n```HTML\n<a routerLink=\"/cardlist\" routerLinkActive=\"active\">All Cards</a>\n<a routerlink=\"/about\" routerLinkActive=\"active\">About Us</a>\n<router-outlet></router-outlet>\n```\n\n## Router Parameters: Dynamic Routing\n\nFor example, we have a `CardComponent` which display all the cards in the view. When we click each of the card, we want to navigate to the specific `CardDetailComponent` for that card. Other examples will be product view and each product has a detail page.\n\n**anime-card.component.html**\nDisplay all the anime card (only name for demo)\n\n```HTML\n<div>\n  <ul>\n    <li (click)=\"onSelect(anime)\" *ngFor=\"let anime of animes\">{{anime.name}}</li>\n  </ul>\n</div>\n```\n\n**anime-card.component.ts**\n\n```Typescript\nimport {Router} from '@angular/router'\n\nexport class AnimeCardComponent implements OnInit {\n  animes = [\n    {\"id\": 1, \"name\": \"Fate Stay Night\"},\n    {\"id\": 2, \"name\": \"Clannad\"},\n    {\"id\": 3, \"name\": \"Haikyuu\"},\n    {\"id\": 4, \"name\": \"Tamako Love Story\"},\n  ]\n\n  constructor(private router: Router) {\n\n  }\n\n  onSelect(anime) {\n    this.router.navigate(['/animecard', anime.id])\n  }\n}\n```\n\n**app.routing.module.ts**\n\n```Typescript\nimport {AnimeCardDetail} from './anime-card-detail/anime-card-detail.component.ts';\n\nconst routes: Routes = [\n  // ......\n  {path: 'animecard/:id', component: AnimeCardDetailComponent},\n]\n\n// ......\nexport const routingComponents = [\n  // ......\n  AnimeCardDetailComponent\n]\n```\n\n**anime-card-detail.components.ts**\n\n```Typescript\nimport {ActivatedRoute} from '@angular/router'\n\nexport class AnimeCardDetailComponent implements OnInit {\n  public animeId\n  constructor(private router: ActivatedRoute) {\n\n  }\n\n  ngOnInit() {\n    //from the current snapshot get the id props\n    this.animeId = parseInt(this.route.snapshot.paramMap.get('id'))\n  }\n}\n```\n","slug":"16-angular","published":1,"updated":"2020-07-03T19:34:18.519Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckdnmttdg001irwui5s374jr4","content":"<blockquote>\n<p>在学习 typescript 的过程中发现 Angular 原来是用 typescript 来写。咦，那顺路把 Angular 也学了吧。毕竟多一个框架的学习就能让我多一个吹牛的机会等面试的时候。</p>\n</blockquote>\n<h1 id=\"Setup-Angular-Project-配置\"><a href=\"#Setup-Angular-Project-配置\" class=\"headerlink\" title=\"Setup Angular Project 配置\"></a>Setup Angular Project 配置</h1><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g @angular/cli <span class=\"xml\"><span class=\"comment\">&lt;!-- install Angular CLI globally --&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">ng new project-name <span class=\"xml\"><span class=\"comment\">&lt;!-- create an angular template called project-name --&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">cd project-name</span><br><span class=\"line\"></span><br><span class=\"line\">ng serve <span class=\"xml\"><span class=\"comment\">&lt;!-- ng serve running application --&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Components-组件\"><a href=\"#Components-组件\" class=\"headerlink\" title=\"Components 组件\"></a>Components 组件</h1><p>Basically, Angular componet has three parts:</p>\n<ol>\n<li>Template, also the view of our component, is where we write our HTML code to it;</li>\n<li>Class, has the methods and functionality of our component,</li>\n<li>Metadata which contains the information of our components</li>\n</ol>\n<p>Below is the basic app component <code>class</code> file.</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// import angular necessary libryaries</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">'@angular/core'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// decorator</span></span><br><span class=\"line\"><span class=\"meta\">@Component</span>(&#123;</span><br><span class=\"line\">  selector: <span class=\"string\">'app-root'</span>,</span><br><span class=\"line\">  templateUrl: <span class=\"string\">'./app.component.html'</span>,</span><br><span class=\"line\">  styleUrls: [<span class=\"string\">'./app.component.css'</span>],</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppComponent &#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<p>In the decorator, we have <code>selecotor</code>, <code>templateUrl</code>, and <code>styleUrls</code>。</p>\n<p><code>selectoor</code> is how can we specify our component in HTML template. For example, we could use <code>&lt;app-root&gt;&lt;/app-root&gt;</code> to display our component.</p>\n<p><code>templateUrl</code> will direct our HTML file inside our component folder. We could also use <code>template</code> to write inline HTML for shorter codes.</p>\n<p><code>styleUrls</code> is point to our css file.</p>\n<h1 id=\"Interpolation\"><a href=\"#Interpolation\" class=\"headerlink\" title=\"Interpolation\"></a>Interpolation</h1><figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Component, OnInit &#125; <span class=\"keyword\">from</span> <span class=\"string\">'@angular/core'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Component</span>(&#123;</span><br><span class=\"line\">  selector: <span class=\"string\">'app-card'</span>,</span><br><span class=\"line\">  templateUrl: <span class=\"string\">'./app.component.html'</span>,</span><br><span class=\"line\">  styleUrls: [<span class=\"string\">'./app.component.css'</span>],</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> CardComponent <span class=\"keyword\">implements</span> OnInit &#123;</span><br><span class=\"line\">  name: Auotoria</span><br><span class=\"line\">  category: saber</span><br><span class=\"line\"></span><br><span class=\"line\">  sayMsg() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'Excalibur!!!'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- return name and category from CardComponent --&gt;</span></span><br><span class=\"line\">    Card Name:&#123;&#123; name &#125;&#125; Card Category:&#123;&#123; category &#125;&#125;</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; sayMsg() &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Data-Binding\"><a href=\"#Data-Binding\" class=\"headerlink\" title=\"Data Binding\"></a>Data Binding</h1><h2 id=\"Style-Binding\"><a href=\"#Style-Binding\" class=\"headerlink\" title=\"Style Binding\"></a>Style Binding</h2><p>We could bind style to HTML element with variable, conditional statements, or objects.</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"style-binding-demo\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span> [<span class=\"attr\">style.color</span>]=<span class=\"string\">\"errorColor\"</span>&gt;</span>Binding with variable<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span> [<span class=\"attr\">style.color</span>]=<span class=\"string\">\"isError ? 'red' : null\"</span>&gt;</span></span><br><span class=\"line\">    Binding with conditional statement</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span> [<span class=\"attr\">ngStyle</span>]=<span class=\"string\">\"titleStyle\"</span>&gt;</span>Biding with object styles<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppComponent &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> errorColor = <span class=\"string\">'red'</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> isError = <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> titleStyle = &#123;</span><br><span class=\"line\">    fontWeight: <span class=\"string\">'bold'</span>,</span><br><span class=\"line\">    color: <span class=\"string\">'red'</span>,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(<span class=\"params\"></span>) &#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Event-Binding\"><a href=\"#Event-Binding\" class=\"headerlink\" title=\"Event Binding\"></a>Event Binding</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"event-binding-demo\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">button</span> (<span class=\"attr\">click</span>)=<span class=\"string\">\"handleClick()\"</span>&gt;</span>Submit<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">button</span> (<span class=\"attr\">click</span>)=<span class=\"string\">\"welcomeMsg='Hello Yang!'\"</span>&gt;</span>Display in HTML<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">button</span> (<span class=\"attr\">click</span>)=<span class=\"string\">\"handleMsg()\"</span>&gt;</span>Conditional Render<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">  &#123;&#123;welcomeMsg&#125;&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppComponent &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> welcomeMsg = <span class=\"string\">''</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> userName = <span class=\"string\">'Yang Li'</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(<span class=\"params\"></span>) &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  handleSubmit() &#123;</span><br><span class=\"line\">    alert(<span class=\"string\">'Submit success'</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  handleMsg() &#123;</span><br><span class=\"line\">    welcomeMsg = <span class=\"string\">`Hello <span class=\"subst\">$&#123;userName&#125;</span>!`</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Template-Reference-Variables\"><a href=\"#Template-Reference-Variables\" class=\"headerlink\" title=\"Template Reference Variables\"></a>Template Reference Variables</h2><p>Assume we have an input field and we want to get the user’s input after click the button</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">className</span>=<span class=\"string\">\"input-reference-demo\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">input</span> #<span class=\"attr\">userName</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">\"what is your name?\"</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">button</span> (<span class=\"attr\">click</span>)=<span class=\"string\">\"handleSubmit(userName.value)\"</span>&gt;</span>Submit<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppComponent &#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(<span class=\"params\"></span>) &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  handleSubmit(name) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(name)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Two-way-Binding\"><a href=\"#Two-way-Binding\" class=\"headerlink\" title=\"Two-way Binding\"></a>Two-way Binding</h2><p>In the above example, we have to click to button in order to get the value of the input. What if we want to the variable in Class component are updating with the interpolation in HTML view at same time? We could use Angular ngModal Forms.</p>\n<p><strong>app.modules.ts</strong></p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; FormsModule &#125; <span class=\"keyword\">from</span> <span class=\"string\">'@angular/forms'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@NgModule</span>(&#123;</span><br><span class=\"line\">  <span class=\"comment\">//......</span></span><br><span class=\"line\">  imports: [</span><br><span class=\"line\">    <span class=\"comment\">//......</span></span><br><span class=\"line\">    FormsModule</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"comment\">//......</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">className</span>=<span class=\"string\">\"two-way-binding-demo\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> [(<span class=\"attr\">ngModel</span>)]=<span class=\"string\">\"userName\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">\"user name\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; userName &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppComponent &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> userName = <span class=\"string\">\"\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Directive\"><a href=\"#Directive\" class=\"headerlink\" title=\"Directive\"></a>Directive</h1><h2 id=\"ngIf-Directive\"><a href=\"#ngIf-Directive\" class=\"headerlink\" title=\"ngIf Directive\"></a>ngIf Directive</h2><h3 id=\"ngIf-with-only-if-statements\"><a href=\"#ngIf-with-only-if-statements\" class=\"headerlink\" title=\"ngIf with only if statements\"></a>ngIf with only if statements</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppComponent &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> isDisplay = <span class=\"literal\">false</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ngIf-directive-demo\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h2</span> *<span class=\"attr\">ngIf</span>=<span class=\"string\">\"isDisplay\"</span>&gt;</span>You Can see me now!<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ngIf-with-else-statement\"><a href=\"#ngIf-with-else-statement\" class=\"headerlink\" title=\"ngIf with else statement\"></a>ngIf with else statement</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppComponent &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> isLoggedIn = <span class=\"literal\">false</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ngIf-else-demo\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h2</span> *<span class=\"attr\">ngIf</span>=<span class=\"string\">\"isLoggedIn; else notLoginBlock\"</span>&gt;</span>Hello User!<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">ng-template</span> #<span class=\"attr\">notLoginBlock</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>Please Log In<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">ng-template</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ngIf-with-then-and-else-statement\"><a href=\"#ngIf-with-then-and-else-statement\" class=\"headerlink\" title=\"ngIf with then and else statement\"></a>ngIf with then and else statement</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppComponent &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> isLoggedIn = <span class=\"literal\">false</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> *<span class=\"attr\">ngIf</span>=<span class=\"string\">\"isLoggedIn; then loggedInBlock; else publicBlock\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ng-if-then-else-demo\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ng-template</span> #<span class=\"attr\">loggedInBlock</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>Welcome back User!<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ng-template</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ng-template</span> #<span class=\"attr\">publicBlock</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>Please login<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ng-template</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ngSwitch-Directive\"><a href=\"#ngSwitch-Directive\" class=\"headerlink\" title=\"ngSwitch Directive\"></a>ngSwitch Directive</h2><p>For mulitiple conditional statements</p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppComponent &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> category=<span class=\"string\">\"Anime\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> [<span class=\"attr\">ngSwitch</span>]=<span class=\"string\">\"category\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span> *<span class=\"attr\">ngSwitchCase</span>=<span class=\"string\">\"'anime'\"</span>&gt;</span>Anime<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span> *<span class=\"attr\">ngSwitchCase</span>=<span class=\"string\">\"'music'\"</span>&gt;</span>Music<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span> *<span class=\"attr\">ngSwitchCase</span>=<span class=\"string\">\"'manga'\"</span>&gt;</span>Manga<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span> *<span class=\"attr\">ngSwitchCase</span>=<span class=\"string\">\"'game'\"</span>&gt;</span>Game<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span> *<span class=\"attr\">ngSwitchDefault</span>&gt;</span>N/A<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ngFor-Directive\"><a href=\"#ngFor-Directive\" class=\"headerlink\" title=\"ngFor Directive\"></a>ngFor Directive</h2><p>For looping and rendering</p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppComponent &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> animes = [<span class=\"string\">'Fate Stay Night'</span>, <span class=\"string\">'Clannad'</span>, <span class=\"string\">'Haikyuu'</span>, <span class=\"string\">'Attack on Titan'</span>];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span></span></span><br><span class=\"line\"><span class=\"tag\">    *<span class=\"attr\">ngFor</span>=<span class=\"string\">\"</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">      let item of animes;</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">      index as i;</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">      first as f;</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">      last as l;</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">      even as e;</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">      odd as o</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">    \"</span></span></span><br><span class=\"line\"><span class=\"tag\">  &gt;</span></span><br><span class=\"line\">    Index: &#123;&#123; i &#125;&#125; Elements: &#123;&#123; item &#125;&#125; isFirst: &#123;&#123; f &#125;&#125; isLast: &#123;&#123; l &#125;&#125; isEven:</span><br><span class=\"line\">    &#123;&#123; e &#125;&#125; isOdd: &#123;&#123; o &#125;&#125;</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Input-Output\"><a href=\"#Input-Output\" class=\"headerlink\" title=\"@Input() @Output()\"></a>@Input() @Output()</h1><h2 id=\"Input\"><a href=\"#Input\" class=\"headerlink\" title=\"@Input()\"></a>@Input()</h2><p>Passing props from parent to child components. The code below pass the <code>title</code> props from <code>AppComponent</code> to <code>CardComponent</code></p>\n<p><strong>app.component.ts</strong></p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppComponent &#123;</span><br><span class=\"line\">  <span class=\"comment\">//The props we want to pass to card components</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> title = <span class=\"string\">'Attack on Titan'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>app.components.html</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>All my cards<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Inside [] is the name we want to call in our child component --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">app-card</span> [<span class=\"attr\">title</span>]=<span class=\"string\">\"title\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">app-card</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>card.components.ts</strong></p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Component, OnInit, Input &#125; <span class=\"keyword\">from</span> <span class=\"string\">'@angular/core'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ......</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> CardComponent <span class=\"keyword\">implements</span> OnInit &#123;</span><br><span class=\"line\">    <span class=\"comment\">//We use @Input() decorator to declare the passed props</span></span><br><span class=\"line\">    <span class=\"meta\">@Input</span>() <span class=\"keyword\">public</span> title: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">    <span class=\"comment\">// ......</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>card.components.html</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- Then we can just use as normal interpolation --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123;title&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Output\"><a href=\"#Output\" class=\"headerlink\" title=\"@Output()\"></a>@Output()</h2><p>Passing props from child component to parent component, we need to use event and @Output() decorator</p>\n<p><strong>card.component.ts</strong></p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Component, OnInit, Output, EventEmitter &#125; <span class=\"keyword\">from</span> <span class=\"string\">'@angular/core'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ......</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> TestComponent <span class=\"keyword\">implements</span> OnInit &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Output</span>() <span class=\"keyword\">public</span> childEvent = <span class=\"keyword\">new</span> EventEmitter();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ......</span></span><br><span class=\"line\"></span><br><span class=\"line\">  handleEvent() &#123;</span><br><span class=\"line\">    <span class=\"comment\">//the message we want to pass</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.childEvent.emit(<span class=\"string\">'Fate Stay Night'</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>card.component.html</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">button</span> (<span class=\"attr\">click</span>)=<span class=\"string\">\"handleEvent()\"</span>&gt;</span>Pass Back<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>app.component.ts</strong></p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppComponent &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> title = <span class=\"string\">\"\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>app.component.html</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">app-card</span> (<span class=\"attr\">childEvent</span>)=<span class=\"string\">\"title = $event\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">app-card</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#123;&#123; title &#125;&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Pipes\"><a href=\"#Pipes\" class=\"headerlink\" title=\"Pipes\"></a>Pipes</h1><p>Angular pipes allows us to write data transformation that we declare in HTML. Some common pipes listed below</p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppComponent &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> name = <span class=\"string\">'Attack on Titan'</span>;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> date = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>();</span><br><span class=\"line\">  <span class=\"keyword\">public</span> anime = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Fate stay night'</span>,</span><br><span class=\"line\">    category: <span class=\"string\">'action'</span>,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- attack on titan --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; name | lowercase &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- ATTACK ON TITAN --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; name | uppercase &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Attack On Titan --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; name | titlecase &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- At --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; name | slice: 0:2 &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- &#123; \"name\": \"Fate stay night\", \"category\": \"action\" &#125; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; anime | json &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 25% --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; 0.25 | percent &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- $0.25 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; 0.25 | currency &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- £0.25 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; 0.25 | currency: \"GBP\" &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Sun Jun 21 2020 22:52:43 GMT-0700 (北美太平洋夏令时间) --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; date &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 6/21/20, 10:52 PM --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; date | date: \"short\" &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 6/21/20 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; date | date: \"shortDate\" &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 10:52 PM --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; date | date: \"shortTime\" &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Services\"><a href=\"#Services\" class=\"headerlink\" title=\"Services\"></a>Services</h1><p>Components should used for displaying data as views, and we need <code>services</code> to fetch and store datas, in which all the componets could communicate with the data we retrieved. The following are the three steps to use the service</p>\n<h2 id=\"Using-Services-to-store-data\"><a href=\"#Using-Services-to-store-data\" class=\"headerlink\" title=\"Using Services to store data\"></a>Using Services to store data</h2><ol>\n<li>Define a service that store the data we want</li>\n<li>Register the service with injector in our moudle</li>\n<li>Declare as dependency in <code>ngOnInit</code> in our sub components</li>\n</ol>\n<h3 id=\"Define-a-new-service\"><a href=\"#Define-a-new-service\" class=\"headerlink\" title=\"Define a new service\"></a>Define a new service</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ng generate service servicename</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;Injectable&#125; <span class=\"keyword\">from</span> <span class=\"string\">'@angular/core'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Injectable</span>()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AnimeService &#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  getAnime() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> [</span><br><span class=\"line\">      &#123;<span class=\"string\">\"id\"</span>: <span class=\"string\">\"1\"</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Fate Stay Night\"</span>, <span class=\"string\">\"rank\"</span>: <span class=\"number\">9.4</span>&#125;,</span><br><span class=\"line\">      &#123;<span class=\"string\">\"id\"</span>: <span class=\"string\">\"2\"</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Haikyuu\"</span>, <span class=\"string\">\"rank\"</span>: <span class=\"number\">19.0</span>&#125;,</span><br><span class=\"line\">      &#123;<span class=\"string\">\"id\"</span>: <span class=\"string\">\"3\"</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Clannad\"</span>, <span class=\"string\">\"rank\"</span>: <span class=\"number\">9.5</span>&#125;,</span><br><span class=\"line\">      &#123;<span class=\"string\">\"id\"</span>: <span class=\"string\">\"4\"</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Attack on Titan\"</span>, <span class=\"string\">\"rank\"</span>: <span class=\"number\">8.5</span>&#125;,</span><br><span class=\"line\">      &#123;<span class=\"string\">\"id\"</span>: <span class=\"string\">\"5\"</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Tamako Love Story\"</span>, <span class=\"string\">\"rank\"</span>: <span class=\"number\">8.8</span>&#125;,</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Register-service-with-Injector\"><a href=\"#Register-service-with-Injector\" class=\"headerlink\" title=\"Register service with Injector\"></a>Register service with Injector</h3><p>In our app module</p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;AnimeService&#125; <span class=\"keyword\">from</span> <span class=\"string\">'./anime.service'</span>;</span><br><span class=\"line\"><span class=\"comment\">// .......</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@NgModule</span>(&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ......</span></span><br><span class=\"line\">  providers: [AnimeService]</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Declare-as-dependency\"><a href=\"#Declare-as-dependency\" class=\"headerlink\" title=\"Declare as dependency\"></a>Declare as dependency</h3><p>In our anime list components, we could then use the service that we register</p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AnimeListComponent <span class=\"keyword\">implements</span> OnInit &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> anime = []</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(<span class=\"params\"><span class=\"keyword\">private</span> _animeService: AnimeService</span>) &#123;&#125;</span><br><span class=\"line\">  ngOnInit() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.anime = <span class=\"keyword\">this</span>._animeService.getAnime()</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span> *<span class=\"attr\">ngFor</span>=<span class=\"string\">\"let item of anime\"</span>&gt;</span></span><br><span class=\"line\">    &#123;&#123; item.id &#125;&#125; &#123;&#123; item.name &#125;&#125; &#123;&#123; item.rank &#125;&#125;</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">- </span>1 Fate Stay Night 9.4</span><br><span class=\"line\"><span class=\"bullet\">- </span>2 Haikyuu 19</span><br><span class=\"line\"><span class=\"bullet\">- </span>3 Clannad 9.5</span><br><span class=\"line\"><span class=\"bullet\">- </span>4 Attack on Titan 8.5</span><br><span class=\"line\"><span class=\"bullet\">- </span>5 Tamako Love Story 8.8</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Using-service-and-Http-modules-to-fetch-data\"><a href=\"#Using-service-and-Http-modules-to-fetch-data\" class=\"headerlink\" title=\"Using service and Http modules to fetch data\"></a>Using service and Http modules to fetch data</h2><h3 id=\"1-Import-Http-module\"><a href=\"#1-Import-Http-module\" class=\"headerlink\" title=\"1. Import Http module\"></a>1. Import Http module</h3><p><strong>app.module.ts</strong></p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;HttpClientModule&#125; <span class=\"keyword\">from</span> <span class=\"string\">'@angular/common/http'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@NgModule</span>(&#123;</span><br><span class=\"line\">  imports: [</span><br><span class=\"line\">    HttpClientModule</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-Receive-the-response\"><a href=\"#2-Receive-the-response\" class=\"headerlink\" title=\"2. Receive the response\"></a>2. Receive the response</h3><p><strong>anime.service.ts</strong></p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;Injectable&#125; <span class=\"keyword\">from</span> <span class=\"string\">'@angular/core'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;HttpClient&#125; <span class=\"keyword\">from</span> <span class=\"string\">'@angular/common/http'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;Observable &#125; <span class=\"keyword\">from</span> <span class=\"string\">'rxjs'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AnimeService &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> url: <span class=\"built_in\">string</span> = <span class=\"string\">'https://v1.hitokoto.cn/?c=a&amp;c=b&amp;c=c&amp;c=d&amp;c=k'</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(<span class=\"params\"><span class=\"keyword\">private</span> http: HttpClient</span>) &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  getAnime(): Observable&lt;[]&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.http.get&lt;[]&gt;(<span class=\"keyword\">this</span>.url);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-Subscribe-to-the-observable-from-AnimeList-component\"><a href=\"#3-Subscribe-to-the-observable-from-AnimeList-component\" class=\"headerlink\" title=\"3. Subscribe to the observable from AnimeList component\"></a>3. Subscribe to the observable from AnimeList component</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; AnimeService &#125; <span class=\"keyword\">from</span> <span class=\"string\">'../anime.service'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AnimeListComponent <span class=\"keyword\">implements</span> OnInit &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> anime = []</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(<span class=\"params\"><span class=\"keyword\">private</span> animeService: AnimeService</span>) &#123;&#125;</span><br><span class=\"line\">  ngOnInit() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.animeService.getAnime()</span><br><span class=\"line\">      .subscribe(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> <span class=\"keyword\">this</span>.anime = data)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Router\"><a href=\"#Router\" class=\"headerlink\" title=\"Router\"></a>Router</h1><h2 id=\"Routing-and-Navigation\"><a href=\"#Routing-and-Navigation\" class=\"headerlink\" title=\"Routing and Navigation\"></a>Routing and Navigation</h2><h3 id=\"1-Install-the-routing-module-to-the-project\"><a href=\"#1-Install-the-routing-module-to-the-project\" class=\"headerlink\" title=\"1. Install the routing module to the project\"></a>1. Install the routing module to the project</h3><p>For creating a new project with adding router options</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ng new projectname --routing</span><br></pre></td></tr></table></figure>\n\n<p>For existing project: add the following tag in <code>index.html</code> head<br><strong>index.html</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">base</span> <span class=\"attr\">href</span>=<span class=\"string\">\"/\"</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-Configure-the-router\"><a href=\"#2-Configure-the-router\" class=\"headerlink\" title=\"2. Configure the router\"></a>2. Configure the router</h3><p>Creating a new file in app folder and copy the code below: <code>app-routing.module.ts</code></p>\n<p><strong>app-routing-module.ts</strong></p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;NgModule&#125; <span class=\"keyword\">from</span> <span class=\"string\">'@angular/core'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;Routes, RouterModule&#125; <span class=\"keyword\">from</span> <span class=\"string\">'@angular/router'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> routes: Routes = [</span><br><span class=\"line\">  &#123;path: <span class=\"string\">'cardlist'</span>, component: CardListComponent&#125;,</span><br><span class=\"line\">  &#123;path: <span class=\"string\">'about'</span>, component: AboutComponent&#125;</span><br><span class=\"line\">];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@NgModule</span>(&#123;</span><br><span class=\"line\">  imports: [RouterModule.forRoot(routes)],</span><br><span class=\"line\">  exports: [RouterModule]</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppRoutingModule &#123; &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// exporting all the routing components</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> routingComponents = [CardListComponent, AboutComponent]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-Add-the-routing-module-to-app-modules-ts\"><a href=\"#3-Add-the-routing-module-to-app-modules-ts\" class=\"headerlink\" title=\"3. Add the routing module to app.modules.ts\"></a>3. Add the routing module to <strong>app.modules.ts</strong></h3><p><strong>app.module.ts</strong></p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// we import all the routing comonents so no need to specify here</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;AppRoutingModule, routingComponents&#125; <span class=\"keyword\">from</span> <span class=\"string\">'./app-routing.module'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// .......</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@NgModule</span>(&#123;</span><br><span class=\"line\">  imports: [</span><br><span class=\"line\">    AppRoutingModule,</span><br><span class=\"line\">    routingComponents</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-Add-the-link-in-HTML\"><a href=\"#4-Add-the-link-in-HTML\" class=\"headerlink\" title=\"4. Add the link in HTML\"></a>4. Add the link in HTML</h3><p><strong>app.component.html</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">routerLink</span>=<span class=\"string\">\"/cardlist\"</span> <span class=\"attr\">routerLinkActive</span>=<span class=\"string\">\"active\"</span>&gt;</span>All Cards<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">routerlink</span>=<span class=\"string\">\"/about\"</span> <span class=\"attr\">routerLinkActive</span>=<span class=\"string\">\"active\"</span>&gt;</span>About Us<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">router-outlet</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">router-outlet</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Router-Parameters-Dynamic-Routing\"><a href=\"#Router-Parameters-Dynamic-Routing\" class=\"headerlink\" title=\"Router Parameters: Dynamic Routing\"></a>Router Parameters: Dynamic Routing</h2><p>For example, we have a <code>CardComponent</code> which display all the cards in the view. When we click each of the card, we want to navigate to the specific <code>CardDetailComponent</code> for that card. Other examples will be product view and each product has a detail page.</p>\n<p><strong>anime-card.component.html</strong><br>Display all the anime card (only name for demo)</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span> (<span class=\"attr\">click</span>)=<span class=\"string\">\"onSelect(anime)\"</span> *<span class=\"attr\">ngFor</span>=<span class=\"string\">\"let anime of animes\"</span>&gt;</span>&#123;&#123;anime.name&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>anime-card.component.ts</strong></p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;Router&#125; <span class=\"keyword\">from</span> <span class=\"string\">'@angular/router'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AnimeCardComponent <span class=\"keyword\">implements</span> OnInit &#123;</span><br><span class=\"line\">  animes = [</span><br><span class=\"line\">    &#123;<span class=\"string\">\"id\"</span>: <span class=\"number\">1</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Fate Stay Night\"</span>&#125;,</span><br><span class=\"line\">    &#123;<span class=\"string\">\"id\"</span>: <span class=\"number\">2</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Clannad\"</span>&#125;,</span><br><span class=\"line\">    &#123;<span class=\"string\">\"id\"</span>: <span class=\"number\">3</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Haikyuu\"</span>&#125;,</span><br><span class=\"line\">    &#123;<span class=\"string\">\"id\"</span>: <span class=\"number\">4</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Tamako Love Story\"</span>&#125;,</span><br><span class=\"line\">  ]</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(<span class=\"params\"><span class=\"keyword\">private</span> router: Router</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  onSelect(anime) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.router.navigate([<span class=\"string\">'/animecard'</span>, anime.id])</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>app.routing.module.ts</strong></p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;AnimeCardDetail&#125; <span class=\"keyword\">from</span> <span class=\"string\">'./anime-card-detail/anime-card-detail.component.ts'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> routes: Routes = [</span><br><span class=\"line\">  <span class=\"comment\">// ......</span></span><br><span class=\"line\">  &#123;path: <span class=\"string\">'animecard/:id'</span>, component: AnimeCardDetailComponent&#125;,</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ......</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> routingComponents = [</span><br><span class=\"line\">  <span class=\"comment\">// ......</span></span><br><span class=\"line\">  AnimeCardDetailComponent</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n\n<p><strong>anime-card-detail.components.ts</strong></p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;ActivatedRoute&#125; <span class=\"keyword\">from</span> <span class=\"string\">'@angular/router'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AnimeCardDetailComponent <span class=\"keyword\">implements</span> OnInit &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> animeId</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(<span class=\"params\"><span class=\"keyword\">private</span> router: ActivatedRoute</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  ngOnInit() &#123;</span><br><span class=\"line\">    <span class=\"comment\">//from the current snapshot get the id props</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.animeId = <span class=\"built_in\">parseInt</span>(<span class=\"keyword\">this</span>.route.snapshot.paramMap.get(<span class=\"string\">'id'</span>))</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"","more":"<blockquote>\n<p>在学习 typescript 的过程中发现 Angular 原来是用 typescript 来写。咦，那顺路把 Angular 也学了吧。毕竟多一个框架的学习就能让我多一个吹牛的机会等面试的时候。</p>\n</blockquote>\n<h1 id=\"Setup-Angular-Project-配置\"><a href=\"#Setup-Angular-Project-配置\" class=\"headerlink\" title=\"Setup Angular Project 配置\"></a>Setup Angular Project 配置</h1><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g @angular/cli <span class=\"xml\"><span class=\"comment\">&lt;!-- install Angular CLI globally --&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">ng new project-name <span class=\"xml\"><span class=\"comment\">&lt;!-- create an angular template called project-name --&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">cd project-name</span><br><span class=\"line\"></span><br><span class=\"line\">ng serve <span class=\"xml\"><span class=\"comment\">&lt;!-- ng serve running application --&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Components-组件\"><a href=\"#Components-组件\" class=\"headerlink\" title=\"Components 组件\"></a>Components 组件</h1><p>Basically, Angular componet has three parts:</p>\n<ol>\n<li>Template, also the view of our component, is where we write our HTML code to it;</li>\n<li>Class, has the methods and functionality of our component,</li>\n<li>Metadata which contains the information of our components</li>\n</ol>\n<p>Below is the basic app component <code>class</code> file.</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// import angular necessary libryaries</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">'@angular/core'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// decorator</span></span><br><span class=\"line\"><span class=\"meta\">@Component</span>(&#123;</span><br><span class=\"line\">  selector: <span class=\"string\">'app-root'</span>,</span><br><span class=\"line\">  templateUrl: <span class=\"string\">'./app.component.html'</span>,</span><br><span class=\"line\">  styleUrls: [<span class=\"string\">'./app.component.css'</span>],</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppComponent &#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<p>In the decorator, we have <code>selecotor</code>, <code>templateUrl</code>, and <code>styleUrls</code>。</p>\n<p><code>selectoor</code> is how can we specify our component in HTML template. For example, we could use <code>&lt;app-root&gt;&lt;/app-root&gt;</code> to display our component.</p>\n<p><code>templateUrl</code> will direct our HTML file inside our component folder. We could also use <code>template</code> to write inline HTML for shorter codes.</p>\n<p><code>styleUrls</code> is point to our css file.</p>\n<h1 id=\"Interpolation\"><a href=\"#Interpolation\" class=\"headerlink\" title=\"Interpolation\"></a>Interpolation</h1><figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Component, OnInit &#125; <span class=\"keyword\">from</span> <span class=\"string\">'@angular/core'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Component</span>(&#123;</span><br><span class=\"line\">  selector: <span class=\"string\">'app-card'</span>,</span><br><span class=\"line\">  templateUrl: <span class=\"string\">'./app.component.html'</span>,</span><br><span class=\"line\">  styleUrls: [<span class=\"string\">'./app.component.css'</span>],</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> CardComponent <span class=\"keyword\">implements</span> OnInit &#123;</span><br><span class=\"line\">  name: Auotoria</span><br><span class=\"line\">  category: saber</span><br><span class=\"line\"></span><br><span class=\"line\">  sayMsg() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'Excalibur!!!'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- return name and category from CardComponent --&gt;</span></span><br><span class=\"line\">    Card Name:&#123;&#123; name &#125;&#125; Card Category:&#123;&#123; category &#125;&#125;</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; sayMsg() &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Data-Binding\"><a href=\"#Data-Binding\" class=\"headerlink\" title=\"Data Binding\"></a>Data Binding</h1><h2 id=\"Style-Binding\"><a href=\"#Style-Binding\" class=\"headerlink\" title=\"Style Binding\"></a>Style Binding</h2><p>We could bind style to HTML element with variable, conditional statements, or objects.</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"style-binding-demo\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span> [<span class=\"attr\">style.color</span>]=<span class=\"string\">\"errorColor\"</span>&gt;</span>Binding with variable<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span> [<span class=\"attr\">style.color</span>]=<span class=\"string\">\"isError ? 'red' : null\"</span>&gt;</span></span><br><span class=\"line\">    Binding with conditional statement</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span> [<span class=\"attr\">ngStyle</span>]=<span class=\"string\">\"titleStyle\"</span>&gt;</span>Biding with object styles<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppComponent &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> errorColor = <span class=\"string\">'red'</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> isError = <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> titleStyle = &#123;</span><br><span class=\"line\">    fontWeight: <span class=\"string\">'bold'</span>,</span><br><span class=\"line\">    color: <span class=\"string\">'red'</span>,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(<span class=\"params\"></span>) &#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Event-Binding\"><a href=\"#Event-Binding\" class=\"headerlink\" title=\"Event Binding\"></a>Event Binding</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"event-binding-demo\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">button</span> (<span class=\"attr\">click</span>)=<span class=\"string\">\"handleClick()\"</span>&gt;</span>Submit<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">button</span> (<span class=\"attr\">click</span>)=<span class=\"string\">\"welcomeMsg='Hello Yang!'\"</span>&gt;</span>Display in HTML<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">button</span> (<span class=\"attr\">click</span>)=<span class=\"string\">\"handleMsg()\"</span>&gt;</span>Conditional Render<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">  &#123;&#123;welcomeMsg&#125;&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppComponent &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> welcomeMsg = <span class=\"string\">''</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> userName = <span class=\"string\">'Yang Li'</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(<span class=\"params\"></span>) &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  handleSubmit() &#123;</span><br><span class=\"line\">    alert(<span class=\"string\">'Submit success'</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  handleMsg() &#123;</span><br><span class=\"line\">    welcomeMsg = <span class=\"string\">`Hello <span class=\"subst\">$&#123;userName&#125;</span>!`</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Template-Reference-Variables\"><a href=\"#Template-Reference-Variables\" class=\"headerlink\" title=\"Template Reference Variables\"></a>Template Reference Variables</h2><p>Assume we have an input field and we want to get the user’s input after click the button</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">className</span>=<span class=\"string\">\"input-reference-demo\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">input</span> #<span class=\"attr\">userName</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">\"what is your name?\"</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">button</span> (<span class=\"attr\">click</span>)=<span class=\"string\">\"handleSubmit(userName.value)\"</span>&gt;</span>Submit<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppComponent &#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(<span class=\"params\"></span>) &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  handleSubmit(name) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(name)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Two-way-Binding\"><a href=\"#Two-way-Binding\" class=\"headerlink\" title=\"Two-way Binding\"></a>Two-way Binding</h2><p>In the above example, we have to click to button in order to get the value of the input. What if we want to the variable in Class component are updating with the interpolation in HTML view at same time? We could use Angular ngModal Forms.</p>\n<p><strong>app.modules.ts</strong></p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; FormsModule &#125; <span class=\"keyword\">from</span> <span class=\"string\">'@angular/forms'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@NgModule</span>(&#123;</span><br><span class=\"line\">  <span class=\"comment\">//......</span></span><br><span class=\"line\">  imports: [</span><br><span class=\"line\">    <span class=\"comment\">//......</span></span><br><span class=\"line\">    FormsModule</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"comment\">//......</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">className</span>=<span class=\"string\">\"two-way-binding-demo\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> [(<span class=\"attr\">ngModel</span>)]=<span class=\"string\">\"userName\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">\"user name\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; userName &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppComponent &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> userName = <span class=\"string\">\"\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Directive\"><a href=\"#Directive\" class=\"headerlink\" title=\"Directive\"></a>Directive</h1><h2 id=\"ngIf-Directive\"><a href=\"#ngIf-Directive\" class=\"headerlink\" title=\"ngIf Directive\"></a>ngIf Directive</h2><h3 id=\"ngIf-with-only-if-statements\"><a href=\"#ngIf-with-only-if-statements\" class=\"headerlink\" title=\"ngIf with only if statements\"></a>ngIf with only if statements</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppComponent &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> isDisplay = <span class=\"literal\">false</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ngIf-directive-demo\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h2</span> *<span class=\"attr\">ngIf</span>=<span class=\"string\">\"isDisplay\"</span>&gt;</span>You Can see me now!<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ngIf-with-else-statement\"><a href=\"#ngIf-with-else-statement\" class=\"headerlink\" title=\"ngIf with else statement\"></a>ngIf with else statement</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppComponent &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> isLoggedIn = <span class=\"literal\">false</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ngIf-else-demo\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h2</span> *<span class=\"attr\">ngIf</span>=<span class=\"string\">\"isLoggedIn; else notLoginBlock\"</span>&gt;</span>Hello User!<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">ng-template</span> #<span class=\"attr\">notLoginBlock</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>Please Log In<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">ng-template</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ngIf-with-then-and-else-statement\"><a href=\"#ngIf-with-then-and-else-statement\" class=\"headerlink\" title=\"ngIf with then and else statement\"></a>ngIf with then and else statement</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppComponent &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> isLoggedIn = <span class=\"literal\">false</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> *<span class=\"attr\">ngIf</span>=<span class=\"string\">\"isLoggedIn; then loggedInBlock; else publicBlock\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ng-if-then-else-demo\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ng-template</span> #<span class=\"attr\">loggedInBlock</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>Welcome back User!<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ng-template</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ng-template</span> #<span class=\"attr\">publicBlock</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>Please login<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ng-template</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ngSwitch-Directive\"><a href=\"#ngSwitch-Directive\" class=\"headerlink\" title=\"ngSwitch Directive\"></a>ngSwitch Directive</h2><p>For mulitiple conditional statements</p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppComponent &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> category=<span class=\"string\">\"Anime\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> [<span class=\"attr\">ngSwitch</span>]=<span class=\"string\">\"category\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span> *<span class=\"attr\">ngSwitchCase</span>=<span class=\"string\">\"'anime'\"</span>&gt;</span>Anime<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span> *<span class=\"attr\">ngSwitchCase</span>=<span class=\"string\">\"'music'\"</span>&gt;</span>Music<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span> *<span class=\"attr\">ngSwitchCase</span>=<span class=\"string\">\"'manga'\"</span>&gt;</span>Manga<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span> *<span class=\"attr\">ngSwitchCase</span>=<span class=\"string\">\"'game'\"</span>&gt;</span>Game<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span> *<span class=\"attr\">ngSwitchDefault</span>&gt;</span>N/A<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ngFor-Directive\"><a href=\"#ngFor-Directive\" class=\"headerlink\" title=\"ngFor Directive\"></a>ngFor Directive</h2><p>For looping and rendering</p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppComponent &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> animes = [<span class=\"string\">'Fate Stay Night'</span>, <span class=\"string\">'Clannad'</span>, <span class=\"string\">'Haikyuu'</span>, <span class=\"string\">'Attack on Titan'</span>];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span></span></span><br><span class=\"line\"><span class=\"tag\">    *<span class=\"attr\">ngFor</span>=<span class=\"string\">\"</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">      let item of animes;</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">      index as i;</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">      first as f;</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">      last as l;</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">      even as e;</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">      odd as o</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">    \"</span></span></span><br><span class=\"line\"><span class=\"tag\">  &gt;</span></span><br><span class=\"line\">    Index: &#123;&#123; i &#125;&#125; Elements: &#123;&#123; item &#125;&#125; isFirst: &#123;&#123; f &#125;&#125; isLast: &#123;&#123; l &#125;&#125; isEven:</span><br><span class=\"line\">    &#123;&#123; e &#125;&#125; isOdd: &#123;&#123; o &#125;&#125;</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Input-Output\"><a href=\"#Input-Output\" class=\"headerlink\" title=\"@Input() @Output()\"></a>@Input() @Output()</h1><h2 id=\"Input\"><a href=\"#Input\" class=\"headerlink\" title=\"@Input()\"></a>@Input()</h2><p>Passing props from parent to child components. The code below pass the <code>title</code> props from <code>AppComponent</code> to <code>CardComponent</code></p>\n<p><strong>app.component.ts</strong></p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppComponent &#123;</span><br><span class=\"line\">  <span class=\"comment\">//The props we want to pass to card components</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> title = <span class=\"string\">'Attack on Titan'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>app.components.html</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>All my cards<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Inside [] is the name we want to call in our child component --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">app-card</span> [<span class=\"attr\">title</span>]=<span class=\"string\">\"title\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">app-card</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>card.components.ts</strong></p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Component, OnInit, Input &#125; <span class=\"keyword\">from</span> <span class=\"string\">'@angular/core'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ......</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> CardComponent <span class=\"keyword\">implements</span> OnInit &#123;</span><br><span class=\"line\">    <span class=\"comment\">//We use @Input() decorator to declare the passed props</span></span><br><span class=\"line\">    <span class=\"meta\">@Input</span>() <span class=\"keyword\">public</span> title: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">    <span class=\"comment\">// ......</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>card.components.html</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- Then we can just use as normal interpolation --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123;title&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Output\"><a href=\"#Output\" class=\"headerlink\" title=\"@Output()\"></a>@Output()</h2><p>Passing props from child component to parent component, we need to use event and @Output() decorator</p>\n<p><strong>card.component.ts</strong></p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Component, OnInit, Output, EventEmitter &#125; <span class=\"keyword\">from</span> <span class=\"string\">'@angular/core'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ......</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> TestComponent <span class=\"keyword\">implements</span> OnInit &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Output</span>() <span class=\"keyword\">public</span> childEvent = <span class=\"keyword\">new</span> EventEmitter();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ......</span></span><br><span class=\"line\"></span><br><span class=\"line\">  handleEvent() &#123;</span><br><span class=\"line\">    <span class=\"comment\">//the message we want to pass</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.childEvent.emit(<span class=\"string\">'Fate Stay Night'</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>card.component.html</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">button</span> (<span class=\"attr\">click</span>)=<span class=\"string\">\"handleEvent()\"</span>&gt;</span>Pass Back<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>app.component.ts</strong></p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppComponent &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> title = <span class=\"string\">\"\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>app.component.html</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">app-card</span> (<span class=\"attr\">childEvent</span>)=<span class=\"string\">\"title = $event\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">app-card</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#123;&#123; title &#125;&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Pipes\"><a href=\"#Pipes\" class=\"headerlink\" title=\"Pipes\"></a>Pipes</h1><p>Angular pipes allows us to write data transformation that we declare in HTML. Some common pipes listed below</p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppComponent &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> name = <span class=\"string\">'Attack on Titan'</span>;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> date = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>();</span><br><span class=\"line\">  <span class=\"keyword\">public</span> anime = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Fate stay night'</span>,</span><br><span class=\"line\">    category: <span class=\"string\">'action'</span>,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- attack on titan --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; name | lowercase &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- ATTACK ON TITAN --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; name | uppercase &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Attack On Titan --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; name | titlecase &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- At --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; name | slice: 0:2 &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- &#123; \"name\": \"Fate stay night\", \"category\": \"action\" &#125; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; anime | json &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 25% --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; 0.25 | percent &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- $0.25 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; 0.25 | currency &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- £0.25 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; 0.25 | currency: \"GBP\" &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Sun Jun 21 2020 22:52:43 GMT-0700 (北美太平洋夏令时间) --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; date &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 6/21/20, 10:52 PM --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; date | date: \"short\" &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 6/21/20 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; date | date: \"shortDate\" &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 10:52 PM --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; date | date: \"shortTime\" &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Services\"><a href=\"#Services\" class=\"headerlink\" title=\"Services\"></a>Services</h1><p>Components should used for displaying data as views, and we need <code>services</code> to fetch and store datas, in which all the componets could communicate with the data we retrieved. The following are the three steps to use the service</p>\n<h2 id=\"Using-Services-to-store-data\"><a href=\"#Using-Services-to-store-data\" class=\"headerlink\" title=\"Using Services to store data\"></a>Using Services to store data</h2><ol>\n<li>Define a service that store the data we want</li>\n<li>Register the service with injector in our moudle</li>\n<li>Declare as dependency in <code>ngOnInit</code> in our sub components</li>\n</ol>\n<h3 id=\"Define-a-new-service\"><a href=\"#Define-a-new-service\" class=\"headerlink\" title=\"Define a new service\"></a>Define a new service</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ng generate service servicename</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;Injectable&#125; <span class=\"keyword\">from</span> <span class=\"string\">'@angular/core'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Injectable</span>()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AnimeService &#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  getAnime() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> [</span><br><span class=\"line\">      &#123;<span class=\"string\">\"id\"</span>: <span class=\"string\">\"1\"</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Fate Stay Night\"</span>, <span class=\"string\">\"rank\"</span>: <span class=\"number\">9.4</span>&#125;,</span><br><span class=\"line\">      &#123;<span class=\"string\">\"id\"</span>: <span class=\"string\">\"2\"</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Haikyuu\"</span>, <span class=\"string\">\"rank\"</span>: <span class=\"number\">19.0</span>&#125;,</span><br><span class=\"line\">      &#123;<span class=\"string\">\"id\"</span>: <span class=\"string\">\"3\"</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Clannad\"</span>, <span class=\"string\">\"rank\"</span>: <span class=\"number\">9.5</span>&#125;,</span><br><span class=\"line\">      &#123;<span class=\"string\">\"id\"</span>: <span class=\"string\">\"4\"</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Attack on Titan\"</span>, <span class=\"string\">\"rank\"</span>: <span class=\"number\">8.5</span>&#125;,</span><br><span class=\"line\">      &#123;<span class=\"string\">\"id\"</span>: <span class=\"string\">\"5\"</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Tamako Love Story\"</span>, <span class=\"string\">\"rank\"</span>: <span class=\"number\">8.8</span>&#125;,</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Register-service-with-Injector\"><a href=\"#Register-service-with-Injector\" class=\"headerlink\" title=\"Register service with Injector\"></a>Register service with Injector</h3><p>In our app module</p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;AnimeService&#125; <span class=\"keyword\">from</span> <span class=\"string\">'./anime.service'</span>;</span><br><span class=\"line\"><span class=\"comment\">// .......</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@NgModule</span>(&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ......</span></span><br><span class=\"line\">  providers: [AnimeService]</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Declare-as-dependency\"><a href=\"#Declare-as-dependency\" class=\"headerlink\" title=\"Declare as dependency\"></a>Declare as dependency</h3><p>In our anime list components, we could then use the service that we register</p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AnimeListComponent <span class=\"keyword\">implements</span> OnInit &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> anime = []</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(<span class=\"params\"><span class=\"keyword\">private</span> _animeService: AnimeService</span>) &#123;&#125;</span><br><span class=\"line\">  ngOnInit() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.anime = <span class=\"keyword\">this</span>._animeService.getAnime()</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span> *<span class=\"attr\">ngFor</span>=<span class=\"string\">\"let item of anime\"</span>&gt;</span></span><br><span class=\"line\">    &#123;&#123; item.id &#125;&#125; &#123;&#123; item.name &#125;&#125; &#123;&#123; item.rank &#125;&#125;</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">- </span>1 Fate Stay Night 9.4</span><br><span class=\"line\"><span class=\"bullet\">- </span>2 Haikyuu 19</span><br><span class=\"line\"><span class=\"bullet\">- </span>3 Clannad 9.5</span><br><span class=\"line\"><span class=\"bullet\">- </span>4 Attack on Titan 8.5</span><br><span class=\"line\"><span class=\"bullet\">- </span>5 Tamako Love Story 8.8</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Using-service-and-Http-modules-to-fetch-data\"><a href=\"#Using-service-and-Http-modules-to-fetch-data\" class=\"headerlink\" title=\"Using service and Http modules to fetch data\"></a>Using service and Http modules to fetch data</h2><h3 id=\"1-Import-Http-module\"><a href=\"#1-Import-Http-module\" class=\"headerlink\" title=\"1. Import Http module\"></a>1. Import Http module</h3><p><strong>app.module.ts</strong></p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;HttpClientModule&#125; <span class=\"keyword\">from</span> <span class=\"string\">'@angular/common/http'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@NgModule</span>(&#123;</span><br><span class=\"line\">  imports: [</span><br><span class=\"line\">    HttpClientModule</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-Receive-the-response\"><a href=\"#2-Receive-the-response\" class=\"headerlink\" title=\"2. Receive the response\"></a>2. Receive the response</h3><p><strong>anime.service.ts</strong></p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;Injectable&#125; <span class=\"keyword\">from</span> <span class=\"string\">'@angular/core'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;HttpClient&#125; <span class=\"keyword\">from</span> <span class=\"string\">'@angular/common/http'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;Observable &#125; <span class=\"keyword\">from</span> <span class=\"string\">'rxjs'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AnimeService &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> url: <span class=\"built_in\">string</span> = <span class=\"string\">'https://v1.hitokoto.cn/?c=a&amp;c=b&amp;c=c&amp;c=d&amp;c=k'</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(<span class=\"params\"><span class=\"keyword\">private</span> http: HttpClient</span>) &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  getAnime(): Observable&lt;[]&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.http.get&lt;[]&gt;(<span class=\"keyword\">this</span>.url);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-Subscribe-to-the-observable-from-AnimeList-component\"><a href=\"#3-Subscribe-to-the-observable-from-AnimeList-component\" class=\"headerlink\" title=\"3. Subscribe to the observable from AnimeList component\"></a>3. Subscribe to the observable from AnimeList component</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; AnimeService &#125; <span class=\"keyword\">from</span> <span class=\"string\">'../anime.service'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AnimeListComponent <span class=\"keyword\">implements</span> OnInit &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> anime = []</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(<span class=\"params\"><span class=\"keyword\">private</span> animeService: AnimeService</span>) &#123;&#125;</span><br><span class=\"line\">  ngOnInit() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.animeService.getAnime()</span><br><span class=\"line\">      .subscribe(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> <span class=\"keyword\">this</span>.anime = data)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Router\"><a href=\"#Router\" class=\"headerlink\" title=\"Router\"></a>Router</h1><h2 id=\"Routing-and-Navigation\"><a href=\"#Routing-and-Navigation\" class=\"headerlink\" title=\"Routing and Navigation\"></a>Routing and Navigation</h2><h3 id=\"1-Install-the-routing-module-to-the-project\"><a href=\"#1-Install-the-routing-module-to-the-project\" class=\"headerlink\" title=\"1. Install the routing module to the project\"></a>1. Install the routing module to the project</h3><p>For creating a new project with adding router options</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ng new projectname --routing</span><br></pre></td></tr></table></figure>\n\n<p>For existing project: add the following tag in <code>index.html</code> head<br><strong>index.html</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">base</span> <span class=\"attr\">href</span>=<span class=\"string\">\"/\"</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-Configure-the-router\"><a href=\"#2-Configure-the-router\" class=\"headerlink\" title=\"2. Configure the router\"></a>2. Configure the router</h3><p>Creating a new file in app folder and copy the code below: <code>app-routing.module.ts</code></p>\n<p><strong>app-routing-module.ts</strong></p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;NgModule&#125; <span class=\"keyword\">from</span> <span class=\"string\">'@angular/core'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;Routes, RouterModule&#125; <span class=\"keyword\">from</span> <span class=\"string\">'@angular/router'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> routes: Routes = [</span><br><span class=\"line\">  &#123;path: <span class=\"string\">'cardlist'</span>, component: CardListComponent&#125;,</span><br><span class=\"line\">  &#123;path: <span class=\"string\">'about'</span>, component: AboutComponent&#125;</span><br><span class=\"line\">];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@NgModule</span>(&#123;</span><br><span class=\"line\">  imports: [RouterModule.forRoot(routes)],</span><br><span class=\"line\">  exports: [RouterModule]</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AppRoutingModule &#123; &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// exporting all the routing components</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> routingComponents = [CardListComponent, AboutComponent]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-Add-the-routing-module-to-app-modules-ts\"><a href=\"#3-Add-the-routing-module-to-app-modules-ts\" class=\"headerlink\" title=\"3. Add the routing module to app.modules.ts\"></a>3. Add the routing module to <strong>app.modules.ts</strong></h3><p><strong>app.module.ts</strong></p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// we import all the routing comonents so no need to specify here</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;AppRoutingModule, routingComponents&#125; <span class=\"keyword\">from</span> <span class=\"string\">'./app-routing.module'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// .......</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@NgModule</span>(&#123;</span><br><span class=\"line\">  imports: [</span><br><span class=\"line\">    AppRoutingModule,</span><br><span class=\"line\">    routingComponents</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-Add-the-link-in-HTML\"><a href=\"#4-Add-the-link-in-HTML\" class=\"headerlink\" title=\"4. Add the link in HTML\"></a>4. Add the link in HTML</h3><p><strong>app.component.html</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">routerLink</span>=<span class=\"string\">\"/cardlist\"</span> <span class=\"attr\">routerLinkActive</span>=<span class=\"string\">\"active\"</span>&gt;</span>All Cards<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">routerlink</span>=<span class=\"string\">\"/about\"</span> <span class=\"attr\">routerLinkActive</span>=<span class=\"string\">\"active\"</span>&gt;</span>About Us<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">router-outlet</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">router-outlet</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Router-Parameters-Dynamic-Routing\"><a href=\"#Router-Parameters-Dynamic-Routing\" class=\"headerlink\" title=\"Router Parameters: Dynamic Routing\"></a>Router Parameters: Dynamic Routing</h2><p>For example, we have a <code>CardComponent</code> which display all the cards in the view. When we click each of the card, we want to navigate to the specific <code>CardDetailComponent</code> for that card. Other examples will be product view and each product has a detail page.</p>\n<p><strong>anime-card.component.html</strong><br>Display all the anime card (only name for demo)</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span> (<span class=\"attr\">click</span>)=<span class=\"string\">\"onSelect(anime)\"</span> *<span class=\"attr\">ngFor</span>=<span class=\"string\">\"let anime of animes\"</span>&gt;</span>&#123;&#123;anime.name&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>anime-card.component.ts</strong></p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;Router&#125; <span class=\"keyword\">from</span> <span class=\"string\">'@angular/router'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AnimeCardComponent <span class=\"keyword\">implements</span> OnInit &#123;</span><br><span class=\"line\">  animes = [</span><br><span class=\"line\">    &#123;<span class=\"string\">\"id\"</span>: <span class=\"number\">1</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Fate Stay Night\"</span>&#125;,</span><br><span class=\"line\">    &#123;<span class=\"string\">\"id\"</span>: <span class=\"number\">2</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Clannad\"</span>&#125;,</span><br><span class=\"line\">    &#123;<span class=\"string\">\"id\"</span>: <span class=\"number\">3</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Haikyuu\"</span>&#125;,</span><br><span class=\"line\">    &#123;<span class=\"string\">\"id\"</span>: <span class=\"number\">4</span>, <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Tamako Love Story\"</span>&#125;,</span><br><span class=\"line\">  ]</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(<span class=\"params\"><span class=\"keyword\">private</span> router: Router</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  onSelect(anime) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.router.navigate([<span class=\"string\">'/animecard'</span>, anime.id])</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>app.routing.module.ts</strong></p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;AnimeCardDetail&#125; <span class=\"keyword\">from</span> <span class=\"string\">'./anime-card-detail/anime-card-detail.component.ts'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> routes: Routes = [</span><br><span class=\"line\">  <span class=\"comment\">// ......</span></span><br><span class=\"line\">  &#123;path: <span class=\"string\">'animecard/:id'</span>, component: AnimeCardDetailComponent&#125;,</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ......</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> routingComponents = [</span><br><span class=\"line\">  <span class=\"comment\">// ......</span></span><br><span class=\"line\">  AnimeCardDetailComponent</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n\n<p><strong>anime-card-detail.components.ts</strong></p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;ActivatedRoute&#125; <span class=\"keyword\">from</span> <span class=\"string\">'@angular/router'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">class</span> AnimeCardDetailComponent <span class=\"keyword\">implements</span> OnInit &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> animeId</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(<span class=\"params\"><span class=\"keyword\">private</span> router: ActivatedRoute</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  ngOnInit() &#123;</span><br><span class=\"line\">    <span class=\"comment\">//from the current snapshot get the id props</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.animeId = <span class=\"built_in\">parseInt</span>(<span class=\"keyword\">this</span>.route.snapshot.paramMap.get(<span class=\"string\">'id'</span>))</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"title":"Python爬虫之Selenium模拟浏览器操作","date":"2020-07-01T07:06:11.000Z","cover":"https://miro.medium.com/proxy/1*HJpcblBvD8MpqAEZZXWVgg.png","_content":"\n# Selenium\n\n> 在之前静态网站的爬取中，request 库和 bs4 已经可以满足大多数需求。但有的时候我们想要爬取的站点时用 js 来动态加载的，比如有的要把页面拉到最下方才可以加载。那这时候我们可以利用 selenium 来模拟浏览器行为进行页面的爬取。不过 Selenium 的速度还是不行，毕竟要启动浏览器，加载头部图片等等。之后会学习别的技术来替代。按照官方的定义，selenium 是用来自动化测试，即我们也可以用来执行一些列任务。\n\n## 设置\n\n### 安装 Selenium\n\n```shell\npip install selenium\n```\n\n### 下载浏览器驱动\n\nSelenium 比较麻烦的地方就是配置驱动。我们安装`selenium`库后，还必须要驱动下载并设置为环境变量才可以在脚本中正确启动。Selenium 支持的浏览器驱动也比较全，包括的有 Firefox, Chrome, IE, Edge, Opera。需要注意的是驱动的版本要匹配你浏览器的版本，不然也会出问题。\n\n下载完驱动后，我是把驱动直接放在 python 安装目录下，因为 python 已经设置了环境变量，所以就不需要单独设置浏览器驱动的环境变量路径了。\n\n## 常用方法\n\n### 操作浏览器\n\n```python\nfrom selenium import webdriver\nfrom bs4 import BeautifulSoup\n\nurl = 'https://www.coquitlamcollege.com/programs-courses/university-transfer-program/class-timetable/'\nbrowser = webdriver.Chrome()\nbrowser.get(url)\n\n# 前进浏览器记录\nbrowser.forward()\n\n# 后退浏览器记录\nbrowser.back()\n\n# 刷新浏览器\nbrowser.refresh()\n```\n\n### 滑动页面\n\n我们可以用`execute_script`方法来执行脚本命令。下面代码我们声明一个`js`变量，内容即滑动到 body 的底部。\n\n```python\njs = \"var q=document.documentElement.scrollTop=document.body.scrollHeight\"\nbrowser.execute_script(js)\n```\n\n### 查找元素\n\n我们同样可以用 Selenium 来查找元素，一般配合`get_attribute()`方法使用来获取元素的值。\n\n```python\n# 匹配第一个找到的原色\nfind_element_by_id\nfind_element_by_name\nfind_element_by_xpath\nfind_element_by_tag_name\nfind_element_by_class_name\nfind_element_by_css_selector\n\n# 返回多个结果\nfind_elements_by_name\nfind_elements_by_xpath\nfind_elements_by_tag_name\nfind_elements_by_class_name\nfind_elements_by_css_selector\n\n```\n\n### input 的输入和递交\n\n我们可以用`send_keys()`方法来执行键盘指令。\n\n```python\nfrom selenium import webdriver\nfrom selenium.webdriver.common.keys import Keys\n\nbrowser = webdriver.Chrome()\n\nurl = 'https://www.roguecanada.ca/'\n\nbrowser.get(url)\nbrowser.implicitly_wait(5)\n\n# 找到输入框元素\ninput_box = browser.find_element_by_id('site-search-input')\ninput_box.clear()\n\n# 输入框输入内容\ninput_box.send_keys('kg plates')\n\n# 回车\ninput_box.send_keys(Keys.ENTER)\n```\n","source":"_posts/20-python-selenium.md","raw":"---\ntitle: Python爬虫之Selenium模拟浏览器操作\ndate: 2020-07-01 00:06:11\ntags: ['python', 'web crawler', 'notes', 'python-crawler-series']\ncategories: Python爬虫\ncover: 'https://miro.medium.com/proxy/1*HJpcblBvD8MpqAEZZXWVgg.png'\n---\n\n# Selenium\n\n> 在之前静态网站的爬取中，request 库和 bs4 已经可以满足大多数需求。但有的时候我们想要爬取的站点时用 js 来动态加载的，比如有的要把页面拉到最下方才可以加载。那这时候我们可以利用 selenium 来模拟浏览器行为进行页面的爬取。不过 Selenium 的速度还是不行，毕竟要启动浏览器，加载头部图片等等。之后会学习别的技术来替代。按照官方的定义，selenium 是用来自动化测试，即我们也可以用来执行一些列任务。\n\n## 设置\n\n### 安装 Selenium\n\n```shell\npip install selenium\n```\n\n### 下载浏览器驱动\n\nSelenium 比较麻烦的地方就是配置驱动。我们安装`selenium`库后，还必须要驱动下载并设置为环境变量才可以在脚本中正确启动。Selenium 支持的浏览器驱动也比较全，包括的有 Firefox, Chrome, IE, Edge, Opera。需要注意的是驱动的版本要匹配你浏览器的版本，不然也会出问题。\n\n下载完驱动后，我是把驱动直接放在 python 安装目录下，因为 python 已经设置了环境变量，所以就不需要单独设置浏览器驱动的环境变量路径了。\n\n## 常用方法\n\n### 操作浏览器\n\n```python\nfrom selenium import webdriver\nfrom bs4 import BeautifulSoup\n\nurl = 'https://www.coquitlamcollege.com/programs-courses/university-transfer-program/class-timetable/'\nbrowser = webdriver.Chrome()\nbrowser.get(url)\n\n# 前进浏览器记录\nbrowser.forward()\n\n# 后退浏览器记录\nbrowser.back()\n\n# 刷新浏览器\nbrowser.refresh()\n```\n\n### 滑动页面\n\n我们可以用`execute_script`方法来执行脚本命令。下面代码我们声明一个`js`变量，内容即滑动到 body 的底部。\n\n```python\njs = \"var q=document.documentElement.scrollTop=document.body.scrollHeight\"\nbrowser.execute_script(js)\n```\n\n### 查找元素\n\n我们同样可以用 Selenium 来查找元素，一般配合`get_attribute()`方法使用来获取元素的值。\n\n```python\n# 匹配第一个找到的原色\nfind_element_by_id\nfind_element_by_name\nfind_element_by_xpath\nfind_element_by_tag_name\nfind_element_by_class_name\nfind_element_by_css_selector\n\n# 返回多个结果\nfind_elements_by_name\nfind_elements_by_xpath\nfind_elements_by_tag_name\nfind_elements_by_class_name\nfind_elements_by_css_selector\n\n```\n\n### input 的输入和递交\n\n我们可以用`send_keys()`方法来执行键盘指令。\n\n```python\nfrom selenium import webdriver\nfrom selenium.webdriver.common.keys import Keys\n\nbrowser = webdriver.Chrome()\n\nurl = 'https://www.roguecanada.ca/'\n\nbrowser.get(url)\nbrowser.implicitly_wait(5)\n\n# 找到输入框元素\ninput_box = browser.find_element_by_id('site-search-input')\ninput_box.clear()\n\n# 输入框输入内容\ninput_box.send_keys('kg plates')\n\n# 回车\ninput_box.send_keys(Keys.ENTER)\n```\n","slug":"20-python-selenium","published":1,"updated":"2020-07-05T05:30:04.361Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckdnmttdh001lrwui7r7qcnnv","content":"<h1 id=\"Selenium\"><a href=\"#Selenium\" class=\"headerlink\" title=\"Selenium\"></a>Selenium</h1><blockquote>\n<p>在之前静态网站的爬取中，request 库和 bs4 已经可以满足大多数需求。但有的时候我们想要爬取的站点时用 js 来动态加载的，比如有的要把页面拉到最下方才可以加载。那这时候我们可以利用 selenium 来模拟浏览器行为进行页面的爬取。不过 Selenium 的速度还是不行，毕竟要启动浏览器，加载头部图片等等。之后会学习别的技术来替代。按照官方的定义，selenium 是用来自动化测试，即我们也可以用来执行一些列任务。</p>\n</blockquote>\n<h2 id=\"设置\"><a href=\"#设置\" class=\"headerlink\" title=\"设置\"></a>设置</h2><h3 id=\"安装-Selenium\"><a href=\"#安装-Selenium\" class=\"headerlink\" title=\"安装 Selenium\"></a>安装 Selenium</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install selenium</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"下载浏览器驱动\"><a href=\"#下载浏览器驱动\" class=\"headerlink\" title=\"下载浏览器驱动\"></a>下载浏览器驱动</h3><p>Selenium 比较麻烦的地方就是配置驱动。我们安装<code>selenium</code>库后，还必须要驱动下载并设置为环境变量才可以在脚本中正确启动。Selenium 支持的浏览器驱动也比较全，包括的有 Firefox, Chrome, IE, Edge, Opera。需要注意的是驱动的版本要匹配你浏览器的版本，不然也会出问题。</p>\n<p>下载完驱动后，我是把驱动直接放在 python 安装目录下，因为 python 已经设置了环境变量，所以就不需要单独设置浏览器驱动的环境变量路径了。</p>\n<h2 id=\"常用方法\"><a href=\"#常用方法\" class=\"headerlink\" title=\"常用方法\"></a>常用方法</h2><h3 id=\"操作浏览器\"><a href=\"#操作浏览器\" class=\"headerlink\" title=\"操作浏览器\"></a>操作浏览器</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> selenium <span class=\"keyword\">import</span> webdriver</span><br><span class=\"line\"><span class=\"keyword\">from</span> bs4 <span class=\"keyword\">import</span> BeautifulSoup</span><br><span class=\"line\"></span><br><span class=\"line\">url = <span class=\"string\">'https://www.coquitlamcollege.com/programs-courses/university-transfer-program/class-timetable/'</span></span><br><span class=\"line\">browser = webdriver.Chrome()</span><br><span class=\"line\">browser.get(url)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 前进浏览器记录</span></span><br><span class=\"line\">browser.forward()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 后退浏览器记录</span></span><br><span class=\"line\">browser.back()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 刷新浏览器</span></span><br><span class=\"line\">browser.refresh()</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"滑动页面\"><a href=\"#滑动页面\" class=\"headerlink\" title=\"滑动页面\"></a>滑动页面</h3><p>我们可以用<code>execute_script</code>方法来执行脚本命令。下面代码我们声明一个<code>js</code>变量，内容即滑动到 body 的底部。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">js = <span class=\"string\">\"var q=document.documentElement.scrollTop=document.body.scrollHeight\"</span></span><br><span class=\"line\">browser.execute_script(js)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查找元素\"><a href=\"#查找元素\" class=\"headerlink\" title=\"查找元素\"></a>查找元素</h3><p>我们同样可以用 Selenium 来查找元素，一般配合<code>get_attribute()</code>方法使用来获取元素的值。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 匹配第一个找到的原色</span></span><br><span class=\"line\">find_element_by_id</span><br><span class=\"line\">find_element_by_name</span><br><span class=\"line\">find_element_by_xpath</span><br><span class=\"line\">find_element_by_tag_name</span><br><span class=\"line\">find_element_by_class_name</span><br><span class=\"line\">find_element_by_css_selector</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 返回多个结果</span></span><br><span class=\"line\">find_elements_by_name</span><br><span class=\"line\">find_elements_by_xpath</span><br><span class=\"line\">find_elements_by_tag_name</span><br><span class=\"line\">find_elements_by_class_name</span><br><span class=\"line\">find_elements_by_css_selector</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"input-的输入和递交\"><a href=\"#input-的输入和递交\" class=\"headerlink\" title=\"input 的输入和递交\"></a>input 的输入和递交</h3><p>我们可以用<code>send_keys()</code>方法来执行键盘指令。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> selenium <span class=\"keyword\">import</span> webdriver</span><br><span class=\"line\"><span class=\"keyword\">from</span> selenium.webdriver.common.keys <span class=\"keyword\">import</span> Keys</span><br><span class=\"line\"></span><br><span class=\"line\">browser = webdriver.Chrome()</span><br><span class=\"line\"></span><br><span class=\"line\">url = <span class=\"string\">'https://www.roguecanada.ca/'</span></span><br><span class=\"line\"></span><br><span class=\"line\">browser.get(url)</span><br><span class=\"line\">browser.implicitly_wait(<span class=\"number\">5</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 找到输入框元素</span></span><br><span class=\"line\">input_box = browser.find_element_by_id(<span class=\"string\">'site-search-input'</span>)</span><br><span class=\"line\">input_box.clear()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 输入框输入内容</span></span><br><span class=\"line\">input_box.send_keys(<span class=\"string\">'kg plates'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 回车</span></span><br><span class=\"line\">input_box.send_keys(Keys.ENTER)</span><br></pre></td></tr></table></figure>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"","more":"<h1 id=\"Selenium\"><a href=\"#Selenium\" class=\"headerlink\" title=\"Selenium\"></a>Selenium</h1><blockquote>\n<p>在之前静态网站的爬取中，request 库和 bs4 已经可以满足大多数需求。但有的时候我们想要爬取的站点时用 js 来动态加载的，比如有的要把页面拉到最下方才可以加载。那这时候我们可以利用 selenium 来模拟浏览器行为进行页面的爬取。不过 Selenium 的速度还是不行，毕竟要启动浏览器，加载头部图片等等。之后会学习别的技术来替代。按照官方的定义，selenium 是用来自动化测试，即我们也可以用来执行一些列任务。</p>\n</blockquote>\n<h2 id=\"设置\"><a href=\"#设置\" class=\"headerlink\" title=\"设置\"></a>设置</h2><h3 id=\"安装-Selenium\"><a href=\"#安装-Selenium\" class=\"headerlink\" title=\"安装 Selenium\"></a>安装 Selenium</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install selenium</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"下载浏览器驱动\"><a href=\"#下载浏览器驱动\" class=\"headerlink\" title=\"下载浏览器驱动\"></a>下载浏览器驱动</h3><p>Selenium 比较麻烦的地方就是配置驱动。我们安装<code>selenium</code>库后，还必须要驱动下载并设置为环境变量才可以在脚本中正确启动。Selenium 支持的浏览器驱动也比较全，包括的有 Firefox, Chrome, IE, Edge, Opera。需要注意的是驱动的版本要匹配你浏览器的版本，不然也会出问题。</p>\n<p>下载完驱动后，我是把驱动直接放在 python 安装目录下，因为 python 已经设置了环境变量，所以就不需要单独设置浏览器驱动的环境变量路径了。</p>\n<h2 id=\"常用方法\"><a href=\"#常用方法\" class=\"headerlink\" title=\"常用方法\"></a>常用方法</h2><h3 id=\"操作浏览器\"><a href=\"#操作浏览器\" class=\"headerlink\" title=\"操作浏览器\"></a>操作浏览器</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> selenium <span class=\"keyword\">import</span> webdriver</span><br><span class=\"line\"><span class=\"keyword\">from</span> bs4 <span class=\"keyword\">import</span> BeautifulSoup</span><br><span class=\"line\"></span><br><span class=\"line\">url = <span class=\"string\">'https://www.coquitlamcollege.com/programs-courses/university-transfer-program/class-timetable/'</span></span><br><span class=\"line\">browser = webdriver.Chrome()</span><br><span class=\"line\">browser.get(url)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 前进浏览器记录</span></span><br><span class=\"line\">browser.forward()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 后退浏览器记录</span></span><br><span class=\"line\">browser.back()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 刷新浏览器</span></span><br><span class=\"line\">browser.refresh()</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"滑动页面\"><a href=\"#滑动页面\" class=\"headerlink\" title=\"滑动页面\"></a>滑动页面</h3><p>我们可以用<code>execute_script</code>方法来执行脚本命令。下面代码我们声明一个<code>js</code>变量，内容即滑动到 body 的底部。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">js = <span class=\"string\">\"var q=document.documentElement.scrollTop=document.body.scrollHeight\"</span></span><br><span class=\"line\">browser.execute_script(js)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查找元素\"><a href=\"#查找元素\" class=\"headerlink\" title=\"查找元素\"></a>查找元素</h3><p>我们同样可以用 Selenium 来查找元素，一般配合<code>get_attribute()</code>方法使用来获取元素的值。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 匹配第一个找到的原色</span></span><br><span class=\"line\">find_element_by_id</span><br><span class=\"line\">find_element_by_name</span><br><span class=\"line\">find_element_by_xpath</span><br><span class=\"line\">find_element_by_tag_name</span><br><span class=\"line\">find_element_by_class_name</span><br><span class=\"line\">find_element_by_css_selector</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 返回多个结果</span></span><br><span class=\"line\">find_elements_by_name</span><br><span class=\"line\">find_elements_by_xpath</span><br><span class=\"line\">find_elements_by_tag_name</span><br><span class=\"line\">find_elements_by_class_name</span><br><span class=\"line\">find_elements_by_css_selector</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"input-的输入和递交\"><a href=\"#input-的输入和递交\" class=\"headerlink\" title=\"input 的输入和递交\"></a>input 的输入和递交</h3><p>我们可以用<code>send_keys()</code>方法来执行键盘指令。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> selenium <span class=\"keyword\">import</span> webdriver</span><br><span class=\"line\"><span class=\"keyword\">from</span> selenium.webdriver.common.keys <span class=\"keyword\">import</span> Keys</span><br><span class=\"line\"></span><br><span class=\"line\">browser = webdriver.Chrome()</span><br><span class=\"line\"></span><br><span class=\"line\">url = <span class=\"string\">'https://www.roguecanada.ca/'</span></span><br><span class=\"line\"></span><br><span class=\"line\">browser.get(url)</span><br><span class=\"line\">browser.implicitly_wait(<span class=\"number\">5</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 找到输入框元素</span></span><br><span class=\"line\">input_box = browser.find_element_by_id(<span class=\"string\">'site-search-input'</span>)</span><br><span class=\"line\">input_box.clear()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 输入框输入内容</span></span><br><span class=\"line\">input_box.send_keys(<span class=\"string\">'kg plates'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 回车</span></span><br><span class=\"line\">input_box.send_keys(Keys.ENTER)</span><br></pre></td></tr></table></figure>\n"},{"title":"如何用Fiddler下载抖音视频??","date":"2020-07-02T06:57:13.000Z","cover":"https://pic3.zhimg.com/v2-f7dd822655d8a76787389148658e4c41_1440w.jpg","_content":"\n> 具体的思路就是先把 Fiddler 和手机设备在同一 WIFI 下，然后配置网络代理。之后用 Fiddler 保存手机所有 response 的包到本地，有了视频列表的数据包用 python 下载就比较简单了。所以重点在于分析 HTTPS 流量，要找到视频是储存在哪里。下载的脚本可以到[我的 repo](https://github.com/yang052513/tiktok-dl-fiddler)查看。\n\n## <span id=\"01\">环境</span>\n\n- Windows 10 system\n- Python 3.8\n- IOS device (我用的是 IOS12, 具体型号不同请求头也会不同)\n- Fiddler\n\n## <span id=\"02\">Fiddler 的配置</span>\n\n### 安装 Fiddler\n\n如果你没有安装过 Fiddler, 你可以去[Fiddler 官方网站](https://www.telerik.com/download/fiddler)下载 windows 版的最新版本，下载完成后一直点击安装就好。\n\n### 设置 Fiddler\n\n安装完 Fiddler 后，以管理员身份运行 Fiddler。然后在顶部菜单栏找到 `Tools -> Options`。在`Option`面板中点击`HTTPS`，然后如下配置。其实就是用来抓取 HTTPS 协议的 traffic。不然 request 是抓不到的。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/1.png?alt=media&token=da470f88-a518-441a-8297-3ab009bd89a4\" width=\"400px\" height=\"auto\"/>\n\n然后我们在`Option`面板中切换到`Connections`。配置如下。端口你可以用别的但要确保之后和你手机配置的端口保持一致。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/2.png?alt=media&token=7f8c1b86-3021-4664-b2ae-3fbeea9102e3\" width=\"400px\" height=\"auto\"/>\n\n## <span id=\"03\">手机配置</span>\n\n在你的手机设备上，点击`Settings`然后点击`WIFI`。确保你和你的电脑都连接的同一个`WIFI`。然后点击最下方的`Configure Proxy`来配置代理。改为`Manual`后输入你的`IP 地址`和端口`8888`然后保存就可以了。\n\n> server 可以在 windows 命令行中输入 ipconfig 来查询。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/4.png?alt=media&token=9373f90b-c472-45be-8fcd-8403e0ae96fc\" width=\"auto\" height=\"500px\"/>\n\n确保`Fiddler`还在后台运行，因为我们要安装`Fiddler`证书到手机上。在`Safari`浏览器内输入你的 server 地址然后下载`FiddlerRoot certificate`。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/5.png?alt=media&token=b82c4fd8-82e5-46d7-b202-6a3300774aaf\" width=\"auto\" height=\"500px\"/>\n\n<br />\n\n证书下载完成后，我们需要在`Settings`中安装证书来启用。`General -> Profiles -> DO_NOT_TRUST_FiddlerRoot`然后点击安装证书。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/7.png?alt=media&token=9fbb87e4-a1a0-4304-907f-e7695c27a950\" width=\"auto\" height=\"500px\"/>\n\n<br />\n\n在`General -> About -> Certificate Trust Settings`中启用`DO_NOT_TRUST_FiddlerRoot`.\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/6.png?alt=media&token=0c8ca4aa-f96c-40eb-974d-62234b434d40\" width=\"auto\" height=\"500px\"/>\n\n<br />\n\n这样 Fiddler 和手机的配置就完成了。这个时候你可以打开一个 app, 然后你会发现 Fiddler 中会返回很多 request。\n\n<img src=\"https://tp1.tupiankucdn.com/ws/large/005GOaLIgy1fyc35ofomnj3073073q2u.jpg\" />\n<br />\n\n## <span id=\"04\">使用 Fiddler 抓包</span>\n\n### 添加过滤条件\n\n比如我们要下载抖音某博主的所有视频，我们随便点击一个博主的主页然后向下滑动。这时候 Fiddler 会返回很多 request. 但仔细观察一段时间后，你会发现所有的视频数据都保存在`api3-core-c-lq.amemv.com/aweme/post/`。那我们这时候就可以添加过滤规则来筛选结果了。点击`Run Filter Now`，你会看到现在只返回`api3-core-c-lq.amemv.com/aweme/post/`的 requests 了。\n\n### 自定义保存规则\n\n所有的视频都保存在一个`aweme_list`中。那我们如果想保存到本地话可以用右键保存到本地文件。但是一般情况下博主的视频都是多于 1 个 json 文件，我们一般要滑动几次才能全部加载完。那我们就可以在脚本中设置一个规则来自动保存请求。\n\nGo to `Rules -> Customize Rules`.\n\n#### onBeforeRequest\n\n在`OnBeforeRequest(oSession: Session)` 函数中添加以下脚本。我们把请求的头部，url 和 body 都写入到`reuqest.txt`文件中。之后用 Python 下载时需要创一个伪装头。\n\n```js\nif (oSession.fullUrl.Contains('api3-core-c-lq.amemv.com/aweme/v1/aweme/post')) {\n  var fso\n  var file\n  fso = new ActiveXObject('Scripting.FileSystemObject')\n\n  file = fso.OpenTextFile(\n    // the path where you want to store everytime you make request to app\n    'C:\\\\Users\\\\Yang\\\\Desktop\\\\request.txt',\n    8,\n    true,\n    true\n  )\n  file.writeLine(oSession.url)\n  file.writeLine(oSession.oRequest.headers)\n  file.writeLine(oSession.GetRequestBodyAsString())\n  file.writeLine('\\n')\n  file.close()\n}\n```\n\n#### onBeforeResponse\n\n同理，在`OnBeforeResponse(oSession: Session)`函数中添加以下脚本。主要用来保存响应的 body。\n\n```js\nif (oSession.fullUrl.Contains('api3-core-c-lq.amemv.com/aweme/v1/aweme/post')) {\n  var fso\n  var file\n  fso = new ActiveXObject('Scripting.FileSystemObject')\n\n  file = fso.OpenTextFile(\n    'C:\\\\Users\\\\Yang\\\\Desktop\\\\response.txt',\n    8,\n    true,\n    true\n  )\n  file.writeLine(oSession.GetResponseBodyAsString())\n\n  //每个响应分隔，之后用来遍历每个列表\n  file.writeLine('======')\n  file.close()\n}\n```\n\n修改完毕后保存脚本。这个时候当我们滑动博主的个人页面后，我们可以看到 Fiddler 会只返回我们需要的 json 文件，而且请求和响应文件都分别保存在桌面上。\n\n## <span id=\"05\">下载视频。</span>\n\n拿到响应后，下载就比较容易了。但要先把保存的的响应文件保存为`utf-8`编码格式。不然 Python 不能读取。\n\n因为每个视频都保存在`donwload_addr`数组中，我们只要遍历所有视频然后用`requests`库下载保存为 mp4 文件就可以了。源码可以在[这里](https://github.com/yang052513/tiktok-dl-fiddler)查看。需要注意的地方可能就是文件名保存，很多抖音视频文件名会有`<`或其他无效字符，不能保存。所以要先过滤把非法字符替换掉。然后要确保 Fiddler 没有关闭，因为我们是用 Fillder 来假装发起请求。\n\n运行脚本后，就可以把视频都下载好了~\n\n<br />\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-02%20220150.png?alt=media&token=f963df29-de3f-4720-b909-5348eac1e9f4\"/>\n\n<br />\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-02%20220228.png?alt=media&token=9d5fe44d-c093-44ce-afe2-ca1766310cb3\"/>\n","source":"_posts/21-python-fillder.md","raw":"---\ntitle: 如何用Fiddler下载抖音视频??\ndate: 2020-07-01 23:57:13\ntags: ['python', 'article', 'web crawler', 'fiddler', 'python-crawler-series']\ncategories: Python爬虫\ncover: 'https://pic3.zhimg.com/v2-f7dd822655d8a76787389148658e4c41_1440w.jpg'\n---\n\n> 具体的思路就是先把 Fiddler 和手机设备在同一 WIFI 下，然后配置网络代理。之后用 Fiddler 保存手机所有 response 的包到本地，有了视频列表的数据包用 python 下载就比较简单了。所以重点在于分析 HTTPS 流量，要找到视频是储存在哪里。下载的脚本可以到[我的 repo](https://github.com/yang052513/tiktok-dl-fiddler)查看。\n\n## <span id=\"01\">环境</span>\n\n- Windows 10 system\n- Python 3.8\n- IOS device (我用的是 IOS12, 具体型号不同请求头也会不同)\n- Fiddler\n\n## <span id=\"02\">Fiddler 的配置</span>\n\n### 安装 Fiddler\n\n如果你没有安装过 Fiddler, 你可以去[Fiddler 官方网站](https://www.telerik.com/download/fiddler)下载 windows 版的最新版本，下载完成后一直点击安装就好。\n\n### 设置 Fiddler\n\n安装完 Fiddler 后，以管理员身份运行 Fiddler。然后在顶部菜单栏找到 `Tools -> Options`。在`Option`面板中点击`HTTPS`，然后如下配置。其实就是用来抓取 HTTPS 协议的 traffic。不然 request 是抓不到的。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/1.png?alt=media&token=da470f88-a518-441a-8297-3ab009bd89a4\" width=\"400px\" height=\"auto\"/>\n\n然后我们在`Option`面板中切换到`Connections`。配置如下。端口你可以用别的但要确保之后和你手机配置的端口保持一致。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/2.png?alt=media&token=7f8c1b86-3021-4664-b2ae-3fbeea9102e3\" width=\"400px\" height=\"auto\"/>\n\n## <span id=\"03\">手机配置</span>\n\n在你的手机设备上，点击`Settings`然后点击`WIFI`。确保你和你的电脑都连接的同一个`WIFI`。然后点击最下方的`Configure Proxy`来配置代理。改为`Manual`后输入你的`IP 地址`和端口`8888`然后保存就可以了。\n\n> server 可以在 windows 命令行中输入 ipconfig 来查询。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/4.png?alt=media&token=9373f90b-c472-45be-8fcd-8403e0ae96fc\" width=\"auto\" height=\"500px\"/>\n\n确保`Fiddler`还在后台运行，因为我们要安装`Fiddler`证书到手机上。在`Safari`浏览器内输入你的 server 地址然后下载`FiddlerRoot certificate`。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/5.png?alt=media&token=b82c4fd8-82e5-46d7-b202-6a3300774aaf\" width=\"auto\" height=\"500px\"/>\n\n<br />\n\n证书下载完成后，我们需要在`Settings`中安装证书来启用。`General -> Profiles -> DO_NOT_TRUST_FiddlerRoot`然后点击安装证书。\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/7.png?alt=media&token=9fbb87e4-a1a0-4304-907f-e7695c27a950\" width=\"auto\" height=\"500px\"/>\n\n<br />\n\n在`General -> About -> Certificate Trust Settings`中启用`DO_NOT_TRUST_FiddlerRoot`.\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/6.png?alt=media&token=0c8ca4aa-f96c-40eb-974d-62234b434d40\" width=\"auto\" height=\"500px\"/>\n\n<br />\n\n这样 Fiddler 和手机的配置就完成了。这个时候你可以打开一个 app, 然后你会发现 Fiddler 中会返回很多 request。\n\n<img src=\"https://tp1.tupiankucdn.com/ws/large/005GOaLIgy1fyc35ofomnj3073073q2u.jpg\" />\n<br />\n\n## <span id=\"04\">使用 Fiddler 抓包</span>\n\n### 添加过滤条件\n\n比如我们要下载抖音某博主的所有视频，我们随便点击一个博主的主页然后向下滑动。这时候 Fiddler 会返回很多 request. 但仔细观察一段时间后，你会发现所有的视频数据都保存在`api3-core-c-lq.amemv.com/aweme/post/`。那我们这时候就可以添加过滤规则来筛选结果了。点击`Run Filter Now`，你会看到现在只返回`api3-core-c-lq.amemv.com/aweme/post/`的 requests 了。\n\n### 自定义保存规则\n\n所有的视频都保存在一个`aweme_list`中。那我们如果想保存到本地话可以用右键保存到本地文件。但是一般情况下博主的视频都是多于 1 个 json 文件，我们一般要滑动几次才能全部加载完。那我们就可以在脚本中设置一个规则来自动保存请求。\n\nGo to `Rules -> Customize Rules`.\n\n#### onBeforeRequest\n\n在`OnBeforeRequest(oSession: Session)` 函数中添加以下脚本。我们把请求的头部，url 和 body 都写入到`reuqest.txt`文件中。之后用 Python 下载时需要创一个伪装头。\n\n```js\nif (oSession.fullUrl.Contains('api3-core-c-lq.amemv.com/aweme/v1/aweme/post')) {\n  var fso\n  var file\n  fso = new ActiveXObject('Scripting.FileSystemObject')\n\n  file = fso.OpenTextFile(\n    // the path where you want to store everytime you make request to app\n    'C:\\\\Users\\\\Yang\\\\Desktop\\\\request.txt',\n    8,\n    true,\n    true\n  )\n  file.writeLine(oSession.url)\n  file.writeLine(oSession.oRequest.headers)\n  file.writeLine(oSession.GetRequestBodyAsString())\n  file.writeLine('\\n')\n  file.close()\n}\n```\n\n#### onBeforeResponse\n\n同理，在`OnBeforeResponse(oSession: Session)`函数中添加以下脚本。主要用来保存响应的 body。\n\n```js\nif (oSession.fullUrl.Contains('api3-core-c-lq.amemv.com/aweme/v1/aweme/post')) {\n  var fso\n  var file\n  fso = new ActiveXObject('Scripting.FileSystemObject')\n\n  file = fso.OpenTextFile(\n    'C:\\\\Users\\\\Yang\\\\Desktop\\\\response.txt',\n    8,\n    true,\n    true\n  )\n  file.writeLine(oSession.GetResponseBodyAsString())\n\n  //每个响应分隔，之后用来遍历每个列表\n  file.writeLine('======')\n  file.close()\n}\n```\n\n修改完毕后保存脚本。这个时候当我们滑动博主的个人页面后，我们可以看到 Fiddler 会只返回我们需要的 json 文件，而且请求和响应文件都分别保存在桌面上。\n\n## <span id=\"05\">下载视频。</span>\n\n拿到响应后，下载就比较容易了。但要先把保存的的响应文件保存为`utf-8`编码格式。不然 Python 不能读取。\n\n因为每个视频都保存在`donwload_addr`数组中，我们只要遍历所有视频然后用`requests`库下载保存为 mp4 文件就可以了。源码可以在[这里](https://github.com/yang052513/tiktok-dl-fiddler)查看。需要注意的地方可能就是文件名保存，很多抖音视频文件名会有`<`或其他无效字符，不能保存。所以要先过滤把非法字符替换掉。然后要确保 Fiddler 没有关闭，因为我们是用 Fillder 来假装发起请求。\n\n运行脚本后，就可以把视频都下载好了~\n\n<br />\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-02%20220150.png?alt=media&token=f963df29-de3f-4720-b909-5348eac1e9f4\"/>\n\n<br />\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-02%20220228.png?alt=media&token=9d5fe44d-c093-44ce-afe2-ca1766310cb3\"/>\n","slug":"21-python-fillder","published":1,"updated":"2020-07-14T18:25:39.735Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckdnmttdm001qrwuigcrncofx","content":"<blockquote>\n<p>具体的思路就是先把 Fiddler 和手机设备在同一 WIFI 下，然后配置网络代理。之后用 Fiddler 保存手机所有 response 的包到本地，有了视频列表的数据包用 python 下载就比较简单了。所以重点在于分析 HTTPS 流量，要找到视频是储存在哪里。下载的脚本可以到<a href=\"https://github.com/yang052513/tiktok-dl-fiddler\" target=\"_blank\" rel=\"noopener\">我的 repo</a>查看。</p>\n</blockquote>\n<h2 id=\"环境\"><a href=\"#环境\" class=\"headerlink\" title=\"环境\"></a><span id=\"01\">环境</span></h2><ul>\n<li>Windows 10 system</li>\n<li>Python 3.8</li>\n<li>IOS device (我用的是 IOS12, 具体型号不同请求头也会不同)</li>\n<li>Fiddler</li>\n</ul>\n<h2 id=\"Fiddler-的配置\"><a href=\"#Fiddler-的配置\" class=\"headerlink\" title=\"Fiddler 的配置\"></a><span id=\"02\">Fiddler 的配置</span></h2><h3 id=\"安装-Fiddler\"><a href=\"#安装-Fiddler\" class=\"headerlink\" title=\"安装 Fiddler\"></a>安装 Fiddler</h3><p>如果你没有安装过 Fiddler, 你可以去<a href=\"https://www.telerik.com/download/fiddler\" target=\"_blank\" rel=\"noopener\">Fiddler 官方网站</a>下载 windows 版的最新版本，下载完成后一直点击安装就好。</p>\n<h3 id=\"设置-Fiddler\"><a href=\"#设置-Fiddler\" class=\"headerlink\" title=\"设置 Fiddler\"></a>设置 Fiddler</h3><p>安装完 Fiddler 后，以管理员身份运行 Fiddler。然后在顶部菜单栏找到 <code>Tools -&gt; Options</code>。在<code>Option</code>面板中点击<code>HTTPS</code>，然后如下配置。其实就是用来抓取 HTTPS 协议的 traffic。不然 request 是抓不到的。</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/1.png?alt=media&token=da470f88-a518-441a-8297-3ab009bd89a4\" width=\"400px\" height=\"auto\">\n\n<p>然后我们在<code>Option</code>面板中切换到<code>Connections</code>。配置如下。端口你可以用别的但要确保之后和你手机配置的端口保持一致。</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/2.png?alt=media&token=7f8c1b86-3021-4664-b2ae-3fbeea9102e3\" width=\"400px\" height=\"auto\">\n\n<h2 id=\"手机配置\"><a href=\"#手机配置\" class=\"headerlink\" title=\"手机配置\"></a><span id=\"03\">手机配置</span></h2><p>在你的手机设备上，点击<code>Settings</code>然后点击<code>WIFI</code>。确保你和你的电脑都连接的同一个<code>WIFI</code>。然后点击最下方的<code>Configure Proxy</code>来配置代理。改为<code>Manual</code>后输入你的<code>IP 地址</code>和端口<code>8888</code>然后保存就可以了。</p>\n<blockquote>\n<p>server 可以在 windows 命令行中输入 ipconfig 来查询。</p>\n</blockquote>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/4.png?alt=media&token=9373f90b-c472-45be-8fcd-8403e0ae96fc\" width=\"auto\" height=\"500px\">\n\n<p>确保<code>Fiddler</code>还在后台运行，因为我们要安装<code>Fiddler</code>证书到手机上。在<code>Safari</code>浏览器内输入你的 server 地址然后下载<code>FiddlerRoot certificate</code>。</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/5.png?alt=media&token=b82c4fd8-82e5-46d7-b202-6a3300774aaf\" width=\"auto\" height=\"500px\">\n\n<br>\n\n<p>证书下载完成后，我们需要在<code>Settings</code>中安装证书来启用。<code>General -&gt; Profiles -&gt; DO_NOT_TRUST_FiddlerRoot</code>然后点击安装证书。</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/7.png?alt=media&token=9fbb87e4-a1a0-4304-907f-e7695c27a950\" width=\"auto\" height=\"500px\">\n\n<br>\n\n<p>在<code>General -&gt; About -&gt; Certificate Trust Settings</code>中启用<code>DO_NOT_TRUST_FiddlerRoot</code>.</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/6.png?alt=media&token=0c8ca4aa-f96c-40eb-974d-62234b434d40\" width=\"auto\" height=\"500px\">\n\n<br>\n\n<p>这样 Fiddler 和手机的配置就完成了。这个时候你可以打开一个 app, 然后你会发现 Fiddler 中会返回很多 request。</p>\n<img src= \"/img/loading.gif\" data-src=\"https://tp1.tupiankucdn.com/ws/large/005GOaLIgy1fyc35ofomnj3073073q2u.jpg\">\n<br>\n\n<h2 id=\"使用-Fiddler-抓包\"><a href=\"#使用-Fiddler-抓包\" class=\"headerlink\" title=\"使用 Fiddler 抓包\"></a><span id=\"04\">使用 Fiddler 抓包</span></h2><h3 id=\"添加过滤条件\"><a href=\"#添加过滤条件\" class=\"headerlink\" title=\"添加过滤条件\"></a>添加过滤条件</h3><p>比如我们要下载抖音某博主的所有视频，我们随便点击一个博主的主页然后向下滑动。这时候 Fiddler 会返回很多 request. 但仔细观察一段时间后，你会发现所有的视频数据都保存在<code>api3-core-c-lq.amemv.com/aweme/post/</code>。那我们这时候就可以添加过滤规则来筛选结果了。点击<code>Run Filter Now</code>，你会看到现在只返回<code>api3-core-c-lq.amemv.com/aweme/post/</code>的 requests 了。</p>\n<h3 id=\"自定义保存规则\"><a href=\"#自定义保存规则\" class=\"headerlink\" title=\"自定义保存规则\"></a>自定义保存规则</h3><p>所有的视频都保存在一个<code>aweme_list</code>中。那我们如果想保存到本地话可以用右键保存到本地文件。但是一般情况下博主的视频都是多于 1 个 json 文件，我们一般要滑动几次才能全部加载完。那我们就可以在脚本中设置一个规则来自动保存请求。</p>\n<p>Go to <code>Rules -&gt; Customize Rules</code>.</p>\n<h4 id=\"onBeforeRequest\"><a href=\"#onBeforeRequest\" class=\"headerlink\" title=\"onBeforeRequest\"></a>onBeforeRequest</h4><p>在<code>OnBeforeRequest(oSession: Session)</code> 函数中添加以下脚本。我们把请求的头部，url 和 body 都写入到<code>reuqest.txt</code>文件中。之后用 Python 下载时需要创一个伪装头。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (oSession.fullUrl.Contains(<span class=\"string\">'api3-core-c-lq.amemv.com/aweme/v1/aweme/post'</span>)) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> fso</span><br><span class=\"line\">  <span class=\"keyword\">var</span> file</span><br><span class=\"line\">  fso = <span class=\"keyword\">new</span> ActiveXObject(<span class=\"string\">'Scripting.FileSystemObject'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  file = fso.OpenTextFile(</span><br><span class=\"line\">    <span class=\"comment\">// the path where you want to store everytime you make request to app</span></span><br><span class=\"line\">    <span class=\"string\">'C:\\\\Users\\\\Yang\\\\Desktop\\\\request.txt'</span>,</span><br><span class=\"line\">    <span class=\"number\">8</span>,</span><br><span class=\"line\">    <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"literal\">true</span></span><br><span class=\"line\">  )</span><br><span class=\"line\">  file.writeLine(oSession.url)</span><br><span class=\"line\">  file.writeLine(oSession.oRequest.headers)</span><br><span class=\"line\">  file.writeLine(oSession.GetRequestBodyAsString())</span><br><span class=\"line\">  file.writeLine(<span class=\"string\">'\\n'</span>)</span><br><span class=\"line\">  file.close()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"onBeforeResponse\"><a href=\"#onBeforeResponse\" class=\"headerlink\" title=\"onBeforeResponse\"></a>onBeforeResponse</h4><p>同理，在<code>OnBeforeResponse(oSession: Session)</code>函数中添加以下脚本。主要用来保存响应的 body。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (oSession.fullUrl.Contains(<span class=\"string\">'api3-core-c-lq.amemv.com/aweme/v1/aweme/post'</span>)) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> fso</span><br><span class=\"line\">  <span class=\"keyword\">var</span> file</span><br><span class=\"line\">  fso = <span class=\"keyword\">new</span> ActiveXObject(<span class=\"string\">'Scripting.FileSystemObject'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  file = fso.OpenTextFile(</span><br><span class=\"line\">    <span class=\"string\">'C:\\\\Users\\\\Yang\\\\Desktop\\\\response.txt'</span>,</span><br><span class=\"line\">    <span class=\"number\">8</span>,</span><br><span class=\"line\">    <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"literal\">true</span></span><br><span class=\"line\">  )</span><br><span class=\"line\">  file.writeLine(oSession.GetResponseBodyAsString())</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//每个响应分隔，之后用来遍历每个列表</span></span><br><span class=\"line\">  file.writeLine(<span class=\"string\">'======'</span>)</span><br><span class=\"line\">  file.close()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>修改完毕后保存脚本。这个时候当我们滑动博主的个人页面后，我们可以看到 Fiddler 会只返回我们需要的 json 文件，而且请求和响应文件都分别保存在桌面上。</p>\n<h2 id=\"下载视频。\"><a href=\"#下载视频。\" class=\"headerlink\" title=\"下载视频。\"></a><span id=\"05\">下载视频。</span></h2><p>拿到响应后，下载就比较容易了。但要先把保存的的响应文件保存为<code>utf-8</code>编码格式。不然 Python 不能读取。</p>\n<p>因为每个视频都保存在<code>donwload_addr</code>数组中，我们只要遍历所有视频然后用<code>requests</code>库下载保存为 mp4 文件就可以了。源码可以在<a href=\"https://github.com/yang052513/tiktok-dl-fiddler\" target=\"_blank\" rel=\"noopener\">这里</a>查看。需要注意的地方可能就是文件名保存，很多抖音视频文件名会有<code>&lt;</code>或其他无效字符，不能保存。所以要先过滤把非法字符替换掉。然后要确保 Fiddler 没有关闭，因为我们是用 Fillder 来假装发起请求。</p>\n<p>运行脚本后，就可以把视频都下载好了~</p>\n<br>\n\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-02%20220150.png?alt=media&token=f963df29-de3f-4720-b909-5348eac1e9f4\">\n\n<br>\n\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-02%20220228.png?alt=media&token=9d5fe44d-c093-44ce-afe2-ca1766310cb3\">\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"","more":"<blockquote>\n<p>具体的思路就是先把 Fiddler 和手机设备在同一 WIFI 下，然后配置网络代理。之后用 Fiddler 保存手机所有 response 的包到本地，有了视频列表的数据包用 python 下载就比较简单了。所以重点在于分析 HTTPS 流量，要找到视频是储存在哪里。下载的脚本可以到<a href=\"https://github.com/yang052513/tiktok-dl-fiddler\" target=\"_blank\" rel=\"noopener\">我的 repo</a>查看。</p>\n</blockquote>\n<h2 id=\"环境\"><a href=\"#环境\" class=\"headerlink\" title=\"环境\"></a><span id=\"01\">环境</span></h2><ul>\n<li>Windows 10 system</li>\n<li>Python 3.8</li>\n<li>IOS device (我用的是 IOS12, 具体型号不同请求头也会不同)</li>\n<li>Fiddler</li>\n</ul>\n<h2 id=\"Fiddler-的配置\"><a href=\"#Fiddler-的配置\" class=\"headerlink\" title=\"Fiddler 的配置\"></a><span id=\"02\">Fiddler 的配置</span></h2><h3 id=\"安装-Fiddler\"><a href=\"#安装-Fiddler\" class=\"headerlink\" title=\"安装 Fiddler\"></a>安装 Fiddler</h3><p>如果你没有安装过 Fiddler, 你可以去<a href=\"https://www.telerik.com/download/fiddler\" target=\"_blank\" rel=\"noopener\">Fiddler 官方网站</a>下载 windows 版的最新版本，下载完成后一直点击安装就好。</p>\n<h3 id=\"设置-Fiddler\"><a href=\"#设置-Fiddler\" class=\"headerlink\" title=\"设置 Fiddler\"></a>设置 Fiddler</h3><p>安装完 Fiddler 后，以管理员身份运行 Fiddler。然后在顶部菜单栏找到 <code>Tools -&gt; Options</code>。在<code>Option</code>面板中点击<code>HTTPS</code>，然后如下配置。其实就是用来抓取 HTTPS 协议的 traffic。不然 request 是抓不到的。</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/1.png?alt=media&token=da470f88-a518-441a-8297-3ab009bd89a4\" width=\"400px\" height=\"auto\">\n\n<p>然后我们在<code>Option</code>面板中切换到<code>Connections</code>。配置如下。端口你可以用别的但要确保之后和你手机配置的端口保持一致。</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/2.png?alt=media&token=7f8c1b86-3021-4664-b2ae-3fbeea9102e3\" width=\"400px\" height=\"auto\">\n\n<h2 id=\"手机配置\"><a href=\"#手机配置\" class=\"headerlink\" title=\"手机配置\"></a><span id=\"03\">手机配置</span></h2><p>在你的手机设备上，点击<code>Settings</code>然后点击<code>WIFI</code>。确保你和你的电脑都连接的同一个<code>WIFI</code>。然后点击最下方的<code>Configure Proxy</code>来配置代理。改为<code>Manual</code>后输入你的<code>IP 地址</code>和端口<code>8888</code>然后保存就可以了。</p>\n<blockquote>\n<p>server 可以在 windows 命令行中输入 ipconfig 来查询。</p>\n</blockquote>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/4.png?alt=media&token=9373f90b-c472-45be-8fcd-8403e0ae96fc\" width=\"auto\" height=\"500px\">\n\n<p>确保<code>Fiddler</code>还在后台运行，因为我们要安装<code>Fiddler</code>证书到手机上。在<code>Safari</code>浏览器内输入你的 server 地址然后下载<code>FiddlerRoot certificate</code>。</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/5.png?alt=media&token=b82c4fd8-82e5-46d7-b202-6a3300774aaf\" width=\"auto\" height=\"500px\">\n\n<br>\n\n<p>证书下载完成后，我们需要在<code>Settings</code>中安装证书来启用。<code>General -&gt; Profiles -&gt; DO_NOT_TRUST_FiddlerRoot</code>然后点击安装证书。</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/7.png?alt=media&token=9fbb87e4-a1a0-4304-907f-e7695c27a950\" width=\"auto\" height=\"500px\">\n\n<br>\n\n<p>在<code>General -&gt; About -&gt; Certificate Trust Settings</code>中启用<code>DO_NOT_TRUST_FiddlerRoot</code>.</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/6.png?alt=media&token=0c8ca4aa-f96c-40eb-974d-62234b434d40\" width=\"auto\" height=\"500px\">\n\n<br>\n\n<p>这样 Fiddler 和手机的配置就完成了。这个时候你可以打开一个 app, 然后你会发现 Fiddler 中会返回很多 request。</p>\n<img src=\"https://tp1.tupiankucdn.com/ws/large/005GOaLIgy1fyc35ofomnj3073073q2u.jpg\">\n<br>\n\n<h2 id=\"使用-Fiddler-抓包\"><a href=\"#使用-Fiddler-抓包\" class=\"headerlink\" title=\"使用 Fiddler 抓包\"></a><span id=\"04\">使用 Fiddler 抓包</span></h2><h3 id=\"添加过滤条件\"><a href=\"#添加过滤条件\" class=\"headerlink\" title=\"添加过滤条件\"></a>添加过滤条件</h3><p>比如我们要下载抖音某博主的所有视频，我们随便点击一个博主的主页然后向下滑动。这时候 Fiddler 会返回很多 request. 但仔细观察一段时间后，你会发现所有的视频数据都保存在<code>api3-core-c-lq.amemv.com/aweme/post/</code>。那我们这时候就可以添加过滤规则来筛选结果了。点击<code>Run Filter Now</code>，你会看到现在只返回<code>api3-core-c-lq.amemv.com/aweme/post/</code>的 requests 了。</p>\n<h3 id=\"自定义保存规则\"><a href=\"#自定义保存规则\" class=\"headerlink\" title=\"自定义保存规则\"></a>自定义保存规则</h3><p>所有的视频都保存在一个<code>aweme_list</code>中。那我们如果想保存到本地话可以用右键保存到本地文件。但是一般情况下博主的视频都是多于 1 个 json 文件，我们一般要滑动几次才能全部加载完。那我们就可以在脚本中设置一个规则来自动保存请求。</p>\n<p>Go to <code>Rules -&gt; Customize Rules</code>.</p>\n<h4 id=\"onBeforeRequest\"><a href=\"#onBeforeRequest\" class=\"headerlink\" title=\"onBeforeRequest\"></a>onBeforeRequest</h4><p>在<code>OnBeforeRequest(oSession: Session)</code> 函数中添加以下脚本。我们把请求的头部，url 和 body 都写入到<code>reuqest.txt</code>文件中。之后用 Python 下载时需要创一个伪装头。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (oSession.fullUrl.Contains(<span class=\"string\">'api3-core-c-lq.amemv.com/aweme/v1/aweme/post'</span>)) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> fso</span><br><span class=\"line\">  <span class=\"keyword\">var</span> file</span><br><span class=\"line\">  fso = <span class=\"keyword\">new</span> ActiveXObject(<span class=\"string\">'Scripting.FileSystemObject'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  file = fso.OpenTextFile(</span><br><span class=\"line\">    <span class=\"comment\">// the path where you want to store everytime you make request to app</span></span><br><span class=\"line\">    <span class=\"string\">'C:\\\\Users\\\\Yang\\\\Desktop\\\\request.txt'</span>,</span><br><span class=\"line\">    <span class=\"number\">8</span>,</span><br><span class=\"line\">    <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"literal\">true</span></span><br><span class=\"line\">  )</span><br><span class=\"line\">  file.writeLine(oSession.url)</span><br><span class=\"line\">  file.writeLine(oSession.oRequest.headers)</span><br><span class=\"line\">  file.writeLine(oSession.GetRequestBodyAsString())</span><br><span class=\"line\">  file.writeLine(<span class=\"string\">'\\n'</span>)</span><br><span class=\"line\">  file.close()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"onBeforeResponse\"><a href=\"#onBeforeResponse\" class=\"headerlink\" title=\"onBeforeResponse\"></a>onBeforeResponse</h4><p>同理，在<code>OnBeforeResponse(oSession: Session)</code>函数中添加以下脚本。主要用来保存响应的 body。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (oSession.fullUrl.Contains(<span class=\"string\">'api3-core-c-lq.amemv.com/aweme/v1/aweme/post'</span>)) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> fso</span><br><span class=\"line\">  <span class=\"keyword\">var</span> file</span><br><span class=\"line\">  fso = <span class=\"keyword\">new</span> ActiveXObject(<span class=\"string\">'Scripting.FileSystemObject'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  file = fso.OpenTextFile(</span><br><span class=\"line\">    <span class=\"string\">'C:\\\\Users\\\\Yang\\\\Desktop\\\\response.txt'</span>,</span><br><span class=\"line\">    <span class=\"number\">8</span>,</span><br><span class=\"line\">    <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"literal\">true</span></span><br><span class=\"line\">  )</span><br><span class=\"line\">  file.writeLine(oSession.GetResponseBodyAsString())</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//每个响应分隔，之后用来遍历每个列表</span></span><br><span class=\"line\">  file.writeLine(<span class=\"string\">'======'</span>)</span><br><span class=\"line\">  file.close()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>修改完毕后保存脚本。这个时候当我们滑动博主的个人页面后，我们可以看到 Fiddler 会只返回我们需要的 json 文件，而且请求和响应文件都分别保存在桌面上。</p>\n<h2 id=\"下载视频。\"><a href=\"#下载视频。\" class=\"headerlink\" title=\"下载视频。\"></a><span id=\"05\">下载视频。</span></h2><p>拿到响应后，下载就比较容易了。但要先把保存的的响应文件保存为<code>utf-8</code>编码格式。不然 Python 不能读取。</p>\n<p>因为每个视频都保存在<code>donwload_addr</code>数组中，我们只要遍历所有视频然后用<code>requests</code>库下载保存为 mp4 文件就可以了。源码可以在<a href=\"https://github.com/yang052513/tiktok-dl-fiddler\" target=\"_blank\" rel=\"noopener\">这里</a>查看。需要注意的地方可能就是文件名保存，很多抖音视频文件名会有<code>&lt;</code>或其他无效字符，不能保存。所以要先过滤把非法字符替换掉。然后要确保 Fiddler 没有关闭，因为我们是用 Fillder 来假装发起请求。</p>\n<p>运行脚本后，就可以把视频都下载好了~</p>\n<br>\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-02%20220150.png?alt=media&token=f963df29-de3f-4720-b909-5348eac1e9f4\">\n\n<br>\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-02%20220228.png?alt=media&token=9d5fe44d-c093-44ce-afe2-ca1766310cb3\">\n"},{"title":"在疫情中度过的暑假","date":"2020-07-03T05:22:58.000Z","cover":"https://wallpaperaccess.com/full/510846.jpg","_content":"\n> So it's almost been 5 months since the quarantine started, and my school closed since then. Some people might compliant about the lock down cause we cant hangout or whatever reasons. I am also kind worried because no gym means no gains, and I cant code with my friends. However, it turns out pretty well, I found out my learning philosophy, and actually, learning or training alone is kind better for me.\n\nIn April, I bought some lifting equipments from Rougue. I thought I am well ahead compared to others since one month later everything just out of stock. Well, I did not receive my package for twice. Everytime they lost something and I need to recall Rogue service center. Sucks. Finally, I received everything at the end of the April, and my training starts again.\n\nIn May, my frined Wenbo and me finished the [noPandemic](https://github.com/yang052513/no-pandemic) project for COMP2800. It's my first name using react which collaborate in a team. I found out design is way more important than I thought. We made some basic UI design, but during the later stage we got some trouble with mobile version because the layout is kind comoplex. That part waste us a lot of time. Never mind, our project got 1st place with most creative and best teamwork prizes. Good result anyway.\n\nAfter the project, I soon moved onto my next personal project, `ProjectHub` which is the project I want to do for really long time. The sorting algorithim is hard, but I figured out. The friend system is hard, but we did it. Solving problem is really fun process, and way better compared to the boring textbook exercises.\n\nThen, I found out I need to use some regular expression for my project. OK, let's learn some Regular expression.\n\nLater, I found a animation called Soul Land and just cant stop watching it, so I decide to download all the episodes and watch on my TV. However, there are 108 episodes, and I DONT WANT TO CLICK ONE BY ONE. So turns out we need to learn some python.\n\nMan, python is good.\n\nAt first, I was thinking like \"what? no need to declare variable type??\", or \"wtf is def():, why not function??\".\n\nHowever, human is flexible. Python is best.\n\nLater, I just falled in love with crawler. Why? Because it's fun, and it sovled many automated problems for me. I started with `request` library which is all you need for scraping static sites, then I moved to selenium cause some sites use ajax and js to dynamically loading contents, and selenium could act like a human manipulate a browser. I also learned Fiddler which could use for get request from mobile apps.\n\nBack to the training, what surprised me is that I dont need a fancy program and can still make awesome progress. LOL. I cant imagine I used to pay so much money to a coach just for some excel sheet programs. Especially bench, all I am doing is just more volume. Deadlift is even simple, adding reps every week and then re-cycle every month.\n\nIt works. Everything will work as long as logic.\n","source":"_posts/22-what-i-learn-summer.md","raw":"---\ntitle: 在疫情中度过的暑假\ndate: 2020-07-02 22:22:58\ntags: ['reflection']\ncategories: 笔记\ncover: 'https://wallpaperaccess.com/full/510846.jpg'\n---\n\n> So it's almost been 5 months since the quarantine started, and my school closed since then. Some people might compliant about the lock down cause we cant hangout or whatever reasons. I am also kind worried because no gym means no gains, and I cant code with my friends. However, it turns out pretty well, I found out my learning philosophy, and actually, learning or training alone is kind better for me.\n\nIn April, I bought some lifting equipments from Rougue. I thought I am well ahead compared to others since one month later everything just out of stock. Well, I did not receive my package for twice. Everytime they lost something and I need to recall Rogue service center. Sucks. Finally, I received everything at the end of the April, and my training starts again.\n\nIn May, my frined Wenbo and me finished the [noPandemic](https://github.com/yang052513/no-pandemic) project for COMP2800. It's my first name using react which collaborate in a team. I found out design is way more important than I thought. We made some basic UI design, but during the later stage we got some trouble with mobile version because the layout is kind comoplex. That part waste us a lot of time. Never mind, our project got 1st place with most creative and best teamwork prizes. Good result anyway.\n\nAfter the project, I soon moved onto my next personal project, `ProjectHub` which is the project I want to do for really long time. The sorting algorithim is hard, but I figured out. The friend system is hard, but we did it. Solving problem is really fun process, and way better compared to the boring textbook exercises.\n\nThen, I found out I need to use some regular expression for my project. OK, let's learn some Regular expression.\n\nLater, I found a animation called Soul Land and just cant stop watching it, so I decide to download all the episodes and watch on my TV. However, there are 108 episodes, and I DONT WANT TO CLICK ONE BY ONE. So turns out we need to learn some python.\n\nMan, python is good.\n\nAt first, I was thinking like \"what? no need to declare variable type??\", or \"wtf is def():, why not function??\".\n\nHowever, human is flexible. Python is best.\n\nLater, I just falled in love with crawler. Why? Because it's fun, and it sovled many automated problems for me. I started with `request` library which is all you need for scraping static sites, then I moved to selenium cause some sites use ajax and js to dynamically loading contents, and selenium could act like a human manipulate a browser. I also learned Fiddler which could use for get request from mobile apps.\n\nBack to the training, what surprised me is that I dont need a fancy program and can still make awesome progress. LOL. I cant imagine I used to pay so much money to a coach just for some excel sheet programs. Especially bench, all I am doing is just more volume. Deadlift is even simple, adding reps every week and then re-cycle every month.\n\nIt works. Everything will work as long as logic.\n","slug":"22-what-i-learn-summer","published":1,"updated":"2020-07-08T18:03:20.463Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckdnmttdn001srwuic9dn6x44","content":"<blockquote>\n<p>So it’s almost been 5 months since the quarantine started, and my school closed since then. Some people might compliant about the lock down cause we cant hangout or whatever reasons. I am also kind worried because no gym means no gains, and I cant code with my friends. However, it turns out pretty well, I found out my learning philosophy, and actually, learning or training alone is kind better for me.</p>\n</blockquote>\n<p>In April, I bought some lifting equipments from Rougue. I thought I am well ahead compared to others since one month later everything just out of stock. Well, I did not receive my package for twice. Everytime they lost something and I need to recall Rogue service center. Sucks. Finally, I received everything at the end of the April, and my training starts again.</p>\n<p>In May, my frined Wenbo and me finished the <a href=\"https://github.com/yang052513/no-pandemic\" target=\"_blank\" rel=\"noopener\">noPandemic</a> project for COMP2800. It’s my first name using react which collaborate in a team. I found out design is way more important than I thought. We made some basic UI design, but during the later stage we got some trouble with mobile version because the layout is kind comoplex. That part waste us a lot of time. Never mind, our project got 1st place with most creative and best teamwork prizes. Good result anyway.</p>\n<p>After the project, I soon moved onto my next personal project, <code>ProjectHub</code> which is the project I want to do for really long time. The sorting algorithim is hard, but I figured out. The friend system is hard, but we did it. Solving problem is really fun process, and way better compared to the boring textbook exercises.</p>\n<p>Then, I found out I need to use some regular expression for my project. OK, let’s learn some Regular expression.</p>\n<p>Later, I found a animation called Soul Land and just cant stop watching it, so I decide to download all the episodes and watch on my TV. However, there are 108 episodes, and I DONT WANT TO CLICK ONE BY ONE. So turns out we need to learn some python.</p>\n<p>Man, python is good.</p>\n<p>At first, I was thinking like “what? no need to declare variable type??”, or “wtf is def():, why not function??”.</p>\n<p>However, human is flexible. Python is best.</p>\n<p>Later, I just falled in love with crawler. Why? Because it’s fun, and it sovled many automated problems for me. I started with <code>request</code> library which is all you need for scraping static sites, then I moved to selenium cause some sites use ajax and js to dynamically loading contents, and selenium could act like a human manipulate a browser. I also learned Fiddler which could use for get request from mobile apps.</p>\n<p>Back to the training, what surprised me is that I dont need a fancy program and can still make awesome progress. LOL. I cant imagine I used to pay so much money to a coach just for some excel sheet programs. Especially bench, all I am doing is just more volume. Deadlift is even simple, adding reps every week and then re-cycle every month.</p>\n<p>It works. Everything will work as long as logic.</p>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"","more":"<blockquote>\n<p>So it’s almost been 5 months since the quarantine started, and my school closed since then. Some people might compliant about the lock down cause we cant hangout or whatever reasons. I am also kind worried because no gym means no gains, and I cant code with my friends. However, it turns out pretty well, I found out my learning philosophy, and actually, learning or training alone is kind better for me.</p>\n</blockquote>\n<p>In April, I bought some lifting equipments from Rougue. I thought I am well ahead compared to others since one month later everything just out of stock. Well, I did not receive my package for twice. Everytime they lost something and I need to recall Rogue service center. Sucks. Finally, I received everything at the end of the April, and my training starts again.</p>\n<p>In May, my frined Wenbo and me finished the <a href=\"https://github.com/yang052513/no-pandemic\" target=\"_blank\" rel=\"noopener\">noPandemic</a> project for COMP2800. It’s my first name using react which collaborate in a team. I found out design is way more important than I thought. We made some basic UI design, but during the later stage we got some trouble with mobile version because the layout is kind comoplex. That part waste us a lot of time. Never mind, our project got 1st place with most creative and best teamwork prizes. Good result anyway.</p>\n<p>After the project, I soon moved onto my next personal project, <code>ProjectHub</code> which is the project I want to do for really long time. The sorting algorithim is hard, but I figured out. The friend system is hard, but we did it. Solving problem is really fun process, and way better compared to the boring textbook exercises.</p>\n<p>Then, I found out I need to use some regular expression for my project. OK, let’s learn some Regular expression.</p>\n<p>Later, I found a animation called Soul Land and just cant stop watching it, so I decide to download all the episodes and watch on my TV. However, there are 108 episodes, and I DONT WANT TO CLICK ONE BY ONE. So turns out we need to learn some python.</p>\n<p>Man, python is good.</p>\n<p>At first, I was thinking like “what? no need to declare variable type??”, or “wtf is def():, why not function??”.</p>\n<p>However, human is flexible. Python is best.</p>\n<p>Later, I just falled in love with crawler. Why? Because it’s fun, and it sovled many automated problems for me. I started with <code>request</code> library which is all you need for scraping static sites, then I moved to selenium cause some sites use ajax and js to dynamically loading contents, and selenium could act like a human manipulate a browser. I also learned Fiddler which could use for get request from mobile apps.</p>\n<p>Back to the training, what surprised me is that I dont need a fancy program and can still make awesome progress. LOL. I cant imagine I used to pay so much money to a coach just for some excel sheet programs. Especially bench, all I am doing is just more volume. Deadlift is even simple, adding reps every week and then re-cycle every month.</p>\n<p>It works. Everything will work as long as logic.</p>\n"},{"title":"常用的Sass Mixin方法汇总","date":"2020-07-06T06:43:05.000Z","cover":"https://www.kindpng.com/picc/m/396-3964794_yuru-yuri-akari-transparent-hd-png-download.png","_content":"\n> 最近把自己常用的 UI 组件打包到了 NPM，现在用起来真的太方便。不过有些时候还是要抄自己之前写的 CSS...比如按钮的通用样式之类的，或者位置定位。手写太麻烦了啊，于是准备把我平常常用的 Mixin 放在这，用的时候可以直接抄。(笑)\n\n<img src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcSByT5XQVDSRpqdQV6sOb9q57wj82UXzC5L2A&usqp=CAU\" />\n","source":"_posts/24-my-sass-mixin.md","raw":"---\ntitle: 常用的Sass Mixin方法汇总\ndate: 2020-07-05 23:43:05\ntags: ['sass', 'css']\ncategories: Articles\ncover: 'https://www.kindpng.com/picc/m/396-3964794_yuru-yuri-akari-transparent-hd-png-download.png'\n---\n\n> 最近把自己常用的 UI 组件打包到了 NPM，现在用起来真的太方便。不过有些时候还是要抄自己之前写的 CSS...比如按钮的通用样式之类的，或者位置定位。手写太麻烦了啊，于是准备把我平常常用的 Mixin 放在这，用的时候可以直接抄。(笑)\n\n<img src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcSByT5XQVDSRpqdQV6sOb9q57wj82UXzC5L2A&usqp=CAU\" />\n","slug":"24-my-sass-mixin","published":1,"updated":"2020-07-06T07:41:23.930Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckdnmttdq001wrwuih565fnz7","content":"<blockquote>\n<p>最近把自己常用的 UI 组件打包到了 NPM，现在用起来真的太方便。不过有些时候还是要抄自己之前写的 CSS…比如按钮的通用样式之类的，或者位置定位。手写太麻烦了啊，于是准备把我平常常用的 Mixin 放在这，用的时候可以直接抄。(笑)</p>\n</blockquote>\n<img src= \"/img/loading.gif\" data-src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcSByT5XQVDSRpqdQV6sOb9q57wj82UXzC5L2A&usqp=CAU\">\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"","more":"<blockquote>\n<p>最近把自己常用的 UI 组件打包到了 NPM，现在用起来真的太方便。不过有些时候还是要抄自己之前写的 CSS…比如按钮的通用样式之类的，或者位置定位。手写太麻烦了啊，于是准备把我平常常用的 Mixin 放在这，用的时候可以直接抄。(笑)</p>\n</blockquote>\n<img src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcSByT5XQVDSRpqdQV6sOb9q57wj82UXzC5L2A&usqp=CAU\">\n"},{"title":"Styled Components 在JS里写CSS?","date":"2020-07-05T06:53:29.000Z","cover":"https://miro.medium.com/max/2800/1*6E-EG6HczqSSsEQFgFlG-A.png","_content":"\n> 在做 UI package 的时候发现`Styled Components`好用啊，可以绑定 props 基本 SCSS 支持的方法都支持。本来只是想着了解一下的目的。结果发现做组件打包还挺好用的。可是如何跨组件分享样式呢？SCSS 和 Less 中都有 mixin 方法可以直接调用 method，但 styled-components 是要先声明渲染的元素类型然后给样式化。styled-component 解决了组件间的分享样式但总体的重复利用度还是问题。再比如一些比较复杂的样式化也会让 debug 比较困难。\n\n## 安装 Styled Componets 库\n\n```shell\nnpm install styled-components --save\n```\n\n如果项目用的是 typescript\n\n```shell\nnpm install @types/styled-components --save\n```\n\n## 样式化一个组件\n\nstyled.div 即我们要渲染一个`div`元素的组件，在` `` `声明 CSS 样式。\n\n```jsx\nimport styled from 'styled-components'\n\nexport const App = () => {\n  const Container = styled.div`\n    background-color: blue;\n    width: 300px;\n    border: 1px solid gray;\n  `\n  return <Container>This is my div</Container>\n}\n```\n\n## 用 Props 更改样式化\n\n我们也可以用在样式化只使用 props。比如下面的代码如果`App`组件没有`textColor` props, 那就用灰色字体色，反之用 props 给的颜色。\n\n```jsx\nimport React from 'react'\nimport styled from 'styled-components'\n\ninterface Props {\n  textColor?: string;\n}\n\nexport const App: React.FC<Props> = ({ textColor }) => {\n  const Container = styled.div`\n    width: 300px;\n    background-color: blue;\n    color: ${textColor ? textColor : 'gray'};\n  `\n  return (\n    <Container>\n      <p>This is my div</p>\n    </Container>\n  )\n}\n```\n\n## 继承组件样式化\n\n我们也可以在原有组件的基础上添加其他的样式。跟之前在`styled`后面生面元素不同，我们现在只需要在`()`内加入想要继承样式的组件就可以。比如下面`BorderCard`继承所有`Card`的样式但是添加了一个新的`border`样式。\n\n```jsx\nimport React from 'react'\nimport styled from 'styled-components'\n\nexport const App: React.FC = () => {\n  const Card = styled.div`\n    background-color: blue;\n    width: 300px;\n  `\n\n  const BorderCard = styled(Card)`\n    border: 1px solid red;\n  `\n\n  return (\n    <div>\n      <Card></Card>\n      <BorderCard></BorderCard>\n    </div>\n  )\n}\n```\n\n## 伪元素\n\n跟 Sass 语法相似，我们用`&`来代指主要元素\n\n```jsx\nimport React from 'react'\nimport styled from 'styled-components'\n\nexport const App: React.FC = () => {\n  const Card = styled.div`\n    background-color: blue;\n    width: 300px;\n    &:hover {\n      background-color: red;\n    }\n  `\n\n  return <Card></Card>\n}\n```\n\n## 动画 keyframes\n\n用`keyframes`之前我们要先导入`keyframes`库\n\n```jsx\nimport React from 'react'\nimport styled, { keyframes } from 'styled-components'\n\nconst bounceLoading = keyframes`\n  to {\n    opacity: 0.3;\n    transform: translate3d(0, -1.5rem, 0);\n  }\n  `\n\nconst Dot = styled.div`\n  width: 30px;\n  height: 30px;\n  margin: 0 20px;\n  background: rgb(202, 57, 57);\n  border-radius: 50%;\n  animation: 0.8s ${bounceLoading} infinite alternate;\n`\nexport const App: React.FC = () => {\n  return <Dot></Dot>\n}\n```\n","source":"_posts/23-styled-components.md","raw":"---\ntitle: Styled Components 在JS里写CSS?\ndate: 2020-07-04 23:53:29\ntags: ['notes', 'react', 'styled-components', 'css']\ncategories: Notes\ncover: 'https://miro.medium.com/max/2800/1*6E-EG6HczqSSsEQFgFlG-A.png'\n---\n\n> 在做 UI package 的时候发现`Styled Components`好用啊，可以绑定 props 基本 SCSS 支持的方法都支持。本来只是想着了解一下的目的。结果发现做组件打包还挺好用的。可是如何跨组件分享样式呢？SCSS 和 Less 中都有 mixin 方法可以直接调用 method，但 styled-components 是要先声明渲染的元素类型然后给样式化。styled-component 解决了组件间的分享样式但总体的重复利用度还是问题。再比如一些比较复杂的样式化也会让 debug 比较困难。\n\n## 安装 Styled Componets 库\n\n```shell\nnpm install styled-components --save\n```\n\n如果项目用的是 typescript\n\n```shell\nnpm install @types/styled-components --save\n```\n\n## 样式化一个组件\n\nstyled.div 即我们要渲染一个`div`元素的组件，在` `` `声明 CSS 样式。\n\n```jsx\nimport styled from 'styled-components'\n\nexport const App = () => {\n  const Container = styled.div`\n    background-color: blue;\n    width: 300px;\n    border: 1px solid gray;\n  `\n  return <Container>This is my div</Container>\n}\n```\n\n## 用 Props 更改样式化\n\n我们也可以用在样式化只使用 props。比如下面的代码如果`App`组件没有`textColor` props, 那就用灰色字体色，反之用 props 给的颜色。\n\n```jsx\nimport React from 'react'\nimport styled from 'styled-components'\n\ninterface Props {\n  textColor?: string;\n}\n\nexport const App: React.FC<Props> = ({ textColor }) => {\n  const Container = styled.div`\n    width: 300px;\n    background-color: blue;\n    color: ${textColor ? textColor : 'gray'};\n  `\n  return (\n    <Container>\n      <p>This is my div</p>\n    </Container>\n  )\n}\n```\n\n## 继承组件样式化\n\n我们也可以在原有组件的基础上添加其他的样式。跟之前在`styled`后面生面元素不同，我们现在只需要在`()`内加入想要继承样式的组件就可以。比如下面`BorderCard`继承所有`Card`的样式但是添加了一个新的`border`样式。\n\n```jsx\nimport React from 'react'\nimport styled from 'styled-components'\n\nexport const App: React.FC = () => {\n  const Card = styled.div`\n    background-color: blue;\n    width: 300px;\n  `\n\n  const BorderCard = styled(Card)`\n    border: 1px solid red;\n  `\n\n  return (\n    <div>\n      <Card></Card>\n      <BorderCard></BorderCard>\n    </div>\n  )\n}\n```\n\n## 伪元素\n\n跟 Sass 语法相似，我们用`&`来代指主要元素\n\n```jsx\nimport React from 'react'\nimport styled from 'styled-components'\n\nexport const App: React.FC = () => {\n  const Card = styled.div`\n    background-color: blue;\n    width: 300px;\n    &:hover {\n      background-color: red;\n    }\n  `\n\n  return <Card></Card>\n}\n```\n\n## 动画 keyframes\n\n用`keyframes`之前我们要先导入`keyframes`库\n\n```jsx\nimport React from 'react'\nimport styled, { keyframes } from 'styled-components'\n\nconst bounceLoading = keyframes`\n  to {\n    opacity: 0.3;\n    transform: translate3d(0, -1.5rem, 0);\n  }\n  `\n\nconst Dot = styled.div`\n  width: 30px;\n  height: 30px;\n  margin: 0 20px;\n  background: rgb(202, 57, 57);\n  border-radius: 50%;\n  animation: 0.8s ${bounceLoading} infinite alternate;\n`\nexport const App: React.FC = () => {\n  return <Dot></Dot>\n}\n```\n","slug":"23-styled-components","published":1,"updated":"2020-07-14T19:03:28.753Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckdnmttdr001zrwuigbzc5km9","content":"<blockquote>\n<p>在做 UI package 的时候发现<code>Styled Components</code>好用啊，可以绑定 props 基本 SCSS 支持的方法都支持。本来只是想着了解一下的目的。结果发现做组件打包还挺好用的。可是如何跨组件分享样式呢？SCSS 和 Less 中都有 mixin 方法可以直接调用 method，但 styled-components 是要先声明渲染的元素类型然后给样式化。styled-component 解决了组件间的分享样式但总体的重复利用度还是问题。再比如一些比较复杂的样式化也会让 debug 比较困难。</p>\n</blockquote>\n<h2 id=\"安装-Styled-Componets-库\"><a href=\"#安装-Styled-Componets-库\" class=\"headerlink\" title=\"安装 Styled Componets 库\"></a>安装 Styled Componets 库</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install styled-components --save</span><br></pre></td></tr></table></figure>\n\n<p>如果项目用的是 typescript</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install @types/styled-components --save</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"样式化一个组件\"><a href=\"#样式化一个组件\" class=\"headerlink\" title=\"样式化一个组件\"></a>样式化一个组件</h2><p>styled.div 即我们要渲染一个<code>div</code>元素的组件，在<code>``</code>声明 CSS 样式。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">'styled-components'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> Container = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    background-color: blue;</span></span><br><span class=\"line\"><span class=\"string\">    width: 300px;</span></span><br><span class=\"line\"><span class=\"string\">    border: 1px solid gray;</span></span><br><span class=\"line\"><span class=\"string\">  `</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Container</span>&gt;</span>This is my div<span class=\"tag\">&lt;/<span class=\"name\">Container</span>&gt;</span></span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"用-Props-更改样式化\"><a href=\"#用-Props-更改样式化\" class=\"headerlink\" title=\"用 Props 更改样式化\"></a>用 Props 更改样式化</h2><p>我们也可以用在样式化只使用 props。比如下面的代码如果<code>App</code>组件没有<code>textColor</code> props, 那就用灰色字体色，反之用 props 给的颜色。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">'styled-components'</span></span><br><span class=\"line\"></span><br><span class=\"line\">interface Props &#123;</span><br><span class=\"line\">  textColor?: string;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App: React.FC&lt;Props&gt; = <span class=\"function\">(<span class=\"params\">&#123; textColor &#125;</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> Container = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    width: 300px;</span></span><br><span class=\"line\"><span class=\"string\">    background-color: blue;</span></span><br><span class=\"line\"><span class=\"string\">    color: <span class=\"subst\">$&#123;textColor ? textColor : <span class=\"string\">'gray'</span>&#125;</span>;</span></span><br><span class=\"line\"><span class=\"string\">  `</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Container&gt;</span><br><span class=\"line\">      &lt;p&gt;This is my div&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>Container&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"继承组件样式化\"><a href=\"#继承组件样式化\" class=\"headerlink\" title=\"继承组件样式化\"></a>继承组件样式化</h2><p>我们也可以在原有组件的基础上添加其他的样式。跟之前在<code>styled</code>后面生面元素不同，我们现在只需要在<code>()</code>内加入想要继承样式的组件就可以。比如下面<code>BorderCard</code>继承所有<code>Card</code>的样式但是添加了一个新的<code>border</code>样式。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">'styled-components'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App: React.FC = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> Card = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    background-color: blue;</span></span><br><span class=\"line\"><span class=\"string\">    width: 300px;</span></span><br><span class=\"line\"><span class=\"string\">  `</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> BorderCard = styled(Card)<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    border: 1px solid red;</span></span><br><span class=\"line\"><span class=\"string\">  `</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;Card&gt;&lt;<span class=\"regexp\">/Card&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;BorderCard&gt;&lt;/</span>BorderCard&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"伪元素\"><a href=\"#伪元素\" class=\"headerlink\" title=\"伪元素\"></a>伪元素</h2><p>跟 Sass 语法相似，我们用<code>&amp;</code>来代指主要元素</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">'styled-components'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App: React.FC = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> Card = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    background-color: blue;</span></span><br><span class=\"line\"><span class=\"string\">    width: 300px;</span></span><br><span class=\"line\"><span class=\"string\">    &amp;:hover &#123;</span></span><br><span class=\"line\"><span class=\"string\">      background-color: red;</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">  `</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Card</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">Card</span>&gt;</span></span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"动画-keyframes\"><a href=\"#动画-keyframes\" class=\"headerlink\" title=\"动画 keyframes\"></a>动画 keyframes</h2><p>用<code>keyframes</code>之前我们要先导入<code>keyframes</code>库</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> styled, &#123; keyframes &#125; <span class=\"keyword\">from</span> <span class=\"string\">'styled-components'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> bounceLoading = keyframes<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  to &#123;</span></span><br><span class=\"line\"><span class=\"string\">    opacity: 0.3;</span></span><br><span class=\"line\"><span class=\"string\">    transform: translate3d(0, -1.5rem, 0);</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">  `</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Dot = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  width: 30px;</span></span><br><span class=\"line\"><span class=\"string\">  height: 30px;</span></span><br><span class=\"line\"><span class=\"string\">  margin: 0 20px;</span></span><br><span class=\"line\"><span class=\"string\">  background: rgb(202, 57, 57);</span></span><br><span class=\"line\"><span class=\"string\">  border-radius: 50%;</span></span><br><span class=\"line\"><span class=\"string\">  animation: 0.8s <span class=\"subst\">$&#123;bounceLoading&#125;</span> infinite alternate;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App: React.FC = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Dot</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">Dot</span>&gt;</span></span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"","more":"<blockquote>\n<p>在做 UI package 的时候发现<code>Styled Components</code>好用啊，可以绑定 props 基本 SCSS 支持的方法都支持。本来只是想着了解一下的目的。结果发现做组件打包还挺好用的。可是如何跨组件分享样式呢？SCSS 和 Less 中都有 mixin 方法可以直接调用 method，但 styled-components 是要先声明渲染的元素类型然后给样式化。styled-component 解决了组件间的分享样式但总体的重复利用度还是问题。再比如一些比较复杂的样式化也会让 debug 比较困难。</p>\n</blockquote>\n<h2 id=\"安装-Styled-Componets-库\"><a href=\"#安装-Styled-Componets-库\" class=\"headerlink\" title=\"安装 Styled Componets 库\"></a>安装 Styled Componets 库</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install styled-components --save</span><br></pre></td></tr></table></figure>\n\n<p>如果项目用的是 typescript</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install @types/styled-components --save</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"样式化一个组件\"><a href=\"#样式化一个组件\" class=\"headerlink\" title=\"样式化一个组件\"></a>样式化一个组件</h2><p>styled.div 即我们要渲染一个<code>div</code>元素的组件，在<code>``</code>声明 CSS 样式。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">'styled-components'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> Container = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    background-color: blue;</span></span><br><span class=\"line\"><span class=\"string\">    width: 300px;</span></span><br><span class=\"line\"><span class=\"string\">    border: 1px solid gray;</span></span><br><span class=\"line\"><span class=\"string\">  `</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Container</span>&gt;</span>This is my div<span class=\"tag\">&lt;/<span class=\"name\">Container</span>&gt;</span></span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"用-Props-更改样式化\"><a href=\"#用-Props-更改样式化\" class=\"headerlink\" title=\"用 Props 更改样式化\"></a>用 Props 更改样式化</h2><p>我们也可以用在样式化只使用 props。比如下面的代码如果<code>App</code>组件没有<code>textColor</code> props, 那就用灰色字体色，反之用 props 给的颜色。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">'styled-components'</span></span><br><span class=\"line\"></span><br><span class=\"line\">interface Props &#123;</span><br><span class=\"line\">  textColor?: string;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App: React.FC&lt;Props&gt; = <span class=\"function\">(<span class=\"params\">&#123; textColor &#125;</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> Container = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    width: 300px;</span></span><br><span class=\"line\"><span class=\"string\">    background-color: blue;</span></span><br><span class=\"line\"><span class=\"string\">    color: <span class=\"subst\">$&#123;textColor ? textColor : <span class=\"string\">'gray'</span>&#125;</span>;</span></span><br><span class=\"line\"><span class=\"string\">  `</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Container&gt;</span><br><span class=\"line\">      &lt;p&gt;This is my div&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>Container&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"继承组件样式化\"><a href=\"#继承组件样式化\" class=\"headerlink\" title=\"继承组件样式化\"></a>继承组件样式化</h2><p>我们也可以在原有组件的基础上添加其他的样式。跟之前在<code>styled</code>后面生面元素不同，我们现在只需要在<code>()</code>内加入想要继承样式的组件就可以。比如下面<code>BorderCard</code>继承所有<code>Card</code>的样式但是添加了一个新的<code>border</code>样式。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">'styled-components'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App: React.FC = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> Card = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    background-color: blue;</span></span><br><span class=\"line\"><span class=\"string\">    width: 300px;</span></span><br><span class=\"line\"><span class=\"string\">  `</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> BorderCard = styled(Card)<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    border: 1px solid red;</span></span><br><span class=\"line\"><span class=\"string\">  `</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;Card&gt;&lt;<span class=\"regexp\">/Card&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;BorderCard&gt;&lt;/</span>BorderCard&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"伪元素\"><a href=\"#伪元素\" class=\"headerlink\" title=\"伪元素\"></a>伪元素</h2><p>跟 Sass 语法相似，我们用<code>&amp;</code>来代指主要元素</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> styled <span class=\"keyword\">from</span> <span class=\"string\">'styled-components'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App: React.FC = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> Card = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    background-color: blue;</span></span><br><span class=\"line\"><span class=\"string\">    width: 300px;</span></span><br><span class=\"line\"><span class=\"string\">    &amp;:hover &#123;</span></span><br><span class=\"line\"><span class=\"string\">      background-color: red;</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">  `</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Card</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">Card</span>&gt;</span></span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"动画-keyframes\"><a href=\"#动画-keyframes\" class=\"headerlink\" title=\"动画 keyframes\"></a>动画 keyframes</h2><p>用<code>keyframes</code>之前我们要先导入<code>keyframes</code>库</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> styled, &#123; keyframes &#125; <span class=\"keyword\">from</span> <span class=\"string\">'styled-components'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> bounceLoading = keyframes<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  to &#123;</span></span><br><span class=\"line\"><span class=\"string\">    opacity: 0.3;</span></span><br><span class=\"line\"><span class=\"string\">    transform: translate3d(0, -1.5rem, 0);</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">  `</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Dot = styled.div<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  width: 30px;</span></span><br><span class=\"line\"><span class=\"string\">  height: 30px;</span></span><br><span class=\"line\"><span class=\"string\">  margin: 0 20px;</span></span><br><span class=\"line\"><span class=\"string\">  background: rgb(202, 57, 57);</span></span><br><span class=\"line\"><span class=\"string\">  border-radius: 50%;</span></span><br><span class=\"line\"><span class=\"string\">  animation: 0.8s <span class=\"subst\">$&#123;bounceLoading&#125;</span> infinite alternate;</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App: React.FC = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Dot</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">Dot</span>&gt;</span></span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"title":"用Hexo开启你的博客写作之旅","date":"2020-07-06T08:01:59.000Z","cover":"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/1_aOv6h3h_v9PQWa03zGACnw.png?alt=media&token=bf892997-8e6f-4ccd-a4b3-652c79b90f0d","_content":"\n> 引用官方的话，Hexo 定义为`快速、简洁且高效的博客框架`, 让用户更注重在写作上。本文介绍如何快速搭建一个 Hexo 的静态博客以及主题推荐设置。\n\n## 安装 Hexo CLI\n\n在终端中输入以下指令全局安装`hexo CLI`。安装成功后可以输入`hexo -v`来看版本号\n\n```shell\nnpm install hexo-cli -g\n```\n\n## 创建博客项目\n\n在想要保存项目的目录文件夹内输入`hexo init`来创建项目。\n\n```shell\ncd myfolder\nhexo init myblog\n```\n\n这样我们就成功创建了 myblog 的博客项目。然后运行下面的命令就可以在端口 4000 访问了。\n\n```shell\ncd myblog\nnpm install\nhexo server\n```\n\n## 开始第一篇写作\n\n在项目目录内，我们只需要在终端输入`hexo new post postname`即可创建一个新的 post。语法为 markdown。\n\n## 主题设置\n\n我的博客是用的[hexo-theme-butterfly](https://github.com/jerryc127/hexo-theme-butterfly), 之前也是换过各种主题比如一开始的 Next, matery, fluid, melody 等。还要看个人喜欢。\n\n主题设置的方式都是一样的，假设我们现在想更换默认主题为`hexo-theme-butterfly`。在我们博客项目的目录下输入以下指令\n\n```shell\ngit clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly\n```\n\n然后在目录内找到`_config.yml`配置文件，更改`theme`处为`theme: butterfly`.\n\n## 部署\n\n静态网站的部署我们选择 Netlify,绑定 Github Repo 每次更新 master 后自动 deploy。\n\n在 Netlify 的主页面内，选择`New site from Git`然后选择`Github`.（当然根据你代码托管的站点选择，Netifly 支持 GitLab 和 Bitbucket).\n\n之后就选择我们的 repo，如果 repo 是 private 可见，我们可以在 Netlify 设置中选择 Github 认证即可全部访问。\n\n`master`即我们选择部署的分支，Build command 为 hexo genrate, hexo 会在 public 文件夹生成静态文件用来部署。\n\n然后`Deploy site`就成功了~\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-13%20225116.png?alt=media&token=53541199-eed1-4263-8574-4a2a183d23ac\" width=\"400px\" height=\"auto\"/>\n\n部署成功后，我们后续写作只需要执行下面的命令 Netlify 就会自动帮我们更新部署了。\n\n```shell\ncd myblog\nhexo clean\nhexo generate\ngit push origin master\n```\n","source":"_posts/25-create-your-first-blog.md","raw":"---\ntitle: 用Hexo开启你的博客写作之旅\ndate: 2020-07-06 01:01:59\ntags: ['hexo', 'articles']\ncategories: Articles\ncover: 'https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/1_aOv6h3h_v9PQWa03zGACnw.png?alt=media&token=bf892997-8e6f-4ccd-a4b3-652c79b90f0d'\n---\n\n> 引用官方的话，Hexo 定义为`快速、简洁且高效的博客框架`, 让用户更注重在写作上。本文介绍如何快速搭建一个 Hexo 的静态博客以及主题推荐设置。\n\n## 安装 Hexo CLI\n\n在终端中输入以下指令全局安装`hexo CLI`。安装成功后可以输入`hexo -v`来看版本号\n\n```shell\nnpm install hexo-cli -g\n```\n\n## 创建博客项目\n\n在想要保存项目的目录文件夹内输入`hexo init`来创建项目。\n\n```shell\ncd myfolder\nhexo init myblog\n```\n\n这样我们就成功创建了 myblog 的博客项目。然后运行下面的命令就可以在端口 4000 访问了。\n\n```shell\ncd myblog\nnpm install\nhexo server\n```\n\n## 开始第一篇写作\n\n在项目目录内，我们只需要在终端输入`hexo new post postname`即可创建一个新的 post。语法为 markdown。\n\n## 主题设置\n\n我的博客是用的[hexo-theme-butterfly](https://github.com/jerryc127/hexo-theme-butterfly), 之前也是换过各种主题比如一开始的 Next, matery, fluid, melody 等。还要看个人喜欢。\n\n主题设置的方式都是一样的，假设我们现在想更换默认主题为`hexo-theme-butterfly`。在我们博客项目的目录下输入以下指令\n\n```shell\ngit clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly\n```\n\n然后在目录内找到`_config.yml`配置文件，更改`theme`处为`theme: butterfly`.\n\n## 部署\n\n静态网站的部署我们选择 Netlify,绑定 Github Repo 每次更新 master 后自动 deploy。\n\n在 Netlify 的主页面内，选择`New site from Git`然后选择`Github`.（当然根据你代码托管的站点选择，Netifly 支持 GitLab 和 Bitbucket).\n\n之后就选择我们的 repo，如果 repo 是 private 可见，我们可以在 Netlify 设置中选择 Github 认证即可全部访问。\n\n`master`即我们选择部署的分支，Build command 为 hexo genrate, hexo 会在 public 文件夹生成静态文件用来部署。\n\n然后`Deploy site`就成功了~\n\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-13%20225116.png?alt=media&token=53541199-eed1-4263-8574-4a2a183d23ac\" width=\"400px\" height=\"auto\"/>\n\n部署成功后，我们后续写作只需要执行下面的命令 Netlify 就会自动帮我们更新部署了。\n\n```shell\ncd myblog\nhexo clean\nhexo generate\ngit push origin master\n```\n","slug":"25-create-your-first-blog","published":1,"updated":"2020-07-14T05:58:01.751Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckdnmttdt0023rwui5shhb0m0","content":"<blockquote>\n<p>引用官方的话，Hexo 定义为<code>快速、简洁且高效的博客框架</code>, 让用户更注重在写作上。本文介绍如何快速搭建一个 Hexo 的静态博客以及主题推荐设置。</p>\n</blockquote>\n<h2 id=\"安装-Hexo-CLI\"><a href=\"#安装-Hexo-CLI\" class=\"headerlink\" title=\"安装 Hexo CLI\"></a>安装 Hexo CLI</h2><p>在终端中输入以下指令全局安装<code>hexo CLI</code>。安装成功后可以输入<code>hexo -v</code>来看版本号</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-cli -g</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"创建博客项目\"><a href=\"#创建博客项目\" class=\"headerlink\" title=\"创建博客项目\"></a>创建博客项目</h2><p>在想要保存项目的目录文件夹内输入<code>hexo init</code>来创建项目。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd myfolder</span><br><span class=\"line\">hexo init myblog</span><br></pre></td></tr></table></figure>\n\n<p>这样我们就成功创建了 myblog 的博客项目。然后运行下面的命令就可以在端口 4000 访问了。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd myblog</span><br><span class=\"line\">npm install</span><br><span class=\"line\">hexo server</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"开始第一篇写作\"><a href=\"#开始第一篇写作\" class=\"headerlink\" title=\"开始第一篇写作\"></a>开始第一篇写作</h2><p>在项目目录内，我们只需要在终端输入<code>hexo new post postname</code>即可创建一个新的 post。语法为 markdown。</p>\n<h2 id=\"主题设置\"><a href=\"#主题设置\" class=\"headerlink\" title=\"主题设置\"></a>主题设置</h2><p>我的博客是用的<a href=\"https://github.com/jerryc127/hexo-theme-butterfly\" target=\"_blank\" rel=\"noopener\">hexo-theme-butterfly</a>, 之前也是换过各种主题比如一开始的 Next, matery, fluid, melody 等。还要看个人喜欢。</p>\n<p>主题设置的方式都是一样的，假设我们现在想更换默认主题为<code>hexo-theme-butterfly</code>。在我们博客项目的目录下输入以下指令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly</span><br></pre></td></tr></table></figure>\n\n<p>然后在目录内找到<code>_config.yml</code>配置文件，更改<code>theme</code>处为<code>theme: butterfly</code>.</p>\n<h2 id=\"部署\"><a href=\"#部署\" class=\"headerlink\" title=\"部署\"></a>部署</h2><p>静态网站的部署我们选择 Netlify,绑定 Github Repo 每次更新 master 后自动 deploy。</p>\n<p>在 Netlify 的主页面内，选择<code>New site from Git</code>然后选择<code>Github</code>.（当然根据你代码托管的站点选择，Netifly 支持 GitLab 和 Bitbucket).</p>\n<p>之后就选择我们的 repo，如果 repo 是 private 可见，我们可以在 Netlify 设置中选择 Github 认证即可全部访问。</p>\n<p><code>master</code>即我们选择部署的分支，Build command 为 hexo genrate, hexo 会在 public 文件夹生成静态文件用来部署。</p>\n<p>然后<code>Deploy site</code>就成功了~</p>\n<img src= \"/img/loading.gif\" data-src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-13%20225116.png?alt=media&token=53541199-eed1-4263-8574-4a2a183d23ac\" width=\"400px\" height=\"auto\">\n\n<p>部署成功后，我们后续写作只需要执行下面的命令 Netlify 就会自动帮我们更新部署了。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd myblog</span><br><span class=\"line\">hexo clean</span><br><span class=\"line\">hexo generate</span><br><span class=\"line\">git push origin master</span><br></pre></td></tr></table></figure>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"","more":"<blockquote>\n<p>引用官方的话，Hexo 定义为<code>快速、简洁且高效的博客框架</code>, 让用户更注重在写作上。本文介绍如何快速搭建一个 Hexo 的静态博客以及主题推荐设置。</p>\n</blockquote>\n<h2 id=\"安装-Hexo-CLI\"><a href=\"#安装-Hexo-CLI\" class=\"headerlink\" title=\"安装 Hexo CLI\"></a>安装 Hexo CLI</h2><p>在终端中输入以下指令全局安装<code>hexo CLI</code>。安装成功后可以输入<code>hexo -v</code>来看版本号</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-cli -g</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"创建博客项目\"><a href=\"#创建博客项目\" class=\"headerlink\" title=\"创建博客项目\"></a>创建博客项目</h2><p>在想要保存项目的目录文件夹内输入<code>hexo init</code>来创建项目。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd myfolder</span><br><span class=\"line\">hexo init myblog</span><br></pre></td></tr></table></figure>\n\n<p>这样我们就成功创建了 myblog 的博客项目。然后运行下面的命令就可以在端口 4000 访问了。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd myblog</span><br><span class=\"line\">npm install</span><br><span class=\"line\">hexo server</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"开始第一篇写作\"><a href=\"#开始第一篇写作\" class=\"headerlink\" title=\"开始第一篇写作\"></a>开始第一篇写作</h2><p>在项目目录内，我们只需要在终端输入<code>hexo new post postname</code>即可创建一个新的 post。语法为 markdown。</p>\n<h2 id=\"主题设置\"><a href=\"#主题设置\" class=\"headerlink\" title=\"主题设置\"></a>主题设置</h2><p>我的博客是用的<a href=\"https://github.com/jerryc127/hexo-theme-butterfly\" target=\"_blank\" rel=\"noopener\">hexo-theme-butterfly</a>, 之前也是换过各种主题比如一开始的 Next, matery, fluid, melody 等。还要看个人喜欢。</p>\n<p>主题设置的方式都是一样的，假设我们现在想更换默认主题为<code>hexo-theme-butterfly</code>。在我们博客项目的目录下输入以下指令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly</span><br></pre></td></tr></table></figure>\n\n<p>然后在目录内找到<code>_config.yml</code>配置文件，更改<code>theme</code>处为<code>theme: butterfly</code>.</p>\n<h2 id=\"部署\"><a href=\"#部署\" class=\"headerlink\" title=\"部署\"></a>部署</h2><p>静态网站的部署我们选择 Netlify,绑定 Github Repo 每次更新 master 后自动 deploy。</p>\n<p>在 Netlify 的主页面内，选择<code>New site from Git</code>然后选择<code>Github</code>.（当然根据你代码托管的站点选择，Netifly 支持 GitLab 和 Bitbucket).</p>\n<p>之后就选择我们的 repo，如果 repo 是 private 可见，我们可以在 Netlify 设置中选择 Github 认证即可全部访问。</p>\n<p><code>master</code>即我们选择部署的分支，Build command 为 hexo genrate, hexo 会在 public 文件夹生成静态文件用来部署。</p>\n<p>然后<code>Deploy site</code>就成功了~</p>\n<img src=\"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/%E6%89%B9%E6%B3%A8%202020-07-13%20225116.png?alt=media&token=53541199-eed1-4263-8574-4a2a183d23ac\" width=\"400px\" height=\"auto\">\n\n<p>部署成功后，我们后续写作只需要执行下面的命令 Netlify 就会自动帮我们更新部署了。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd myblog</span><br><span class=\"line\">hexo clean</span><br><span class=\"line\">hexo generate</span><br><span class=\"line\">git push origin master</span><br></pre></td></tr></table></figure>\n"},{"title":"Python 将数据存储到MongoDB","date":"2020-07-09T06:51:55.000Z","cover":"https://i.pcmag.com/imagery/reviews/02Q6yxveinggAu3PomearaV-7.fit_scale.size_1028x578.v_1569481734.jpg","_content":"\n> 之前写的爬虫都是保存在本地的 JSON 文件在前端调用，但现在每次运行一次脚本替换以前的 JSON 文件不够灵活。于是来学习一下 MongoDB 数据库，来如何把 Python 爬到的数据存储到 Mongo 云端 Atlas。\n\n## 安装 Setup\n\n```shell\npip install pymongo\n```\n\n## 连接 Mongo 数据库 Connection\n\n把`<password>`和`<dbname>`替换成相对应的 admin 密码和数据库名称。\n\n```python\nimport pymongo\nfrom pymongo import MongoClient\n\ncluster = MongoClient(\"mongodb+srv://yang_admin:<password>@cluster0-uo1ne.gcp.mongodb.net/<dbname>?retryWrites=true&w=majority\")\n```\n\n如果运行出现 connectional 问题时，安装以下库可以解决该问题。\n\n```shell\npip install dnspython\npython3 -m pip install pymongo[srv]\n```\n\n## 写入 Write\n\n`cluster`相当于是所有数据库的集合，那在这个集合中我们可以有很多数据库。比如下面的这个例子我们想要写入数据到`courseflex`数据库。在一个数据库中，我们又有`collection`。collection 可以包括很多 documents。举个简单的例子，一个`user` collection 可以有很多用户的 document，比如用户 1，用户 2.\n\n### 写入单个 document\n\n假设我们现在要写入一些课程信息数据到`courseflex`数据库，可以利用`insert_one`或者`insert_many`。前者只能写入一个 document，后者可以批量写入多个 document\n\n```python\nimport pymongo\nfrom pymongo import MongoClient\n\ncluster = MongoClient(\"mongodb+srv://yang_admin:123mypw@cluster0-uo1ne.gcp.mongodb.net/courseflex?retryWrites=true&w=majority\")\n\ndb = cluster['courseflex']\ncollection = db['course]\n\ncourse_info = {\n    \"_id\": 'ACCT 101A',\n    \"class\": 'ACCT',\n    \"category\": 'Accounting',\n    \"instructor\": 'Yang Li'\n}\n\ncou\ncollection.insert_one(course_info)\n```\n\n> 如果写入的 document 不声明`_id`, Mongo 会自动生成一个`ObjectID`\n\n### 写入多个 document\n\n写入多个 document 只要在`insert_many()`方法中用`[]`包裹要写入的 document 即可\n\n```python\ndepartment_col = db['department']\n\ndepartment_1 = {\"title\": 'ACCT'}\ndepartment_2 = {\"title\": 'ECON'}\ndepartment_3 = {\"title\": 'CHIN'}\n\ndepartment_col.insert_many([department_1, department_2, department_3])\n```\n\n## 查找 Find\n\n### 遍历所有 document\n\n之前的例子中我们写入了课程类别到`department` collection 中，要想遍历所有的 document 引用`find()`\n\n```python\nfor info in department_col.find():\n    print(info['title'])\n```\n\n### 查找相关 document\n\n利用`find()`方法只需要给出查找领域的参数即可获得所有结果。\n\n```python\n# 保存所有结果到变量\nresults = department_col.find({\"title\": 'ECON'})\n\nfor department in results:\n    print(department)\n```\n\n> 如果查找`_id`只会返回一个相关的 document\n\n## 删除 Delete\n\n删除和写入的写法相似，把`insert`换为`delete`即可，删除同样支持`delete_one`或者`delete_many`\n\n删除`_id`为`ACCT 101A`的 document\n\n```python\ncollection.delete_one({'_id': 'ACCT 101A'})\n```\n\n删除整个 collection 中的所有 document\n\n```python\ncollecition.delete_many({})\n```\n\n## 更新 Update\n\n利用 [update operators](https://docs.mongodb.com/manual/reference/operator/update/#id1) 来对相关 document 的值进行更改或添加\n\n`$set` operator 可以在 document 上添加或设置一个新的值。\n\n```python\n# 更改现有的值\ncollection.update({\"_id\": 'ACCT 101A'}, {'$set':{'title': 'YOUR NEW TITLE'}})\n\n# 添加新的值\ncollection.update({\"_id\": 'ACCT 101A'}, {'$set':{'schedule': 'M 08:30 to 10:30'}})\n```\n\n## 数量 Count\n\n返回相关 collection 的 document 数量\n\n```python\nnum_of_courses = collection.count_documents({})\n\nnum_of_acct = collection.count_documents({\"category\": \"ACCT\"})\n```\n","source":"_posts/26-python-mongodb.md","raw":"---\ntitle: Python 将数据存储到MongoDB\ndate: 2020-07-08 23:51:55\ntags: ['python', 'mongoDB', 'database']\ncategories: Articles\ncover: 'https://i.pcmag.com/imagery/reviews/02Q6yxveinggAu3PomearaV-7.fit_scale.size_1028x578.v_1569481734.jpg'\n---\n\n> 之前写的爬虫都是保存在本地的 JSON 文件在前端调用，但现在每次运行一次脚本替换以前的 JSON 文件不够灵活。于是来学习一下 MongoDB 数据库，来如何把 Python 爬到的数据存储到 Mongo 云端 Atlas。\n\n## 安装 Setup\n\n```shell\npip install pymongo\n```\n\n## 连接 Mongo 数据库 Connection\n\n把`<password>`和`<dbname>`替换成相对应的 admin 密码和数据库名称。\n\n```python\nimport pymongo\nfrom pymongo import MongoClient\n\ncluster = MongoClient(\"mongodb+srv://yang_admin:<password>@cluster0-uo1ne.gcp.mongodb.net/<dbname>?retryWrites=true&w=majority\")\n```\n\n如果运行出现 connectional 问题时，安装以下库可以解决该问题。\n\n```shell\npip install dnspython\npython3 -m pip install pymongo[srv]\n```\n\n## 写入 Write\n\n`cluster`相当于是所有数据库的集合，那在这个集合中我们可以有很多数据库。比如下面的这个例子我们想要写入数据到`courseflex`数据库。在一个数据库中，我们又有`collection`。collection 可以包括很多 documents。举个简单的例子，一个`user` collection 可以有很多用户的 document，比如用户 1，用户 2.\n\n### 写入单个 document\n\n假设我们现在要写入一些课程信息数据到`courseflex`数据库，可以利用`insert_one`或者`insert_many`。前者只能写入一个 document，后者可以批量写入多个 document\n\n```python\nimport pymongo\nfrom pymongo import MongoClient\n\ncluster = MongoClient(\"mongodb+srv://yang_admin:123mypw@cluster0-uo1ne.gcp.mongodb.net/courseflex?retryWrites=true&w=majority\")\n\ndb = cluster['courseflex']\ncollection = db['course]\n\ncourse_info = {\n    \"_id\": 'ACCT 101A',\n    \"class\": 'ACCT',\n    \"category\": 'Accounting',\n    \"instructor\": 'Yang Li'\n}\n\ncou\ncollection.insert_one(course_info)\n```\n\n> 如果写入的 document 不声明`_id`, Mongo 会自动生成一个`ObjectID`\n\n### 写入多个 document\n\n写入多个 document 只要在`insert_many()`方法中用`[]`包裹要写入的 document 即可\n\n```python\ndepartment_col = db['department']\n\ndepartment_1 = {\"title\": 'ACCT'}\ndepartment_2 = {\"title\": 'ECON'}\ndepartment_3 = {\"title\": 'CHIN'}\n\ndepartment_col.insert_many([department_1, department_2, department_3])\n```\n\n## 查找 Find\n\n### 遍历所有 document\n\n之前的例子中我们写入了课程类别到`department` collection 中，要想遍历所有的 document 引用`find()`\n\n```python\nfor info in department_col.find():\n    print(info['title'])\n```\n\n### 查找相关 document\n\n利用`find()`方法只需要给出查找领域的参数即可获得所有结果。\n\n```python\n# 保存所有结果到变量\nresults = department_col.find({\"title\": 'ECON'})\n\nfor department in results:\n    print(department)\n```\n\n> 如果查找`_id`只会返回一个相关的 document\n\n## 删除 Delete\n\n删除和写入的写法相似，把`insert`换为`delete`即可，删除同样支持`delete_one`或者`delete_many`\n\n删除`_id`为`ACCT 101A`的 document\n\n```python\ncollection.delete_one({'_id': 'ACCT 101A'})\n```\n\n删除整个 collection 中的所有 document\n\n```python\ncollecition.delete_many({})\n```\n\n## 更新 Update\n\n利用 [update operators](https://docs.mongodb.com/manual/reference/operator/update/#id1) 来对相关 document 的值进行更改或添加\n\n`$set` operator 可以在 document 上添加或设置一个新的值。\n\n```python\n# 更改现有的值\ncollection.update({\"_id\": 'ACCT 101A'}, {'$set':{'title': 'YOUR NEW TITLE'}})\n\n# 添加新的值\ncollection.update({\"_id\": 'ACCT 101A'}, {'$set':{'schedule': 'M 08:30 to 10:30'}})\n```\n\n## 数量 Count\n\n返回相关 collection 的 document 数量\n\n```python\nnum_of_courses = collection.count_documents({})\n\nnum_of_acct = collection.count_documents({\"category\": \"ACCT\"})\n```\n","slug":"26-python-mongodb","published":1,"updated":"2020-07-11T19:16:20.724Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckdnmttdt0025rwui9odx01gv","content":"<blockquote>\n<p>之前写的爬虫都是保存在本地的 JSON 文件在前端调用，但现在每次运行一次脚本替换以前的 JSON 文件不够灵活。于是来学习一下 MongoDB 数据库，来如何把 Python 爬到的数据存储到 Mongo 云端 Atlas。</p>\n</blockquote>\n<h2 id=\"安装-Setup\"><a href=\"#安装-Setup\" class=\"headerlink\" title=\"安装 Setup\"></a>安装 Setup</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install pymongo</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"连接-Mongo-数据库-Connection\"><a href=\"#连接-Mongo-数据库-Connection\" class=\"headerlink\" title=\"连接 Mongo 数据库 Connection\"></a>连接 Mongo 数据库 Connection</h2><p>把<code>&lt;password&gt;</code>和<code>&lt;dbname&gt;</code>替换成相对应的 admin 密码和数据库名称。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> pymongo</span><br><span class=\"line\"><span class=\"keyword\">from</span> pymongo <span class=\"keyword\">import</span> MongoClient</span><br><span class=\"line\"></span><br><span class=\"line\">cluster = MongoClient(<span class=\"string\">\"mongodb+srv://yang_admin:&lt;password&gt;@cluster0-uo1ne.gcp.mongodb.net/&lt;dbname&gt;?retryWrites=true&amp;w=majority\"</span>)</span><br></pre></td></tr></table></figure>\n\n<p>如果运行出现 connectional 问题时，安装以下库可以解决该问题。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install dnspython</span><br><span class=\"line\">python3 -m pip install pymongo[srv]</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"写入-Write\"><a href=\"#写入-Write\" class=\"headerlink\" title=\"写入 Write\"></a>写入 Write</h2><p><code>cluster</code>相当于是所有数据库的集合，那在这个集合中我们可以有很多数据库。比如下面的这个例子我们想要写入数据到<code>courseflex</code>数据库。在一个数据库中，我们又有<code>collection</code>。collection 可以包括很多 documents。举个简单的例子，一个<code>user</code> collection 可以有很多用户的 document，比如用户 1，用户 2.</p>\n<h3 id=\"写入单个-document\"><a href=\"#写入单个-document\" class=\"headerlink\" title=\"写入单个 document\"></a>写入单个 document</h3><p>假设我们现在要写入一些课程信息数据到<code>courseflex</code>数据库，可以利用<code>insert_one</code>或者<code>insert_many</code>。前者只能写入一个 document，后者可以批量写入多个 document</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> pymongo</span><br><span class=\"line\"><span class=\"keyword\">from</span> pymongo <span class=\"keyword\">import</span> MongoClient</span><br><span class=\"line\"></span><br><span class=\"line\">cluster = MongoClient(<span class=\"string\">\"mongodb+srv://yang_admin:123mypw@cluster0-uo1ne.gcp.mongodb.net/courseflex?retryWrites=true&amp;w=majority\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">db = cluster[<span class=\"string\">'courseflex'</span>]</span><br><span class=\"line\">collection = db[<span class=\"string\">'course]</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">course_info = &#123;</span></span><br><span class=\"line\"><span class=\"string\">    \"_id\": '</span>ACCT <span class=\"number\">101</span>A<span class=\"string\">',</span></span><br><span class=\"line\"><span class=\"string\">    \"class\": '</span>ACCT<span class=\"string\">',</span></span><br><span class=\"line\"><span class=\"string\">    \"category\": '</span>Accounting<span class=\"string\">',</span></span><br><span class=\"line\"><span class=\"string\">    \"instructor\": '</span>Yang Li<span class=\"string\">'</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">cou</span></span><br><span class=\"line\"><span class=\"string\">collection.insert_one(course_info)</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>如果写入的 document 不声明<code>_id</code>, Mongo 会自动生成一个<code>ObjectID</code></p>\n</blockquote>\n<h3 id=\"写入多个-document\"><a href=\"#写入多个-document\" class=\"headerlink\" title=\"写入多个 document\"></a>写入多个 document</h3><p>写入多个 document 只要在<code>insert_many()</code>方法中用<code>[]</code>包裹要写入的 document 即可</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">department_col = db[<span class=\"string\">'department'</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">department_1 = &#123;<span class=\"string\">\"title\"</span>: <span class=\"string\">'ACCT'</span>&#125;</span><br><span class=\"line\">department_2 = &#123;<span class=\"string\">\"title\"</span>: <span class=\"string\">'ECON'</span>&#125;</span><br><span class=\"line\">department_3 = &#123;<span class=\"string\">\"title\"</span>: <span class=\"string\">'CHIN'</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">department_col.insert_many([department_1, department_2, department_3])</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"查找-Find\"><a href=\"#查找-Find\" class=\"headerlink\" title=\"查找 Find\"></a>查找 Find</h2><h3 id=\"遍历所有-document\"><a href=\"#遍历所有-document\" class=\"headerlink\" title=\"遍历所有 document\"></a>遍历所有 document</h3><p>之前的例子中我们写入了课程类别到<code>department</code> collection 中，要想遍历所有的 document 引用<code>find()</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> info <span class=\"keyword\">in</span> department_col.find():</span><br><span class=\"line\">    print(info[<span class=\"string\">'title'</span>])</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查找相关-document\"><a href=\"#查找相关-document\" class=\"headerlink\" title=\"查找相关 document\"></a>查找相关 document</h3><p>利用<code>find()</code>方法只需要给出查找领域的参数即可获得所有结果。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 保存所有结果到变量</span></span><br><span class=\"line\">results = department_col.find(&#123;<span class=\"string\">\"title\"</span>: <span class=\"string\">'ECON'</span>&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> department <span class=\"keyword\">in</span> results:</span><br><span class=\"line\">    print(department)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>如果查找<code>_id</code>只会返回一个相关的 document</p>\n</blockquote>\n<h2 id=\"删除-Delete\"><a href=\"#删除-Delete\" class=\"headerlink\" title=\"删除 Delete\"></a>删除 Delete</h2><p>删除和写入的写法相似，把<code>insert</code>换为<code>delete</code>即可，删除同样支持<code>delete_one</code>或者<code>delete_many</code></p>\n<p>删除<code>_id</code>为<code>ACCT 101A</code>的 document</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">collection.delete_one(&#123;<span class=\"string\">'_id'</span>: <span class=\"string\">'ACCT 101A'</span>&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>删除整个 collection 中的所有 document</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">collecition.delete_many(&#123;&#125;)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"更新-Update\"><a href=\"#更新-Update\" class=\"headerlink\" title=\"更新 Update\"></a>更新 Update</h2><p>利用 <a href=\"https://docs.mongodb.com/manual/reference/operator/update/#id1\" target=\"_blank\" rel=\"noopener\">update operators</a> 来对相关 document 的值进行更改或添加</p>\n<p><code>$set</code> operator 可以在 document 上添加或设置一个新的值。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 更改现有的值</span></span><br><span class=\"line\">collection.update(&#123;<span class=\"string\">\"_id\"</span>: <span class=\"string\">'ACCT 101A'</span>&#125;, &#123;<span class=\"string\">'$set'</span>:&#123;<span class=\"string\">'title'</span>: <span class=\"string\">'YOUR NEW TITLE'</span>&#125;&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 添加新的值</span></span><br><span class=\"line\">collection.update(&#123;<span class=\"string\">\"_id\"</span>: <span class=\"string\">'ACCT 101A'</span>&#125;, &#123;<span class=\"string\">'$set'</span>:&#123;<span class=\"string\">'schedule'</span>: <span class=\"string\">'M 08:30 to 10:30'</span>&#125;&#125;)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"数量-Count\"><a href=\"#数量-Count\" class=\"headerlink\" title=\"数量 Count\"></a>数量 Count</h2><p>返回相关 collection 的 document 数量</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">num_of_courses = collection.count_documents(&#123;&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">num_of_acct = collection.count_documents(&#123;<span class=\"string\">\"category\"</span>: <span class=\"string\">\"ACCT\"</span>&#125;)</span><br></pre></td></tr></table></figure>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"","more":"<blockquote>\n<p>之前写的爬虫都是保存在本地的 JSON 文件在前端调用，但现在每次运行一次脚本替换以前的 JSON 文件不够灵活。于是来学习一下 MongoDB 数据库，来如何把 Python 爬到的数据存储到 Mongo 云端 Atlas。</p>\n</blockquote>\n<h2 id=\"安装-Setup\"><a href=\"#安装-Setup\" class=\"headerlink\" title=\"安装 Setup\"></a>安装 Setup</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install pymongo</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"连接-Mongo-数据库-Connection\"><a href=\"#连接-Mongo-数据库-Connection\" class=\"headerlink\" title=\"连接 Mongo 数据库 Connection\"></a>连接 Mongo 数据库 Connection</h2><p>把<code>&lt;password&gt;</code>和<code>&lt;dbname&gt;</code>替换成相对应的 admin 密码和数据库名称。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> pymongo</span><br><span class=\"line\"><span class=\"keyword\">from</span> pymongo <span class=\"keyword\">import</span> MongoClient</span><br><span class=\"line\"></span><br><span class=\"line\">cluster = MongoClient(<span class=\"string\">\"mongodb+srv://yang_admin:&lt;password&gt;@cluster0-uo1ne.gcp.mongodb.net/&lt;dbname&gt;?retryWrites=true&amp;w=majority\"</span>)</span><br></pre></td></tr></table></figure>\n\n<p>如果运行出现 connectional 问题时，安装以下库可以解决该问题。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install dnspython</span><br><span class=\"line\">python3 -m pip install pymongo[srv]</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"写入-Write\"><a href=\"#写入-Write\" class=\"headerlink\" title=\"写入 Write\"></a>写入 Write</h2><p><code>cluster</code>相当于是所有数据库的集合，那在这个集合中我们可以有很多数据库。比如下面的这个例子我们想要写入数据到<code>courseflex</code>数据库。在一个数据库中，我们又有<code>collection</code>。collection 可以包括很多 documents。举个简单的例子，一个<code>user</code> collection 可以有很多用户的 document，比如用户 1，用户 2.</p>\n<h3 id=\"写入单个-document\"><a href=\"#写入单个-document\" class=\"headerlink\" title=\"写入单个 document\"></a>写入单个 document</h3><p>假设我们现在要写入一些课程信息数据到<code>courseflex</code>数据库，可以利用<code>insert_one</code>或者<code>insert_many</code>。前者只能写入一个 document，后者可以批量写入多个 document</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> pymongo</span><br><span class=\"line\"><span class=\"keyword\">from</span> pymongo <span class=\"keyword\">import</span> MongoClient</span><br><span class=\"line\"></span><br><span class=\"line\">cluster = MongoClient(<span class=\"string\">\"mongodb+srv://yang_admin:123mypw@cluster0-uo1ne.gcp.mongodb.net/courseflex?retryWrites=true&amp;w=majority\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">db = cluster[<span class=\"string\">'courseflex'</span>]</span><br><span class=\"line\">collection = db[<span class=\"string\">'course]</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">course_info = &#123;</span></span><br><span class=\"line\"><span class=\"string\">    \"_id\": '</span>ACCT <span class=\"number\">101</span>A<span class=\"string\">',</span></span><br><span class=\"line\"><span class=\"string\">    \"class\": '</span>ACCT<span class=\"string\">',</span></span><br><span class=\"line\"><span class=\"string\">    \"category\": '</span>Accounting<span class=\"string\">',</span></span><br><span class=\"line\"><span class=\"string\">    \"instructor\": '</span>Yang Li<span class=\"string\">'</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">cou</span></span><br><span class=\"line\"><span class=\"string\">collection.insert_one(course_info)</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>如果写入的 document 不声明<code>_id</code>, Mongo 会自动生成一个<code>ObjectID</code></p>\n</blockquote>\n<h3 id=\"写入多个-document\"><a href=\"#写入多个-document\" class=\"headerlink\" title=\"写入多个 document\"></a>写入多个 document</h3><p>写入多个 document 只要在<code>insert_many()</code>方法中用<code>[]</code>包裹要写入的 document 即可</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">department_col = db[<span class=\"string\">'department'</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">department_1 = &#123;<span class=\"string\">\"title\"</span>: <span class=\"string\">'ACCT'</span>&#125;</span><br><span class=\"line\">department_2 = &#123;<span class=\"string\">\"title\"</span>: <span class=\"string\">'ECON'</span>&#125;</span><br><span class=\"line\">department_3 = &#123;<span class=\"string\">\"title\"</span>: <span class=\"string\">'CHIN'</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">department_col.insert_many([department_1, department_2, department_3])</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"查找-Find\"><a href=\"#查找-Find\" class=\"headerlink\" title=\"查找 Find\"></a>查找 Find</h2><h3 id=\"遍历所有-document\"><a href=\"#遍历所有-document\" class=\"headerlink\" title=\"遍历所有 document\"></a>遍历所有 document</h3><p>之前的例子中我们写入了课程类别到<code>department</code> collection 中，要想遍历所有的 document 引用<code>find()</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> info <span class=\"keyword\">in</span> department_col.find():</span><br><span class=\"line\">    print(info[<span class=\"string\">'title'</span>])</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查找相关-document\"><a href=\"#查找相关-document\" class=\"headerlink\" title=\"查找相关 document\"></a>查找相关 document</h3><p>利用<code>find()</code>方法只需要给出查找领域的参数即可获得所有结果。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 保存所有结果到变量</span></span><br><span class=\"line\">results = department_col.find(&#123;<span class=\"string\">\"title\"</span>: <span class=\"string\">'ECON'</span>&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> department <span class=\"keyword\">in</span> results:</span><br><span class=\"line\">    print(department)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>如果查找<code>_id</code>只会返回一个相关的 document</p>\n</blockquote>\n<h2 id=\"删除-Delete\"><a href=\"#删除-Delete\" class=\"headerlink\" title=\"删除 Delete\"></a>删除 Delete</h2><p>删除和写入的写法相似，把<code>insert</code>换为<code>delete</code>即可，删除同样支持<code>delete_one</code>或者<code>delete_many</code></p>\n<p>删除<code>_id</code>为<code>ACCT 101A</code>的 document</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">collection.delete_one(&#123;<span class=\"string\">'_id'</span>: <span class=\"string\">'ACCT 101A'</span>&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>删除整个 collection 中的所有 document</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">collecition.delete_many(&#123;&#125;)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"更新-Update\"><a href=\"#更新-Update\" class=\"headerlink\" title=\"更新 Update\"></a>更新 Update</h2><p>利用 <a href=\"https://docs.mongodb.com/manual/reference/operator/update/#id1\" target=\"_blank\" rel=\"noopener\">update operators</a> 来对相关 document 的值进行更改或添加</p>\n<p><code>$set</code> operator 可以在 document 上添加或设置一个新的值。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 更改现有的值</span></span><br><span class=\"line\">collection.update(&#123;<span class=\"string\">\"_id\"</span>: <span class=\"string\">'ACCT 101A'</span>&#125;, &#123;<span class=\"string\">'$set'</span>:&#123;<span class=\"string\">'title'</span>: <span class=\"string\">'YOUR NEW TITLE'</span>&#125;&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 添加新的值</span></span><br><span class=\"line\">collection.update(&#123;<span class=\"string\">\"_id\"</span>: <span class=\"string\">'ACCT 101A'</span>&#125;, &#123;<span class=\"string\">'$set'</span>:&#123;<span class=\"string\">'schedule'</span>: <span class=\"string\">'M 08:30 to 10:30'</span>&#125;&#125;)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"数量-Count\"><a href=\"#数量-Count\" class=\"headerlink\" title=\"数量 Count\"></a>数量 Count</h2><p>返回相关 collection 的 document 数量</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">num_of_courses = collection.count_documents(&#123;&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">num_of_acct = collection.count_documents(&#123;<span class=\"string\">\"category\"</span>: <span class=\"string\">\"ACCT\"</span>&#125;)</span><br></pre></td></tr></table></figure>\n"},{"title":"Vim 解放你的双手","date":"2020-07-11T19:28:05.000Z","cover":"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/vim-banner.png?alt=media&token=9a867eb9-e03f-4ee3-a6c8-bef084fe28b8","_content":"\n:q 退出\n:wq with save\n:q! quit w/o save\n\ni: insert mode\nesc: command mode\ndd: 删除当前行\nu: 撤销操作\n\nG: 到最低行\ngg: 到最顶行\n\n{ :上一个代码块\n} ：下一个代码块\n\n10 j 向下 10 行\n5 } 向下 5 个代码块\n\nyy 复制当前行\np 粘贴到当前行下面\n\nV 选择模式\n\no 在当前行下方插入新的一行 进入编辑模式\nO 在当前行上方插入新的一行 进入编辑模式\n\nw 向前一个字符\nb 向后一个字符\n\n:30 到第 30 行\n\n0 到当前行的起始\nw 到当前行第一个字符串位置\n\n0w 跳转到当前行第一个字母位置\n\n\\$ 到当前行末端\n\nt！ 跳转到当前行!前一个位置\nf! 跳转到当前行!的位置\n\ncW 删掉当前字符\n\nD 删除当前行当前位置右侧所有字符\n\n- 查找\n","source":"_posts/27-vim.md","raw":"---\ntitle: Vim 解放你的双手\ndate: 2020-07-11 12:28:05\ntags: ['editor', 'notes']\ncategories: Notes\ncover: 'https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/vim-banner.png?alt=media&token=9a867eb9-e03f-4ee3-a6c8-bef084fe28b8'\n---\n\n:q 退出\n:wq with save\n:q! quit w/o save\n\ni: insert mode\nesc: command mode\ndd: 删除当前行\nu: 撤销操作\n\nG: 到最低行\ngg: 到最顶行\n\n{ :上一个代码块\n} ：下一个代码块\n\n10 j 向下 10 行\n5 } 向下 5 个代码块\n\nyy 复制当前行\np 粘贴到当前行下面\n\nV 选择模式\n\no 在当前行下方插入新的一行 进入编辑模式\nO 在当前行上方插入新的一行 进入编辑模式\n\nw 向前一个字符\nb 向后一个字符\n\n:30 到第 30 行\n\n0 到当前行的起始\nw 到当前行第一个字符串位置\n\n0w 跳转到当前行第一个字母位置\n\n\\$ 到当前行末端\n\nt！ 跳转到当前行!前一个位置\nf! 跳转到当前行!的位置\n\ncW 删掉当前字符\n\nD 删除当前行当前位置右侧所有字符\n\n- 查找\n","slug":"27-vim","published":1,"updated":"2020-07-22T00:17:24.756Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckdnmttdu0027rwui2kve6hvs","content":"<p>:q 退出<br>:wq with save<br>:q! quit w/o save</p>\n<p>i: insert mode<br>esc: command mode<br>dd: 删除当前行<br>u: 撤销操作</p>\n<p>G: 到最低行<br>gg: 到最顶行</p>\n<p>{ :上一个代码块<br>} ：下一个代码块</p>\n<p>10 j 向下 10 行<br>5 } 向下 5 个代码块</p>\n<p>yy 复制当前行<br>p 粘贴到当前行下面</p>\n<p>V 选择模式</p>\n<p>o 在当前行下方插入新的一行 进入编辑模式<br>O 在当前行上方插入新的一行 进入编辑模式</p>\n<p>w 向前一个字符<br>b 向后一个字符</p>\n<p>:30 到第 30 行</p>\n<p>0 到当前行的起始<br>w 到当前行第一个字符串位置</p>\n<p>0w 跳转到当前行第一个字母位置</p>\n<p>$ 到当前行末端</p>\n<p>t！ 跳转到当前行!前一个位置<br>f! 跳转到当前行!的位置</p>\n<p>cW 删掉当前字符</p>\n<p>D 删除当前行当前位置右侧所有字符</p>\n<ul>\n<li>查找</li>\n</ul>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"","more":"<p>:q 退出<br>:wq with save<br>:q! quit w/o save</p>\n<p>i: insert mode<br>esc: command mode<br>dd: 删除当前行<br>u: 撤销操作</p>\n<p>G: 到最低行<br>gg: 到最顶行</p>\n<p>{ :上一个代码块<br>} ：下一个代码块</p>\n<p>10 j 向下 10 行<br>5 } 向下 5 个代码块</p>\n<p>yy 复制当前行<br>p 粘贴到当前行下面</p>\n<p>V 选择模式</p>\n<p>o 在当前行下方插入新的一行 进入编辑模式<br>O 在当前行上方插入新的一行 进入编辑模式</p>\n<p>w 向前一个字符<br>b 向后一个字符</p>\n<p>:30 到第 30 行</p>\n<p>0 到当前行的起始<br>w 到当前行第一个字符串位置</p>\n<p>0w 跳转到当前行第一个字母位置</p>\n<p>$ 到当前行末端</p>\n<p>t！ 跳转到当前行!前一个位置<br>f! 跳转到当前行!的位置</p>\n<p>cW 删掉当前字符</p>\n<p>D 删除当前行当前位置右侧所有字符</p>\n<ul>\n<li>查找</li>\n</ul>\n"},{"title":"React MERN Stack 配置","date":"2020-07-11T20:28:05.000Z","cover":"https://miro.medium.com/proxy/1*FVtCyRdJ6KOr4YswTtwMeA.jpeg","_content":"\n> MERN stack 配置 boilerplate\n\n## 项目创建\n\n创建一个新的项目文件夹并创建`server.js`文件，也是服务器启动的入口。\n\n然后在项目根目录下创建`client`文件夹并创建 react-app\n\n```shell\ncd client\nnpx create-react-app\n```\n\n## 后端 server.js\n\n连接 MongoDB Atlas，创建后端路由，数据库模板。\n\n### 安装相关依赖\n\n执行以下命令创建`package.json`以及安装相关依赖. `mongoose`和`express`可以搭建服务器来连接 MongoDB 数据库。`axios`之后用来 fetch 数据库的 documents. `concurrently`可以在命令行中同时运行多个命令。`dotenv`用来管理 MognoDB 的 URI\n\n```shell\nnpm init -y\nnpm install mongoose express axios morgan concurrently dotenv cors -S\n```\n\n### .env\n\n首先在项目根目录内创建`.env`, 复制 MongoDB Atlas Connect 内的连接如下。替换`<password>`和`<dbname>`为相关的数据库密码和名称。\n\n```env\nATLAS_URI=mongodb+srv://yang_admin:<password>@cluster0-uo1ne.gcp.mongodb.net/<dbname>?retryWrites=true&w=majority\n```\n\n### server.js\n\n在项目根目录内创建`server.js`.\n\n`server.js`\n\n```js\nconst express = require('express')\nconst mongoose = require('mongoose')\nconst cors = require('cors')\nconst morgan = require('morgan')\nconst path = require('path')\nconst mongo = require('mongodb').MongoClient\n\nrequire('dotenv').config()\n\nconst app = express()\nconst PORT = process.env.PORT || 8080\n\nconst routes = require('./routes/api')\n\napp.use(cors())\napp.use(express.json())\napp.use(express.urlencoded({ extended: false }))\napp.use(morgan('tiny'))\napp.use('/', routes)\n\nif (process.env.NODE_ENV === 'production') {\n  app.use(express.static('client/build'))\n}\n\nmongoose.connect(process.env.MONGODB_URI || process.env.ATLAS_URI, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true,\n})\n\nmongoose.connection.on('connected', () => {\n  console.log(`MongoDB连接成功~`)\n})\n\napp.listen(PORT, console.log(`服务器在${PORT}启动`))\n```\n\n### models\n\n在根目录下创建`models`文件夹\n\n**courseInfo.js**\n\n```js\nconst mongoose = require('mongoose')\n\n// Schema\nconst Schema = mongoose.Schema\nconst CourseInfoSchema = new Schema({\n  title: String,\n  instructor: String,\n  date: {\n    type: String,\n    default: Date.now(),\n  },\n})\n\n// Model\nconst CourseInfo = mongoose.model('CourseInfo', CourseInfoSchema)\n\nmodule.exports = CourseInfo\n```\n\n### routes\n\n**api.js**\n\n```js\nconst express = require('express')\nconst router = express.Router()\nconst CourseInfo = require('../models/courseInfo')\n\n// Routes\nrouter.get('/api', (req, res) => {\n  CourseInfo.find({})\n    .then(data => {\n      console.log(data)\n      res.json(data)\n    })\n    .catch(error => {\n      console.log(daerrorta)\n    })\n})\n\nrouter.post('/save', (req, res) => {\n  const data = req.body\n  const newCourseInfo = new CourseInfo(data)\n\n  newCourseInfo.save(error => {\n    if (error) {\n      res.status(500).json({ msg: 'Internal server errors' })\n      return\n    }\n    return res.json({\n      msg: 'Data saved~',\n    })\n  })\n})\n\nmodule.exports = router\n```\n\n## Concurrently React & Node\n\n全局安装`npm install -g nodemon`, 然后配置`package.json`运行脚本\n\n`package.json`\n\n```json\n{\n  \"name\": \"courseflex\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\",\n    \"start\": \"node server.js\",\n    \"client\": \"cd client && yarn start\",\n    \"dev\": \"concurrently -n 'server,client' -c 'green, blue' \\\"nodemon server.js\\\" \\\"npm run client\\\"\"\n  },\n  \"keywords\": [],\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"dependencies\": {\n    \"axios\": \"^0.19.2\",\n    \"concurrently\": \"^5.2.0\",\n    \"cors\": \"^2.8.5\",\n    \"dotenv\": \"^8.2.0\",\n    \"express\": \"^4.17.1\",\n    \"mongoose\": \"^5.9.20\",\n    \"morgan\": \"^1.10.0\"\n  }\n}\n```\n\n在命令行中输入`npm run dev`即可启动 node server 和 react app\n\n## 前端 React\n\n在项目文件夹中创建`client`文件夹并安装`create-react-app`\n\n```shell\nmkdir course-flex\ncd course-flex\nnpx create-react-app client\n```\n\n### 保存并读取数据库\n\n```jsx\nimport React, {useState, useEffect} from 'react'\nimport axios from 'axios'\n\nexport default const App = () => {\n  const [course, setCourse] = useState([])\n  const [courInfo, setCourseInfo] = useState({\n    \"title\": '',\n    \"instructor\": ''\n  })\n\n  useEffect(() => {\n    getCourse()\n  }, [])\n\n  const getCourse = () => {\n    axios.get('/api)\n      .then(response => {\n        setCourse(response.data)\n      })\n      .catch(() => {\n        console.log('error')\n      })\n  }\n\n  const submitCourse = () => {\n    const courseData = {\n      title: courseInfo.title,\n      instructor: courseInfo.instructor\n    }\n\n    axios({\n      url: '/api/sav',\n      method: 'POST',\n      data: courseData\n    })\n    .then(() => {\n      console.log('data sent success')\n      getCourse()\n    })\n    .catch(() => {\n      console.log('error')\n    })\n  }\n}\n```\n\n## 部署 Heroku\n\n配置根目录下的`package.json`\n\n```json\n{\n  \"name\": \"courseflex\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"server.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\",\n    \"build\": \"cd client && npm run build\",\n    \"install-client\": \"cd client && npm install\",\n    \"heroku-postbuild\": \"cd client && npm install --only=dev && npm install && npm run build\",\n    \"start\": \"node server.js\",\n    \"client\": \"cd client && yarn start\",\n    \"dev\": \"concurrently \\\"nodemon server.js\\\" \\\"npm run client\\\"\"\n  },\n  \"keywords\": [],\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"dependencies\": {\n    \"axios\": \"^0.19.2\",\n    \"concurrently\": \"^5.2.0\",\n    \"cors\": \"^2.8.5\",\n    \"dotenv\": \"^8.2.0\",\n    \"express\": \"^4.17.1\",\n    \"mongodb\": \"^3.5.9\",\n    \"mongoose\": \"^5.9.20\",\n    \"morgan\": \"^1.10.0\"\n  }\n}\n```\n\n```shell\ncd course-flex\nheroku create courseflex\nheroku addons:create mongolab:sandbox\ngit add .\ngit commit -m\"heroku deploy\"\ngit push heroku master\n```\n\n之后在 heroku 设置中配置 mongoDB 环境变量即可。\n","source":"_posts/28-react-mern.md","raw":"---\ntitle: React MERN Stack 配置\ndate: 2020-07-11 13:28:05\ntags: ['MERN', 'react', 'mongoDB', 'express', 'node']\ncategories: Notes\ncover: 'https://miro.medium.com/proxy/1*FVtCyRdJ6KOr4YswTtwMeA.jpeg'\n---\n\n> MERN stack 配置 boilerplate\n\n## 项目创建\n\n创建一个新的项目文件夹并创建`server.js`文件，也是服务器启动的入口。\n\n然后在项目根目录下创建`client`文件夹并创建 react-app\n\n```shell\ncd client\nnpx create-react-app\n```\n\n## 后端 server.js\n\n连接 MongoDB Atlas，创建后端路由，数据库模板。\n\n### 安装相关依赖\n\n执行以下命令创建`package.json`以及安装相关依赖. `mongoose`和`express`可以搭建服务器来连接 MongoDB 数据库。`axios`之后用来 fetch 数据库的 documents. `concurrently`可以在命令行中同时运行多个命令。`dotenv`用来管理 MognoDB 的 URI\n\n```shell\nnpm init -y\nnpm install mongoose express axios morgan concurrently dotenv cors -S\n```\n\n### .env\n\n首先在项目根目录内创建`.env`, 复制 MongoDB Atlas Connect 内的连接如下。替换`<password>`和`<dbname>`为相关的数据库密码和名称。\n\n```env\nATLAS_URI=mongodb+srv://yang_admin:<password>@cluster0-uo1ne.gcp.mongodb.net/<dbname>?retryWrites=true&w=majority\n```\n\n### server.js\n\n在项目根目录内创建`server.js`.\n\n`server.js`\n\n```js\nconst express = require('express')\nconst mongoose = require('mongoose')\nconst cors = require('cors')\nconst morgan = require('morgan')\nconst path = require('path')\nconst mongo = require('mongodb').MongoClient\n\nrequire('dotenv').config()\n\nconst app = express()\nconst PORT = process.env.PORT || 8080\n\nconst routes = require('./routes/api')\n\napp.use(cors())\napp.use(express.json())\napp.use(express.urlencoded({ extended: false }))\napp.use(morgan('tiny'))\napp.use('/', routes)\n\nif (process.env.NODE_ENV === 'production') {\n  app.use(express.static('client/build'))\n}\n\nmongoose.connect(process.env.MONGODB_URI || process.env.ATLAS_URI, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true,\n})\n\nmongoose.connection.on('connected', () => {\n  console.log(`MongoDB连接成功~`)\n})\n\napp.listen(PORT, console.log(`服务器在${PORT}启动`))\n```\n\n### models\n\n在根目录下创建`models`文件夹\n\n**courseInfo.js**\n\n```js\nconst mongoose = require('mongoose')\n\n// Schema\nconst Schema = mongoose.Schema\nconst CourseInfoSchema = new Schema({\n  title: String,\n  instructor: String,\n  date: {\n    type: String,\n    default: Date.now(),\n  },\n})\n\n// Model\nconst CourseInfo = mongoose.model('CourseInfo', CourseInfoSchema)\n\nmodule.exports = CourseInfo\n```\n\n### routes\n\n**api.js**\n\n```js\nconst express = require('express')\nconst router = express.Router()\nconst CourseInfo = require('../models/courseInfo')\n\n// Routes\nrouter.get('/api', (req, res) => {\n  CourseInfo.find({})\n    .then(data => {\n      console.log(data)\n      res.json(data)\n    })\n    .catch(error => {\n      console.log(daerrorta)\n    })\n})\n\nrouter.post('/save', (req, res) => {\n  const data = req.body\n  const newCourseInfo = new CourseInfo(data)\n\n  newCourseInfo.save(error => {\n    if (error) {\n      res.status(500).json({ msg: 'Internal server errors' })\n      return\n    }\n    return res.json({\n      msg: 'Data saved~',\n    })\n  })\n})\n\nmodule.exports = router\n```\n\n## Concurrently React & Node\n\n全局安装`npm install -g nodemon`, 然后配置`package.json`运行脚本\n\n`package.json`\n\n```json\n{\n  \"name\": \"courseflex\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\",\n    \"start\": \"node server.js\",\n    \"client\": \"cd client && yarn start\",\n    \"dev\": \"concurrently -n 'server,client' -c 'green, blue' \\\"nodemon server.js\\\" \\\"npm run client\\\"\"\n  },\n  \"keywords\": [],\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"dependencies\": {\n    \"axios\": \"^0.19.2\",\n    \"concurrently\": \"^5.2.0\",\n    \"cors\": \"^2.8.5\",\n    \"dotenv\": \"^8.2.0\",\n    \"express\": \"^4.17.1\",\n    \"mongoose\": \"^5.9.20\",\n    \"morgan\": \"^1.10.0\"\n  }\n}\n```\n\n在命令行中输入`npm run dev`即可启动 node server 和 react app\n\n## 前端 React\n\n在项目文件夹中创建`client`文件夹并安装`create-react-app`\n\n```shell\nmkdir course-flex\ncd course-flex\nnpx create-react-app client\n```\n\n### 保存并读取数据库\n\n```jsx\nimport React, {useState, useEffect} from 'react'\nimport axios from 'axios'\n\nexport default const App = () => {\n  const [course, setCourse] = useState([])\n  const [courInfo, setCourseInfo] = useState({\n    \"title\": '',\n    \"instructor\": ''\n  })\n\n  useEffect(() => {\n    getCourse()\n  }, [])\n\n  const getCourse = () => {\n    axios.get('/api)\n      .then(response => {\n        setCourse(response.data)\n      })\n      .catch(() => {\n        console.log('error')\n      })\n  }\n\n  const submitCourse = () => {\n    const courseData = {\n      title: courseInfo.title,\n      instructor: courseInfo.instructor\n    }\n\n    axios({\n      url: '/api/sav',\n      method: 'POST',\n      data: courseData\n    })\n    .then(() => {\n      console.log('data sent success')\n      getCourse()\n    })\n    .catch(() => {\n      console.log('error')\n    })\n  }\n}\n```\n\n## 部署 Heroku\n\n配置根目录下的`package.json`\n\n```json\n{\n  \"name\": \"courseflex\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"server.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\",\n    \"build\": \"cd client && npm run build\",\n    \"install-client\": \"cd client && npm install\",\n    \"heroku-postbuild\": \"cd client && npm install --only=dev && npm install && npm run build\",\n    \"start\": \"node server.js\",\n    \"client\": \"cd client && yarn start\",\n    \"dev\": \"concurrently \\\"nodemon server.js\\\" \\\"npm run client\\\"\"\n  },\n  \"keywords\": [],\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"dependencies\": {\n    \"axios\": \"^0.19.2\",\n    \"concurrently\": \"^5.2.0\",\n    \"cors\": \"^2.8.5\",\n    \"dotenv\": \"^8.2.0\",\n    \"express\": \"^4.17.1\",\n    \"mongodb\": \"^3.5.9\",\n    \"mongoose\": \"^5.9.20\",\n    \"morgan\": \"^1.10.0\"\n  }\n}\n```\n\n```shell\ncd course-flex\nheroku create courseflex\nheroku addons:create mongolab:sandbox\ngit add .\ngit commit -m\"heroku deploy\"\ngit push heroku master\n```\n\n之后在 heroku 设置中配置 mongoDB 环境变量即可。\n","slug":"28-react-mern","published":1,"updated":"2020-07-14T05:23:48.341Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckdnmttdw002arwui3i2u5hxr","content":"<blockquote>\n<p>MERN stack 配置 boilerplate</p>\n</blockquote>\n<h2 id=\"项目创建\"><a href=\"#项目创建\" class=\"headerlink\" title=\"项目创建\"></a>项目创建</h2><p>创建一个新的项目文件夹并创建<code>server.js</code>文件，也是服务器启动的入口。</p>\n<p>然后在项目根目录下创建<code>client</code>文件夹并创建 react-app</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd client</span><br><span class=\"line\">npx create-react-app</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"后端-server-js\"><a href=\"#后端-server-js\" class=\"headerlink\" title=\"后端 server.js\"></a>后端 server.js</h2><p>连接 MongoDB Atlas，创建后端路由，数据库模板。</p>\n<h3 id=\"安装相关依赖\"><a href=\"#安装相关依赖\" class=\"headerlink\" title=\"安装相关依赖\"></a>安装相关依赖</h3><p>执行以下命令创建<code>package.json</code>以及安装相关依赖. <code>mongoose</code>和<code>express</code>可以搭建服务器来连接 MongoDB 数据库。<code>axios</code>之后用来 fetch 数据库的 documents. <code>concurrently</code>可以在命令行中同时运行多个命令。<code>dotenv</code>用来管理 MognoDB 的 URI</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm init -y</span><br><span class=\"line\">npm install mongoose express axios morgan concurrently dotenv cors -S</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"env\"><a href=\"#env\" class=\"headerlink\" title=\".env\"></a>.env</h3><p>首先在项目根目录内创建<code>.env</code>, 复制 MongoDB Atlas Connect 内的连接如下。替换<code>&lt;password&gt;</code>和<code>&lt;dbname&gt;</code>为相关的数据库密码和名称。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ATLAS_URI&#x3D;mongodb+srv:&#x2F;&#x2F;yang_admin:&lt;password&gt;@cluster0-uo1ne.gcp.mongodb.net&#x2F;&lt;dbname&gt;?retryWrites&#x3D;true&amp;w&#x3D;majority</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"server-js\"><a href=\"#server-js\" class=\"headerlink\" title=\"server.js\"></a>server.js</h3><p>在项目根目录内创建<code>server.js</code>.</p>\n<p><code>server.js</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> mongoose = <span class=\"built_in\">require</span>(<span class=\"string\">'mongoose'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> cors = <span class=\"built_in\">require</span>(<span class=\"string\">'cors'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> morgan = <span class=\"built_in\">require</span>(<span class=\"string\">'morgan'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> mongo = <span class=\"built_in\">require</span>(<span class=\"string\">'mongodb'</span>).MongoClient</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'dotenv'</span>).config()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express()</span><br><span class=\"line\"><span class=\"keyword\">const</span> PORT = process.env.PORT || <span class=\"number\">8080</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> routes = <span class=\"built_in\">require</span>(<span class=\"string\">'./routes/api'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">app.use(cors())</span><br><span class=\"line\">app.use(express.json())</span><br><span class=\"line\">app.use(express.urlencoded(&#123; <span class=\"attr\">extended</span>: <span class=\"literal\">false</span> &#125;))</span><br><span class=\"line\">app.use(morgan(<span class=\"string\">'tiny'</span>))</span><br><span class=\"line\">app.use(<span class=\"string\">'/'</span>, routes)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (process.env.NODE_ENV === <span class=\"string\">'production'</span>) &#123;</span><br><span class=\"line\">  app.use(express.static(<span class=\"string\">'client/build'</span>))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">mongoose.connect(process.env.MONGODB_URI || process.env.ATLAS_URI, &#123;</span><br><span class=\"line\">  useNewUrlParser: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  useUnifiedTopology: <span class=\"literal\">true</span>,</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">mongoose.connection.on(<span class=\"string\">'connected'</span>, () =&gt; &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`MongoDB连接成功~`</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(PORT, <span class=\"built_in\">console</span>.log(<span class=\"string\">`服务器在<span class=\"subst\">$&#123;PORT&#125;</span>启动`</span>))</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"models\"><a href=\"#models\" class=\"headerlink\" title=\"models\"></a>models</h3><p>在根目录下创建<code>models</code>文件夹</p>\n<p><strong>courseInfo.js</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> mongoose = <span class=\"built_in\">require</span>(<span class=\"string\">'mongoose'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Schema</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> Schema = mongoose.Schema</span><br><span class=\"line\"><span class=\"keyword\">const</span> CourseInfoSchema = <span class=\"keyword\">new</span> Schema(&#123;</span><br><span class=\"line\">  title: <span class=\"built_in\">String</span>,</span><br><span class=\"line\">  instructor: <span class=\"built_in\">String</span>,</span><br><span class=\"line\">  date: &#123;</span><br><span class=\"line\">    type: <span class=\"built_in\">String</span>,</span><br><span class=\"line\">    <span class=\"keyword\">default</span>: <span class=\"built_in\">Date</span>.now(),</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Model</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> CourseInfo = mongoose.model(<span class=\"string\">'CourseInfo'</span>, CourseInfoSchema)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = CourseInfo</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"routes\"><a href=\"#routes\" class=\"headerlink\" title=\"routes\"></a>routes</h3><p><strong>api.js</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> router = express.Router()</span><br><span class=\"line\"><span class=\"keyword\">const</span> CourseInfo = <span class=\"built_in\">require</span>(<span class=\"string\">'../models/courseInfo'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Routes</span></span><br><span class=\"line\">router.get(<span class=\"string\">'/api'</span>, (req, res) =&gt; &#123;</span><br><span class=\"line\">  CourseInfo.find(&#123;&#125;)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(data)</span><br><span class=\"line\">      res.json(data)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\"><span class=\"params\">error</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(daerrorta)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">router.post(<span class=\"string\">'/save'</span>, (req, res) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = req.body</span><br><span class=\"line\">  <span class=\"keyword\">const</span> newCourseInfo = <span class=\"keyword\">new</span> CourseInfo(data)</span><br><span class=\"line\"></span><br><span class=\"line\">  newCourseInfo.save(<span class=\"function\"><span class=\"params\">error</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">      res.status(<span class=\"number\">500</span>).json(&#123; <span class=\"attr\">msg</span>: <span class=\"string\">'Internal server errors'</span> &#125;)</span><br><span class=\"line\">      <span class=\"keyword\">return</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res.json(&#123;</span><br><span class=\"line\">      msg: <span class=\"string\">'Data saved~'</span>,</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = router</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Concurrently-React-amp-Node\"><a href=\"#Concurrently-React-amp-Node\" class=\"headerlink\" title=\"Concurrently React &amp; Node\"></a>Concurrently React &amp; Node</h2><p>全局安装<code>npm install -g nodemon</code>, 然后配置<code>package.json</code>运行脚本</p>\n<p><code>package.json</code></p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"courseflex\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"version\"</span>: <span class=\"string\">\"1.0.0\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"description\"</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"main\"</span>: <span class=\"string\">\"index.js\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"test\"</span>: <span class=\"string\">\"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"start\"</span>: <span class=\"string\">\"node server.js\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"client\"</span>: <span class=\"string\">\"cd client &amp;&amp; yarn start\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"dev\"</span>: <span class=\"string\">\"concurrently -n 'server,client' -c 'green, blue' \\\"nodemon server.js\\\" \\\"npm run client\\\"\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"keywords\"</span>: [],</span><br><span class=\"line\">  <span class=\"attr\">\"author\"</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"license\"</span>: <span class=\"string\">\"ISC\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"dependencies\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"axios\"</span>: <span class=\"string\">\"^0.19.2\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"concurrently\"</span>: <span class=\"string\">\"^5.2.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"cors\"</span>: <span class=\"string\">\"^2.8.5\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"dotenv\"</span>: <span class=\"string\">\"^8.2.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"express\"</span>: <span class=\"string\">\"^4.17.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"mongoose\"</span>: <span class=\"string\">\"^5.9.20\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"morgan\"</span>: <span class=\"string\">\"^1.10.0\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在命令行中输入<code>npm run dev</code>即可启动 node server 和 react app</p>\n<h2 id=\"前端-React\"><a href=\"#前端-React\" class=\"headerlink\" title=\"前端 React\"></a>前端 React</h2><p>在项目文件夹中创建<code>client</code>文件夹并安装<code>create-react-app</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir course-flex</span><br><span class=\"line\">cd course-flex</span><br><span class=\"line\">npx create-react-app client</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"保存并读取数据库\"><a href=\"#保存并读取数据库\" class=\"headerlink\" title=\"保存并读取数据库\"></a>保存并读取数据库</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123;useState, useEffect&#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">'axios'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">const</span> App = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [course, setCourse] = useState([])</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [courInfo, setCourseInfo] = useState(&#123;</span><br><span class=\"line\">    <span class=\"string\">\"title\"</span>: <span class=\"string\">''</span>,</span><br><span class=\"line\">    <span class=\"string\">\"instructor\"</span>: <span class=\"string\">''</span></span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    getCourse()</span><br><span class=\"line\">  &#125;, [])</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> getCourse = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    axios.get(<span class=\"string\">'/api)</span></span><br><span class=\"line\"><span class=\"string\">      .then(response =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"string\">        setCourse(response.data)</span></span><br><span class=\"line\"><span class=\"string\">      &#125;)</span></span><br><span class=\"line\"><span class=\"string\">      .catch(() =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"string\">        console.log('</span>error<span class=\"string\">')</span></span><br><span class=\"line\"><span class=\"string\">      &#125;)</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  const submitCourse = () =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"string\">    const courseData = &#123;</span></span><br><span class=\"line\"><span class=\"string\">      title: courseInfo.title,</span></span><br><span class=\"line\"><span class=\"string\">      instructor: courseInfo.instructor</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    axios(&#123;</span></span><br><span class=\"line\"><span class=\"string\">      url: '</span>/api/sav<span class=\"string\">',</span></span><br><span class=\"line\"><span class=\"string\">      method: '</span>POST<span class=\"string\">',</span></span><br><span class=\"line\"><span class=\"string\">      data: courseData</span></span><br><span class=\"line\"><span class=\"string\">    &#125;)</span></span><br><span class=\"line\"><span class=\"string\">    .then(() =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"string\">      console.log('</span>data sent success<span class=\"string\">')</span></span><br><span class=\"line\"><span class=\"string\">      getCourse()</span></span><br><span class=\"line\"><span class=\"string\">    &#125;)</span></span><br><span class=\"line\"><span class=\"string\">    .catch(() =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"string\">      console.log('</span>error<span class=\"string\">')</span></span><br><span class=\"line\"><span class=\"string\">    &#125;)</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"部署-Heroku\"><a href=\"#部署-Heroku\" class=\"headerlink\" title=\"部署 Heroku\"></a>部署 Heroku</h2><p>配置根目录下的<code>package.json</code></p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"courseflex\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"version\"</span>: <span class=\"string\">\"1.0.0\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"description\"</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"main\"</span>: <span class=\"string\">\"server.js\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"test\"</span>: <span class=\"string\">\"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"build\"</span>: <span class=\"string\">\"cd client &amp;&amp; npm run build\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"install-client\"</span>: <span class=\"string\">\"cd client &amp;&amp; npm install\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"heroku-postbuild\"</span>: <span class=\"string\">\"cd client &amp;&amp; npm install --only=dev &amp;&amp; npm install &amp;&amp; npm run build\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"start\"</span>: <span class=\"string\">\"node server.js\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"client\"</span>: <span class=\"string\">\"cd client &amp;&amp; yarn start\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"dev\"</span>: <span class=\"string\">\"concurrently \\\"nodemon server.js\\\" \\\"npm run client\\\"\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"keywords\"</span>: [],</span><br><span class=\"line\">  <span class=\"attr\">\"author\"</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"license\"</span>: <span class=\"string\">\"ISC\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"dependencies\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"axios\"</span>: <span class=\"string\">\"^0.19.2\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"concurrently\"</span>: <span class=\"string\">\"^5.2.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"cors\"</span>: <span class=\"string\">\"^2.8.5\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"dotenv\"</span>: <span class=\"string\">\"^8.2.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"express\"</span>: <span class=\"string\">\"^4.17.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"mongodb\"</span>: <span class=\"string\">\"^3.5.9\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"mongoose\"</span>: <span class=\"string\">\"^5.9.20\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"morgan\"</span>: <span class=\"string\">\"^1.10.0\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd course-flex</span><br><span class=\"line\">heroku create courseflex</span><br><span class=\"line\">heroku addons:create mongolab:sandbox</span><br><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m\"heroku deploy\"</span><br><span class=\"line\">git push heroku master</span><br></pre></td></tr></table></figure>\n\n<p>之后在 heroku 设置中配置 mongoDB 环境变量即可。</p>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"","more":"<blockquote>\n<p>MERN stack 配置 boilerplate</p>\n</blockquote>\n<h2 id=\"项目创建\"><a href=\"#项目创建\" class=\"headerlink\" title=\"项目创建\"></a>项目创建</h2><p>创建一个新的项目文件夹并创建<code>server.js</code>文件，也是服务器启动的入口。</p>\n<p>然后在项目根目录下创建<code>client</code>文件夹并创建 react-app</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd client</span><br><span class=\"line\">npx create-react-app</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"后端-server-js\"><a href=\"#后端-server-js\" class=\"headerlink\" title=\"后端 server.js\"></a>后端 server.js</h2><p>连接 MongoDB Atlas，创建后端路由，数据库模板。</p>\n<h3 id=\"安装相关依赖\"><a href=\"#安装相关依赖\" class=\"headerlink\" title=\"安装相关依赖\"></a>安装相关依赖</h3><p>执行以下命令创建<code>package.json</code>以及安装相关依赖. <code>mongoose</code>和<code>express</code>可以搭建服务器来连接 MongoDB 数据库。<code>axios</code>之后用来 fetch 数据库的 documents. <code>concurrently</code>可以在命令行中同时运行多个命令。<code>dotenv</code>用来管理 MognoDB 的 URI</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm init -y</span><br><span class=\"line\">npm install mongoose express axios morgan concurrently dotenv cors -S</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"env\"><a href=\"#env\" class=\"headerlink\" title=\".env\"></a>.env</h3><p>首先在项目根目录内创建<code>.env</code>, 复制 MongoDB Atlas Connect 内的连接如下。替换<code>&lt;password&gt;</code>和<code>&lt;dbname&gt;</code>为相关的数据库密码和名称。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ATLAS_URI&#x3D;mongodb+srv:&#x2F;&#x2F;yang_admin:&lt;password&gt;@cluster0-uo1ne.gcp.mongodb.net&#x2F;&lt;dbname&gt;?retryWrites&#x3D;true&amp;w&#x3D;majority</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"server-js\"><a href=\"#server-js\" class=\"headerlink\" title=\"server.js\"></a>server.js</h3><p>在项目根目录内创建<code>server.js</code>.</p>\n<p><code>server.js</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> mongoose = <span class=\"built_in\">require</span>(<span class=\"string\">'mongoose'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> cors = <span class=\"built_in\">require</span>(<span class=\"string\">'cors'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> morgan = <span class=\"built_in\">require</span>(<span class=\"string\">'morgan'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> mongo = <span class=\"built_in\">require</span>(<span class=\"string\">'mongodb'</span>).MongoClient</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'dotenv'</span>).config()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express()</span><br><span class=\"line\"><span class=\"keyword\">const</span> PORT = process.env.PORT || <span class=\"number\">8080</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> routes = <span class=\"built_in\">require</span>(<span class=\"string\">'./routes/api'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">app.use(cors())</span><br><span class=\"line\">app.use(express.json())</span><br><span class=\"line\">app.use(express.urlencoded(&#123; <span class=\"attr\">extended</span>: <span class=\"literal\">false</span> &#125;))</span><br><span class=\"line\">app.use(morgan(<span class=\"string\">'tiny'</span>))</span><br><span class=\"line\">app.use(<span class=\"string\">'/'</span>, routes)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (process.env.NODE_ENV === <span class=\"string\">'production'</span>) &#123;</span><br><span class=\"line\">  app.use(express.static(<span class=\"string\">'client/build'</span>))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">mongoose.connect(process.env.MONGODB_URI || process.env.ATLAS_URI, &#123;</span><br><span class=\"line\">  useNewUrlParser: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  useUnifiedTopology: <span class=\"literal\">true</span>,</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">mongoose.connection.on(<span class=\"string\">'connected'</span>, () =&gt; &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`MongoDB连接成功~`</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(PORT, <span class=\"built_in\">console</span>.log(<span class=\"string\">`服务器在<span class=\"subst\">$&#123;PORT&#125;</span>启动`</span>))</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"models\"><a href=\"#models\" class=\"headerlink\" title=\"models\"></a>models</h3><p>在根目录下创建<code>models</code>文件夹</p>\n<p><strong>courseInfo.js</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> mongoose = <span class=\"built_in\">require</span>(<span class=\"string\">'mongoose'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Schema</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> Schema = mongoose.Schema</span><br><span class=\"line\"><span class=\"keyword\">const</span> CourseInfoSchema = <span class=\"keyword\">new</span> Schema(&#123;</span><br><span class=\"line\">  title: <span class=\"built_in\">String</span>,</span><br><span class=\"line\">  instructor: <span class=\"built_in\">String</span>,</span><br><span class=\"line\">  date: &#123;</span><br><span class=\"line\">    type: <span class=\"built_in\">String</span>,</span><br><span class=\"line\">    <span class=\"keyword\">default</span>: <span class=\"built_in\">Date</span>.now(),</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Model</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> CourseInfo = mongoose.model(<span class=\"string\">'CourseInfo'</span>, CourseInfoSchema)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = CourseInfo</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"routes\"><a href=\"#routes\" class=\"headerlink\" title=\"routes\"></a>routes</h3><p><strong>api.js</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> router = express.Router()</span><br><span class=\"line\"><span class=\"keyword\">const</span> CourseInfo = <span class=\"built_in\">require</span>(<span class=\"string\">'../models/courseInfo'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Routes</span></span><br><span class=\"line\">router.get(<span class=\"string\">'/api'</span>, (req, res) =&gt; &#123;</span><br><span class=\"line\">  CourseInfo.find(&#123;&#125;)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(data)</span><br><span class=\"line\">      res.json(data)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\"><span class=\"params\">error</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(daerrorta)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">router.post(<span class=\"string\">'/save'</span>, (req, res) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = req.body</span><br><span class=\"line\">  <span class=\"keyword\">const</span> newCourseInfo = <span class=\"keyword\">new</span> CourseInfo(data)</span><br><span class=\"line\"></span><br><span class=\"line\">  newCourseInfo.save(<span class=\"function\"><span class=\"params\">error</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (error) &#123;</span><br><span class=\"line\">      res.status(<span class=\"number\">500</span>).json(&#123; <span class=\"attr\">msg</span>: <span class=\"string\">'Internal server errors'</span> &#125;)</span><br><span class=\"line\">      <span class=\"keyword\">return</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res.json(&#123;</span><br><span class=\"line\">      msg: <span class=\"string\">'Data saved~'</span>,</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = router</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Concurrently-React-amp-Node\"><a href=\"#Concurrently-React-amp-Node\" class=\"headerlink\" title=\"Concurrently React &amp; Node\"></a>Concurrently React &amp; Node</h2><p>全局安装<code>npm install -g nodemon</code>, 然后配置<code>package.json</code>运行脚本</p>\n<p><code>package.json</code></p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"courseflex\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"version\"</span>: <span class=\"string\">\"1.0.0\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"description\"</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"main\"</span>: <span class=\"string\">\"index.js\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"test\"</span>: <span class=\"string\">\"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"start\"</span>: <span class=\"string\">\"node server.js\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"client\"</span>: <span class=\"string\">\"cd client &amp;&amp; yarn start\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"dev\"</span>: <span class=\"string\">\"concurrently -n 'server,client' -c 'green, blue' \\\"nodemon server.js\\\" \\\"npm run client\\\"\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"keywords\"</span>: [],</span><br><span class=\"line\">  <span class=\"attr\">\"author\"</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"license\"</span>: <span class=\"string\">\"ISC\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"dependencies\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"axios\"</span>: <span class=\"string\">\"^0.19.2\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"concurrently\"</span>: <span class=\"string\">\"^5.2.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"cors\"</span>: <span class=\"string\">\"^2.8.5\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"dotenv\"</span>: <span class=\"string\">\"^8.2.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"express\"</span>: <span class=\"string\">\"^4.17.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"mongoose\"</span>: <span class=\"string\">\"^5.9.20\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"morgan\"</span>: <span class=\"string\">\"^1.10.0\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在命令行中输入<code>npm run dev</code>即可启动 node server 和 react app</p>\n<h2 id=\"前端-React\"><a href=\"#前端-React\" class=\"headerlink\" title=\"前端 React\"></a>前端 React</h2><p>在项目文件夹中创建<code>client</code>文件夹并安装<code>create-react-app</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir course-flex</span><br><span class=\"line\">cd course-flex</span><br><span class=\"line\">npx create-react-app client</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"保存并读取数据库\"><a href=\"#保存并读取数据库\" class=\"headerlink\" title=\"保存并读取数据库\"></a>保存并读取数据库</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123;useState, useEffect&#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">'axios'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">const</span> App = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [course, setCourse] = useState([])</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [courInfo, setCourseInfo] = useState(&#123;</span><br><span class=\"line\">    <span class=\"string\">\"title\"</span>: <span class=\"string\">''</span>,</span><br><span class=\"line\">    <span class=\"string\">\"instructor\"</span>: <span class=\"string\">''</span></span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    getCourse()</span><br><span class=\"line\">  &#125;, [])</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> getCourse = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    axios.get(<span class=\"string\">'/api)</span></span><br><span class=\"line\"><span class=\"string\">      .then(response =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"string\">        setCourse(response.data)</span></span><br><span class=\"line\"><span class=\"string\">      &#125;)</span></span><br><span class=\"line\"><span class=\"string\">      .catch(() =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"string\">        console.log('</span>error<span class=\"string\">')</span></span><br><span class=\"line\"><span class=\"string\">      &#125;)</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">  const submitCourse = () =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"string\">    const courseData = &#123;</span></span><br><span class=\"line\"><span class=\"string\">      title: courseInfo.title,</span></span><br><span class=\"line\"><span class=\"string\">      instructor: courseInfo.instructor</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    axios(&#123;</span></span><br><span class=\"line\"><span class=\"string\">      url: '</span>/api/sav<span class=\"string\">',</span></span><br><span class=\"line\"><span class=\"string\">      method: '</span>POST<span class=\"string\">',</span></span><br><span class=\"line\"><span class=\"string\">      data: courseData</span></span><br><span class=\"line\"><span class=\"string\">    &#125;)</span></span><br><span class=\"line\"><span class=\"string\">    .then(() =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"string\">      console.log('</span>data sent success<span class=\"string\">')</span></span><br><span class=\"line\"><span class=\"string\">      getCourse()</span></span><br><span class=\"line\"><span class=\"string\">    &#125;)</span></span><br><span class=\"line\"><span class=\"string\">    .catch(() =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"string\">      console.log('</span>error<span class=\"string\">')</span></span><br><span class=\"line\"><span class=\"string\">    &#125;)</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"部署-Heroku\"><a href=\"#部署-Heroku\" class=\"headerlink\" title=\"部署 Heroku\"></a>部署 Heroku</h2><p>配置根目录下的<code>package.json</code></p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"courseflex\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"version\"</span>: <span class=\"string\">\"1.0.0\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"description\"</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"main\"</span>: <span class=\"string\">\"server.js\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"test\"</span>: <span class=\"string\">\"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"build\"</span>: <span class=\"string\">\"cd client &amp;&amp; npm run build\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"install-client\"</span>: <span class=\"string\">\"cd client &amp;&amp; npm install\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"heroku-postbuild\"</span>: <span class=\"string\">\"cd client &amp;&amp; npm install --only=dev &amp;&amp; npm install &amp;&amp; npm run build\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"start\"</span>: <span class=\"string\">\"node server.js\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"client\"</span>: <span class=\"string\">\"cd client &amp;&amp; yarn start\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"dev\"</span>: <span class=\"string\">\"concurrently \\\"nodemon server.js\\\" \\\"npm run client\\\"\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"keywords\"</span>: [],</span><br><span class=\"line\">  <span class=\"attr\">\"author\"</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"license\"</span>: <span class=\"string\">\"ISC\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"dependencies\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"axios\"</span>: <span class=\"string\">\"^0.19.2\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"concurrently\"</span>: <span class=\"string\">\"^5.2.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"cors\"</span>: <span class=\"string\">\"^2.8.5\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"dotenv\"</span>: <span class=\"string\">\"^8.2.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"express\"</span>: <span class=\"string\">\"^4.17.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"mongodb\"</span>: <span class=\"string\">\"^3.5.9\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"mongoose\"</span>: <span class=\"string\">\"^5.9.20\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"morgan\"</span>: <span class=\"string\">\"^1.10.0\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd course-flex</span><br><span class=\"line\">heroku create courseflex</span><br><span class=\"line\">heroku addons:create mongolab:sandbox</span><br><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m\"heroku deploy\"</span><br><span class=\"line\">git push heroku master</span><br></pre></td></tr></table></figure>\n\n<p>之后在 heroku 设置中配置 mongoDB 环境变量即可。</p>\n"},{"title":"Axios与Fetch的对比","date":"2020-07-16T05:37:54.000Z","cover":"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/zRP0GYN.jpg?alt=media&token=311eee9f-6def-4660-a603-e91ea99bf7a2","_content":"\n## fetch()\n\n基本的语法为`const promise = fetch(url, [options])`\n\n`url`是我们进行请求的路径，`option`即我们进行请求时可设置的 request header。\n\n### 基本的 fetch()\n\n```js\nfetch('api/users')\n  .then(response => response.json())\n  .then(data => {\n    console.log(data)\n  })\n  .catch(error => {\n    console.log(`error while fetching ${error}`)\n  })\n```\n\n### 利用 Async Await\n\n```js\noptions = {\n  method: 'POST',\n  mode: 'cors',\n  headers: { 'Content-Type': 'application/json' },\n  body: JSON.stringify(data),\n}\n\nurl = 'api/users'\n\nconst fetchUsers = async () => await (await fetch(url, options)).json()\n\nfetchUsers()\n  .then(data => console.log(data))\n  .catch(error => console.log(`error during fetch ${error.message}`))\n```\n\n## axios\n\n```shell\nnpm install axios\n```\n\n### 基本的 axios 请求一个 API\n\n```js\nurl = 'api/users'\n\naxios\n  .get(url)\n  .then(response => {\n    console.log(response.data)\n  })\n  .catch(error => {\n    console.log(error)\n  })\n```\n\n### React useEffect 利用 axios\n\n```js\nimport React, { useState, useEffect } from 'react'\nimport axios from 'axios'\n\nconst User = () => {\n  const [userInfo, setUserInfo] = useState('')\n\n  useEffect(() => {\n    const fetchUserInfo = async () => {\n      const response = await axios(`api/user/${uid}`)\n      setUserInfo(response.data)\n    }\n\n    fetchUserInfo()\n  }, [])\n}\n```\n","source":"_posts/29-react-component-lifecycle.md","raw":"---\ntitle: Axios与Fetch的对比\ndate: 2020-07-15 22:37:54\ntags: ['API', 'javascript']\ncategories: Articles\ncover: 'https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/zRP0GYN.jpg?alt=media&token=311eee9f-6def-4660-a603-e91ea99bf7a2'\n---\n\n## fetch()\n\n基本的语法为`const promise = fetch(url, [options])`\n\n`url`是我们进行请求的路径，`option`即我们进行请求时可设置的 request header。\n\n### 基本的 fetch()\n\n```js\nfetch('api/users')\n  .then(response => response.json())\n  .then(data => {\n    console.log(data)\n  })\n  .catch(error => {\n    console.log(`error while fetching ${error}`)\n  })\n```\n\n### 利用 Async Await\n\n```js\noptions = {\n  method: 'POST',\n  mode: 'cors',\n  headers: { 'Content-Type': 'application/json' },\n  body: JSON.stringify(data),\n}\n\nurl = 'api/users'\n\nconst fetchUsers = async () => await (await fetch(url, options)).json()\n\nfetchUsers()\n  .then(data => console.log(data))\n  .catch(error => console.log(`error during fetch ${error.message}`))\n```\n\n## axios\n\n```shell\nnpm install axios\n```\n\n### 基本的 axios 请求一个 API\n\n```js\nurl = 'api/users'\n\naxios\n  .get(url)\n  .then(response => {\n    console.log(response.data)\n  })\n  .catch(error => {\n    console.log(error)\n  })\n```\n\n### React useEffect 利用 axios\n\n```js\nimport React, { useState, useEffect } from 'react'\nimport axios from 'axios'\n\nconst User = () => {\n  const [userInfo, setUserInfo] = useState('')\n\n  useEffect(() => {\n    const fetchUserInfo = async () => {\n      const response = await axios(`api/user/${uid}`)\n      setUserInfo(response.data)\n    }\n\n    fetchUserInfo()\n  }, [])\n}\n```\n","slug":"29-react-component-lifecycle","published":1,"updated":"2020-07-16T07:11:42.413Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckdnmttdx002crwuifwt6dr4y","content":"<h2 id=\"fetch\"><a href=\"#fetch\" class=\"headerlink\" title=\"fetch()\"></a>fetch()</h2><p>基本的语法为<code>const promise = fetch(url, [options])</code></p>\n<p><code>url</code>是我们进行请求的路径，<code>option</code>即我们进行请求时可设置的 request header。</p>\n<h3 id=\"基本的-fetch\"><a href=\"#基本的-fetch\" class=\"headerlink\" title=\"基本的 fetch()\"></a>基本的 fetch()</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fetch(<span class=\"string\">'api/users'</span>)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> response.json())</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(data)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">error</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`error while fetching <span class=\"subst\">$&#123;error&#125;</span>`</span>)</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"利用-Async-Await\"><a href=\"#利用-Async-Await\" class=\"headerlink\" title=\"利用 Async Await\"></a>利用 Async Await</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">options = &#123;</span><br><span class=\"line\">  method: <span class=\"string\">'POST'</span>,</span><br><span class=\"line\">  mode: <span class=\"string\">'cors'</span>,</span><br><span class=\"line\">  headers: &#123; <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'application/json'</span> &#125;,</span><br><span class=\"line\">  body: <span class=\"built_in\">JSON</span>.stringify(data),</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">url = <span class=\"string\">'api/users'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> fetchUsers = <span class=\"keyword\">async</span> () =&gt; <span class=\"keyword\">await</span> (<span class=\"keyword\">await</span> fetch(url, options)).json()</span><br><span class=\"line\"></span><br><span class=\"line\">fetchUsers()</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> <span class=\"built_in\">console</span>.log(data))</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">error</span> =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">`error during fetch <span class=\"subst\">$&#123;error.message&#125;</span>`</span>))</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"axios\"><a href=\"#axios\" class=\"headerlink\" title=\"axios\"></a>axios</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install axios</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"基本的-axios-请求一个-API\"><a href=\"#基本的-axios-请求一个-API\" class=\"headerlink\" title=\"基本的 axios 请求一个 API\"></a>基本的 axios 请求一个 API</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">url = <span class=\"string\">'api/users'</span></span><br><span class=\"line\"></span><br><span class=\"line\">axios</span><br><span class=\"line\">  .get(url)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(response.data)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">error</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(error)</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"React-useEffect-利用-axios\"><a href=\"#React-useEffect-利用-axios\" class=\"headerlink\" title=\"React useEffect 利用 axios\"></a>React useEffect 利用 axios</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">'axios'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> User = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [userInfo, setUserInfo] = useState(<span class=\"string\">''</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> fetchUserInfo = <span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> response = <span class=\"keyword\">await</span> axios(<span class=\"string\">`api/user/<span class=\"subst\">$&#123;uid&#125;</span>`</span>)</span><br><span class=\"line\">      setUserInfo(response.data)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    fetchUserInfo()</span><br><span class=\"line\">  &#125;, [])</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"","more":"<h2 id=\"fetch\"><a href=\"#fetch\" class=\"headerlink\" title=\"fetch()\"></a>fetch()</h2><p>基本的语法为<code>const promise = fetch(url, [options])</code></p>\n<p><code>url</code>是我们进行请求的路径，<code>option</code>即我们进行请求时可设置的 request header。</p>\n<h3 id=\"基本的-fetch\"><a href=\"#基本的-fetch\" class=\"headerlink\" title=\"基本的 fetch()\"></a>基本的 fetch()</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fetch(<span class=\"string\">'api/users'</span>)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> response.json())</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(data)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">error</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`error while fetching <span class=\"subst\">$&#123;error&#125;</span>`</span>)</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"利用-Async-Await\"><a href=\"#利用-Async-Await\" class=\"headerlink\" title=\"利用 Async Await\"></a>利用 Async Await</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">options = &#123;</span><br><span class=\"line\">  method: <span class=\"string\">'POST'</span>,</span><br><span class=\"line\">  mode: <span class=\"string\">'cors'</span>,</span><br><span class=\"line\">  headers: &#123; <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'application/json'</span> &#125;,</span><br><span class=\"line\">  body: <span class=\"built_in\">JSON</span>.stringify(data),</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">url = <span class=\"string\">'api/users'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> fetchUsers = <span class=\"keyword\">async</span> () =&gt; <span class=\"keyword\">await</span> (<span class=\"keyword\">await</span> fetch(url, options)).json()</span><br><span class=\"line\"></span><br><span class=\"line\">fetchUsers()</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> <span class=\"built_in\">console</span>.log(data))</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">error</span> =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">`error during fetch <span class=\"subst\">$&#123;error.message&#125;</span>`</span>))</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"axios\"><a href=\"#axios\" class=\"headerlink\" title=\"axios\"></a>axios</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install axios</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"基本的-axios-请求一个-API\"><a href=\"#基本的-axios-请求一个-API\" class=\"headerlink\" title=\"基本的 axios 请求一个 API\"></a>基本的 axios 请求一个 API</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">url = <span class=\"string\">'api/users'</span></span><br><span class=\"line\"></span><br><span class=\"line\">axios</span><br><span class=\"line\">  .get(url)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(response.data)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">error</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(error)</span><br><span class=\"line\">  &#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"React-useEffect-利用-axios\"><a href=\"#React-useEffect-利用-axios\" class=\"headerlink\" title=\"React useEffect 利用 axios\"></a>React useEffect 利用 axios</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">'axios'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> User = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [userInfo, setUserInfo] = useState(<span class=\"string\">''</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> fetchUserInfo = <span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> response = <span class=\"keyword\">await</span> axios(<span class=\"string\">`api/user/<span class=\"subst\">$&#123;uid&#125;</span>`</span>)</span><br><span class=\"line\">      setUserInfo(response.data)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    fetchUserInfo()</span><br><span class=\"line\">  &#125;, [])</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"title":"数据可视化 利用D3创建Bar Chart","date":"2020-08-03T17:53:37.000Z","cover":"https://cdn.dribbble.com/users/22018/screenshots/2456036/d3.png","_content":"\n## 安装\n\n```shell\nnpm i d3 --save\n\nnpm i @types/d3 --save\n```\n\n## 选择器 select 和 selectAll\n\n利用 D3 select 方法选中 DOM 对象并附加属性\n\n首先声明一个变量`svgRef`来获取 svg DOM 元素添加宽度和高度值分别为 1000 和 500\n\n其中 attr 跟用`jQuery`选择器相似，我们用`string`来声明属性类型，值如果不是数字类型(number)也可以用 string 字符串的方式来表示\n\n`selectAll`可以选择多个元素，其选择方式同为`string selector`。比如`selectAll('.rectEle')`会选择所有`className`为 rectEled 额元素\n\n### 代码 Demo Code\n\n```jsx\nimport React, { useRef, useEffect } from 'react'\nimport { select, selectAll } from 'd3-selection'\n\nexport const Demo: React.FC = () => {\n  const svgRef = (useRef < SVGSVGElement) | (null > null)\n\n  useEffect(() => {\n    select(svgRef.current).attr('width', 1000).attr('height', 500)\n    selectAll('rect')\n      .attr('width', 100)\n      .attr('height', 100)\n      .attr('fill', 'red')\n      .attr('x', (_, index) => index * 150) // 在x 轴每一个元素间隔150px\n  })\n\n  return (\n    <div>\n      <svg ref={svgRef}>\n        <rect />\n        <rect />\n        <rect />\n      </svg>\n    </div>\n  )\n}\n```\n\n## 导入数据 Data Joins\n\n我们可以通过利用`data()`方法来加载数据并创建图形，并利用`enter()`来让 D3 自动添加 DOM 元素根据数据的数量。\n\n### 代码 Demo Code\n\n```jsx\nconst data = [\n  { width: 50, height: 100, color: 'purple' },\n  { width: 50, height: 70, color: 'red' },\n  { width: 50, height: 220, color: 'blue' },\n  { width: 50, height: 400, color: 'green' },\n  { width: 50, height: 300, color: 'yellow' },\n  { width: 50, height: 100, color: '#ff932f' },\n  { width: 50, height: 200, color: '#0a94dd' },\n  { width: 50, height: 600, color: '#03a9f4' },\n  { width: 50, height: 50, color: 'orange' },\n]\n\nexport const App: React.FC = () => {\n  const svgRef = useRef<SVGSVGElement | null | any>(null)\n  const [selection, setSelection] = useState<null | Selection<\n    any,\n    unknown,\n    null,\n    undefined\n  >>(null)\n\n  useEffect(() => {\n    if (!selection) {\n      setSelection(select(svgRef.current))\n    } else {\n      // svg容器 宽度 高度\n      selection.attr('width', 1200).attr('height', 1000)\n\n      // 每个rect元素的属性 间隔50px x轴\n      const rects = selection\n        .selectAll('rect')\n        .data(data)\n        .attr('width', d => d.width)\n        .attr('height', d => d.height)\n        .attr('fill', d => d.color)\n        .attr('x', (_, index) => index * 50)\n\n      // 根据data数组添加rect DOM\n      rects\n        .enter()\n        .append('rect')\n        .attr('width', d => d.width)\n        .attr('height', d => d.height)\n        .attr('fill', d => d.color)\n        .attr('x', (_, index) => index * 50)\n    }\n  }, [selection])\n\n  return (\n    <div className=\"app-container\">\n      <svg ref={svgRef}>\n        <rect />\n      </svg>\n    </div>\n  )\n}\n```\n\n## Scales\n\n之前的例子中我们用数据给定的数值来定义 svg 元素的高度。假设进行操作的数据值比较大比如 30,000。那么用这个数值来定义元素的高度`30000px`是不太可行的。我们可以用 D3 中的`d3-scale`库来对数据的取值范围进行映射并在一个新的范围返回新的对应数值。\n\n具体的步骤为首先利用`max`找到数据中的最大值，这个值决定了`domain`。`max()`第一个参数为所操作的数组，第二个为一个函数即 accessor, 也就是数组的哪个属性我们要找最大值\n\n```jsx\nimport { max } from 'd3-array'\n\nconst data = [{ name: 'Ford', number: 90000 }]\nconst maxValue = max(data, d => d.number)\n```\n\n然后利用`scale-linear`来创建一个变量函数。`domain()`和`range()`的范围默认为从 0 到 1。这里我们设置 domain 为 0 到数组内的最大值。range 即为映射的高度，这里最高设置为 svg 容器的高度。\n\n```jsx\nconst y = scaleLinear().domain([0, maxValue!]).range([0, 500])\n```\n\n最后在创建`rect`元素时，在`attr`高度里利用上面创建的函数即可。\n\n### 代码 Demo Code\n\n```jsx\nimport React, { useRef, useEffect, useState } from 'react'\nimport { select, selectAll, Selection } from 'd3-selection'\nimport { scaleLinear, scaleBand } from 'd3-scale'\nimport { max } from 'd3-array'\n\nconst data = [\n  {\n    name: 'Ford',\n    number: 9000,\n    color: '#03af94',\n  },\n  {\n    name: 'Apple',\n    number: 19000,\n    color: 'red',\n  },\n  {\n    name: 'Google',\n    number: 5000,\n    color: 'purple',\n  },\n  {\n    name: 'Amazon',\n    number: 23000,\n    color: 'orange',\n  },\n  {\n    name: 'BMW',\n    number: 3200,\n    color: 'blue',\n  },\n]\nexport const App: React.FC = () => {\n  const svgRef = useRef<SVGSVGElement | null | any>(null)\n  const [selection, setSelection] = useState<null | Selection<\n    any,\n    unknown,\n    null,\n    undefined\n  >>(null)\n\n  const maxValue = max(data, d => d.number)\n  const y = scaleLinear().domain([0, maxValue!]).range([0, 500])\n  const x = scaleBand()\n    .domain(data.map(d => d.name))\n    .range([0, 300])\n    .paddingInner(0.5)\n\n  useEffect(() => {\n    if (!selection) {\n      setSelection(select(svgRef.current))\n    } else {\n      selection\n        .selectAll('rect')\n        .data(data)\n        .enter()\n        .append('rect')\n        .attr('width', x.bandwidth)\n        .attr('x', d => x(d.name)!)\n        .attr('fill', d => d.color)\n        .attr('height', d => y(d.number))\n    }\n  }, [selection])\n\n  return (\n    <div className=\"app-container\">\n      <svg ref={svgRef} width={300} height={500}></svg>\n    </div>\n  )\n}\n```\n\n## Group, Margins, Axis\n\n继续之前的例子，我们这次加入 x 和 y 的坐标轴并对元素进行分类组合。\n\n首先声明 svg 容器的样式类, 我们把 svg 分为三个部分，x 坐标轴，y 坐标轴，以及数据呈现的 rect 元素。\n\n```jsx\nconst dimensions = {\n  width: 800,\n  height: 500,\n  chartWidth: 700,\n  chartHeight: 400,\n  marginLeft: 100,\n}\n```\n\n创建坐标需要引用`d3-axis` modules, `axisBottom`即在容器内的下方创建, 数值我们传入之前创建的`x`和`y`变量。`ticks`可以用来根据给定数量的参数渲染坐标轴的分割。`tickFormat`即用来样式化坐标轴内容。\n\n```jsx\nconst xAxis = axisBottom(x)\nconst yAxis = axisLeft(y)\n  .ticks(5)\n  .tickFormat(d => `${d} units`)\n```\n\n之后我们便可以在 svgRef 里面加入坐标轴如下。\n\n```jsx\nconst xAxisGroup = selection\n  .append('g')\n  .attr(\n    'transform',\n    `translate(${dimensions.marginLeft}, ${dimensions.chartHeight})`\n  )\n  .call(xAxis)\n\nconst yAxisGroup = selection\n  .append('g')\n  .attr('transform', `translate(${dimensions.marginLeft}, 0)`)\n  .call(yAxis)\n```\n\n目前 Chart 是反向显示的，我们只需要把 y 的 domain 反向并高度调为图的高度减去映射后的高度，得到的就是正向的 Bar Chart 了\n\n## Bar Chart 完整代码\n\n```jsx\nimport React, { useRef, useEffect, useState } from 'react'\nimport { select, selectAll, Selection } from 'd3-selection'\nimport { scaleLinear, scaleBand } from 'd3-scale'\nimport { max } from 'd3-array'\nimport { axisLeft, axisBottom } from 'd3-axis'\nimport 'd3-transition'\nimport { easeElastic } from 'd3-ease'\n\nconst data = [\n  {\n    name: 'Ford',\n    number: 9000,\n    color: '#03af94',\n  },\n  {\n    name: 'Apple',\n    number: 19000,\n    color: 'red',\n  },\n  {\n    name: 'Google',\n    number: 5000,\n    color: 'purple',\n  },\n  {\n    name: 'Amazon',\n    number: 23000,\n    color: 'orange',\n  },\n  {\n    name: 'BMW',\n    number: 3200,\n    color: 'blue',\n  },\n]\n\nconst dimensions = {\n  width: 800,\n  height: 500,\n  chartWidth: 700,\n  chartHeight: 400,\n  marginLeft: 100,\n}\nexport const App: React.FC = () => {\n  const svgRef = useRef<SVGSVGElement | null | any>(null)\n  const [selection, setSelection] = useState<null | Selection<\n    any,\n    unknown,\n    null,\n    undefined\n  >>(null)\n\n  const maxValue = max(data, d => d.number)\n    const x = scaleBand()\n    .domain(data.map(d => d.name))\n    .range([0, dimensions.chartWidth])\n    .paddingInner(0.05)\n  const y = scaleLinear()\n    .domain([0, maxValue!])\n    .range([dimensions.chartHeight, 0])\n\n  const xAxis = axisBottom(x)\n  const yAxis = axisLeft(y)\n    .ticks(5)\n    .tickFormat(d => `${d} units`)\n\n  useEffect(() => {\n    if (!selection) {\n      setSelection(select(svgRef.current))\n    } else {\n      const xAxisGroup = selection\n        .append('g')\n        .attr(\n          'transform',\n          `translate(${dimensions.marginLeft}, ${dimensions.chartHeight})`\n        )\n        .call(xAxis)\n\n      const yAxisGroup = selection\n        .append('g')\n        .attr('transform', `translate(${dimensions.marginLeft}, 0)`)\n        .call(yAxis)\n\n      selection\n        .append('g')\n        .attr('transform', `translate(${dimensions.marginLeft},0)`)\n        .selectAll('rect')\n        .data(data)\n        .enter()\n        .append('rect')\n        .attr('width', x.bandwidth)\n        .attr('height', 0)\n        .attr('x', d => x(d.name)!)\n        .attr('y', dimensions.chartHeight)\n        .transition()\n        .duration(2500)\n        .delay((_, index) => index * 100)\n        .ease(easeElastic)\n        .attr('height', d => dimensions.chartHeight - y(d.number))\n        .attr('y', d => y(d.number))\n        .attr('fill', d => d.color)\n    }\n  }, [selection])\n\n  return (\n    <div className=\"app-container\">\n      <svg\n        ref={svgRef}\n        width={dimensions.width}\n        height={dimensions.height}\n        style={{ marginTop: '50px' }}\n      ></svg>\n    </div>\n  )\n}\n\n```\n","source":"_posts/30-d3-react.md","raw":"---\ntitle: 数据可视化 利用D3创建Bar Chart\ndate: 2020-08-03 10:53:37\ntags: ['data visiualization', 'react', 'note']\ncategories: Notes\ncover: 'https://cdn.dribbble.com/users/22018/screenshots/2456036/d3.png'\n---\n\n## 安装\n\n```shell\nnpm i d3 --save\n\nnpm i @types/d3 --save\n```\n\n## 选择器 select 和 selectAll\n\n利用 D3 select 方法选中 DOM 对象并附加属性\n\n首先声明一个变量`svgRef`来获取 svg DOM 元素添加宽度和高度值分别为 1000 和 500\n\n其中 attr 跟用`jQuery`选择器相似，我们用`string`来声明属性类型，值如果不是数字类型(number)也可以用 string 字符串的方式来表示\n\n`selectAll`可以选择多个元素，其选择方式同为`string selector`。比如`selectAll('.rectEle')`会选择所有`className`为 rectEled 额元素\n\n### 代码 Demo Code\n\n```jsx\nimport React, { useRef, useEffect } from 'react'\nimport { select, selectAll } from 'd3-selection'\n\nexport const Demo: React.FC = () => {\n  const svgRef = (useRef < SVGSVGElement) | (null > null)\n\n  useEffect(() => {\n    select(svgRef.current).attr('width', 1000).attr('height', 500)\n    selectAll('rect')\n      .attr('width', 100)\n      .attr('height', 100)\n      .attr('fill', 'red')\n      .attr('x', (_, index) => index * 150) // 在x 轴每一个元素间隔150px\n  })\n\n  return (\n    <div>\n      <svg ref={svgRef}>\n        <rect />\n        <rect />\n        <rect />\n      </svg>\n    </div>\n  )\n}\n```\n\n## 导入数据 Data Joins\n\n我们可以通过利用`data()`方法来加载数据并创建图形，并利用`enter()`来让 D3 自动添加 DOM 元素根据数据的数量。\n\n### 代码 Demo Code\n\n```jsx\nconst data = [\n  { width: 50, height: 100, color: 'purple' },\n  { width: 50, height: 70, color: 'red' },\n  { width: 50, height: 220, color: 'blue' },\n  { width: 50, height: 400, color: 'green' },\n  { width: 50, height: 300, color: 'yellow' },\n  { width: 50, height: 100, color: '#ff932f' },\n  { width: 50, height: 200, color: '#0a94dd' },\n  { width: 50, height: 600, color: '#03a9f4' },\n  { width: 50, height: 50, color: 'orange' },\n]\n\nexport const App: React.FC = () => {\n  const svgRef = useRef<SVGSVGElement | null | any>(null)\n  const [selection, setSelection] = useState<null | Selection<\n    any,\n    unknown,\n    null,\n    undefined\n  >>(null)\n\n  useEffect(() => {\n    if (!selection) {\n      setSelection(select(svgRef.current))\n    } else {\n      // svg容器 宽度 高度\n      selection.attr('width', 1200).attr('height', 1000)\n\n      // 每个rect元素的属性 间隔50px x轴\n      const rects = selection\n        .selectAll('rect')\n        .data(data)\n        .attr('width', d => d.width)\n        .attr('height', d => d.height)\n        .attr('fill', d => d.color)\n        .attr('x', (_, index) => index * 50)\n\n      // 根据data数组添加rect DOM\n      rects\n        .enter()\n        .append('rect')\n        .attr('width', d => d.width)\n        .attr('height', d => d.height)\n        .attr('fill', d => d.color)\n        .attr('x', (_, index) => index * 50)\n    }\n  }, [selection])\n\n  return (\n    <div className=\"app-container\">\n      <svg ref={svgRef}>\n        <rect />\n      </svg>\n    </div>\n  )\n}\n```\n\n## Scales\n\n之前的例子中我们用数据给定的数值来定义 svg 元素的高度。假设进行操作的数据值比较大比如 30,000。那么用这个数值来定义元素的高度`30000px`是不太可行的。我们可以用 D3 中的`d3-scale`库来对数据的取值范围进行映射并在一个新的范围返回新的对应数值。\n\n具体的步骤为首先利用`max`找到数据中的最大值，这个值决定了`domain`。`max()`第一个参数为所操作的数组，第二个为一个函数即 accessor, 也就是数组的哪个属性我们要找最大值\n\n```jsx\nimport { max } from 'd3-array'\n\nconst data = [{ name: 'Ford', number: 90000 }]\nconst maxValue = max(data, d => d.number)\n```\n\n然后利用`scale-linear`来创建一个变量函数。`domain()`和`range()`的范围默认为从 0 到 1。这里我们设置 domain 为 0 到数组内的最大值。range 即为映射的高度，这里最高设置为 svg 容器的高度。\n\n```jsx\nconst y = scaleLinear().domain([0, maxValue!]).range([0, 500])\n```\n\n最后在创建`rect`元素时，在`attr`高度里利用上面创建的函数即可。\n\n### 代码 Demo Code\n\n```jsx\nimport React, { useRef, useEffect, useState } from 'react'\nimport { select, selectAll, Selection } from 'd3-selection'\nimport { scaleLinear, scaleBand } from 'd3-scale'\nimport { max } from 'd3-array'\n\nconst data = [\n  {\n    name: 'Ford',\n    number: 9000,\n    color: '#03af94',\n  },\n  {\n    name: 'Apple',\n    number: 19000,\n    color: 'red',\n  },\n  {\n    name: 'Google',\n    number: 5000,\n    color: 'purple',\n  },\n  {\n    name: 'Amazon',\n    number: 23000,\n    color: 'orange',\n  },\n  {\n    name: 'BMW',\n    number: 3200,\n    color: 'blue',\n  },\n]\nexport const App: React.FC = () => {\n  const svgRef = useRef<SVGSVGElement | null | any>(null)\n  const [selection, setSelection] = useState<null | Selection<\n    any,\n    unknown,\n    null,\n    undefined\n  >>(null)\n\n  const maxValue = max(data, d => d.number)\n  const y = scaleLinear().domain([0, maxValue!]).range([0, 500])\n  const x = scaleBand()\n    .domain(data.map(d => d.name))\n    .range([0, 300])\n    .paddingInner(0.5)\n\n  useEffect(() => {\n    if (!selection) {\n      setSelection(select(svgRef.current))\n    } else {\n      selection\n        .selectAll('rect')\n        .data(data)\n        .enter()\n        .append('rect')\n        .attr('width', x.bandwidth)\n        .attr('x', d => x(d.name)!)\n        .attr('fill', d => d.color)\n        .attr('height', d => y(d.number))\n    }\n  }, [selection])\n\n  return (\n    <div className=\"app-container\">\n      <svg ref={svgRef} width={300} height={500}></svg>\n    </div>\n  )\n}\n```\n\n## Group, Margins, Axis\n\n继续之前的例子，我们这次加入 x 和 y 的坐标轴并对元素进行分类组合。\n\n首先声明 svg 容器的样式类, 我们把 svg 分为三个部分，x 坐标轴，y 坐标轴，以及数据呈现的 rect 元素。\n\n```jsx\nconst dimensions = {\n  width: 800,\n  height: 500,\n  chartWidth: 700,\n  chartHeight: 400,\n  marginLeft: 100,\n}\n```\n\n创建坐标需要引用`d3-axis` modules, `axisBottom`即在容器内的下方创建, 数值我们传入之前创建的`x`和`y`变量。`ticks`可以用来根据给定数量的参数渲染坐标轴的分割。`tickFormat`即用来样式化坐标轴内容。\n\n```jsx\nconst xAxis = axisBottom(x)\nconst yAxis = axisLeft(y)\n  .ticks(5)\n  .tickFormat(d => `${d} units`)\n```\n\n之后我们便可以在 svgRef 里面加入坐标轴如下。\n\n```jsx\nconst xAxisGroup = selection\n  .append('g')\n  .attr(\n    'transform',\n    `translate(${dimensions.marginLeft}, ${dimensions.chartHeight})`\n  )\n  .call(xAxis)\n\nconst yAxisGroup = selection\n  .append('g')\n  .attr('transform', `translate(${dimensions.marginLeft}, 0)`)\n  .call(yAxis)\n```\n\n目前 Chart 是反向显示的，我们只需要把 y 的 domain 反向并高度调为图的高度减去映射后的高度，得到的就是正向的 Bar Chart 了\n\n## Bar Chart 完整代码\n\n```jsx\nimport React, { useRef, useEffect, useState } from 'react'\nimport { select, selectAll, Selection } from 'd3-selection'\nimport { scaleLinear, scaleBand } from 'd3-scale'\nimport { max } from 'd3-array'\nimport { axisLeft, axisBottom } from 'd3-axis'\nimport 'd3-transition'\nimport { easeElastic } from 'd3-ease'\n\nconst data = [\n  {\n    name: 'Ford',\n    number: 9000,\n    color: '#03af94',\n  },\n  {\n    name: 'Apple',\n    number: 19000,\n    color: 'red',\n  },\n  {\n    name: 'Google',\n    number: 5000,\n    color: 'purple',\n  },\n  {\n    name: 'Amazon',\n    number: 23000,\n    color: 'orange',\n  },\n  {\n    name: 'BMW',\n    number: 3200,\n    color: 'blue',\n  },\n]\n\nconst dimensions = {\n  width: 800,\n  height: 500,\n  chartWidth: 700,\n  chartHeight: 400,\n  marginLeft: 100,\n}\nexport const App: React.FC = () => {\n  const svgRef = useRef<SVGSVGElement | null | any>(null)\n  const [selection, setSelection] = useState<null | Selection<\n    any,\n    unknown,\n    null,\n    undefined\n  >>(null)\n\n  const maxValue = max(data, d => d.number)\n    const x = scaleBand()\n    .domain(data.map(d => d.name))\n    .range([0, dimensions.chartWidth])\n    .paddingInner(0.05)\n  const y = scaleLinear()\n    .domain([0, maxValue!])\n    .range([dimensions.chartHeight, 0])\n\n  const xAxis = axisBottom(x)\n  const yAxis = axisLeft(y)\n    .ticks(5)\n    .tickFormat(d => `${d} units`)\n\n  useEffect(() => {\n    if (!selection) {\n      setSelection(select(svgRef.current))\n    } else {\n      const xAxisGroup = selection\n        .append('g')\n        .attr(\n          'transform',\n          `translate(${dimensions.marginLeft}, ${dimensions.chartHeight})`\n        )\n        .call(xAxis)\n\n      const yAxisGroup = selection\n        .append('g')\n        .attr('transform', `translate(${dimensions.marginLeft}, 0)`)\n        .call(yAxis)\n\n      selection\n        .append('g')\n        .attr('transform', `translate(${dimensions.marginLeft},0)`)\n        .selectAll('rect')\n        .data(data)\n        .enter()\n        .append('rect')\n        .attr('width', x.bandwidth)\n        .attr('height', 0)\n        .attr('x', d => x(d.name)!)\n        .attr('y', dimensions.chartHeight)\n        .transition()\n        .duration(2500)\n        .delay((_, index) => index * 100)\n        .ease(easeElastic)\n        .attr('height', d => dimensions.chartHeight - y(d.number))\n        .attr('y', d => y(d.number))\n        .attr('fill', d => d.color)\n    }\n  }, [selection])\n\n  return (\n    <div className=\"app-container\">\n      <svg\n        ref={svgRef}\n        width={dimensions.width}\n        height={dimensions.height}\n        style={{ marginTop: '50px' }}\n      ></svg>\n    </div>\n  )\n}\n\n```\n","slug":"30-d3-react","published":1,"updated":"2020-08-04T03:07:38.749Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckdnmttdy002frwuidu2bf252","content":"<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i d3 --save</span><br><span class=\"line\"></span><br><span class=\"line\">npm i @types/d3 --save</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"选择器-select-和-selectAll\"><a href=\"#选择器-select-和-selectAll\" class=\"headerlink\" title=\"选择器 select 和 selectAll\"></a>选择器 select 和 selectAll</h2><p>利用 D3 select 方法选中 DOM 对象并附加属性</p>\n<p>首先声明一个变量<code>svgRef</code>来获取 svg DOM 元素添加宽度和高度值分别为 1000 和 500</p>\n<p>其中 attr 跟用<code>jQuery</code>选择器相似，我们用<code>string</code>来声明属性类型，值如果不是数字类型(number)也可以用 string 字符串的方式来表示</p>\n<p><code>selectAll</code>可以选择多个元素，其选择方式同为<code>string selector</code>。比如<code>selectAll(&#39;.rectEle&#39;)</code>会选择所有<code>className</code>为 rectEled 额元素</p>\n<h3 id=\"代码-Demo-Code\"><a href=\"#代码-Demo-Code\" class=\"headerlink\" title=\"代码 Demo Code\"></a>代码 Demo Code</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useRef, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; select, selectAll &#125; <span class=\"keyword\">from</span> <span class=\"string\">'d3-selection'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> Demo: React.FC = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> svgRef = (useRef &lt; SVGSVGElement) | (<span class=\"literal\">null</span> &gt; <span class=\"literal\">null</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    select(svgRef.current).attr(<span class=\"string\">'width'</span>, <span class=\"number\">1000</span>).attr(<span class=\"string\">'height'</span>, <span class=\"number\">500</span>)</span><br><span class=\"line\">    selectAll(<span class=\"string\">'rect'</span>)</span><br><span class=\"line\">      .attr(<span class=\"string\">'width'</span>, <span class=\"number\">100</span>)</span><br><span class=\"line\">      .attr(<span class=\"string\">'height'</span>, <span class=\"number\">100</span>)</span><br><span class=\"line\">      .attr(<span class=\"string\">'fill'</span>, <span class=\"string\">'red'</span>)</span><br><span class=\"line\">      .attr(<span class=\"string\">'x'</span>, (_, index) =&gt; index * <span class=\"number\">150</span>) <span class=\"comment\">// 在x 轴每一个元素间隔150px</span></span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;svg ref=&#123;svgRef&#125;&gt;</span><br><span class=\"line\">        &lt;rect /&gt;</span><br><span class=\"line\">        &lt;rect /&gt;</span><br><span class=\"line\">        &lt;rect /&gt;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/svg&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>div&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"导入数据-Data-Joins\"><a href=\"#导入数据-Data-Joins\" class=\"headerlink\" title=\"导入数据 Data Joins\"></a>导入数据 Data Joins</h2><p>我们可以通过利用<code>data()</code>方法来加载数据并创建图形，并利用<code>enter()</code>来让 D3 自动添加 DOM 元素根据数据的数量。</p>\n<h3 id=\"代码-Demo-Code-1\"><a href=\"#代码-Demo-Code-1\" class=\"headerlink\" title=\"代码 Demo Code\"></a>代码 Demo Code</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> data = [</span><br><span class=\"line\">  &#123; <span class=\"attr\">width</span>: <span class=\"number\">50</span>, <span class=\"attr\">height</span>: <span class=\"number\">100</span>, <span class=\"attr\">color</span>: <span class=\"string\">'purple'</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">width</span>: <span class=\"number\">50</span>, <span class=\"attr\">height</span>: <span class=\"number\">70</span>, <span class=\"attr\">color</span>: <span class=\"string\">'red'</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">width</span>: <span class=\"number\">50</span>, <span class=\"attr\">height</span>: <span class=\"number\">220</span>, <span class=\"attr\">color</span>: <span class=\"string\">'blue'</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">width</span>: <span class=\"number\">50</span>, <span class=\"attr\">height</span>: <span class=\"number\">400</span>, <span class=\"attr\">color</span>: <span class=\"string\">'green'</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">width</span>: <span class=\"number\">50</span>, <span class=\"attr\">height</span>: <span class=\"number\">300</span>, <span class=\"attr\">color</span>: <span class=\"string\">'yellow'</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">width</span>: <span class=\"number\">50</span>, <span class=\"attr\">height</span>: <span class=\"number\">100</span>, <span class=\"attr\">color</span>: <span class=\"string\">'#ff932f'</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">width</span>: <span class=\"number\">50</span>, <span class=\"attr\">height</span>: <span class=\"number\">200</span>, <span class=\"attr\">color</span>: <span class=\"string\">'#0a94dd'</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">width</span>: <span class=\"number\">50</span>, <span class=\"attr\">height</span>: <span class=\"number\">600</span>, <span class=\"attr\">color</span>: <span class=\"string\">'#03a9f4'</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">width</span>: <span class=\"number\">50</span>, <span class=\"attr\">height</span>: <span class=\"number\">50</span>, <span class=\"attr\">color</span>: <span class=\"string\">'orange'</span> &#125;,</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App: React.FC = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> svgRef = useRef&lt;SVGSVGElement | <span class=\"literal\">null</span> | any&gt;(<span class=\"literal\">null</span>)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [selection, setSelection] = useState&lt;<span class=\"literal\">null</span> | Selection&lt;</span><br><span class=\"line\">    any,</span><br><span class=\"line\">    unknown,</span><br><span class=\"line\">    <span class=\"literal\">null</span>,</span><br><span class=\"line\">    <span class=\"literal\">undefined</span></span><br><span class=\"line\">  &gt;&gt;(<span class=\"literal\">null</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!selection) &#123;</span><br><span class=\"line\">      setSelection(select(svgRef.current))</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// svg容器 宽度 高度</span></span><br><span class=\"line\">      selection.attr(<span class=\"string\">'width'</span>, <span class=\"number\">1200</span>).attr(<span class=\"string\">'height'</span>, <span class=\"number\">1000</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// 每个rect元素的属性 间隔50px x轴</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> rects = selection</span><br><span class=\"line\">        .selectAll(<span class=\"string\">'rect'</span>)</span><br><span class=\"line\">        .data(data)</span><br><span class=\"line\">        .attr(<span class=\"string\">'width'</span>, d =&gt; d.width)</span><br><span class=\"line\">        .attr(<span class=\"string\">'height'</span>, d =&gt; d.height)</span><br><span class=\"line\">        .attr(<span class=\"string\">'fill'</span>, d =&gt; d.color)</span><br><span class=\"line\">        .attr(<span class=\"string\">'x'</span>, (_, index) =&gt; index * <span class=\"number\">50</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// 根据data数组添加rect DOM</span></span><br><span class=\"line\">      rects</span><br><span class=\"line\">        .enter()</span><br><span class=\"line\">        .append(<span class=\"string\">'rect'</span>)</span><br><span class=\"line\">        .attr(<span class=\"string\">'width'</span>, d =&gt; d.width)</span><br><span class=\"line\">        .attr(<span class=\"string\">'height'</span>, d =&gt; d.height)</span><br><span class=\"line\">        .attr(<span class=\"string\">'fill'</span>, d =&gt; d.color)</span><br><span class=\"line\">        .attr(<span class=\"string\">'x'</span>, (_, index) =&gt; index * <span class=\"number\">50</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;, [selection])</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">\"app-container\"</span>&gt;</span><br><span class=\"line\">      &lt;svg ref=&#123;svgRef&#125;&gt;</span><br><span class=\"line\">        &lt;rect /&gt;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/svg&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>div&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Scales\"><a href=\"#Scales\" class=\"headerlink\" title=\"Scales\"></a>Scales</h2><p>之前的例子中我们用数据给定的数值来定义 svg 元素的高度。假设进行操作的数据值比较大比如 30,000。那么用这个数值来定义元素的高度<code>30000px</code>是不太可行的。我们可以用 D3 中的<code>d3-scale</code>库来对数据的取值范围进行映射并在一个新的范围返回新的对应数值。</p>\n<p>具体的步骤为首先利用<code>max</code>找到数据中的最大值，这个值决定了<code>domain</code>。<code>max()</code>第一个参数为所操作的数组，第二个为一个函数即 accessor, 也就是数组的哪个属性我们要找最大值</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; max &#125; <span class=\"keyword\">from</span> <span class=\"string\">'d3-array'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> data = [&#123; <span class=\"attr\">name</span>: <span class=\"string\">'Ford'</span>, <span class=\"attr\">number</span>: <span class=\"number\">90000</span> &#125;]</span><br><span class=\"line\"><span class=\"keyword\">const</span> maxValue = max(data, d =&gt; d.number)</span><br></pre></td></tr></table></figure>\n\n<p>然后利用<code>scale-linear</code>来创建一个变量函数。<code>domain()</code>和<code>range()</code>的范围默认为从 0 到 1。这里我们设置 domain 为 0 到数组内的最大值。range 即为映射的高度，这里最高设置为 svg 容器的高度。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> y = scaleLinear().domain([<span class=\"number\">0</span>, maxValue!]).range([<span class=\"number\">0</span>, <span class=\"number\">500</span>])</span><br></pre></td></tr></table></figure>\n\n<p>最后在创建<code>rect</code>元素时，在<code>attr</code>高度里利用上面创建的函数即可。</p>\n<h3 id=\"代码-Demo-Code-2\"><a href=\"#代码-Demo-Code-2\" class=\"headerlink\" title=\"代码 Demo Code\"></a>代码 Demo Code</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useRef, useEffect, useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; select, selectAll, Selection &#125; <span class=\"keyword\">from</span> <span class=\"string\">'d3-selection'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; scaleLinear, scaleBand &#125; <span class=\"keyword\">from</span> <span class=\"string\">'d3-scale'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; max &#125; <span class=\"keyword\">from</span> <span class=\"string\">'d3-array'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> data = [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Ford'</span>,</span><br><span class=\"line\">    number: <span class=\"number\">9000</span>,</span><br><span class=\"line\">    color: <span class=\"string\">'#03af94'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Apple'</span>,</span><br><span class=\"line\">    number: <span class=\"number\">19000</span>,</span><br><span class=\"line\">    color: <span class=\"string\">'red'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Google'</span>,</span><br><span class=\"line\">    number: <span class=\"number\">5000</span>,</span><br><span class=\"line\">    color: <span class=\"string\">'purple'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Amazon'</span>,</span><br><span class=\"line\">    number: <span class=\"number\">23000</span>,</span><br><span class=\"line\">    color: <span class=\"string\">'orange'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'BMW'</span>,</span><br><span class=\"line\">    number: <span class=\"number\">3200</span>,</span><br><span class=\"line\">    color: <span class=\"string\">'blue'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App: React.FC = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> svgRef = useRef&lt;SVGSVGElement | <span class=\"literal\">null</span> | any&gt;(<span class=\"literal\">null</span>)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [selection, setSelection] = useState&lt;<span class=\"literal\">null</span> | Selection&lt;</span><br><span class=\"line\">    any,</span><br><span class=\"line\">    unknown,</span><br><span class=\"line\">    <span class=\"literal\">null</span>,</span><br><span class=\"line\">    <span class=\"literal\">undefined</span></span><br><span class=\"line\">  &gt;&gt;(<span class=\"literal\">null</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> maxValue = max(data, d =&gt; d.number)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> y = scaleLinear().domain([<span class=\"number\">0</span>, maxValue!]).range([<span class=\"number\">0</span>, <span class=\"number\">500</span>])</span><br><span class=\"line\">  <span class=\"keyword\">const</span> x = scaleBand()</span><br><span class=\"line\">    .domain(data.map(<span class=\"function\"><span class=\"params\">d</span> =&gt;</span> d.name))</span><br><span class=\"line\">    .range([<span class=\"number\">0</span>, <span class=\"number\">300</span>])</span><br><span class=\"line\">    .paddingInner(<span class=\"number\">0.5</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!selection) &#123;</span><br><span class=\"line\">      setSelection(select(svgRef.current))</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      selection</span><br><span class=\"line\">        .selectAll(<span class=\"string\">'rect'</span>)</span><br><span class=\"line\">        .data(data)</span><br><span class=\"line\">        .enter()</span><br><span class=\"line\">        .append(<span class=\"string\">'rect'</span>)</span><br><span class=\"line\">        .attr(<span class=\"string\">'width'</span>, x.bandwidth)</span><br><span class=\"line\">        .attr(<span class=\"string\">'x'</span>, d =&gt; x(d.name)!)</span><br><span class=\"line\">        .attr(<span class=\"string\">'fill'</span>, d =&gt; d.color)</span><br><span class=\"line\">        .attr(<span class=\"string\">'height'</span>, d =&gt; y(d.number))</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;, [selection])</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">\"app-container\"</span>&gt;</span><br><span class=\"line\">      &lt;svg ref=&#123;svgRef&#125; width=&#123;<span class=\"number\">300</span>&#125; height=&#123;<span class=\"number\">500</span>&#125;&gt;&lt;<span class=\"regexp\">/svg&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>div&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Group-Margins-Axis\"><a href=\"#Group-Margins-Axis\" class=\"headerlink\" title=\"Group, Margins, Axis\"></a>Group, Margins, Axis</h2><p>继续之前的例子，我们这次加入 x 和 y 的坐标轴并对元素进行分类组合。</p>\n<p>首先声明 svg 容器的样式类, 我们把 svg 分为三个部分，x 坐标轴，y 坐标轴，以及数据呈现的 rect 元素。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> dimensions = &#123;</span><br><span class=\"line\">  width: <span class=\"number\">800</span>,</span><br><span class=\"line\">  height: <span class=\"number\">500</span>,</span><br><span class=\"line\">  chartWidth: <span class=\"number\">700</span>,</span><br><span class=\"line\">  chartHeight: <span class=\"number\">400</span>,</span><br><span class=\"line\">  marginLeft: <span class=\"number\">100</span>,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>创建坐标需要引用<code>d3-axis</code> modules, <code>axisBottom</code>即在容器内的下方创建, 数值我们传入之前创建的<code>x</code>和<code>y</code>变量。<code>ticks</code>可以用来根据给定数量的参数渲染坐标轴的分割。<code>tickFormat</code>即用来样式化坐标轴内容。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> xAxis = axisBottom(x)</span><br><span class=\"line\"><span class=\"keyword\">const</span> yAxis = axisLeft(y)</span><br><span class=\"line\">  .ticks(<span class=\"number\">5</span>)</span><br><span class=\"line\">  .tickFormat(<span class=\"function\"><span class=\"params\">d</span> =&gt;</span> <span class=\"string\">`<span class=\"subst\">$&#123;d&#125;</span> units`</span>)</span><br></pre></td></tr></table></figure>\n\n<p>之后我们便可以在 svgRef 里面加入坐标轴如下。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> xAxisGroup = selection</span><br><span class=\"line\">  .append(<span class=\"string\">'g'</span>)</span><br><span class=\"line\">  .attr(</span><br><span class=\"line\">    <span class=\"string\">'transform'</span>,</span><br><span class=\"line\">    <span class=\"string\">`translate(<span class=\"subst\">$&#123;dimensions.marginLeft&#125;</span>, <span class=\"subst\">$&#123;dimensions.chartHeight&#125;</span>)`</span></span><br><span class=\"line\">  )</span><br><span class=\"line\">  .call(xAxis)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> yAxisGroup = selection</span><br><span class=\"line\">  .append(<span class=\"string\">'g'</span>)</span><br><span class=\"line\">  .attr(<span class=\"string\">'transform'</span>, <span class=\"string\">`translate(<span class=\"subst\">$&#123;dimensions.marginLeft&#125;</span>, 0)`</span>)</span><br><span class=\"line\">  .call(yAxis)</span><br></pre></td></tr></table></figure>\n\n<p>目前 Chart 是反向显示的，我们只需要把 y 的 domain 反向并高度调为图的高度减去映射后的高度，得到的就是正向的 Bar Chart 了</p>\n<h2 id=\"Bar-Chart-完整代码\"><a href=\"#Bar-Chart-完整代码\" class=\"headerlink\" title=\"Bar Chart 完整代码\"></a>Bar Chart 完整代码</h2><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useRef, useEffect, useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; select, selectAll, Selection &#125; <span class=\"keyword\">from</span> <span class=\"string\">'d3-selection'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; scaleLinear, scaleBand &#125; <span class=\"keyword\">from</span> <span class=\"string\">'d3-scale'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; max &#125; <span class=\"keyword\">from</span> <span class=\"string\">'d3-array'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; axisLeft, axisBottom &#125; <span class=\"keyword\">from</span> <span class=\"string\">'d3-axis'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">'d3-transition'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; easeElastic &#125; <span class=\"keyword\">from</span> <span class=\"string\">'d3-ease'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> data = [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Ford'</span>,</span><br><span class=\"line\">    number: <span class=\"number\">9000</span>,</span><br><span class=\"line\">    color: <span class=\"string\">'#03af94'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Apple'</span>,</span><br><span class=\"line\">    number: <span class=\"number\">19000</span>,</span><br><span class=\"line\">    color: <span class=\"string\">'red'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Google'</span>,</span><br><span class=\"line\">    number: <span class=\"number\">5000</span>,</span><br><span class=\"line\">    color: <span class=\"string\">'purple'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Amazon'</span>,</span><br><span class=\"line\">    number: <span class=\"number\">23000</span>,</span><br><span class=\"line\">    color: <span class=\"string\">'orange'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'BMW'</span>,</span><br><span class=\"line\">    number: <span class=\"number\">3200</span>,</span><br><span class=\"line\">    color: <span class=\"string\">'blue'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> dimensions = &#123;</span><br><span class=\"line\">  width: <span class=\"number\">800</span>,</span><br><span class=\"line\">  height: <span class=\"number\">500</span>,</span><br><span class=\"line\">  chartWidth: <span class=\"number\">700</span>,</span><br><span class=\"line\">  chartHeight: <span class=\"number\">400</span>,</span><br><span class=\"line\">  marginLeft: <span class=\"number\">100</span>,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App: React.FC = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> svgRef = useRef&lt;SVGSVGElement | <span class=\"literal\">null</span> | any&gt;(<span class=\"literal\">null</span>)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [selection, setSelection] = useState&lt;<span class=\"literal\">null</span> | Selection&lt;</span><br><span class=\"line\">    any,</span><br><span class=\"line\">    unknown,</span><br><span class=\"line\">    <span class=\"literal\">null</span>,</span><br><span class=\"line\">    <span class=\"literal\">undefined</span></span><br><span class=\"line\">  &gt;&gt;(<span class=\"literal\">null</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> maxValue = max(data, d =&gt; d.number)</span><br><span class=\"line\">    <span class=\"keyword\">const</span> x = scaleBand()</span><br><span class=\"line\">    .domain(data.map(<span class=\"function\"><span class=\"params\">d</span> =&gt;</span> d.name))</span><br><span class=\"line\">    .range([<span class=\"number\">0</span>, dimensions.chartWidth])</span><br><span class=\"line\">    .paddingInner(<span class=\"number\">0.05</span>)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> y = scaleLinear()</span><br><span class=\"line\">    .domain([<span class=\"number\">0</span>, maxValue!])</span><br><span class=\"line\">    .range([dimensions.chartHeight, <span class=\"number\">0</span>])</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> xAxis = axisBottom(x)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> yAxis = axisLeft(y)</span><br><span class=\"line\">    .ticks(<span class=\"number\">5</span>)</span><br><span class=\"line\">    .tickFormat(<span class=\"function\"><span class=\"params\">d</span> =&gt;</span> <span class=\"string\">`<span class=\"subst\">$&#123;d&#125;</span> units`</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!selection) &#123;</span><br><span class=\"line\">      setSelection(select(svgRef.current))</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> xAxisGroup = selection</span><br><span class=\"line\">        .append(<span class=\"string\">'g'</span>)</span><br><span class=\"line\">        .attr(</span><br><span class=\"line\">          <span class=\"string\">'transform'</span>,</span><br><span class=\"line\">          <span class=\"string\">`translate(<span class=\"subst\">$&#123;dimensions.marginLeft&#125;</span>, <span class=\"subst\">$&#123;dimensions.chartHeight&#125;</span>)`</span></span><br><span class=\"line\">        )</span><br><span class=\"line\">        .call(xAxis)</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">const</span> yAxisGroup = selection</span><br><span class=\"line\">        .append(<span class=\"string\">'g'</span>)</span><br><span class=\"line\">        .attr(<span class=\"string\">'transform'</span>, <span class=\"string\">`translate(<span class=\"subst\">$&#123;dimensions.marginLeft&#125;</span>, 0)`</span>)</span><br><span class=\"line\">        .call(yAxis)</span><br><span class=\"line\"></span><br><span class=\"line\">      selection</span><br><span class=\"line\">        .append(<span class=\"string\">'g'</span>)</span><br><span class=\"line\">        .attr(<span class=\"string\">'transform'</span>, <span class=\"string\">`translate(<span class=\"subst\">$&#123;dimensions.marginLeft&#125;</span>,0)`</span>)</span><br><span class=\"line\">        .selectAll(<span class=\"string\">'rect'</span>)</span><br><span class=\"line\">        .data(data)</span><br><span class=\"line\">        .enter()</span><br><span class=\"line\">        .append(<span class=\"string\">'rect'</span>)</span><br><span class=\"line\">        .attr(<span class=\"string\">'width'</span>, x.bandwidth)</span><br><span class=\"line\">        .attr(<span class=\"string\">'height'</span>, <span class=\"number\">0</span>)</span><br><span class=\"line\">        .attr(<span class=\"string\">'x'</span>, d =&gt; x(d.name)!)</span><br><span class=\"line\">        .attr(<span class=\"string\">'y'</span>, dimensions.chartHeight)</span><br><span class=\"line\">        .transition()</span><br><span class=\"line\">        .duration(<span class=\"number\">2500</span>)</span><br><span class=\"line\">        .delay(<span class=\"function\">(<span class=\"params\">_, index</span>) =&gt;</span> index * <span class=\"number\">100</span>)</span><br><span class=\"line\">        .ease(easeElastic)</span><br><span class=\"line\">        .attr(<span class=\"string\">'height'</span>, d =&gt; dimensions.chartHeight - y(d.number))</span><br><span class=\"line\">        .attr(<span class=\"string\">'y'</span>, d =&gt; y(d.number))</span><br><span class=\"line\">        .attr(<span class=\"string\">'fill'</span>, d =&gt; d.color)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;, [selection])</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">\"app-container\"</span>&gt;</span><br><span class=\"line\">      &lt;svg</span><br><span class=\"line\">        ref=&#123;svgRef&#125;</span><br><span class=\"line\">        width=&#123;dimensions.width&#125;</span><br><span class=\"line\">        height=&#123;dimensions.height&#125;</span><br><span class=\"line\">        style=&#123;&#123; <span class=\"attr\">marginTop</span>: <span class=\"string\">'50px'</span> &#125;&#125;</span><br><span class=\"line\">      &gt;&lt;<span class=\"regexp\">/svg&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>div&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"","more":"<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i d3 --save</span><br><span class=\"line\"></span><br><span class=\"line\">npm i @types/d3 --save</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"选择器-select-和-selectAll\"><a href=\"#选择器-select-和-selectAll\" class=\"headerlink\" title=\"选择器 select 和 selectAll\"></a>选择器 select 和 selectAll</h2><p>利用 D3 select 方法选中 DOM 对象并附加属性</p>\n<p>首先声明一个变量<code>svgRef</code>来获取 svg DOM 元素添加宽度和高度值分别为 1000 和 500</p>\n<p>其中 attr 跟用<code>jQuery</code>选择器相似，我们用<code>string</code>来声明属性类型，值如果不是数字类型(number)也可以用 string 字符串的方式来表示</p>\n<p><code>selectAll</code>可以选择多个元素，其选择方式同为<code>string selector</code>。比如<code>selectAll(&#39;.rectEle&#39;)</code>会选择所有<code>className</code>为 rectEled 额元素</p>\n<h3 id=\"代码-Demo-Code\"><a href=\"#代码-Demo-Code\" class=\"headerlink\" title=\"代码 Demo Code\"></a>代码 Demo Code</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useRef, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; select, selectAll &#125; <span class=\"keyword\">from</span> <span class=\"string\">'d3-selection'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> Demo: React.FC = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> svgRef = (useRef &lt; SVGSVGElement) | (<span class=\"literal\">null</span> &gt; <span class=\"literal\">null</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    select(svgRef.current).attr(<span class=\"string\">'width'</span>, <span class=\"number\">1000</span>).attr(<span class=\"string\">'height'</span>, <span class=\"number\">500</span>)</span><br><span class=\"line\">    selectAll(<span class=\"string\">'rect'</span>)</span><br><span class=\"line\">      .attr(<span class=\"string\">'width'</span>, <span class=\"number\">100</span>)</span><br><span class=\"line\">      .attr(<span class=\"string\">'height'</span>, <span class=\"number\">100</span>)</span><br><span class=\"line\">      .attr(<span class=\"string\">'fill'</span>, <span class=\"string\">'red'</span>)</span><br><span class=\"line\">      .attr(<span class=\"string\">'x'</span>, (_, index) =&gt; index * <span class=\"number\">150</span>) <span class=\"comment\">// 在x 轴每一个元素间隔150px</span></span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;svg ref=&#123;svgRef&#125;&gt;</span><br><span class=\"line\">        &lt;rect /&gt;</span><br><span class=\"line\">        &lt;rect /&gt;</span><br><span class=\"line\">        &lt;rect /&gt;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/svg&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>div&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"导入数据-Data-Joins\"><a href=\"#导入数据-Data-Joins\" class=\"headerlink\" title=\"导入数据 Data Joins\"></a>导入数据 Data Joins</h2><p>我们可以通过利用<code>data()</code>方法来加载数据并创建图形，并利用<code>enter()</code>来让 D3 自动添加 DOM 元素根据数据的数量。</p>\n<h3 id=\"代码-Demo-Code-1\"><a href=\"#代码-Demo-Code-1\" class=\"headerlink\" title=\"代码 Demo Code\"></a>代码 Demo Code</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> data = [</span><br><span class=\"line\">  &#123; <span class=\"attr\">width</span>: <span class=\"number\">50</span>, <span class=\"attr\">height</span>: <span class=\"number\">100</span>, <span class=\"attr\">color</span>: <span class=\"string\">'purple'</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">width</span>: <span class=\"number\">50</span>, <span class=\"attr\">height</span>: <span class=\"number\">70</span>, <span class=\"attr\">color</span>: <span class=\"string\">'red'</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">width</span>: <span class=\"number\">50</span>, <span class=\"attr\">height</span>: <span class=\"number\">220</span>, <span class=\"attr\">color</span>: <span class=\"string\">'blue'</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">width</span>: <span class=\"number\">50</span>, <span class=\"attr\">height</span>: <span class=\"number\">400</span>, <span class=\"attr\">color</span>: <span class=\"string\">'green'</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">width</span>: <span class=\"number\">50</span>, <span class=\"attr\">height</span>: <span class=\"number\">300</span>, <span class=\"attr\">color</span>: <span class=\"string\">'yellow'</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">width</span>: <span class=\"number\">50</span>, <span class=\"attr\">height</span>: <span class=\"number\">100</span>, <span class=\"attr\">color</span>: <span class=\"string\">'#ff932f'</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">width</span>: <span class=\"number\">50</span>, <span class=\"attr\">height</span>: <span class=\"number\">200</span>, <span class=\"attr\">color</span>: <span class=\"string\">'#0a94dd'</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">width</span>: <span class=\"number\">50</span>, <span class=\"attr\">height</span>: <span class=\"number\">600</span>, <span class=\"attr\">color</span>: <span class=\"string\">'#03a9f4'</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">width</span>: <span class=\"number\">50</span>, <span class=\"attr\">height</span>: <span class=\"number\">50</span>, <span class=\"attr\">color</span>: <span class=\"string\">'orange'</span> &#125;,</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App: React.FC = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> svgRef = useRef&lt;SVGSVGElement | <span class=\"literal\">null</span> | any&gt;(<span class=\"literal\">null</span>)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [selection, setSelection] = useState&lt;<span class=\"literal\">null</span> | Selection&lt;</span><br><span class=\"line\">    any,</span><br><span class=\"line\">    unknown,</span><br><span class=\"line\">    <span class=\"literal\">null</span>,</span><br><span class=\"line\">    <span class=\"literal\">undefined</span></span><br><span class=\"line\">  &gt;&gt;(<span class=\"literal\">null</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!selection) &#123;</span><br><span class=\"line\">      setSelection(select(svgRef.current))</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// svg容器 宽度 高度</span></span><br><span class=\"line\">      selection.attr(<span class=\"string\">'width'</span>, <span class=\"number\">1200</span>).attr(<span class=\"string\">'height'</span>, <span class=\"number\">1000</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// 每个rect元素的属性 间隔50px x轴</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> rects = selection</span><br><span class=\"line\">        .selectAll(<span class=\"string\">'rect'</span>)</span><br><span class=\"line\">        .data(data)</span><br><span class=\"line\">        .attr(<span class=\"string\">'width'</span>, d =&gt; d.width)</span><br><span class=\"line\">        .attr(<span class=\"string\">'height'</span>, d =&gt; d.height)</span><br><span class=\"line\">        .attr(<span class=\"string\">'fill'</span>, d =&gt; d.color)</span><br><span class=\"line\">        .attr(<span class=\"string\">'x'</span>, (_, index) =&gt; index * <span class=\"number\">50</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// 根据data数组添加rect DOM</span></span><br><span class=\"line\">      rects</span><br><span class=\"line\">        .enter()</span><br><span class=\"line\">        .append(<span class=\"string\">'rect'</span>)</span><br><span class=\"line\">        .attr(<span class=\"string\">'width'</span>, d =&gt; d.width)</span><br><span class=\"line\">        .attr(<span class=\"string\">'height'</span>, d =&gt; d.height)</span><br><span class=\"line\">        .attr(<span class=\"string\">'fill'</span>, d =&gt; d.color)</span><br><span class=\"line\">        .attr(<span class=\"string\">'x'</span>, (_, index) =&gt; index * <span class=\"number\">50</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;, [selection])</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">\"app-container\"</span>&gt;</span><br><span class=\"line\">      &lt;svg ref=&#123;svgRef&#125;&gt;</span><br><span class=\"line\">        &lt;rect /&gt;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/svg&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>div&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Scales\"><a href=\"#Scales\" class=\"headerlink\" title=\"Scales\"></a>Scales</h2><p>之前的例子中我们用数据给定的数值来定义 svg 元素的高度。假设进行操作的数据值比较大比如 30,000。那么用这个数值来定义元素的高度<code>30000px</code>是不太可行的。我们可以用 D3 中的<code>d3-scale</code>库来对数据的取值范围进行映射并在一个新的范围返回新的对应数值。</p>\n<p>具体的步骤为首先利用<code>max</code>找到数据中的最大值，这个值决定了<code>domain</code>。<code>max()</code>第一个参数为所操作的数组，第二个为一个函数即 accessor, 也就是数组的哪个属性我们要找最大值</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; max &#125; <span class=\"keyword\">from</span> <span class=\"string\">'d3-array'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> data = [&#123; <span class=\"attr\">name</span>: <span class=\"string\">'Ford'</span>, <span class=\"attr\">number</span>: <span class=\"number\">90000</span> &#125;]</span><br><span class=\"line\"><span class=\"keyword\">const</span> maxValue = max(data, d =&gt; d.number)</span><br></pre></td></tr></table></figure>\n\n<p>然后利用<code>scale-linear</code>来创建一个变量函数。<code>domain()</code>和<code>range()</code>的范围默认为从 0 到 1。这里我们设置 domain 为 0 到数组内的最大值。range 即为映射的高度，这里最高设置为 svg 容器的高度。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> y = scaleLinear().domain([<span class=\"number\">0</span>, maxValue!]).range([<span class=\"number\">0</span>, <span class=\"number\">500</span>])</span><br></pre></td></tr></table></figure>\n\n<p>最后在创建<code>rect</code>元素时，在<code>attr</code>高度里利用上面创建的函数即可。</p>\n<h3 id=\"代码-Demo-Code-2\"><a href=\"#代码-Demo-Code-2\" class=\"headerlink\" title=\"代码 Demo Code\"></a>代码 Demo Code</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useRef, useEffect, useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; select, selectAll, Selection &#125; <span class=\"keyword\">from</span> <span class=\"string\">'d3-selection'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; scaleLinear, scaleBand &#125; <span class=\"keyword\">from</span> <span class=\"string\">'d3-scale'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; max &#125; <span class=\"keyword\">from</span> <span class=\"string\">'d3-array'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> data = [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Ford'</span>,</span><br><span class=\"line\">    number: <span class=\"number\">9000</span>,</span><br><span class=\"line\">    color: <span class=\"string\">'#03af94'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Apple'</span>,</span><br><span class=\"line\">    number: <span class=\"number\">19000</span>,</span><br><span class=\"line\">    color: <span class=\"string\">'red'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Google'</span>,</span><br><span class=\"line\">    number: <span class=\"number\">5000</span>,</span><br><span class=\"line\">    color: <span class=\"string\">'purple'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Amazon'</span>,</span><br><span class=\"line\">    number: <span class=\"number\">23000</span>,</span><br><span class=\"line\">    color: <span class=\"string\">'orange'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'BMW'</span>,</span><br><span class=\"line\">    number: <span class=\"number\">3200</span>,</span><br><span class=\"line\">    color: <span class=\"string\">'blue'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App: React.FC = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> svgRef = useRef&lt;SVGSVGElement | <span class=\"literal\">null</span> | any&gt;(<span class=\"literal\">null</span>)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [selection, setSelection] = useState&lt;<span class=\"literal\">null</span> | Selection&lt;</span><br><span class=\"line\">    any,</span><br><span class=\"line\">    unknown,</span><br><span class=\"line\">    <span class=\"literal\">null</span>,</span><br><span class=\"line\">    <span class=\"literal\">undefined</span></span><br><span class=\"line\">  &gt;&gt;(<span class=\"literal\">null</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> maxValue = max(data, d =&gt; d.number)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> y = scaleLinear().domain([<span class=\"number\">0</span>, maxValue!]).range([<span class=\"number\">0</span>, <span class=\"number\">500</span>])</span><br><span class=\"line\">  <span class=\"keyword\">const</span> x = scaleBand()</span><br><span class=\"line\">    .domain(data.map(<span class=\"function\"><span class=\"params\">d</span> =&gt;</span> d.name))</span><br><span class=\"line\">    .range([<span class=\"number\">0</span>, <span class=\"number\">300</span>])</span><br><span class=\"line\">    .paddingInner(<span class=\"number\">0.5</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!selection) &#123;</span><br><span class=\"line\">      setSelection(select(svgRef.current))</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      selection</span><br><span class=\"line\">        .selectAll(<span class=\"string\">'rect'</span>)</span><br><span class=\"line\">        .data(data)</span><br><span class=\"line\">        .enter()</span><br><span class=\"line\">        .append(<span class=\"string\">'rect'</span>)</span><br><span class=\"line\">        .attr(<span class=\"string\">'width'</span>, x.bandwidth)</span><br><span class=\"line\">        .attr(<span class=\"string\">'x'</span>, d =&gt; x(d.name)!)</span><br><span class=\"line\">        .attr(<span class=\"string\">'fill'</span>, d =&gt; d.color)</span><br><span class=\"line\">        .attr(<span class=\"string\">'height'</span>, d =&gt; y(d.number))</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;, [selection])</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">\"app-container\"</span>&gt;</span><br><span class=\"line\">      &lt;svg ref=&#123;svgRef&#125; width=&#123;<span class=\"number\">300</span>&#125; height=&#123;<span class=\"number\">500</span>&#125;&gt;&lt;<span class=\"regexp\">/svg&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>div&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Group-Margins-Axis\"><a href=\"#Group-Margins-Axis\" class=\"headerlink\" title=\"Group, Margins, Axis\"></a>Group, Margins, Axis</h2><p>继续之前的例子，我们这次加入 x 和 y 的坐标轴并对元素进行分类组合。</p>\n<p>首先声明 svg 容器的样式类, 我们把 svg 分为三个部分，x 坐标轴，y 坐标轴，以及数据呈现的 rect 元素。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> dimensions = &#123;</span><br><span class=\"line\">  width: <span class=\"number\">800</span>,</span><br><span class=\"line\">  height: <span class=\"number\">500</span>,</span><br><span class=\"line\">  chartWidth: <span class=\"number\">700</span>,</span><br><span class=\"line\">  chartHeight: <span class=\"number\">400</span>,</span><br><span class=\"line\">  marginLeft: <span class=\"number\">100</span>,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>创建坐标需要引用<code>d3-axis</code> modules, <code>axisBottom</code>即在容器内的下方创建, 数值我们传入之前创建的<code>x</code>和<code>y</code>变量。<code>ticks</code>可以用来根据给定数量的参数渲染坐标轴的分割。<code>tickFormat</code>即用来样式化坐标轴内容。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> xAxis = axisBottom(x)</span><br><span class=\"line\"><span class=\"keyword\">const</span> yAxis = axisLeft(y)</span><br><span class=\"line\">  .ticks(<span class=\"number\">5</span>)</span><br><span class=\"line\">  .tickFormat(<span class=\"function\"><span class=\"params\">d</span> =&gt;</span> <span class=\"string\">`<span class=\"subst\">$&#123;d&#125;</span> units`</span>)</span><br></pre></td></tr></table></figure>\n\n<p>之后我们便可以在 svgRef 里面加入坐标轴如下。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> xAxisGroup = selection</span><br><span class=\"line\">  .append(<span class=\"string\">'g'</span>)</span><br><span class=\"line\">  .attr(</span><br><span class=\"line\">    <span class=\"string\">'transform'</span>,</span><br><span class=\"line\">    <span class=\"string\">`translate(<span class=\"subst\">$&#123;dimensions.marginLeft&#125;</span>, <span class=\"subst\">$&#123;dimensions.chartHeight&#125;</span>)`</span></span><br><span class=\"line\">  )</span><br><span class=\"line\">  .call(xAxis)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> yAxisGroup = selection</span><br><span class=\"line\">  .append(<span class=\"string\">'g'</span>)</span><br><span class=\"line\">  .attr(<span class=\"string\">'transform'</span>, <span class=\"string\">`translate(<span class=\"subst\">$&#123;dimensions.marginLeft&#125;</span>, 0)`</span>)</span><br><span class=\"line\">  .call(yAxis)</span><br></pre></td></tr></table></figure>\n\n<p>目前 Chart 是反向显示的，我们只需要把 y 的 domain 反向并高度调为图的高度减去映射后的高度，得到的就是正向的 Bar Chart 了</p>\n<h2 id=\"Bar-Chart-完整代码\"><a href=\"#Bar-Chart-完整代码\" class=\"headerlink\" title=\"Bar Chart 完整代码\"></a>Bar Chart 完整代码</h2><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useRef, useEffect, useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; select, selectAll, Selection &#125; <span class=\"keyword\">from</span> <span class=\"string\">'d3-selection'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; scaleLinear, scaleBand &#125; <span class=\"keyword\">from</span> <span class=\"string\">'d3-scale'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; max &#125; <span class=\"keyword\">from</span> <span class=\"string\">'d3-array'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; axisLeft, axisBottom &#125; <span class=\"keyword\">from</span> <span class=\"string\">'d3-axis'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">'d3-transition'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; easeElastic &#125; <span class=\"keyword\">from</span> <span class=\"string\">'d3-ease'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> data = [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Ford'</span>,</span><br><span class=\"line\">    number: <span class=\"number\">9000</span>,</span><br><span class=\"line\">    color: <span class=\"string\">'#03af94'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Apple'</span>,</span><br><span class=\"line\">    number: <span class=\"number\">19000</span>,</span><br><span class=\"line\">    color: <span class=\"string\">'red'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Google'</span>,</span><br><span class=\"line\">    number: <span class=\"number\">5000</span>,</span><br><span class=\"line\">    color: <span class=\"string\">'purple'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'Amazon'</span>,</span><br><span class=\"line\">    number: <span class=\"number\">23000</span>,</span><br><span class=\"line\">    color: <span class=\"string\">'orange'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'BMW'</span>,</span><br><span class=\"line\">    number: <span class=\"number\">3200</span>,</span><br><span class=\"line\">    color: <span class=\"string\">'blue'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> dimensions = &#123;</span><br><span class=\"line\">  width: <span class=\"number\">800</span>,</span><br><span class=\"line\">  height: <span class=\"number\">500</span>,</span><br><span class=\"line\">  chartWidth: <span class=\"number\">700</span>,</span><br><span class=\"line\">  chartHeight: <span class=\"number\">400</span>,</span><br><span class=\"line\">  marginLeft: <span class=\"number\">100</span>,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> App: React.FC = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> svgRef = useRef&lt;SVGSVGElement | <span class=\"literal\">null</span> | any&gt;(<span class=\"literal\">null</span>)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [selection, setSelection] = useState&lt;<span class=\"literal\">null</span> | Selection&lt;</span><br><span class=\"line\">    any,</span><br><span class=\"line\">    unknown,</span><br><span class=\"line\">    <span class=\"literal\">null</span>,</span><br><span class=\"line\">    <span class=\"literal\">undefined</span></span><br><span class=\"line\">  &gt;&gt;(<span class=\"literal\">null</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> maxValue = max(data, d =&gt; d.number)</span><br><span class=\"line\">    <span class=\"keyword\">const</span> x = scaleBand()</span><br><span class=\"line\">    .domain(data.map(<span class=\"function\"><span class=\"params\">d</span> =&gt;</span> d.name))</span><br><span class=\"line\">    .range([<span class=\"number\">0</span>, dimensions.chartWidth])</span><br><span class=\"line\">    .paddingInner(<span class=\"number\">0.05</span>)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> y = scaleLinear()</span><br><span class=\"line\">    .domain([<span class=\"number\">0</span>, maxValue!])</span><br><span class=\"line\">    .range([dimensions.chartHeight, <span class=\"number\">0</span>])</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> xAxis = axisBottom(x)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> yAxis = axisLeft(y)</span><br><span class=\"line\">    .ticks(<span class=\"number\">5</span>)</span><br><span class=\"line\">    .tickFormat(<span class=\"function\"><span class=\"params\">d</span> =&gt;</span> <span class=\"string\">`<span class=\"subst\">$&#123;d&#125;</span> units`</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!selection) &#123;</span><br><span class=\"line\">      setSelection(select(svgRef.current))</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> xAxisGroup = selection</span><br><span class=\"line\">        .append(<span class=\"string\">'g'</span>)</span><br><span class=\"line\">        .attr(</span><br><span class=\"line\">          <span class=\"string\">'transform'</span>,</span><br><span class=\"line\">          <span class=\"string\">`translate(<span class=\"subst\">$&#123;dimensions.marginLeft&#125;</span>, <span class=\"subst\">$&#123;dimensions.chartHeight&#125;</span>)`</span></span><br><span class=\"line\">        )</span><br><span class=\"line\">        .call(xAxis)</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">const</span> yAxisGroup = selection</span><br><span class=\"line\">        .append(<span class=\"string\">'g'</span>)</span><br><span class=\"line\">        .attr(<span class=\"string\">'transform'</span>, <span class=\"string\">`translate(<span class=\"subst\">$&#123;dimensions.marginLeft&#125;</span>, 0)`</span>)</span><br><span class=\"line\">        .call(yAxis)</span><br><span class=\"line\"></span><br><span class=\"line\">      selection</span><br><span class=\"line\">        .append(<span class=\"string\">'g'</span>)</span><br><span class=\"line\">        .attr(<span class=\"string\">'transform'</span>, <span class=\"string\">`translate(<span class=\"subst\">$&#123;dimensions.marginLeft&#125;</span>,0)`</span>)</span><br><span class=\"line\">        .selectAll(<span class=\"string\">'rect'</span>)</span><br><span class=\"line\">        .data(data)</span><br><span class=\"line\">        .enter()</span><br><span class=\"line\">        .append(<span class=\"string\">'rect'</span>)</span><br><span class=\"line\">        .attr(<span class=\"string\">'width'</span>, x.bandwidth)</span><br><span class=\"line\">        .attr(<span class=\"string\">'height'</span>, <span class=\"number\">0</span>)</span><br><span class=\"line\">        .attr(<span class=\"string\">'x'</span>, d =&gt; x(d.name)!)</span><br><span class=\"line\">        .attr(<span class=\"string\">'y'</span>, dimensions.chartHeight)</span><br><span class=\"line\">        .transition()</span><br><span class=\"line\">        .duration(<span class=\"number\">2500</span>)</span><br><span class=\"line\">        .delay(<span class=\"function\">(<span class=\"params\">_, index</span>) =&gt;</span> index * <span class=\"number\">100</span>)</span><br><span class=\"line\">        .ease(easeElastic)</span><br><span class=\"line\">        .attr(<span class=\"string\">'height'</span>, d =&gt; dimensions.chartHeight - y(d.number))</span><br><span class=\"line\">        .attr(<span class=\"string\">'y'</span>, d =&gt; y(d.number))</span><br><span class=\"line\">        .attr(<span class=\"string\">'fill'</span>, d =&gt; d.color)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;, [selection])</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div className=<span class=\"string\">\"app-container\"</span>&gt;</span><br><span class=\"line\">      &lt;svg</span><br><span class=\"line\">        ref=&#123;svgRef&#125;</span><br><span class=\"line\">        width=&#123;dimensions.width&#125;</span><br><span class=\"line\">        height=&#123;dimensions.height&#125;</span><br><span class=\"line\">        style=&#123;&#123; <span class=\"attr\">marginTop</span>: <span class=\"string\">'50px'</span> &#125;&#125;</span><br><span class=\"line\">      &gt;&lt;<span class=\"regexp\">/svg&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>div&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"title":"Redux 笔记","date":"2020-08-04T18:15:41.000Z","cover":"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/1_ufTZlV3JGAlFmtpNOqn2UQ%402x.png?alt=media&token=8fc10f35-e91b-48db-8ea4-0842883035bc","_content":"\n## Setup\n\n通过 React CLI 创建一个新的 React Project 并安装 redux 依赖。\n\n```shell\nnpx create-react-app redux-demo\nnpm install redux react-redux\n```\n\n## Redux Basic Flow: Actions -> Reducer -> Store\n\n在`src`文件夹中创建`redux`文件夹，用来管理和存放所有 redux 相关的文件。\n\n### 1. Actions\n\n创建一个`product`文件夹，所有的 reducer 都跟 product 相关。用来管理 product 的 state 和 action\n\n**productTypes.js**\n\n```jsx\nexport const BUY_PRODUCT = 'BUY_PRODUCT'\nexport const ADD_STOCK = 'ADD_STOCK'\n```\n\n在`productActions`中创建两个函数`BUY_PRODUCT`以及`ADD_STOCK`，分别返回响应的类型，之后在 reducer 中根据类型打包相关操作。\n\n**productActions.js**\n\n```jsx\nimport { BUY_PRODUCT, ADD_STOCK } from '.productTypes'\n\nexport const buyProduct = () => {\n  return {\n    type: 'BUY_PRODUCT',\n  }\n}\n\nexport const addStock = () => {\n  return {\n    type: 'ADD_STOCK',\n  }\n}\n```\n\n### 2. Reducer\n\n在`productReducer`中，我们可以根据 action 的 type 来对 state 进行更新。\n\n**productReducer**\n\n```jsx\nimport {BUY_PRODUCT, ADD_STOCK} from './productTypes'\n\nconst initialState ={\n    numOfProducts: 10,\n}\n\nconst productReducer = (state=initialState, action) => {\n    switch(action.type) {\n        case BUY_PRODUCT:\n            return {\n                ...state,\n                numOfProducts: state.numOfProducts - 1,\n            }\n        case ADD_STOCK:\n            return {\n                ...state,\n                numOfProducts: state.numOfProducts + 1\n            }\n        default:\n            return state\n    }\n}\n\nexport productReducer\n```\n\n### 3. Store\n\n最后在`redux`根目录下创建一个`store.js`和`index.js`用来管理 state 和 action\n\n**store.js**\n\n```js\nimport { createStore } from 'redux'\nimport productReducer from './product/productReducer'\n\nconst store = createStore(productReducer)\n\nexport default store\n```\n\n**index.js**\n\n```jsx\nexport { buyProduct, addStock } from './product/productActions'\n```\n\n### Using Redux in Component\n\n**App.js**\n\n```jsx\nimport React from 'react'\nimport Product from './components/Product'\nimport { Provider } from 'react-redux'\nimport store from './redux/store'\n\nfunction App() {\n  return (\n    <Provider store={store}>\n      <div>\n        <Product />\n      </div>\n    </Provider>\n  )\n}\n```\n\n**Products.js**\n\n```jsx\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { buyProduct, addStock } from '../redux'\n\nfunction Product(props) {\n  return (\n    <div>\n      <h2>Number of products available {props.numOfProducts}</h2>\n      <button>Buy Products</button>\n      <button>Add Product to Shelf</button>\n    </div>\n  )\n}\n\nconst mapStateToProps = state => {\n  return {\n    numOfProducts: state.numOfProducts,\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    buyProduct: () => dispatch(buyProduct()),\n    addStock: () => dispatch(addStock()),\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Product)\n```\n\n## Redux Hooks: useSelector 和 useDispatch\n\nRedux 提供了 Hooks API, 我们可以通过使用`useSelector`来获取 store 中的 state，并利用`useDispatch`来进行 state 的更新操作。\n\n**Product.js**\n\n```jsx\nimport React from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { buyProduct } from '../redux'\n\nfunction Product() {\n  const numOfProducts = useSelector(state => state.numOfProducts)\n  const dispatch = useDispatch()\n  return (\n    <div>\n      <h2>Num of products {numOfProducts}</h2>\n      <button onClick={() => dispatch(buyProduct())}>Buy Product</button>\n    </div>\n  )\n}\n\nexport default Product\n```\n\n## Multiple Reducers\n\n在 redux 根目录下创建`rootReducer.js`文件，将所有的 reducer 以 object 的形式保存在一个变量\n\n**rootReducer.js**\n\n```jsx\nimport { combineReducers } from 'redux'\nimport { productReducer } from './product/productReducer'\nimport { userReducer } from './user/userReducer'\n\nconst rootReducer = combineReducers({\n  user: userReducer,\n  product: productReducer,\n})\n```\n\n**store.js**\n\n```jsx\nimport { createStore } from 'redux'\nimport rootReducer from './rootReducer'\n\nconst store = createStore(rootReducer)\n\nexport default store\n```\n\n**User.js**\n\n```jsx\nimport React from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\n\nfunction User() {\n  const userName = useSelector(state => state.user.name)\n\n  return (\n    <div>\n      <h2>Welcome back {userName}</h2>\n    </div>\n  )\n}\n\nexport default User\n```\n\n## Action payload\n\n**Product.js**\n\n```jsx\nimport React, { useState } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { buyProduct } from '../redux'\n\nfunction Product() {\n  const numOfProducts = useSelector(state => state.numOfProducts)\n  const dispatch = useDispatch()\n  const [qty, setQty] = useState(1)\n  return (\n    <div>\n      <h2>Num of products {numOfProducts}</h2>\n      <input type=\"text\" value={qty} onChange={e => setQty(e.target.value)} />\n      <button onClick={() => dispatch(buyProduct(qty))}>\n        Buy {qty} Product\n      </button>\n    </div>\n  )\n}\n\nexport default Product\n```\n\n**productActions.js**\n\n```jsx\nimport { BUY_CAKE } from '.productTypes'\n\nexport const buyProduct = (qty = 1) => {\n  return {\n    type: BUY_PRODUCT,\n    payload: qty,\n  }\n}\n```\n\n**productReducer.js**\n\n```jsx\n// ... ...\nconst productReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case BUY_PRODUCT:\n      return {\n        ...state,\n        numOfProducts: state.numOfProducts - actions.payload,\n      }\n\n    default:\n      return state\n  }\n}\n// ... ...\n```\n","source":"_posts/31-react-redux.md","raw":"---\ntitle: Redux 笔记\ndate: 2020-08-04 11:15:41\ntags: ['redux', 'react', 'note', 'front-end']\ncategories: Notes\ncover: 'https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/1_ufTZlV3JGAlFmtpNOqn2UQ%402x.png?alt=media&token=8fc10f35-e91b-48db-8ea4-0842883035bc'\n---\n\n## Setup\n\n通过 React CLI 创建一个新的 React Project 并安装 redux 依赖。\n\n```shell\nnpx create-react-app redux-demo\nnpm install redux react-redux\n```\n\n## Redux Basic Flow: Actions -> Reducer -> Store\n\n在`src`文件夹中创建`redux`文件夹，用来管理和存放所有 redux 相关的文件。\n\n### 1. Actions\n\n创建一个`product`文件夹，所有的 reducer 都跟 product 相关。用来管理 product 的 state 和 action\n\n**productTypes.js**\n\n```jsx\nexport const BUY_PRODUCT = 'BUY_PRODUCT'\nexport const ADD_STOCK = 'ADD_STOCK'\n```\n\n在`productActions`中创建两个函数`BUY_PRODUCT`以及`ADD_STOCK`，分别返回响应的类型，之后在 reducer 中根据类型打包相关操作。\n\n**productActions.js**\n\n```jsx\nimport { BUY_PRODUCT, ADD_STOCK } from '.productTypes'\n\nexport const buyProduct = () => {\n  return {\n    type: 'BUY_PRODUCT',\n  }\n}\n\nexport const addStock = () => {\n  return {\n    type: 'ADD_STOCK',\n  }\n}\n```\n\n### 2. Reducer\n\n在`productReducer`中，我们可以根据 action 的 type 来对 state 进行更新。\n\n**productReducer**\n\n```jsx\nimport {BUY_PRODUCT, ADD_STOCK} from './productTypes'\n\nconst initialState ={\n    numOfProducts: 10,\n}\n\nconst productReducer = (state=initialState, action) => {\n    switch(action.type) {\n        case BUY_PRODUCT:\n            return {\n                ...state,\n                numOfProducts: state.numOfProducts - 1,\n            }\n        case ADD_STOCK:\n            return {\n                ...state,\n                numOfProducts: state.numOfProducts + 1\n            }\n        default:\n            return state\n    }\n}\n\nexport productReducer\n```\n\n### 3. Store\n\n最后在`redux`根目录下创建一个`store.js`和`index.js`用来管理 state 和 action\n\n**store.js**\n\n```js\nimport { createStore } from 'redux'\nimport productReducer from './product/productReducer'\n\nconst store = createStore(productReducer)\n\nexport default store\n```\n\n**index.js**\n\n```jsx\nexport { buyProduct, addStock } from './product/productActions'\n```\n\n### Using Redux in Component\n\n**App.js**\n\n```jsx\nimport React from 'react'\nimport Product from './components/Product'\nimport { Provider } from 'react-redux'\nimport store from './redux/store'\n\nfunction App() {\n  return (\n    <Provider store={store}>\n      <div>\n        <Product />\n      </div>\n    </Provider>\n  )\n}\n```\n\n**Products.js**\n\n```jsx\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { buyProduct, addStock } from '../redux'\n\nfunction Product(props) {\n  return (\n    <div>\n      <h2>Number of products available {props.numOfProducts}</h2>\n      <button>Buy Products</button>\n      <button>Add Product to Shelf</button>\n    </div>\n  )\n}\n\nconst mapStateToProps = state => {\n  return {\n    numOfProducts: state.numOfProducts,\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    buyProduct: () => dispatch(buyProduct()),\n    addStock: () => dispatch(addStock()),\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Product)\n```\n\n## Redux Hooks: useSelector 和 useDispatch\n\nRedux 提供了 Hooks API, 我们可以通过使用`useSelector`来获取 store 中的 state，并利用`useDispatch`来进行 state 的更新操作。\n\n**Product.js**\n\n```jsx\nimport React from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { buyProduct } from '../redux'\n\nfunction Product() {\n  const numOfProducts = useSelector(state => state.numOfProducts)\n  const dispatch = useDispatch()\n  return (\n    <div>\n      <h2>Num of products {numOfProducts}</h2>\n      <button onClick={() => dispatch(buyProduct())}>Buy Product</button>\n    </div>\n  )\n}\n\nexport default Product\n```\n\n## Multiple Reducers\n\n在 redux 根目录下创建`rootReducer.js`文件，将所有的 reducer 以 object 的形式保存在一个变量\n\n**rootReducer.js**\n\n```jsx\nimport { combineReducers } from 'redux'\nimport { productReducer } from './product/productReducer'\nimport { userReducer } from './user/userReducer'\n\nconst rootReducer = combineReducers({\n  user: userReducer,\n  product: productReducer,\n})\n```\n\n**store.js**\n\n```jsx\nimport { createStore } from 'redux'\nimport rootReducer from './rootReducer'\n\nconst store = createStore(rootReducer)\n\nexport default store\n```\n\n**User.js**\n\n```jsx\nimport React from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\n\nfunction User() {\n  const userName = useSelector(state => state.user.name)\n\n  return (\n    <div>\n      <h2>Welcome back {userName}</h2>\n    </div>\n  )\n}\n\nexport default User\n```\n\n## Action payload\n\n**Product.js**\n\n```jsx\nimport React, { useState } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { buyProduct } from '../redux'\n\nfunction Product() {\n  const numOfProducts = useSelector(state => state.numOfProducts)\n  const dispatch = useDispatch()\n  const [qty, setQty] = useState(1)\n  return (\n    <div>\n      <h2>Num of products {numOfProducts}</h2>\n      <input type=\"text\" value={qty} onChange={e => setQty(e.target.value)} />\n      <button onClick={() => dispatch(buyProduct(qty))}>\n        Buy {qty} Product\n      </button>\n    </div>\n  )\n}\n\nexport default Product\n```\n\n**productActions.js**\n\n```jsx\nimport { BUY_CAKE } from '.productTypes'\n\nexport const buyProduct = (qty = 1) => {\n  return {\n    type: BUY_PRODUCT,\n    payload: qty,\n  }\n}\n```\n\n**productReducer.js**\n\n```jsx\n// ... ...\nconst productReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case BUY_PRODUCT:\n      return {\n        ...state,\n        numOfProducts: state.numOfProducts - actions.payload,\n      }\n\n    default:\n      return state\n  }\n}\n// ... ...\n```\n","slug":"31-react-redux","published":1,"updated":"2020-08-06T23:31:39.824Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckdnmttdz002irwuic72v0r5b","content":"<h2 id=\"Setup\"><a href=\"#Setup\" class=\"headerlink\" title=\"Setup\"></a>Setup</h2><p>通过 React CLI 创建一个新的 React Project 并安装 redux 依赖。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npx create-react-app redux-demo</span><br><span class=\"line\">npm install redux react-redux</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Redux-Basic-Flow-Actions-gt-Reducer-gt-Store\"><a href=\"#Redux-Basic-Flow-Actions-gt-Reducer-gt-Store\" class=\"headerlink\" title=\"Redux Basic Flow: Actions -&gt; Reducer -&gt; Store\"></a>Redux Basic Flow: Actions -&gt; Reducer -&gt; Store</h2><p>在<code>src</code>文件夹中创建<code>redux</code>文件夹，用来管理和存放所有 redux 相关的文件。</p>\n<h3 id=\"1-Actions\"><a href=\"#1-Actions\" class=\"headerlink\" title=\"1. Actions\"></a>1. Actions</h3><p>创建一个<code>product</code>文件夹，所有的 reducer 都跟 product 相关。用来管理 product 的 state 和 action</p>\n<p><strong>productTypes.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> BUY_PRODUCT = <span class=\"string\">'BUY_PRODUCT'</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> ADD_STOCK = <span class=\"string\">'ADD_STOCK'</span></span><br></pre></td></tr></table></figure>\n\n<p>在<code>productActions</code>中创建两个函数<code>BUY_PRODUCT</code>以及<code>ADD_STOCK</code>，分别返回响应的类型，之后在 reducer 中根据类型打包相关操作。</p>\n<p><strong>productActions.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; BUY_PRODUCT, ADD_STOCK &#125; <span class=\"keyword\">from</span> <span class=\"string\">'.productTypes'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> buyProduct = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: <span class=\"string\">'BUY_PRODUCT'</span>,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> addStock = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: <span class=\"string\">'ADD_STOCK'</span>,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-Reducer\"><a href=\"#2-Reducer\" class=\"headerlink\" title=\"2. Reducer\"></a>2. Reducer</h3><p>在<code>productReducer</code>中，我们可以根据 action 的 type 来对 state 进行更新。</p>\n<p><strong>productReducer</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;BUY_PRODUCT, ADD_STOCK&#125; <span class=\"keyword\">from</span> <span class=\"string\">'./productTypes'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> initialState =&#123;</span><br><span class=\"line\">    numOfProducts: <span class=\"number\">10</span>,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> productReducer = <span class=\"function\">(<span class=\"params\">state=initialState, action</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">switch</span>(action.type) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> BUY_PRODUCT:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">                ...state,</span><br><span class=\"line\">                numOfProducts: state.numOfProducts - <span class=\"number\">1</span>,</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> ADD_STOCK:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">                ...state,</span><br><span class=\"line\">                numOfProducts: state.numOfProducts + <span class=\"number\">1</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        <span class=\"keyword\">default</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> state</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> productReducer</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-Store\"><a href=\"#3-Store\" class=\"headerlink\" title=\"3. Store\"></a>3. Store</h3><p>最后在<code>redux</code>根目录下创建一个<code>store.js</code>和<code>index.js</code>用来管理 state 和 action</p>\n<p><strong>store.js</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStore &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> productReducer <span class=\"keyword\">from</span> <span class=\"string\">'./product/productReducer'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> store = createStore(productReducer)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> store</span><br></pre></td></tr></table></figure>\n\n<p><strong>index.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> &#123; buyProduct, addStock &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./product/productActions'</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Using-Redux-in-Component\"><a href=\"#Using-Redux-in-Component\" class=\"headerlink\" title=\"Using Redux in Component\"></a>Using Redux in Component</h3><p><strong>App.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> Product <span class=\"keyword\">from</span> <span class=\"string\">'./components/Product'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Provider &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-redux'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> store <span class=\"keyword\">from</span> <span class=\"string\">'./redux/store'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Provider store=&#123;store&#125;&gt;</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &lt;Product /&gt;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>Provider&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>Products.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; connect &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-redux'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; buyProduct, addStock &#125; <span class=\"keyword\">from</span> <span class=\"string\">'../redux'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Product</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;h2&gt;<span class=\"built_in\">Number</span> <span class=\"keyword\">of</span> products available &#123;props.numOfProducts&#125;&lt;<span class=\"regexp\">/h2&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;button&gt;Buy Products&lt;/</span>button&gt;</span><br><span class=\"line\">      &lt;button&gt;Add Product to Shelf&lt;<span class=\"regexp\">/button&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>div&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> mapStateToProps = <span class=\"function\"><span class=\"params\">state</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    numOfProducts: state.numOfProducts,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> mapDispatchToProps = <span class=\"function\"><span class=\"params\">dispatch</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    buyProduct: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> dispatch(buyProduct()),</span><br><span class=\"line\">    addStock: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> dispatch(addStock()),</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> connect(mapStateToProps, mapDispatchToProps)(Product)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Redux-Hooks-useSelector-和-useDispatch\"><a href=\"#Redux-Hooks-useSelector-和-useDispatch\" class=\"headerlink\" title=\"Redux Hooks: useSelector 和 useDispatch\"></a>Redux Hooks: useSelector 和 useDispatch</h2><p>Redux 提供了 Hooks API, 我们可以通过使用<code>useSelector</code>来获取 store 中的 state，并利用<code>useDispatch</code>来进行 state 的更新操作。</p>\n<p><strong>Product.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useSelector, useDispatch &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-redux'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; buyProduct &#125; <span class=\"keyword\">from</span> <span class=\"string\">'../redux'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Product</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> numOfProducts = useSelector(<span class=\"function\"><span class=\"params\">state</span> =&gt;</span> state.numOfProducts)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> dispatch = useDispatch()</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;h2&gt;Num <span class=\"keyword\">of</span> products &#123;numOfProducts&#125;&lt;<span class=\"regexp\">/h2&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;button onClick=&#123;() =&gt; dispatch(buyProduct())&#125;&gt;Buy Product&lt;/</span>button&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">export default Product</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Multiple-Reducers\"><a href=\"#Multiple-Reducers\" class=\"headerlink\" title=\"Multiple Reducers\"></a>Multiple Reducers</h2><p>在 redux 根目录下创建<code>rootReducer.js</code>文件，将所有的 reducer 以 object 的形式保存在一个变量</p>\n<p><strong>rootReducer.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; combineReducers &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; productReducer &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./product/productReducer'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; userReducer &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./user/userReducer'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> rootReducer = combineReducers(&#123;</span><br><span class=\"line\">  user: userReducer,</span><br><span class=\"line\">  product: productReducer,</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p><strong>store.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStore &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> rootReducer <span class=\"keyword\">from</span> <span class=\"string\">'./rootReducer'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> store = createStore(rootReducer)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> store</span><br></pre></td></tr></table></figure>\n\n<p><strong>User.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useSelector, useDispatch &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-redux'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">User</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> userName = useSelector(<span class=\"function\"><span class=\"params\">state</span> =&gt;</span> state.user.name)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;h2&gt;Welcome back &#123;userName&#125;&lt;<span class=\"regexp\">/h2&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>div&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> User</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Action-payload\"><a href=\"#Action-payload\" class=\"headerlink\" title=\"Action payload\"></a>Action payload</h2><p><strong>Product.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useSelector, useDispatch &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-redux'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; buyProduct &#125; <span class=\"keyword\">from</span> <span class=\"string\">'../redux'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Product</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> numOfProducts = useSelector(<span class=\"function\"><span class=\"params\">state</span> =&gt;</span> state.numOfProducts)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> dispatch = useDispatch()</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [qty, setQty] = useState(<span class=\"number\">1</span>)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;h2&gt;Num <span class=\"keyword\">of</span> products &#123;numOfProducts&#125;&lt;<span class=\"regexp\">/h2&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;input type=\"text\" value=&#123;qty&#125; onChange=&#123;e =&gt; setQty(e.target.value)&#125; /</span>&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;() =&gt; dispatch(buyProduct(qty))&#125;&gt;</span><br><span class=\"line\">        Buy &#123;qty&#125; Product</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/button&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>div&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> Product</span><br></pre></td></tr></table></figure>\n\n<p><strong>productActions.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; BUY_CAKE &#125; <span class=\"keyword\">from</span> <span class=\"string\">'.productTypes'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> buyProduct = <span class=\"function\">(<span class=\"params\">qty = <span class=\"number\">1</span></span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: BUY_PRODUCT,</span><br><span class=\"line\">    payload: qty,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>productReducer.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ... ...</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> productReducer = <span class=\"function\">(<span class=\"params\">state = initialState, action</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (action.type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> BUY_PRODUCT:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        ...state,</span><br><span class=\"line\">        numOfProducts: state.numOfProducts - actions.payload,</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> state</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// ... ...</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"","more":"<h2 id=\"Setup\"><a href=\"#Setup\" class=\"headerlink\" title=\"Setup\"></a>Setup</h2><p>通过 React CLI 创建一个新的 React Project 并安装 redux 依赖。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npx create-react-app redux-demo</span><br><span class=\"line\">npm install redux react-redux</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Redux-Basic-Flow-Actions-gt-Reducer-gt-Store\"><a href=\"#Redux-Basic-Flow-Actions-gt-Reducer-gt-Store\" class=\"headerlink\" title=\"Redux Basic Flow: Actions -&gt; Reducer -&gt; Store\"></a>Redux Basic Flow: Actions -&gt; Reducer -&gt; Store</h2><p>在<code>src</code>文件夹中创建<code>redux</code>文件夹，用来管理和存放所有 redux 相关的文件。</p>\n<h3 id=\"1-Actions\"><a href=\"#1-Actions\" class=\"headerlink\" title=\"1. Actions\"></a>1. Actions</h3><p>创建一个<code>product</code>文件夹，所有的 reducer 都跟 product 相关。用来管理 product 的 state 和 action</p>\n<p><strong>productTypes.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> BUY_PRODUCT = <span class=\"string\">'BUY_PRODUCT'</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> ADD_STOCK = <span class=\"string\">'ADD_STOCK'</span></span><br></pre></td></tr></table></figure>\n\n<p>在<code>productActions</code>中创建两个函数<code>BUY_PRODUCT</code>以及<code>ADD_STOCK</code>，分别返回响应的类型，之后在 reducer 中根据类型打包相关操作。</p>\n<p><strong>productActions.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; BUY_PRODUCT, ADD_STOCK &#125; <span class=\"keyword\">from</span> <span class=\"string\">'.productTypes'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> buyProduct = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: <span class=\"string\">'BUY_PRODUCT'</span>,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> addStock = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: <span class=\"string\">'ADD_STOCK'</span>,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-Reducer\"><a href=\"#2-Reducer\" class=\"headerlink\" title=\"2. Reducer\"></a>2. Reducer</h3><p>在<code>productReducer</code>中，我们可以根据 action 的 type 来对 state 进行更新。</p>\n<p><strong>productReducer</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;BUY_PRODUCT, ADD_STOCK&#125; <span class=\"keyword\">from</span> <span class=\"string\">'./productTypes'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> initialState =&#123;</span><br><span class=\"line\">    numOfProducts: <span class=\"number\">10</span>,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> productReducer = <span class=\"function\">(<span class=\"params\">state=initialState, action</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">switch</span>(action.type) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> BUY_PRODUCT:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">                ...state,</span><br><span class=\"line\">                numOfProducts: state.numOfProducts - <span class=\"number\">1</span>,</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> ADD_STOCK:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">                ...state,</span><br><span class=\"line\">                numOfProducts: state.numOfProducts + <span class=\"number\">1</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        <span class=\"keyword\">default</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> state</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> productReducer</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-Store\"><a href=\"#3-Store\" class=\"headerlink\" title=\"3. Store\"></a>3. Store</h3><p>最后在<code>redux</code>根目录下创建一个<code>store.js</code>和<code>index.js</code>用来管理 state 和 action</p>\n<p><strong>store.js</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStore &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> productReducer <span class=\"keyword\">from</span> <span class=\"string\">'./product/productReducer'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> store = createStore(productReducer)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> store</span><br></pre></td></tr></table></figure>\n\n<p><strong>index.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> &#123; buyProduct, addStock &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./product/productActions'</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Using-Redux-in-Component\"><a href=\"#Using-Redux-in-Component\" class=\"headerlink\" title=\"Using Redux in Component\"></a>Using Redux in Component</h3><p><strong>App.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> Product <span class=\"keyword\">from</span> <span class=\"string\">'./components/Product'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Provider &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-redux'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> store <span class=\"keyword\">from</span> <span class=\"string\">'./redux/store'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Provider store=&#123;store&#125;&gt;</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &lt;Product /&gt;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>Provider&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>Products.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; connect &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-redux'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; buyProduct, addStock &#125; <span class=\"keyword\">from</span> <span class=\"string\">'../redux'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Product</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;h2&gt;<span class=\"built_in\">Number</span> <span class=\"keyword\">of</span> products available &#123;props.numOfProducts&#125;&lt;<span class=\"regexp\">/h2&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;button&gt;Buy Products&lt;/</span>button&gt;</span><br><span class=\"line\">      &lt;button&gt;Add Product to Shelf&lt;<span class=\"regexp\">/button&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>div&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> mapStateToProps = <span class=\"function\"><span class=\"params\">state</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    numOfProducts: state.numOfProducts,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> mapDispatchToProps = <span class=\"function\"><span class=\"params\">dispatch</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    buyProduct: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> dispatch(buyProduct()),</span><br><span class=\"line\">    addStock: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> dispatch(addStock()),</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> connect(mapStateToProps, mapDispatchToProps)(Product)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Redux-Hooks-useSelector-和-useDispatch\"><a href=\"#Redux-Hooks-useSelector-和-useDispatch\" class=\"headerlink\" title=\"Redux Hooks: useSelector 和 useDispatch\"></a>Redux Hooks: useSelector 和 useDispatch</h2><p>Redux 提供了 Hooks API, 我们可以通过使用<code>useSelector</code>来获取 store 中的 state，并利用<code>useDispatch</code>来进行 state 的更新操作。</p>\n<p><strong>Product.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useSelector, useDispatch &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-redux'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; buyProduct &#125; <span class=\"keyword\">from</span> <span class=\"string\">'../redux'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Product</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> numOfProducts = useSelector(<span class=\"function\"><span class=\"params\">state</span> =&gt;</span> state.numOfProducts)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> dispatch = useDispatch()</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;h2&gt;Num <span class=\"keyword\">of</span> products &#123;numOfProducts&#125;&lt;<span class=\"regexp\">/h2&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;button onClick=&#123;() =&gt; dispatch(buyProduct())&#125;&gt;Buy Product&lt;/</span>button&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">export default Product</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Multiple-Reducers\"><a href=\"#Multiple-Reducers\" class=\"headerlink\" title=\"Multiple Reducers\"></a>Multiple Reducers</h2><p>在 redux 根目录下创建<code>rootReducer.js</code>文件，将所有的 reducer 以 object 的形式保存在一个变量</p>\n<p><strong>rootReducer.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; combineReducers &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; productReducer &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./product/productReducer'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; userReducer &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./user/userReducer'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> rootReducer = combineReducers(&#123;</span><br><span class=\"line\">  user: userReducer,</span><br><span class=\"line\">  product: productReducer,</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p><strong>store.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStore &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> rootReducer <span class=\"keyword\">from</span> <span class=\"string\">'./rootReducer'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> store = createStore(rootReducer)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> store</span><br></pre></td></tr></table></figure>\n\n<p><strong>User.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useSelector, useDispatch &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-redux'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">User</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> userName = useSelector(<span class=\"function\"><span class=\"params\">state</span> =&gt;</span> state.user.name)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;h2&gt;Welcome back &#123;userName&#125;&lt;<span class=\"regexp\">/h2&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>div&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> User</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Action-payload\"><a href=\"#Action-payload\" class=\"headerlink\" title=\"Action payload\"></a>Action payload</h2><p><strong>Product.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useSelector, useDispatch &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-redux'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; buyProduct &#125; <span class=\"keyword\">from</span> <span class=\"string\">'../redux'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Product</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> numOfProducts = useSelector(<span class=\"function\"><span class=\"params\">state</span> =&gt;</span> state.numOfProducts)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> dispatch = useDispatch()</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [qty, setQty] = useState(<span class=\"number\">1</span>)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;h2&gt;Num <span class=\"keyword\">of</span> products &#123;numOfProducts&#125;&lt;<span class=\"regexp\">/h2&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;input type=\"text\" value=&#123;qty&#125; onChange=&#123;e =&gt; setQty(e.target.value)&#125; /</span>&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;() =&gt; dispatch(buyProduct(qty))&#125;&gt;</span><br><span class=\"line\">        Buy &#123;qty&#125; Product</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/button&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>div&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> Product</span><br></pre></td></tr></table></figure>\n\n<p><strong>productActions.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; BUY_CAKE &#125; <span class=\"keyword\">from</span> <span class=\"string\">'.productTypes'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> buyProduct = <span class=\"function\">(<span class=\"params\">qty = <span class=\"number\">1</span></span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    type: BUY_PRODUCT,</span><br><span class=\"line\">    payload: qty,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>productReducer.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ... ...</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> productReducer = <span class=\"function\">(<span class=\"params\">state = initialState, action</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (action.type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> BUY_PRODUCT:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        ...state,</span><br><span class=\"line\">        numOfProducts: state.numOfProducts - actions.payload,</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> state</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// ... ...</span></span><br></pre></td></tr></table></figure>\n"},{"title":"ReactNative 开发原生移动端应用","date":"2020-08-08T18:00:50.000Z","cover":"https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/1_QDQvlCg420lzRElCK4AYhw.png?alt=media&token=619670bd-3da8-4090-bbfd-8f79ae0a8267","_content":"\n# Setup 配置\n\n## Install Expo CLI 安装\n\n确保开发环境已经安装了`Node.js`.\n\n```shell\nnpm install expo-cli --global\n```\n\n## Initialize Project 创建项目\n\n```shell\nexpo init project-name\ncd project-name\nexpo start\n```\n\n然后可以在 Expo Tools 面板中选择 Androidh 或者 IOS 模拟器。这里我们使用 Android Studiod AVD manager 模拟器。\n\n在 Android Studio 中创建虚拟环境后，直接在 Expo Tool 面板点击`Running on Android device`或者输入`a`在 terminal。第一次运行时需要在虚拟器上安装 Javascript 包以及依赖，所以安装时间会久一点。安装完成后会自动在模拟器运行 App\n\n# Fundamentals 基本概念\n\n## Views, Text & Styles 视图，文本，样式化\n\nReact 中 View 可以看作是 HTML 中的 div，我们可以在 View 添加 Text, Image. Text 跟`<p>`相似，用来渲染文本内容。StyleSheet 用来样式化元素，这里用驼峰命名跟 CSS 不同。\n\n```jsx\nimport React from 'react'\nimport { StyleSheet, Text, View } from 'react-native'\n\nexport default function App() {\n  return (\n    <View style={styles.appContainer}>\n      <Text style={styles.currRoute}>Home</Text>\n      <Text>Contact</Text>\n      <Text>Servicsse</Text>\n      <Text>ss</Text>\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  appContainer: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  currRoute: {\n    backgroundColor: 'red',\n    padding: 20,\n  },\n})\n```\n\n## Text Inputs 文本输入框\n\n使用<TextInput /> API 来填写表单更改 state。\n\n```jsx\nimport React, { useState } from 'react'\nimport { StyleSheet, Text, View, TextInput } from 'react-native'\n\nexport default function App() {\n  const [user, setUser] = useState({\n    name: '',\n    age: '',\n  })\n\n  return (\n    <View style={styles.appContainer}>\n      <Text>Enter Your Name</Text>\n      <TextInput\n        style={styles.input}\n        placeholder=\"e.g. Yang Li\"\n        onChangeText={e => setUser({ ...user, name: e })}\n      />\n      <Text>Enter Your Age</Text>\n      <TextInput\n        style={styles.input}\n        placeholder=\"e.g. 23\"\n        onChangeText={e => setUser({ ...user, age: e })}\n      />\n\n      <Text>\n        Hello\n        <Text style={styles.userInfo}>\n          {user.name} {user.age}\n        </Text>\n      </Text>\n    </View>\n  )\n}\n```\n\n## ScrollView 滑动视图\n\n在 React Native 中渲染一个列表，我们用 ES6 map 遍历数组然后渲染每个 item 为 Text 即可。默认情况下如果列表高度超过模拟机的高度会出现溢出，这时候我们可以用`<ScrollView>` API 把列表 wrap 起来就可以滚动显示。\n\n```jsx\n  const [userList, setUserList] = useState([\n    { name: 'Yang Li', id: '1' },\n    { name: 'Jason Wang', id: '2' },\n    { name: 'Alex Zhao', id: '3' },\n  ])\n\n<ScrollView>\n  {userList.map(user => (\n    <View key={user.id}>\n      <Text>{user.name}</Text>\n    </View>\n  ))}\n</ScrollView>\n```\n\n## Flat List 列表\n\n使用`<FlatList />` API 实现列表的渲染\n\n```jsx\nconst [userList, setUserList] = useState([\n  { name: 'Yang Li', id: '1' },\n  { name: 'Jason Wang', id: '2' },\n  { name: 'Alex Zhao', id: '3' },\n])\n\n<FlatList\n    numColumns={2}\n    keyExtractor={item => item.id}\n    data={userList}\n    renderItem={({ item }) => <Text>{item.name}</Text>}\n/>\n```\n\n## Touchable Components 可触组件\n\n我们可以使用`<TouchableOpacity>` API 来对组件进行点击操作。下面的例子实现了点击组件时会从 View 中删除该组件。\n\n```jsx\nconst [userList, setUserList] = useState([\n  { name: 'Yang Li', id: '1' },\n  { name: 'Jason Wang', id: '2' },\n  { name: 'Alex Zhao', id: '3' },\n])\n\nconst deleteCard = selectedUser => {\n  setUserList(prevUser => {\n    return prevUser.filter(user => user.id !== selectedUser)\n  })\n}\n\nreturn (\n  <FlatList\n    numColumns={2}\n    keyExtractor={item => item.id}\n    data={userList}\n    renderItem={({ item }) => (\n      <TouchableOpacity onPress={() => deleteCard(item.id)}>\n        <Text style={styles.userCard}>{item.name}</Text>\n      </TouchableOpacity>\n    )}\n  />\n)\n```\n\n## Alerts 警示面板\n\n使用`Alert` API 对用户进行提示。\n\n```jsx\nimport { Alert } from 'react-native'\n\nconst handleSubmit = (inputValue) => {\n    if(inputValue === '') {\n        Alert.alert('Error', 'Please enter your name', [\n            {text: 'OK', onPress: () => console.log('alert closed')\n        ])\n    }\n}\n```\n\n## Keyboard Dismiss 键盘忽略\n\n点击任何区域不再显示 Keyboard\n\n```jsx\n<TouchableWithoutFeedback\n  onPress={() => {\n    keyboard.dismiss()\n    console.log('dismissed keyboard')\n  }}\n>\n  <View>\n    <Text>Code Here</Text>\n  </View>\n</TouchableWithoutFeedback>\n```\n\n## Custom Fonts 自定义字体\n\n如果想导入自定义的字体，需要使用`expo`中的`Font`库。我们首先利用`loadAsync`来加载字体，这个函数接受一个对象的参数，对象即字体引用名以及字体文件所在位置。\n\n我们同时要确保字体加载完成后再渲染组件，这里用`<AppLoading />`来做异步处理，当字体加载完成后更新 fontLoaded state。\n\n```jsx\nimport React, { useState } from 'react'\nimport * as Font from 'expo-font'\nimport Home from './screens/Home'\nimport { AppLoading } from 'expo'\n\nconst fetchFonts = () =>\n  Font.loadAsync({\n    'raleway-regular': require('./assets/fonts/Raleway-Regular.ttf'),\n    quicksand: require('./assets/fonts/Quicksand.ttf'),\n  })\n\nexport default function App() {\n  const [fontLoaded, setFontLoaded] = useState(false)\n\n  if (fontLoaded) {\n    return <Home />\n  } else {\n    return (\n      <AppLoading\n        startAsync={fetchFonts}\n        onFinish={() => setFontLoaded(true)}\n      />\n    )\n  }\n}\n```\n\n之后便可以在其他组件的`StyleSheet`中引用我们导入的字体\n\n```jsx\nexport default function Home() {\n  ;<View>\n    <Text style={styles.textPrimary}>Hello</Text>\n  </View>\n}\n\nconst styles = StyleSheet.create({\n  textPrimary: {\n    fontFamily: 'quicksand',\n    fontSize: 20,\n  },\n})\n```\n\n## Global Styles 全局样式化\n\n在 CSS 中我们可以通过`className`来做到样式化的重复利用。在 React Native 中我们同理可以创建一个单独的全局样式化文件，来管理通用的样式化。其他组件使用时只需要导入文件即可。\n\n在`styles`文件夹中创建`global.js`管理样式化\n\n```jsx\nimport {StyleSheet} from 'react-native'\n\nexport const globalStyles = StyleSheet.create({\n  boxContainer: {\n    padding: 20,\n    borderRadius: 5\n  },\n  titleText: {\n    fontFamily: 'quicksand'\n    fontWeight: 'bold'\n  }\n})\n```\n\n在其他组件中导入`globalStyles`\n\n```jsx\nimport { globalStyles } from '../styles/global'\n\nexport default function Home() {\n  return (\n    <View style={globalStyles.boxContainer}>\n      <Text style={globalStyles.titleText}>Hello</Text>\n    </View>\n  )\n}\n```\n\n# Navigation and Router 路由库\n\n## Stack Navigation 栈导航\n\n### Install Dependencies\n\n```shell\nnpm install react-navigation\nexpo install react-native-gesture-handler react-native-reanimated\nnpm install react-navigation-stack\n```\n\n### Setup Routers\n\n创建一个`router`文件夹，并创建一个`route.js`文件。\n\n如果没有在`navigationOptions`内声明样式化，会使用`defaultNavigationOptions`\n\n**route.js**\n\n```jsx\nimport { createStackNavigator } from 'react-navigation-stack'\nimport { createAppContainer } from 'react-navigation'\nimport Home from '../screens/Home'\nimport CardDetail from '../screens/CardDetails'\n\n// 默认情况下首先显示Home Screen\nconst screens = {\n  Home: {\n    screen: Home,\n    navigationOptions: {\n      title: 'AnimeKnow',\n    },\n  },\n  CardDetail: {\n    screen: CardDetail,\n    navigationOptions: {\n      title: 'Anime Details',\n    },\n  },\n}\n\nconst RouteStack = createStackNavigator(screens, {\n  defaultNavigationOptions: {\n    headerTintColor: '#4a4a4a',\n    headerStyle: { backgroundColor: '#03a9f4', height: 60 },\n  },\n})\n\nexport default createAppContainer(RouteStack)\n```\n\n**App.js**\n\n```jsx\nimport Router from './router/route'\n\nexport default function App() {\n  const [fontLoaded, setFontLoaded] = useState(false)\n\n  if (fontLoaded) {\n    return <Router />\n  } else {\n    return (\n      <AppLoading\n        startAsync={fetchFonts}\n        onFinish={() => setFontLoaded(true)}\n      />\n    )\n  }\n}\n```\n\n### Navigation with Button 按钮事件导航\n\n在之前的 Setup 中，我们默认显示的为`Home`组件，现在添加按钮来进行组件的导航。\n\n默认情况下，`react-navigation`会自动添加一个返回箭头按钮来实现 pop 组件。\n\n**Home.js**\n\n```jsx\nexport default function Home({navigation}) {\n  const handleDetailNav = () => {\n    navigation.navigate('CardDetail')\n  }\n\n  return (\n    <View>\n      <Text>Home Page</Text>\n      <Button title='View More Details' onPress={handleDetailNav}>\n    </View>\n  )\n}\n```\n\n同理添加一个`<Button />`手动实现回到上一个组件\n\n**CardDetail**\n\n```jsx\nexport default function CardDetail({navigation}) {\n  const handleReturn = () => {\n    navigation.goBack()\n  }\n\n  return (\n    <View>\n      <Text>Card Details page</Text>\n      <Button title='Go Back' onPress={handleReturn}>\n    </View>\n  )\n}\n```\n\n### Passing Data Between Components 传递数据\n\n点击每个卡片显示该卡片的信息。具体思路如下\n\n1. 使用 FlatList API 渲染所有卡片\n2. 对卡片添加`onPress`触发，并转入到`<CardDetail />`\n3. props 接受并显示数据\n\n**Home.js**\n\n```jsx\nexport default function Home({ navigation }) {\n  const [animeList, setAnimeList] = useState([\n    { key: '1', title: 'Attack on Titan', episode: 24, rating: 9.5 },\n    { key: '2', title: 'Fate Stay Night', episode: 22, rating: 7.5 },\n    { key: '3', title: 'Clannad', episode: 13, rating: 10.0 },\n  ])\n\n  return (\n    <View>\n      <FlatList\n        data={animeList}\n        renderItem={({ item }) => (\n          <TouchableOpacity\n            onPress={() => navigation.navigate('CardDetail', item)}\n          >\n            <Text>{item.title}</Text>\n          </TouchableOpacity>\n        )}\n      />\n    </View>\n  )\n}\n```\n\n在`<CardDetail />`组件中利用`getParam`获取传递的数据\n\n**CardDetail**\n\n```jsx\nexport default function CardDetail({ navigation }) {\n  return (\n    <View>\n      <Text>{navigation.getParam('title')}</Text>\n      <Text>{navigation.getParam('episode')}</Text>\n      <Text>{navigation.getParam('rating')}</Text>\n    </View>\n  )\n}\n```\n\n## Drawer Navigation 侧滑导航菜单栏\n\n\n","source":"_posts/32-react-native.md","raw":"---\ntitle: ReactNative 开发原生移动端应用\ndate: 2020-08-08 11:00:50\ntags: ['react-native', 'react', 'note']\ncategories: Notes\ncover: 'https://firebasestorage.googleapis.com/v0/b/yangliweb.appspot.com/o/1_QDQvlCg420lzRElCK4AYhw.png?alt=media&token=619670bd-3da8-4090-bbfd-8f79ae0a8267'\n---\n\n# Setup 配置\n\n## Install Expo CLI 安装\n\n确保开发环境已经安装了`Node.js`.\n\n```shell\nnpm install expo-cli --global\n```\n\n## Initialize Project 创建项目\n\n```shell\nexpo init project-name\ncd project-name\nexpo start\n```\n\n然后可以在 Expo Tools 面板中选择 Androidh 或者 IOS 模拟器。这里我们使用 Android Studiod AVD manager 模拟器。\n\n在 Android Studio 中创建虚拟环境后，直接在 Expo Tool 面板点击`Running on Android device`或者输入`a`在 terminal。第一次运行时需要在虚拟器上安装 Javascript 包以及依赖，所以安装时间会久一点。安装完成后会自动在模拟器运行 App\n\n# Fundamentals 基本概念\n\n## Views, Text & Styles 视图，文本，样式化\n\nReact 中 View 可以看作是 HTML 中的 div，我们可以在 View 添加 Text, Image. Text 跟`<p>`相似，用来渲染文本内容。StyleSheet 用来样式化元素，这里用驼峰命名跟 CSS 不同。\n\n```jsx\nimport React from 'react'\nimport { StyleSheet, Text, View } from 'react-native'\n\nexport default function App() {\n  return (\n    <View style={styles.appContainer}>\n      <Text style={styles.currRoute}>Home</Text>\n      <Text>Contact</Text>\n      <Text>Servicsse</Text>\n      <Text>ss</Text>\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  appContainer: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  currRoute: {\n    backgroundColor: 'red',\n    padding: 20,\n  },\n})\n```\n\n## Text Inputs 文本输入框\n\n使用<TextInput /> API 来填写表单更改 state。\n\n```jsx\nimport React, { useState } from 'react'\nimport { StyleSheet, Text, View, TextInput } from 'react-native'\n\nexport default function App() {\n  const [user, setUser] = useState({\n    name: '',\n    age: '',\n  })\n\n  return (\n    <View style={styles.appContainer}>\n      <Text>Enter Your Name</Text>\n      <TextInput\n        style={styles.input}\n        placeholder=\"e.g. Yang Li\"\n        onChangeText={e => setUser({ ...user, name: e })}\n      />\n      <Text>Enter Your Age</Text>\n      <TextInput\n        style={styles.input}\n        placeholder=\"e.g. 23\"\n        onChangeText={e => setUser({ ...user, age: e })}\n      />\n\n      <Text>\n        Hello\n        <Text style={styles.userInfo}>\n          {user.name} {user.age}\n        </Text>\n      </Text>\n    </View>\n  )\n}\n```\n\n## ScrollView 滑动视图\n\n在 React Native 中渲染一个列表，我们用 ES6 map 遍历数组然后渲染每个 item 为 Text 即可。默认情况下如果列表高度超过模拟机的高度会出现溢出，这时候我们可以用`<ScrollView>` API 把列表 wrap 起来就可以滚动显示。\n\n```jsx\n  const [userList, setUserList] = useState([\n    { name: 'Yang Li', id: '1' },\n    { name: 'Jason Wang', id: '2' },\n    { name: 'Alex Zhao', id: '3' },\n  ])\n\n<ScrollView>\n  {userList.map(user => (\n    <View key={user.id}>\n      <Text>{user.name}</Text>\n    </View>\n  ))}\n</ScrollView>\n```\n\n## Flat List 列表\n\n使用`<FlatList />` API 实现列表的渲染\n\n```jsx\nconst [userList, setUserList] = useState([\n  { name: 'Yang Li', id: '1' },\n  { name: 'Jason Wang', id: '2' },\n  { name: 'Alex Zhao', id: '3' },\n])\n\n<FlatList\n    numColumns={2}\n    keyExtractor={item => item.id}\n    data={userList}\n    renderItem={({ item }) => <Text>{item.name}</Text>}\n/>\n```\n\n## Touchable Components 可触组件\n\n我们可以使用`<TouchableOpacity>` API 来对组件进行点击操作。下面的例子实现了点击组件时会从 View 中删除该组件。\n\n```jsx\nconst [userList, setUserList] = useState([\n  { name: 'Yang Li', id: '1' },\n  { name: 'Jason Wang', id: '2' },\n  { name: 'Alex Zhao', id: '3' },\n])\n\nconst deleteCard = selectedUser => {\n  setUserList(prevUser => {\n    return prevUser.filter(user => user.id !== selectedUser)\n  })\n}\n\nreturn (\n  <FlatList\n    numColumns={2}\n    keyExtractor={item => item.id}\n    data={userList}\n    renderItem={({ item }) => (\n      <TouchableOpacity onPress={() => deleteCard(item.id)}>\n        <Text style={styles.userCard}>{item.name}</Text>\n      </TouchableOpacity>\n    )}\n  />\n)\n```\n\n## Alerts 警示面板\n\n使用`Alert` API 对用户进行提示。\n\n```jsx\nimport { Alert } from 'react-native'\n\nconst handleSubmit = (inputValue) => {\n    if(inputValue === '') {\n        Alert.alert('Error', 'Please enter your name', [\n            {text: 'OK', onPress: () => console.log('alert closed')\n        ])\n    }\n}\n```\n\n## Keyboard Dismiss 键盘忽略\n\n点击任何区域不再显示 Keyboard\n\n```jsx\n<TouchableWithoutFeedback\n  onPress={() => {\n    keyboard.dismiss()\n    console.log('dismissed keyboard')\n  }}\n>\n  <View>\n    <Text>Code Here</Text>\n  </View>\n</TouchableWithoutFeedback>\n```\n\n## Custom Fonts 自定义字体\n\n如果想导入自定义的字体，需要使用`expo`中的`Font`库。我们首先利用`loadAsync`来加载字体，这个函数接受一个对象的参数，对象即字体引用名以及字体文件所在位置。\n\n我们同时要确保字体加载完成后再渲染组件，这里用`<AppLoading />`来做异步处理，当字体加载完成后更新 fontLoaded state。\n\n```jsx\nimport React, { useState } from 'react'\nimport * as Font from 'expo-font'\nimport Home from './screens/Home'\nimport { AppLoading } from 'expo'\n\nconst fetchFonts = () =>\n  Font.loadAsync({\n    'raleway-regular': require('./assets/fonts/Raleway-Regular.ttf'),\n    quicksand: require('./assets/fonts/Quicksand.ttf'),\n  })\n\nexport default function App() {\n  const [fontLoaded, setFontLoaded] = useState(false)\n\n  if (fontLoaded) {\n    return <Home />\n  } else {\n    return (\n      <AppLoading\n        startAsync={fetchFonts}\n        onFinish={() => setFontLoaded(true)}\n      />\n    )\n  }\n}\n```\n\n之后便可以在其他组件的`StyleSheet`中引用我们导入的字体\n\n```jsx\nexport default function Home() {\n  ;<View>\n    <Text style={styles.textPrimary}>Hello</Text>\n  </View>\n}\n\nconst styles = StyleSheet.create({\n  textPrimary: {\n    fontFamily: 'quicksand',\n    fontSize: 20,\n  },\n})\n```\n\n## Global Styles 全局样式化\n\n在 CSS 中我们可以通过`className`来做到样式化的重复利用。在 React Native 中我们同理可以创建一个单独的全局样式化文件，来管理通用的样式化。其他组件使用时只需要导入文件即可。\n\n在`styles`文件夹中创建`global.js`管理样式化\n\n```jsx\nimport {StyleSheet} from 'react-native'\n\nexport const globalStyles = StyleSheet.create({\n  boxContainer: {\n    padding: 20,\n    borderRadius: 5\n  },\n  titleText: {\n    fontFamily: 'quicksand'\n    fontWeight: 'bold'\n  }\n})\n```\n\n在其他组件中导入`globalStyles`\n\n```jsx\nimport { globalStyles } from '../styles/global'\n\nexport default function Home() {\n  return (\n    <View style={globalStyles.boxContainer}>\n      <Text style={globalStyles.titleText}>Hello</Text>\n    </View>\n  )\n}\n```\n\n# Navigation and Router 路由库\n\n## Stack Navigation 栈导航\n\n### Install Dependencies\n\n```shell\nnpm install react-navigation\nexpo install react-native-gesture-handler react-native-reanimated\nnpm install react-navigation-stack\n```\n\n### Setup Routers\n\n创建一个`router`文件夹，并创建一个`route.js`文件。\n\n如果没有在`navigationOptions`内声明样式化，会使用`defaultNavigationOptions`\n\n**route.js**\n\n```jsx\nimport { createStackNavigator } from 'react-navigation-stack'\nimport { createAppContainer } from 'react-navigation'\nimport Home from '../screens/Home'\nimport CardDetail from '../screens/CardDetails'\n\n// 默认情况下首先显示Home Screen\nconst screens = {\n  Home: {\n    screen: Home,\n    navigationOptions: {\n      title: 'AnimeKnow',\n    },\n  },\n  CardDetail: {\n    screen: CardDetail,\n    navigationOptions: {\n      title: 'Anime Details',\n    },\n  },\n}\n\nconst RouteStack = createStackNavigator(screens, {\n  defaultNavigationOptions: {\n    headerTintColor: '#4a4a4a',\n    headerStyle: { backgroundColor: '#03a9f4', height: 60 },\n  },\n})\n\nexport default createAppContainer(RouteStack)\n```\n\n**App.js**\n\n```jsx\nimport Router from './router/route'\n\nexport default function App() {\n  const [fontLoaded, setFontLoaded] = useState(false)\n\n  if (fontLoaded) {\n    return <Router />\n  } else {\n    return (\n      <AppLoading\n        startAsync={fetchFonts}\n        onFinish={() => setFontLoaded(true)}\n      />\n    )\n  }\n}\n```\n\n### Navigation with Button 按钮事件导航\n\n在之前的 Setup 中，我们默认显示的为`Home`组件，现在添加按钮来进行组件的导航。\n\n默认情况下，`react-navigation`会自动添加一个返回箭头按钮来实现 pop 组件。\n\n**Home.js**\n\n```jsx\nexport default function Home({navigation}) {\n  const handleDetailNav = () => {\n    navigation.navigate('CardDetail')\n  }\n\n  return (\n    <View>\n      <Text>Home Page</Text>\n      <Button title='View More Details' onPress={handleDetailNav}>\n    </View>\n  )\n}\n```\n\n同理添加一个`<Button />`手动实现回到上一个组件\n\n**CardDetail**\n\n```jsx\nexport default function CardDetail({navigation}) {\n  const handleReturn = () => {\n    navigation.goBack()\n  }\n\n  return (\n    <View>\n      <Text>Card Details page</Text>\n      <Button title='Go Back' onPress={handleReturn}>\n    </View>\n  )\n}\n```\n\n### Passing Data Between Components 传递数据\n\n点击每个卡片显示该卡片的信息。具体思路如下\n\n1. 使用 FlatList API 渲染所有卡片\n2. 对卡片添加`onPress`触发，并转入到`<CardDetail />`\n3. props 接受并显示数据\n\n**Home.js**\n\n```jsx\nexport default function Home({ navigation }) {\n  const [animeList, setAnimeList] = useState([\n    { key: '1', title: 'Attack on Titan', episode: 24, rating: 9.5 },\n    { key: '2', title: 'Fate Stay Night', episode: 22, rating: 7.5 },\n    { key: '3', title: 'Clannad', episode: 13, rating: 10.0 },\n  ])\n\n  return (\n    <View>\n      <FlatList\n        data={animeList}\n        renderItem={({ item }) => (\n          <TouchableOpacity\n            onPress={() => navigation.navigate('CardDetail', item)}\n          >\n            <Text>{item.title}</Text>\n          </TouchableOpacity>\n        )}\n      />\n    </View>\n  )\n}\n```\n\n在`<CardDetail />`组件中利用`getParam`获取传递的数据\n\n**CardDetail**\n\n```jsx\nexport default function CardDetail({ navigation }) {\n  return (\n    <View>\n      <Text>{navigation.getParam('title')}</Text>\n      <Text>{navigation.getParam('episode')}</Text>\n      <Text>{navigation.getParam('rating')}</Text>\n    </View>\n  )\n}\n```\n\n## Drawer Navigation 侧滑导航菜单栏\n\n\n","slug":"32-react-native","published":1,"updated":"2020-08-09T22:01:46.564Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckdnmtte0002mrwuibsp2ckng","content":"<h1 id=\"Setup-配置\"><a href=\"#Setup-配置\" class=\"headerlink\" title=\"Setup 配置\"></a>Setup 配置</h1><h2 id=\"Install-Expo-CLI-安装\"><a href=\"#Install-Expo-CLI-安装\" class=\"headerlink\" title=\"Install Expo CLI 安装\"></a>Install Expo CLI 安装</h2><p>确保开发环境已经安装了<code>Node.js</code>.</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install expo-cli --global</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Initialize-Project-创建项目\"><a href=\"#Initialize-Project-创建项目\" class=\"headerlink\" title=\"Initialize Project 创建项目\"></a>Initialize Project 创建项目</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">expo init project-name</span><br><span class=\"line\">cd project-name</span><br><span class=\"line\">expo start</span><br></pre></td></tr></table></figure>\n\n<p>然后可以在 Expo Tools 面板中选择 Androidh 或者 IOS 模拟器。这里我们使用 Android Studiod AVD manager 模拟器。</p>\n<p>在 Android Studio 中创建虚拟环境后，直接在 Expo Tool 面板点击<code>Running on Android device</code>或者输入<code>a</code>在 terminal。第一次运行时需要在虚拟器上安装 Javascript 包以及依赖，所以安装时间会久一点。安装完成后会自动在模拟器运行 App</p>\n<h1 id=\"Fundamentals-基本概念\"><a href=\"#Fundamentals-基本概念\" class=\"headerlink\" title=\"Fundamentals 基本概念\"></a>Fundamentals 基本概念</h1><h2 id=\"Views-Text-amp-Styles-视图，文本，样式化\"><a href=\"#Views-Text-amp-Styles-视图，文本，样式化\" class=\"headerlink\" title=\"Views, Text &amp; Styles 视图，文本，样式化\"></a>Views, Text &amp; Styles 视图，文本，样式化</h2><p>React 中 View 可以看作是 HTML 中的 div，我们可以在 View 添加 Text, Image. Text 跟<code>&lt;p&gt;</code>相似，用来渲染文本内容。StyleSheet 用来样式化元素，这里用驼峰命名跟 CSS 不同。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; StyleSheet, Text, View &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-native'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;View style=&#123;styles.appContainer&#125;&gt;</span><br><span class=\"line\">      &lt;Text style=&#123;styles.currRoute&#125;&gt;Home&lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;Text&gt;Contact&lt;/</span>Text&gt;</span><br><span class=\"line\">      &lt;Text&gt;Servicsse&lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;Text&gt;ss&lt;/</span>Text&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/View&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">const styles = StyleSheet.create(&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">  appContainer: &#123;</span></span><br><span class=\"line\"><span class=\"regexp\">    flex: 1,</span></span><br><span class=\"line\"><span class=\"regexp\">    alignItems: 'center',</span></span><br><span class=\"line\"><span class=\"regexp\">    justifyContent: 'center',</span></span><br><span class=\"line\"><span class=\"regexp\">  &#125;,</span></span><br><span class=\"line\"><span class=\"regexp\">  currRoute: &#123;</span></span><br><span class=\"line\"><span class=\"regexp\">    backgroundColor: 'red',</span></span><br><span class=\"line\"><span class=\"regexp\">    padding: 20,</span></span><br><span class=\"line\"><span class=\"regexp\">  &#125;,</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;)</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Text-Inputs-文本输入框\"><a href=\"#Text-Inputs-文本输入框\" class=\"headerlink\" title=\"Text Inputs 文本输入框\"></a>Text Inputs 文本输入框</h2><p>使用<TextInput> API 来填写表单更改 state。</TextInput></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; StyleSheet, Text, View, TextInput &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-native'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [user, setUser] = useState(&#123;</span><br><span class=\"line\">    name: <span class=\"string\">''</span>,</span><br><span class=\"line\">    age: <span class=\"string\">''</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;View style=&#123;styles.appContainer&#125;&gt;</span><br><span class=\"line\">      &lt;Text&gt;Enter Your Name&lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;TextInput</span></span><br><span class=\"line\"><span class=\"regexp\">        style=&#123;styles.input&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">        placeholder=\"e.g. Yang Li\"</span></span><br><span class=\"line\"><span class=\"regexp\">        onChangeText=&#123;e =&gt; setUser(&#123; ...user, name: e &#125;)&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">      /</span>&gt;</span><br><span class=\"line\">      &lt;Text&gt;Enter Your Age&lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;TextInput</span></span><br><span class=\"line\"><span class=\"regexp\">        style=&#123;styles.input&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">        placeholder=\"e.g. 23\"</span></span><br><span class=\"line\"><span class=\"regexp\">        onChangeText=&#123;e =&gt; setUser(&#123; ...user, age: e &#125;)&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">      /</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">      &lt;Text&gt;</span><br><span class=\"line\">        Hello</span><br><span class=\"line\">        &lt;Text style=&#123;styles.userInfo&#125;&gt;</span><br><span class=\"line\">          &#123;user.name&#125; &#123;user.age&#125;</span><br><span class=\"line\">        &lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;/</span>Text&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/View&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ScrollView-滑动视图\"><a href=\"#ScrollView-滑动视图\" class=\"headerlink\" title=\"ScrollView 滑动视图\"></a>ScrollView 滑动视图</h2><p>在 React Native 中渲染一个列表，我们用 ES6 map 遍历数组然后渲染每个 item 为 Text 即可。默认情况下如果列表高度超过模拟机的高度会出现溢出，这时候我们可以用<code>&lt;ScrollView&gt;</code> API 把列表 wrap 起来就可以滚动显示。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"keyword\">const</span> [userList, setUserList] = useState([</span><br><span class=\"line\">    &#123; <span class=\"attr\">name</span>: <span class=\"string\">'Yang Li'</span>, <span class=\"attr\">id</span>: <span class=\"string\">'1'</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">name</span>: <span class=\"string\">'Jason Wang'</span>, <span class=\"attr\">id</span>: <span class=\"string\">'2'</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">name</span>: <span class=\"string\">'Alex Zhao'</span>, <span class=\"attr\">id</span>: <span class=\"string\">'3'</span> &#125;,</span><br><span class=\"line\">  ])</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;ScrollView&gt;</span><br><span class=\"line\">  &#123;userList.map(<span class=\"function\"><span class=\"params\">user</span> =&gt;</span> (</span><br><span class=\"line\">    &lt;View key=&#123;user.id&#125;&gt;</span><br><span class=\"line\">      &lt;Text&gt;&#123;user.name&#125;&lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>View&gt;</span><br><span class=\"line\">  ))&#125;</span><br><span class=\"line\">&lt;<span class=\"regexp\">/ScrollView&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Flat-List-列表\"><a href=\"#Flat-List-列表\" class=\"headerlink\" title=\"Flat List 列表\"></a>Flat List 列表</h2><p>使用<code>&lt;FlatList /&gt;</code> API 实现列表的渲染</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> [userList, setUserList] = useState([</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'Yang Li'</span>, <span class=\"attr\">id</span>: <span class=\"string\">'1'</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'Jason Wang'</span>, <span class=\"attr\">id</span>: <span class=\"string\">'2'</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'Alex Zhao'</span>, <span class=\"attr\">id</span>: <span class=\"string\">'3'</span> &#125;,</span><br><span class=\"line\">])</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;FlatList</span><br><span class=\"line\">    numColumns=&#123;<span class=\"number\">2</span>&#125;</span><br><span class=\"line\">    keyExtractor=&#123;item =&gt; item.id&#125;</span><br><span class=\"line\">    data=&#123;userList&#125;</span><br><span class=\"line\">    renderItem=&#123;(&#123; item &#125;) =&gt; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Text</span>&gt;</span>&#123;item.name&#125;<span class=\"tag\">&lt;/<span class=\"name\">Text</span>&gt;</span></span>&#125;</span><br><span class=\"line\">/&gt;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Touchable-Components-可触组件\"><a href=\"#Touchable-Components-可触组件\" class=\"headerlink\" title=\"Touchable Components 可触组件\"></a>Touchable Components 可触组件</h2><p>我们可以使用<code>&lt;TouchableOpacity&gt;</code> API 来对组件进行点击操作。下面的例子实现了点击组件时会从 View 中删除该组件。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> [userList, setUserList] = useState([</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'Yang Li'</span>, <span class=\"attr\">id</span>: <span class=\"string\">'1'</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'Jason Wang'</span>, <span class=\"attr\">id</span>: <span class=\"string\">'2'</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'Alex Zhao'</span>, <span class=\"attr\">id</span>: <span class=\"string\">'3'</span> &#125;,</span><br><span class=\"line\">])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> deleteCard = <span class=\"function\"><span class=\"params\">selectedUser</span> =&gt;</span> &#123;</span><br><span class=\"line\">  setUserList(<span class=\"function\"><span class=\"params\">prevUser</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> prevUser.filter(<span class=\"function\"><span class=\"params\">user</span> =&gt;</span> user.id !== selectedUser)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">return</span> (</span><br><span class=\"line\">  &lt;FlatList</span><br><span class=\"line\">    numColumns=&#123;<span class=\"number\">2</span>&#125;</span><br><span class=\"line\">    keyExtractor=&#123;item =&gt; item.id&#125;</span><br><span class=\"line\">    data=&#123;userList&#125;</span><br><span class=\"line\">    renderItem=&#123;(&#123; item &#125;) =&gt; (</span><br><span class=\"line\">      &lt;TouchableOpacity onPress=&#123;() =&gt; deleteCard(item.id)&#125;&gt;</span><br><span class=\"line\">        &lt;Text style=&#123;styles.userCard&#125;&gt;&#123;item.name&#125;&lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;/</span>TouchableOpacity&gt;</span><br><span class=\"line\">    )&#125;</span><br><span class=\"line\">  /&gt;</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Alerts-警示面板\"><a href=\"#Alerts-警示面板\" class=\"headerlink\" title=\"Alerts 警示面板\"></a>Alerts 警示面板</h2><p>使用<code>Alert</code> API 对用户进行提示。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Alert &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-native'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> handleSubmit = <span class=\"function\">(<span class=\"params\">inputValue</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(inputValue === <span class=\"string\">''</span>) &#123;</span><br><span class=\"line\">        Alert.alert(<span class=\"string\">'Error'</span>, <span class=\"string\">'Please enter your name'</span>, [</span><br><span class=\"line\">            &#123;<span class=\"attr\">text</span>: <span class=\"string\">'OK'</span>, <span class=\"attr\">onPress</span>: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">'alert closed'</span>)</span><br><span class=\"line\">        ])</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Keyboard-Dismiss-键盘忽略\"><a href=\"#Keyboard-Dismiss-键盘忽略\" class=\"headerlink\" title=\"Keyboard Dismiss 键盘忽略\"></a>Keyboard Dismiss 键盘忽略</h2><p>点击任何区域不再显示 Keyboard</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;TouchableWithoutFeedback</span><br><span class=\"line\">  onPress=&#123;() =&gt; &#123;</span><br><span class=\"line\">    keyboard.dismiss()</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'dismissed keyboard'</span>)</span><br><span class=\"line\">  &#125;&#125;</span><br><span class=\"line\">&gt;</span><br><span class=\"line\">  &lt;View&gt;</span><br><span class=\"line\">    &lt;Text&gt;Code Here&lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  &lt;/</span>View&gt;</span><br><span class=\"line\">&lt;<span class=\"regexp\">/TouchableWithoutFeedback&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Custom-Fonts-自定义字体\"><a href=\"#Custom-Fonts-自定义字体\" class=\"headerlink\" title=\"Custom Fonts 自定义字体\"></a>Custom Fonts 自定义字体</h2><p>如果想导入自定义的字体，需要使用<code>expo</code>中的<code>Font</code>库。我们首先利用<code>loadAsync</code>来加载字体，这个函数接受一个对象的参数，对象即字体引用名以及字体文件所在位置。</p>\n<p>我们同时要确保字体加载完成后再渲染组件，这里用<code>&lt;AppLoading /&gt;</code>来做异步处理，当字体加载完成后更新 fontLoaded state。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> Font <span class=\"keyword\">from</span> <span class=\"string\">'expo-font'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> Home <span class=\"keyword\">from</span> <span class=\"string\">'./screens/Home'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; AppLoading &#125; <span class=\"keyword\">from</span> <span class=\"string\">'expo'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> fetchFonts = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span></span><br><span class=\"line\">  Font.loadAsync(&#123;</span><br><span class=\"line\">    <span class=\"string\">'raleway-regular'</span>: <span class=\"built_in\">require</span>(<span class=\"string\">'./assets/fonts/Raleway-Regular.ttf'</span>),</span><br><span class=\"line\">    quicksand: <span class=\"built_in\">require</span>(<span class=\"string\">'./assets/fonts/Quicksand.ttf'</span>),</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [fontLoaded, setFontLoaded] = useState(<span class=\"literal\">false</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (fontLoaded) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Home</span> /&gt;</span></span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;AppLoading</span><br><span class=\"line\">        startAsync=&#123;fetchFonts&#125;</span><br><span class=\"line\">        onFinish=&#123;() =&gt; setFontLoaded(<span class=\"literal\">true</span>)&#125;</span><br><span class=\"line\">      /&gt;</span><br><span class=\"line\">    )</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>之后便可以在其他组件的<code>StyleSheet</code>中引用我们导入的字体</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Home</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  ;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">View</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">Text</span> <span class=\"attr\">style</span>=<span class=\"string\">&#123;styles.textPrimary&#125;</span>&gt;</span>Hello<span class=\"tag\">&lt;/<span class=\"name\">Text</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;/<span class=\"name\">View</span>&gt;</span></span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> styles = StyleSheet.create(&#123;</span><br><span class=\"line\">  textPrimary: &#123;</span><br><span class=\"line\">    fontFamily: <span class=\"string\">'quicksand'</span>,</span><br><span class=\"line\">    fontSize: <span class=\"number\">20</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Global-Styles-全局样式化\"><a href=\"#Global-Styles-全局样式化\" class=\"headerlink\" title=\"Global Styles 全局样式化\"></a>Global Styles 全局样式化</h2><p>在 CSS 中我们可以通过<code>className</code>来做到样式化的重复利用。在 React Native 中我们同理可以创建一个单独的全局样式化文件，来管理通用的样式化。其他组件使用时只需要导入文件即可。</p>\n<p>在<code>styles</code>文件夹中创建<code>global.js</code>管理样式化</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;StyleSheet&#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-native'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> globalStyles = StyleSheet.create(&#123;</span><br><span class=\"line\">  boxContainer: &#123;</span><br><span class=\"line\">    padding: <span class=\"number\">20</span>,</span><br><span class=\"line\">    borderRadius: <span class=\"number\">5</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  titleText: &#123;</span><br><span class=\"line\">    fontFamily: <span class=\"string\">'quicksand'</span></span><br><span class=\"line\">    fontWeight: <span class=\"string\">'bold'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>在其他组件中导入<code>globalStyles</code></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; globalStyles &#125; <span class=\"keyword\">from</span> <span class=\"string\">'../styles/global'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Home</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;View style=&#123;globalStyles.boxContainer&#125;&gt;</span><br><span class=\"line\">      &lt;Text style=&#123;globalStyles.titleText&#125;&gt;Hello&lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>View&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Navigation-and-Router-路由库\"><a href=\"#Navigation-and-Router-路由库\" class=\"headerlink\" title=\"Navigation and Router 路由库\"></a>Navigation and Router 路由库</h1><h2 id=\"Stack-Navigation-栈导航\"><a href=\"#Stack-Navigation-栈导航\" class=\"headerlink\" title=\"Stack Navigation 栈导航\"></a>Stack Navigation 栈导航</h2><h3 id=\"Install-Dependencies\"><a href=\"#Install-Dependencies\" class=\"headerlink\" title=\"Install Dependencies\"></a>Install Dependencies</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install react-navigation</span><br><span class=\"line\">expo install react-native-gesture-handler react-native-reanimated</span><br><span class=\"line\">npm install react-navigation-stack</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Setup-Routers\"><a href=\"#Setup-Routers\" class=\"headerlink\" title=\"Setup Routers\"></a>Setup Routers</h3><p>创建一个<code>router</code>文件夹，并创建一个<code>route.js</code>文件。</p>\n<p>如果没有在<code>navigationOptions</code>内声明样式化，会使用<code>defaultNavigationOptions</code></p>\n<p><strong>route.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStackNavigator &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-navigation-stack'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createAppContainer &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-navigation'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> Home <span class=\"keyword\">from</span> <span class=\"string\">'../screens/Home'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> CardDetail <span class=\"keyword\">from</span> <span class=\"string\">'../screens/CardDetails'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 默认情况下首先显示Home Screen</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> screens = &#123;</span><br><span class=\"line\">  Home: &#123;</span><br><span class=\"line\">    screen: Home,</span><br><span class=\"line\">    navigationOptions: &#123;</span><br><span class=\"line\">      title: <span class=\"string\">'AnimeKnow'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  CardDetail: &#123;</span><br><span class=\"line\">    screen: CardDetail,</span><br><span class=\"line\">    navigationOptions: &#123;</span><br><span class=\"line\">      title: <span class=\"string\">'Anime Details'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> RouteStack = createStackNavigator(screens, &#123;</span><br><span class=\"line\">  defaultNavigationOptions: &#123;</span><br><span class=\"line\">    headerTintColor: <span class=\"string\">'#4a4a4a'</span>,</span><br><span class=\"line\">    headerStyle: &#123; <span class=\"attr\">backgroundColor</span>: <span class=\"string\">'#03a9f4'</span>, <span class=\"attr\">height</span>: <span class=\"number\">60</span> &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> createAppContainer(RouteStack)</span><br></pre></td></tr></table></figure>\n\n<p><strong>App.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> Router <span class=\"keyword\">from</span> <span class=\"string\">'./router/route'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [fontLoaded, setFontLoaded] = useState(<span class=\"literal\">false</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (fontLoaded) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Router</span> /&gt;</span></span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;AppLoading</span><br><span class=\"line\">        startAsync=&#123;fetchFonts&#125;</span><br><span class=\"line\">        onFinish=&#123;() =&gt; setFontLoaded(<span class=\"literal\">true</span>)&#125;</span><br><span class=\"line\">      /&gt;</span><br><span class=\"line\">    )</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Navigation-with-Button-按钮事件导航\"><a href=\"#Navigation-with-Button-按钮事件导航\" class=\"headerlink\" title=\"Navigation with Button 按钮事件导航\"></a>Navigation with Button 按钮事件导航</h3><p>在之前的 Setup 中，我们默认显示的为<code>Home</code>组件，现在添加按钮来进行组件的导航。</p>\n<p>默认情况下，<code>react-navigation</code>会自动添加一个返回箭头按钮来实现 pop 组件。</p>\n<p><strong>Home.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Home</span>(<span class=\"params\">&#123;navigation&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleDetailNav = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    navigation.navigate(<span class=\"string\">'CardDetail'</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;View&gt;</span><br><span class=\"line\">      &lt;Text&gt;Home Page&lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;Button title='View More Details' onPress=&#123;handleDetailNav&#125;&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>View&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>同理添加一个<code>&lt;Button /&gt;</code>手动实现回到上一个组件</p>\n<p><strong>CardDetail</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">CardDetail</span>(<span class=\"params\">&#123;navigation&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleReturn = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    navigation.goBack()</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;View&gt;</span><br><span class=\"line\">      &lt;Text&gt;Card Details page&lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;Button title='Go Back' onPress=&#123;handleReturn&#125;&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>View&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Passing-Data-Between-Components-传递数据\"><a href=\"#Passing-Data-Between-Components-传递数据\" class=\"headerlink\" title=\"Passing Data Between Components 传递数据\"></a>Passing Data Between Components 传递数据</h3><p>点击每个卡片显示该卡片的信息。具体思路如下</p>\n<ol>\n<li>使用 FlatList API 渲染所有卡片</li>\n<li>对卡片添加<code>onPress</code>触发，并转入到<code>&lt;CardDetail /&gt;</code></li>\n<li>props 接受并显示数据</li>\n</ol>\n<p><strong>Home.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Home</span>(<span class=\"params\">&#123; navigation &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [animeList, setAnimeList] = useState([</span><br><span class=\"line\">    &#123; <span class=\"attr\">key</span>: <span class=\"string\">'1'</span>, <span class=\"attr\">title</span>: <span class=\"string\">'Attack on Titan'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">24</span>, <span class=\"attr\">rating</span>: <span class=\"number\">9.5</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">key</span>: <span class=\"string\">'2'</span>, <span class=\"attr\">title</span>: <span class=\"string\">'Fate Stay Night'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">22</span>, <span class=\"attr\">rating</span>: <span class=\"number\">7.5</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">key</span>: <span class=\"string\">'3'</span>, <span class=\"attr\">title</span>: <span class=\"string\">'Clannad'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">13</span>, <span class=\"attr\">rating</span>: <span class=\"number\">10.0</span> &#125;,</span><br><span class=\"line\">  ])</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;View&gt;</span><br><span class=\"line\">      &lt;FlatList</span><br><span class=\"line\">        data=&#123;animeList&#125;</span><br><span class=\"line\">        renderItem=&#123;(&#123; item &#125;) =&gt; (</span><br><span class=\"line\">          &lt;TouchableOpacity</span><br><span class=\"line\">            onPress=&#123;() =&gt; navigation.navigate(<span class=\"string\">'CardDetail'</span>, item)&#125;</span><br><span class=\"line\">          &gt;</span><br><span class=\"line\">            &lt;Text&gt;&#123;item.title&#125;&lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">          &lt;/</span>TouchableOpacity&gt;</span><br><span class=\"line\">        )&#125;</span><br><span class=\"line\">      /&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/View&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>在<code>&lt;CardDetail /&gt;</code>组件中利用<code>getParam</code>获取传递的数据</p>\n<p><strong>CardDetail</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">CardDetail</span>(<span class=\"params\">&#123; navigation &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;View&gt;</span><br><span class=\"line\">      &lt;Text&gt;&#123;navigation.getParam(<span class=\"string\">'title'</span>)&#125;&lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;Text&gt;&#123;navigation.getParam('episode')&#125;&lt;/</span>Text&gt;</span><br><span class=\"line\">      &lt;Text&gt;&#123;navigation.getParam(<span class=\"string\">'rating'</span>)&#125;&lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>View&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Drawer-Navigation-侧滑导航菜单栏\"><a href=\"#Drawer-Navigation-侧滑导航菜单栏\" class=\"headerlink\" title=\"Drawer Navigation 侧滑导航菜单栏\"></a>Drawer Navigation 侧滑导航菜单栏</h2>","site":{"data":{"link":[{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Personal Website","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Portfolio","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平台"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平台"}]},{"class_name":"友情链接","class_desc":"我的小伙伴们","link_list":[{"name":"JerryC","link":"https://jerryc.me/","avatar":"https://jerryc.me/image/avatar.png","descr":"今日事,今日毕"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网誌框架"}]}]}},"excerpt":"","more":"<h1 id=\"Setup-配置\"><a href=\"#Setup-配置\" class=\"headerlink\" title=\"Setup 配置\"></a>Setup 配置</h1><h2 id=\"Install-Expo-CLI-安装\"><a href=\"#Install-Expo-CLI-安装\" class=\"headerlink\" title=\"Install Expo CLI 安装\"></a>Install Expo CLI 安装</h2><p>确保开发环境已经安装了<code>Node.js</code>.</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install expo-cli --global</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Initialize-Project-创建项目\"><a href=\"#Initialize-Project-创建项目\" class=\"headerlink\" title=\"Initialize Project 创建项目\"></a>Initialize Project 创建项目</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">expo init project-name</span><br><span class=\"line\">cd project-name</span><br><span class=\"line\">expo start</span><br></pre></td></tr></table></figure>\n\n<p>然后可以在 Expo Tools 面板中选择 Androidh 或者 IOS 模拟器。这里我们使用 Android Studiod AVD manager 模拟器。</p>\n<p>在 Android Studio 中创建虚拟环境后，直接在 Expo Tool 面板点击<code>Running on Android device</code>或者输入<code>a</code>在 terminal。第一次运行时需要在虚拟器上安装 Javascript 包以及依赖，所以安装时间会久一点。安装完成后会自动在模拟器运行 App</p>\n<h1 id=\"Fundamentals-基本概念\"><a href=\"#Fundamentals-基本概念\" class=\"headerlink\" title=\"Fundamentals 基本概念\"></a>Fundamentals 基本概念</h1><h2 id=\"Views-Text-amp-Styles-视图，文本，样式化\"><a href=\"#Views-Text-amp-Styles-视图，文本，样式化\" class=\"headerlink\" title=\"Views, Text &amp; Styles 视图，文本，样式化\"></a>Views, Text &amp; Styles 视图，文本，样式化</h2><p>React 中 View 可以看作是 HTML 中的 div，我们可以在 View 添加 Text, Image. Text 跟<code>&lt;p&gt;</code>相似，用来渲染文本内容。StyleSheet 用来样式化元素，这里用驼峰命名跟 CSS 不同。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; StyleSheet, Text, View &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-native'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;View style=&#123;styles.appContainer&#125;&gt;</span><br><span class=\"line\">      &lt;Text style=&#123;styles.currRoute&#125;&gt;Home&lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;Text&gt;Contact&lt;/</span>Text&gt;</span><br><span class=\"line\">      &lt;Text&gt;Servicsse&lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;Text&gt;ss&lt;/</span>Text&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/View&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">const styles = StyleSheet.create(&#123;</span></span><br><span class=\"line\"><span class=\"regexp\">  appContainer: &#123;</span></span><br><span class=\"line\"><span class=\"regexp\">    flex: 1,</span></span><br><span class=\"line\"><span class=\"regexp\">    alignItems: 'center',</span></span><br><span class=\"line\"><span class=\"regexp\">    justifyContent: 'center',</span></span><br><span class=\"line\"><span class=\"regexp\">  &#125;,</span></span><br><span class=\"line\"><span class=\"regexp\">  currRoute: &#123;</span></span><br><span class=\"line\"><span class=\"regexp\">    backgroundColor: 'red',</span></span><br><span class=\"line\"><span class=\"regexp\">    padding: 20,</span></span><br><span class=\"line\"><span class=\"regexp\">  &#125;,</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;)</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Text-Inputs-文本输入框\"><a href=\"#Text-Inputs-文本输入框\" class=\"headerlink\" title=\"Text Inputs 文本输入框\"></a>Text Inputs 文本输入框</h2><p>使用<TextInput> API 来填写表单更改 state。</TextInput></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; StyleSheet, Text, View, TextInput &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-native'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [user, setUser] = useState(&#123;</span><br><span class=\"line\">    name: <span class=\"string\">''</span>,</span><br><span class=\"line\">    age: <span class=\"string\">''</span>,</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;View style=&#123;styles.appContainer&#125;&gt;</span><br><span class=\"line\">      &lt;Text&gt;Enter Your Name&lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;TextInput</span></span><br><span class=\"line\"><span class=\"regexp\">        style=&#123;styles.input&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">        placeholder=\"e.g. Yang Li\"</span></span><br><span class=\"line\"><span class=\"regexp\">        onChangeText=&#123;e =&gt; setUser(&#123; ...user, name: e &#125;)&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">      /</span>&gt;</span><br><span class=\"line\">      &lt;Text&gt;Enter Your Age&lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;TextInput</span></span><br><span class=\"line\"><span class=\"regexp\">        style=&#123;styles.input&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">        placeholder=\"e.g. 23\"</span></span><br><span class=\"line\"><span class=\"regexp\">        onChangeText=&#123;e =&gt; setUser(&#123; ...user, age: e &#125;)&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">      /</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">      &lt;Text&gt;</span><br><span class=\"line\">        Hello</span><br><span class=\"line\">        &lt;Text style=&#123;styles.userInfo&#125;&gt;</span><br><span class=\"line\">          &#123;user.name&#125; &#123;user.age&#125;</span><br><span class=\"line\">        &lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;/</span>Text&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/View&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ScrollView-滑动视图\"><a href=\"#ScrollView-滑动视图\" class=\"headerlink\" title=\"ScrollView 滑动视图\"></a>ScrollView 滑动视图</h2><p>在 React Native 中渲染一个列表，我们用 ES6 map 遍历数组然后渲染每个 item 为 Text 即可。默认情况下如果列表高度超过模拟机的高度会出现溢出，这时候我们可以用<code>&lt;ScrollView&gt;</code> API 把列表 wrap 起来就可以滚动显示。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"keyword\">const</span> [userList, setUserList] = useState([</span><br><span class=\"line\">    &#123; <span class=\"attr\">name</span>: <span class=\"string\">'Yang Li'</span>, <span class=\"attr\">id</span>: <span class=\"string\">'1'</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">name</span>: <span class=\"string\">'Jason Wang'</span>, <span class=\"attr\">id</span>: <span class=\"string\">'2'</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">name</span>: <span class=\"string\">'Alex Zhao'</span>, <span class=\"attr\">id</span>: <span class=\"string\">'3'</span> &#125;,</span><br><span class=\"line\">  ])</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;ScrollView&gt;</span><br><span class=\"line\">  &#123;userList.map(<span class=\"function\"><span class=\"params\">user</span> =&gt;</span> (</span><br><span class=\"line\">    &lt;View key=&#123;user.id&#125;&gt;</span><br><span class=\"line\">      &lt;Text&gt;&#123;user.name&#125;&lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>View&gt;</span><br><span class=\"line\">  ))&#125;</span><br><span class=\"line\">&lt;<span class=\"regexp\">/ScrollView&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Flat-List-列表\"><a href=\"#Flat-List-列表\" class=\"headerlink\" title=\"Flat List 列表\"></a>Flat List 列表</h2><p>使用<code>&lt;FlatList /&gt;</code> API 实现列表的渲染</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> [userList, setUserList] = useState([</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'Yang Li'</span>, <span class=\"attr\">id</span>: <span class=\"string\">'1'</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'Jason Wang'</span>, <span class=\"attr\">id</span>: <span class=\"string\">'2'</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'Alex Zhao'</span>, <span class=\"attr\">id</span>: <span class=\"string\">'3'</span> &#125;,</span><br><span class=\"line\">])</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;FlatList</span><br><span class=\"line\">    numColumns=&#123;<span class=\"number\">2</span>&#125;</span><br><span class=\"line\">    keyExtractor=&#123;item =&gt; item.id&#125;</span><br><span class=\"line\">    data=&#123;userList&#125;</span><br><span class=\"line\">    renderItem=&#123;(&#123; item &#125;) =&gt; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Text</span>&gt;</span>&#123;item.name&#125;<span class=\"tag\">&lt;/<span class=\"name\">Text</span>&gt;</span></span>&#125;</span><br><span class=\"line\">/&gt;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Touchable-Components-可触组件\"><a href=\"#Touchable-Components-可触组件\" class=\"headerlink\" title=\"Touchable Components 可触组件\"></a>Touchable Components 可触组件</h2><p>我们可以使用<code>&lt;TouchableOpacity&gt;</code> API 来对组件进行点击操作。下面的例子实现了点击组件时会从 View 中删除该组件。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> [userList, setUserList] = useState([</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'Yang Li'</span>, <span class=\"attr\">id</span>: <span class=\"string\">'1'</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'Jason Wang'</span>, <span class=\"attr\">id</span>: <span class=\"string\">'2'</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'Alex Zhao'</span>, <span class=\"attr\">id</span>: <span class=\"string\">'3'</span> &#125;,</span><br><span class=\"line\">])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> deleteCard = <span class=\"function\"><span class=\"params\">selectedUser</span> =&gt;</span> &#123;</span><br><span class=\"line\">  setUserList(<span class=\"function\"><span class=\"params\">prevUser</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> prevUser.filter(<span class=\"function\"><span class=\"params\">user</span> =&gt;</span> user.id !== selectedUser)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">return</span> (</span><br><span class=\"line\">  &lt;FlatList</span><br><span class=\"line\">    numColumns=&#123;<span class=\"number\">2</span>&#125;</span><br><span class=\"line\">    keyExtractor=&#123;item =&gt; item.id&#125;</span><br><span class=\"line\">    data=&#123;userList&#125;</span><br><span class=\"line\">    renderItem=&#123;(&#123; item &#125;) =&gt; (</span><br><span class=\"line\">      &lt;TouchableOpacity onPress=&#123;() =&gt; deleteCard(item.id)&#125;&gt;</span><br><span class=\"line\">        &lt;Text style=&#123;styles.userCard&#125;&gt;&#123;item.name&#125;&lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;/</span>TouchableOpacity&gt;</span><br><span class=\"line\">    )&#125;</span><br><span class=\"line\">  /&gt;</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Alerts-警示面板\"><a href=\"#Alerts-警示面板\" class=\"headerlink\" title=\"Alerts 警示面板\"></a>Alerts 警示面板</h2><p>使用<code>Alert</code> API 对用户进行提示。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Alert &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-native'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> handleSubmit = <span class=\"function\">(<span class=\"params\">inputValue</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(inputValue === <span class=\"string\">''</span>) &#123;</span><br><span class=\"line\">        Alert.alert(<span class=\"string\">'Error'</span>, <span class=\"string\">'Please enter your name'</span>, [</span><br><span class=\"line\">            &#123;<span class=\"attr\">text</span>: <span class=\"string\">'OK'</span>, <span class=\"attr\">onPress</span>: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">'alert closed'</span>)</span><br><span class=\"line\">        ])</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Keyboard-Dismiss-键盘忽略\"><a href=\"#Keyboard-Dismiss-键盘忽略\" class=\"headerlink\" title=\"Keyboard Dismiss 键盘忽略\"></a>Keyboard Dismiss 键盘忽略</h2><p>点击任何区域不再显示 Keyboard</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;TouchableWithoutFeedback</span><br><span class=\"line\">  onPress=&#123;() =&gt; &#123;</span><br><span class=\"line\">    keyboard.dismiss()</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'dismissed keyboard'</span>)</span><br><span class=\"line\">  &#125;&#125;</span><br><span class=\"line\">&gt;</span><br><span class=\"line\">  &lt;View&gt;</span><br><span class=\"line\">    &lt;Text&gt;Code Here&lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  &lt;/</span>View&gt;</span><br><span class=\"line\">&lt;<span class=\"regexp\">/TouchableWithoutFeedback&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Custom-Fonts-自定义字体\"><a href=\"#Custom-Fonts-自定义字体\" class=\"headerlink\" title=\"Custom Fonts 自定义字体\"></a>Custom Fonts 自定义字体</h2><p>如果想导入自定义的字体，需要使用<code>expo</code>中的<code>Font</code>库。我们首先利用<code>loadAsync</code>来加载字体，这个函数接受一个对象的参数，对象即字体引用名以及字体文件所在位置。</p>\n<p>我们同时要确保字体加载完成后再渲染组件，这里用<code>&lt;AppLoading /&gt;</code>来做异步处理，当字体加载完成后更新 fontLoaded state。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> Font <span class=\"keyword\">from</span> <span class=\"string\">'expo-font'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> Home <span class=\"keyword\">from</span> <span class=\"string\">'./screens/Home'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; AppLoading &#125; <span class=\"keyword\">from</span> <span class=\"string\">'expo'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> fetchFonts = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span></span><br><span class=\"line\">  Font.loadAsync(&#123;</span><br><span class=\"line\">    <span class=\"string\">'raleway-regular'</span>: <span class=\"built_in\">require</span>(<span class=\"string\">'./assets/fonts/Raleway-Regular.ttf'</span>),</span><br><span class=\"line\">    quicksand: <span class=\"built_in\">require</span>(<span class=\"string\">'./assets/fonts/Quicksand.ttf'</span>),</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [fontLoaded, setFontLoaded] = useState(<span class=\"literal\">false</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (fontLoaded) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Home</span> /&gt;</span></span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;AppLoading</span><br><span class=\"line\">        startAsync=&#123;fetchFonts&#125;</span><br><span class=\"line\">        onFinish=&#123;() =&gt; setFontLoaded(<span class=\"literal\">true</span>)&#125;</span><br><span class=\"line\">      /&gt;</span><br><span class=\"line\">    )</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>之后便可以在其他组件的<code>StyleSheet</code>中引用我们导入的字体</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Home</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  ;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">View</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">Text</span> <span class=\"attr\">style</span>=<span class=\"string\">&#123;styles.textPrimary&#125;</span>&gt;</span>Hello<span class=\"tag\">&lt;/<span class=\"name\">Text</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;/<span class=\"name\">View</span>&gt;</span></span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> styles = StyleSheet.create(&#123;</span><br><span class=\"line\">  textPrimary: &#123;</span><br><span class=\"line\">    fontFamily: <span class=\"string\">'quicksand'</span>,</span><br><span class=\"line\">    fontSize: <span class=\"number\">20</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Global-Styles-全局样式化\"><a href=\"#Global-Styles-全局样式化\" class=\"headerlink\" title=\"Global Styles 全局样式化\"></a>Global Styles 全局样式化</h2><p>在 CSS 中我们可以通过<code>className</code>来做到样式化的重复利用。在 React Native 中我们同理可以创建一个单独的全局样式化文件，来管理通用的样式化。其他组件使用时只需要导入文件即可。</p>\n<p>在<code>styles</code>文件夹中创建<code>global.js</code>管理样式化</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;StyleSheet&#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-native'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> globalStyles = StyleSheet.create(&#123;</span><br><span class=\"line\">  boxContainer: &#123;</span><br><span class=\"line\">    padding: <span class=\"number\">20</span>,</span><br><span class=\"line\">    borderRadius: <span class=\"number\">5</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  titleText: &#123;</span><br><span class=\"line\">    fontFamily: <span class=\"string\">'quicksand'</span></span><br><span class=\"line\">    fontWeight: <span class=\"string\">'bold'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>在其他组件中导入<code>globalStyles</code></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; globalStyles &#125; <span class=\"keyword\">from</span> <span class=\"string\">'../styles/global'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Home</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;View style=&#123;globalStyles.boxContainer&#125;&gt;</span><br><span class=\"line\">      &lt;Text style=&#123;globalStyles.titleText&#125;&gt;Hello&lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>View&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Navigation-and-Router-路由库\"><a href=\"#Navigation-and-Router-路由库\" class=\"headerlink\" title=\"Navigation and Router 路由库\"></a>Navigation and Router 路由库</h1><h2 id=\"Stack-Navigation-栈导航\"><a href=\"#Stack-Navigation-栈导航\" class=\"headerlink\" title=\"Stack Navigation 栈导航\"></a>Stack Navigation 栈导航</h2><h3 id=\"Install-Dependencies\"><a href=\"#Install-Dependencies\" class=\"headerlink\" title=\"Install Dependencies\"></a>Install Dependencies</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install react-navigation</span><br><span class=\"line\">expo install react-native-gesture-handler react-native-reanimated</span><br><span class=\"line\">npm install react-navigation-stack</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Setup-Routers\"><a href=\"#Setup-Routers\" class=\"headerlink\" title=\"Setup Routers\"></a>Setup Routers</h3><p>创建一个<code>router</code>文件夹，并创建一个<code>route.js</code>文件。</p>\n<p>如果没有在<code>navigationOptions</code>内声明样式化，会使用<code>defaultNavigationOptions</code></p>\n<p><strong>route.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStackNavigator &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-navigation-stack'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createAppContainer &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-navigation'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> Home <span class=\"keyword\">from</span> <span class=\"string\">'../screens/Home'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> CardDetail <span class=\"keyword\">from</span> <span class=\"string\">'../screens/CardDetails'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 默认情况下首先显示Home Screen</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> screens = &#123;</span><br><span class=\"line\">  Home: &#123;</span><br><span class=\"line\">    screen: Home,</span><br><span class=\"line\">    navigationOptions: &#123;</span><br><span class=\"line\">      title: <span class=\"string\">'AnimeKnow'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  CardDetail: &#123;</span><br><span class=\"line\">    screen: CardDetail,</span><br><span class=\"line\">    navigationOptions: &#123;</span><br><span class=\"line\">      title: <span class=\"string\">'Anime Details'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> RouteStack = createStackNavigator(screens, &#123;</span><br><span class=\"line\">  defaultNavigationOptions: &#123;</span><br><span class=\"line\">    headerTintColor: <span class=\"string\">'#4a4a4a'</span>,</span><br><span class=\"line\">    headerStyle: &#123; <span class=\"attr\">backgroundColor</span>: <span class=\"string\">'#03a9f4'</span>, <span class=\"attr\">height</span>: <span class=\"number\">60</span> &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> createAppContainer(RouteStack)</span><br></pre></td></tr></table></figure>\n\n<p><strong>App.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> Router <span class=\"keyword\">from</span> <span class=\"string\">'./router/route'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [fontLoaded, setFontLoaded] = useState(<span class=\"literal\">false</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (fontLoaded) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Router</span> /&gt;</span></span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;AppLoading</span><br><span class=\"line\">        startAsync=&#123;fetchFonts&#125;</span><br><span class=\"line\">        onFinish=&#123;() =&gt; setFontLoaded(<span class=\"literal\">true</span>)&#125;</span><br><span class=\"line\">      /&gt;</span><br><span class=\"line\">    )</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Navigation-with-Button-按钮事件导航\"><a href=\"#Navigation-with-Button-按钮事件导航\" class=\"headerlink\" title=\"Navigation with Button 按钮事件导航\"></a>Navigation with Button 按钮事件导航</h3><p>在之前的 Setup 中，我们默认显示的为<code>Home</code>组件，现在添加按钮来进行组件的导航。</p>\n<p>默认情况下，<code>react-navigation</code>会自动添加一个返回箭头按钮来实现 pop 组件。</p>\n<p><strong>Home.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Home</span>(<span class=\"params\">&#123;navigation&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleDetailNav = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    navigation.navigate(<span class=\"string\">'CardDetail'</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;View&gt;</span><br><span class=\"line\">      &lt;Text&gt;Home Page&lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;Button title='View More Details' onPress=&#123;handleDetailNav&#125;&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>View&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>同理添加一个<code>&lt;Button /&gt;</code>手动实现回到上一个组件</p>\n<p><strong>CardDetail</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">CardDetail</span>(<span class=\"params\">&#123;navigation&#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleReturn = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    navigation.goBack()</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;View&gt;</span><br><span class=\"line\">      &lt;Text&gt;Card Details page&lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;Button title='Go Back' onPress=&#123;handleReturn&#125;&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>View&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Passing-Data-Between-Components-传递数据\"><a href=\"#Passing-Data-Between-Components-传递数据\" class=\"headerlink\" title=\"Passing Data Between Components 传递数据\"></a>Passing Data Between Components 传递数据</h3><p>点击每个卡片显示该卡片的信息。具体思路如下</p>\n<ol>\n<li>使用 FlatList API 渲染所有卡片</li>\n<li>对卡片添加<code>onPress</code>触发，并转入到<code>&lt;CardDetail /&gt;</code></li>\n<li>props 接受并显示数据</li>\n</ol>\n<p><strong>Home.js</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Home</span>(<span class=\"params\">&#123; navigation &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [animeList, setAnimeList] = useState([</span><br><span class=\"line\">    &#123; <span class=\"attr\">key</span>: <span class=\"string\">'1'</span>, <span class=\"attr\">title</span>: <span class=\"string\">'Attack on Titan'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">24</span>, <span class=\"attr\">rating</span>: <span class=\"number\">9.5</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">key</span>: <span class=\"string\">'2'</span>, <span class=\"attr\">title</span>: <span class=\"string\">'Fate Stay Night'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">22</span>, <span class=\"attr\">rating</span>: <span class=\"number\">7.5</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">key</span>: <span class=\"string\">'3'</span>, <span class=\"attr\">title</span>: <span class=\"string\">'Clannad'</span>, <span class=\"attr\">episode</span>: <span class=\"number\">13</span>, <span class=\"attr\">rating</span>: <span class=\"number\">10.0</span> &#125;,</span><br><span class=\"line\">  ])</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;View&gt;</span><br><span class=\"line\">      &lt;FlatList</span><br><span class=\"line\">        data=&#123;animeList&#125;</span><br><span class=\"line\">        renderItem=&#123;(&#123; item &#125;) =&gt; (</span><br><span class=\"line\">          &lt;TouchableOpacity</span><br><span class=\"line\">            onPress=&#123;() =&gt; navigation.navigate(<span class=\"string\">'CardDetail'</span>, item)&#125;</span><br><span class=\"line\">          &gt;</span><br><span class=\"line\">            &lt;Text&gt;&#123;item.title&#125;&lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">          &lt;/</span>TouchableOpacity&gt;</span><br><span class=\"line\">        )&#125;</span><br><span class=\"line\">      /&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/View&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>在<code>&lt;CardDetail /&gt;</code>组件中利用<code>getParam</code>获取传递的数据</p>\n<p><strong>CardDetail</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">CardDetail</span>(<span class=\"params\">&#123; navigation &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;View&gt;</span><br><span class=\"line\">      &lt;Text&gt;&#123;navigation.getParam(<span class=\"string\">'title'</span>)&#125;&lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;Text&gt;&#123;navigation.getParam('episode')&#125;&lt;/</span>Text&gt;</span><br><span class=\"line\">      &lt;Text&gt;&#123;navigation.getParam(<span class=\"string\">'rating'</span>)&#125;&lt;<span class=\"regexp\">/Text&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>View&gt;</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Drawer-Navigation-侧滑导航菜单栏\"><a href=\"#Drawer-Navigation-侧滑导航菜单栏\" class=\"headerlink\" title=\"Drawer Navigation 侧滑导航菜单栏\"></a>Drawer Navigation 侧滑导航菜单栏</h2>"}],"PostAsset":[],"PostCategory":[{"post_id":"ckdnmttcu0008rwuibgxd6k5z","category_id":"ckdnmttcr0004rwuibxfb2y9q","_id":"ckdnmttd1000frwui4n7ueo5g"},{"post_id":"ckdnmttcj0000rwui7y5c68fn","category_id":"ckdnmttcr0004rwuibxfb2y9q","_id":"ckdnmttd3000jrwuic3r7bjix"},{"post_id":"ckdnmttcw000arwui6s800m6p","category_id":"ckdnmttcr0004rwuibxfb2y9q","_id":"ckdnmttd4000lrwui2d8t5kes"},{"post_id":"ckdnmttcz000drwui24xp799z","category_id":"ckdnmttcr0004rwuibxfb2y9q","_id":"ckdnmttd6000prwui3bqw9sfo"},{"post_id":"ckdnmttcp0002rwui0x5aeykc","category_id":"ckdnmttcr0004rwuibxfb2y9q","_id":"ckdnmttd7000rrwuicxgu0cui"},{"post_id":"ckdnmttd1000erwui0abh8oqb","category_id":"ckdnmttcr0004rwuibxfb2y9q","_id":"ckdnmttd8000vrwui1yapaxby"},{"post_id":"ckdnmttct0006rwuiez3gd5go","category_id":"ckdnmttcr0004rwuibxfb2y9q","_id":"ckdnmttd9000xrwui1yac70in"},{"post_id":"ckdnmttd5000orwuifaz58tp3","category_id":"ckdnmttcr0004rwuibxfb2y9q","_id":"ckdnmttda000zrwui0tgi4zyq"},{"post_id":"ckdnmttd6000qrwui0anj3irl","category_id":"ckdnmttd5000nrwui0sc1412l","_id":"ckdnmttdb0013rwui4vm5fmhc"},{"post_id":"ckdnmttd2000irwui200ngn48","category_id":"ckdnmttd5000nrwui0sc1412l","_id":"ckdnmttdd0017rwuia8nt061g"},{"post_id":"ckdnmttd7000trwuidpeg3m9t","category_id":"ckdnmttcr0004rwuibxfb2y9q","_id":"ckdnmttde001brwuidfuxga4q"},{"post_id":"ckdnmttd9000wrwui33xs79g7","category_id":"ckdnmttcr0004rwuibxfb2y9q","_id":"ckdnmttdf001frwuigut944kg"},{"post_id":"ckdnmttd3000krwuibfkthl68","category_id":"ckdnmttd5000nrwui0sc1412l","_id":"ckdnmttdg001jrwuif80raqxg"},{"post_id":"ckdnmttdd001arwuianasctfe","category_id":"ckdnmttdc0014rwui0i6jadlu","_id":"ckdnmttdl001mrwui3xf4g5ng"},{"post_id":"ckdnmttd9000yrwui3ntxfkxw","category_id":"ckdnmttdc0014rwui0i6jadlu","_id":"ckdnmttdm001rrwui907ecakw"},{"post_id":"ckdnmttdg001irwui5s374jr4","category_id":"ckdnmttdc0014rwui0i6jadlu","_id":"ckdnmttdp001trwui8z7815so"},{"post_id":"ckdnmttdb0012rwui2a8j726z","category_id":"ckdnmttdf001erwui7oqr38bh","_id":"ckdnmttdr001xrwui3h5qb2ui"},{"post_id":"ckdnmttdh001lrwui7r7qcnnv","category_id":"ckdnmttdf001erwui7oqr38bh","_id":"ckdnmttds0020rwuieawae57x"},{"post_id":"ckdnmttdm001qrwuigcrncofx","category_id":"ckdnmttdf001erwui7oqr38bh","_id":"ckdnmttdt0024rwuic7ubcb0s"},{"post_id":"ckdnmttdc0016rwui6tys1w1c","category_id":"ckdnmttdc0014rwui0i6jadlu","_id":"ckdnmttdu0026rwuigev55woa"},{"post_id":"ckdnmttdn001srwuic9dn6x44","category_id":"ckdnmttcr0004rwuibxfb2y9q","_id":"ckdnmttdv0028rwuic4shcwez"},{"post_id":"ckdnmttdq001wrwuih565fnz7","category_id":"ckdnmttd5000nrwui0sc1412l","_id":"ckdnmttdw002brwui4ip3dx9n"},{"post_id":"ckdnmttde001drwuihy5h2e9z","category_id":"ckdnmttdf001erwui7oqr38bh","_id":"ckdnmttdx002drwui9gtuadpc"},{"post_id":"ckdnmttdr001zrwuigbzc5km9","category_id":"ckdnmttdc0014rwui0i6jadlu","_id":"ckdnmttdz002grwuih7rb9v9u"},{"post_id":"ckdnmttdt0023rwui5shhb0m0","category_id":"ckdnmttd5000nrwui0sc1412l","_id":"ckdnmtte0002jrwui6rh1gtuw"},{"post_id":"ckdnmttdt0025rwui9odx01gv","category_id":"ckdnmttd5000nrwui0sc1412l","_id":"ckdnmtte1002nrwui2cdy6did"},{"post_id":"ckdnmttdu0027rwui2kve6hvs","category_id":"ckdnmttdc0014rwui0i6jadlu","_id":"ckdnmtte1002prwui1ygp4pp1"},{"post_id":"ckdnmttdw002arwui3i2u5hxr","category_id":"ckdnmttdc0014rwui0i6jadlu","_id":"ckdnmtte2002rrwuieycch55n"},{"post_id":"ckdnmttdx002crwuifwt6dr4y","category_id":"ckdnmttd5000nrwui0sc1412l","_id":"ckdnmtte2002trwuicolu0amk"},{"post_id":"ckdnmttdy002frwuidu2bf252","category_id":"ckdnmttdc0014rwui0i6jadlu","_id":"ckdnmtte2002wrwui09ttfkzf"},{"post_id":"ckdnmttdz002irwuic72v0r5b","category_id":"ckdnmttdc0014rwui0i6jadlu","_id":"ckdnmtte2002xrwui0dzab3uq"},{"post_id":"ckdnmtte0002mrwuibsp2ckng","category_id":"ckdnmttdc0014rwui0i6jadlu","_id":"ckdnmtte2002yrwuiaray0lka"}],"PostTag":[{"post_id":"ckdnmttcj0000rwui7y5c68fn","tag_id":"ckdnmttcs0005rwuiafbgcw1u","_id":"ckdnmttdb0011rwui0r6dg505"},{"post_id":"ckdnmttcj0000rwui7y5c68fn","tag_id":"ckdnmttcw000crwui87hwf9jf","_id":"ckdnmttdc0015rwui87ybfvwx"},{"post_id":"ckdnmttcj0000rwui7y5c68fn","tag_id":"ckdnmttd2000hrwuia1v66gvi","_id":"ckdnmttdd0019rwuibko9dl7u"},{"post_id":"ckdnmttcj0000rwui7y5c68fn","tag_id":"ckdnmttd5000mrwui595168cc","_id":"ckdnmttde001crwui0lv1ae3s"},{"post_id":"ckdnmttcj0000rwui7y5c68fn","tag_id":"ckdnmttd7000srwuifxfzgh9b","_id":"ckdnmttdg001hrwuigcnd3qp4"},{"post_id":"ckdnmttcp0002rwui0x5aeykc","tag_id":"ckdnmttda0010rwuicgumavx3","_id":"ckdnmttdh001krwui23cp4v24"},{"post_id":"ckdnmttcp0002rwui0x5aeykc","tag_id":"ckdnmttdd0018rwui5nxwh9c9","_id":"ckdnmttdm001prwui9rl18mpt"},{"post_id":"ckdnmttct0006rwuiez3gd5go","tag_id":"ckdnmttda0010rwuicgumavx3","_id":"ckdnmttdr001yrwui7cpb0zv1"},{"post_id":"ckdnmttct0006rwuiez3gd5go","tag_id":"ckdnmttdl001orwui7mi669ex","_id":"ckdnmttds0021rwuia43t4ud0"},{"post_id":"ckdnmttcu0008rwuibgxd6k5z","tag_id":"ckdnmttda0010rwuicgumavx3","_id":"ckdnmttdz002hrwuie1zv3p59"},{"post_id":"ckdnmttcu0008rwuibgxd6k5z","tag_id":"ckdnmttds0022rwui1j4x97sw","_id":"ckdnmtte0002krwui54b5d6z3"},{"post_id":"ckdnmttcu0008rwuibgxd6k5z","tag_id":"ckdnmttdv0029rwui4lno2nqu","_id":"ckdnmtte1002orwui72apc7tf"},{"post_id":"ckdnmttcw000arwui6s800m6p","tag_id":"ckdnmttda0010rwuicgumavx3","_id":"ckdnmtte2002srwui93gxfu1q"},{"post_id":"ckdnmttcw000arwui6s800m6p","tag_id":"ckdnmtte0002lrwui163076sj","_id":"ckdnmtte2002urwui92r09u7a"},{"post_id":"ckdnmttcz000drwui24xp799z","tag_id":"ckdnmtte1002qrwuidtix91ea","_id":"ckdnmtte30031rwui0gpj8mak"},{"post_id":"ckdnmttcz000drwui24xp799z","tag_id":"ckdnmtte2002vrwui0uqcgl7q","_id":"ckdnmtte30032rwuicikz5m05"},{"post_id":"ckdnmttcz000drwui24xp799z","tag_id":"ckdnmtte2002zrwui0gejcuwe","_id":"ckdnmtte30034rwui2dkyewxq"},{"post_id":"ckdnmttd1000erwui0abh8oqb","tag_id":"ckdnmttds0022rwui1j4x97sw","_id":"ckdnmtte50039rwui12njf8r3"},{"post_id":"ckdnmttd1000erwui0abh8oqb","tag_id":"ckdnmtte30033rwuieg44acfs","_id":"ckdnmtte5003arwui5k5k5izc"},{"post_id":"ckdnmttd1000erwui0abh8oqb","tag_id":"ckdnmtte40035rwuidq0gcdzn","_id":"ckdnmtte5003crwui52ar9m5t"},{"post_id":"ckdnmttd1000erwui0abh8oqb","tag_id":"ckdnmtte40036rwuidzeb4ruc","_id":"ckdnmtte5003drwui825y1fef"},{"post_id":"ckdnmttd1000erwui0abh8oqb","tag_id":"ckdnmtte40037rwuigsurd5q3","_id":"ckdnmtte6003frwuidtihay7x"},{"post_id":"ckdnmttd2000irwui200ngn48","tag_id":"ckdnmttds0022rwui1j4x97sw","_id":"ckdnmtte7003jrwui6ldjdj41"},{"post_id":"ckdnmttd2000irwui200ngn48","tag_id":"ckdnmtte40035rwuidq0gcdzn","_id":"ckdnmtte7003krwui5pabfvfg"},{"post_id":"ckdnmttd2000irwui200ngn48","tag_id":"ckdnmtte40037rwuigsurd5q3","_id":"ckdnmtte8003mrwui9mv4em5p"},{"post_id":"ckdnmttd2000irwui200ngn48","tag_id":"ckdnmtte6003grwui9ygo5htt","_id":"ckdnmtte8003nrwuidu1mez3l"},{"post_id":"ckdnmttd2000irwui200ngn48","tag_id":"ckdnmtte6003hrwui4iu23rv6","_id":"ckdnmtte8003prwuia0um1a6v"},{"post_id":"ckdnmttd3000krwuibfkthl68","tag_id":"ckdnmtte7003irwuig7yk3g6n","_id":"ckdnmtte9003rrwuiga8i07um"},{"post_id":"ckdnmttd3000krwuibfkthl68","tag_id":"ckdnmtte7003lrwui03tq2xnq","_id":"ckdnmtte9003srwui48524hjk"},{"post_id":"ckdnmttd3000krwuibfkthl68","tag_id":"ckdnmtte8003orwui8swzf67y","_id":"ckdnmtte9003urwuih5es28fq"},{"post_id":"ckdnmttd5000orwuifaz58tp3","tag_id":"ckdnmttdd0018rwui5nxwh9c9","_id":"ckdnmttea003xrwui4bzf5snx"},{"post_id":"ckdnmttd5000orwuifaz58tp3","tag_id":"ckdnmtte9003trwui9nvk3udf","_id":"ckdnmttea003yrwui2ys50q5h"},{"post_id":"ckdnmttd5000orwuifaz58tp3","tag_id":"ckdnmtte40037rwuigsurd5q3","_id":"ckdnmttea0040rwui09ul8mo5"},{"post_id":"ckdnmttd6000qrwui0anj3irl","tag_id":"ckdnmtte9003wrwui4oq04y30","_id":"ckdnmtteb0044rwuicpvldvy3"},{"post_id":"ckdnmttd6000qrwui0anj3irl","tag_id":"ckdnmttea003zrwui9iqgdr56","_id":"ckdnmtteb0045rwui2lyje4ah"},{"post_id":"ckdnmttd6000qrwui0anj3irl","tag_id":"ckdnmttea0041rwui0f3jdvdf","_id":"ckdnmtteb0047rwui1zkb5gtg"},{"post_id":"ckdnmttd6000qrwui0anj3irl","tag_id":"ckdnmttea0042rwuicvov8n9p","_id":"ckdnmtteb0048rwuibkmghel1"},{"post_id":"ckdnmttd7000trwuidpeg3m9t","tag_id":"ckdnmtteb0043rwuiaol37cu4","_id":"ckdnmttec004arwuiewm0hpg7"},{"post_id":"ckdnmttd7000trwuidpeg3m9t","tag_id":"ckdnmtte40037rwuigsurd5q3","_id":"ckdnmttec004brwui8jny9ee4"},{"post_id":"ckdnmttd9000wrwui33xs79g7","tag_id":"ckdnmttds0022rwui1j4x97sw","_id":"ckdnmttef004hrwui8ylm8dkm"},{"post_id":"ckdnmttd9000wrwui33xs79g7","tag_id":"ckdnmttec004crwuihvwd6pep","_id":"ckdnmttef004irwui8uqb6j7x"},{"post_id":"ckdnmttd9000wrwui33xs79g7","tag_id":"ckdnmtte40036rwuidzeb4ruc","_id":"ckdnmtteg004krwui73uk5akn"},{"post_id":"ckdnmttd9000wrwui33xs79g7","tag_id":"ckdnmtted004erwuidr31gkkm","_id":"ckdnmtteg004lrwui1olr1ysp"},{"post_id":"ckdnmttd9000wrwui33xs79g7","tag_id":"ckdnmtte40037rwuigsurd5q3","_id":"ckdnmtteg004nrwuibyojah5u"},{"post_id":"ckdnmttd9000yrwui3ntxfkxw","tag_id":"ckdnmttee004grwui94zn5iqw","_id":"ckdnmtteh004prwui8x4lgi7y"},{"post_id":"ckdnmttd9000yrwui3ntxfkxw","tag_id":"ckdnmttdd0018rwui5nxwh9c9","_id":"ckdnmtteh004qrwuieoqj7gl8"},{"post_id":"ckdnmttd9000yrwui3ntxfkxw","tag_id":"ckdnmtteg004mrwuib15a5kyc","_id":"ckdnmttej004srwui5nmu3fl1"},{"post_id":"ckdnmttdb0012rwui2a8j726z","tag_id":"ckdnmtteg004orwui8gptf90v","_id":"ckdnmttek004vrwui6zeo59kt"},{"post_id":"ckdnmttdb0012rwui2a8j726z","tag_id":"ckdnmtteh004rrwui4vx2al1d","_id":"ckdnmttek004wrwui5gko6652"},{"post_id":"ckdnmttdb0012rwui2a8j726z","tag_id":"ckdnmtte40037rwuigsurd5q3","_id":"ckdnmttek004yrwui4t46bazl"},{"post_id":"ckdnmttdc0016rwui6tys1w1c","tag_id":"ckdnmttej004urwui6hg4ep0b","_id":"ckdnmttel0051rwuig7rr42mu"},{"post_id":"ckdnmttdc0016rwui6tys1w1c","tag_id":"ckdnmttek004xrwui0cg4eov1","_id":"ckdnmttel0052rwuihoro5fo9"},{"post_id":"ckdnmttdc0016rwui6tys1w1c","tag_id":"ckdnmtte40037rwuigsurd5q3","_id":"ckdnmttel0054rwuic2lfaz8z"},{"post_id":"ckdnmttdd001arwuianasctfe","tag_id":"ckdnmttek0050rwui3k7hdu3k","_id":"ckdnmttem0057rwuif9skey2a"},{"post_id":"ckdnmttdd001arwuianasctfe","tag_id":"ckdnmttel0053rwuihiio8jkb","_id":"ckdnmttem0058rwuidpcc0v5i"},{"post_id":"ckdnmttdd001arwuianasctfe","tag_id":"ckdnmttel0055rwui69nsdr4o","_id":"ckdnmttem005arwuib8ol0eoq"},{"post_id":"ckdnmttde001drwuihy5h2e9z","tag_id":"ckdnmtteg004orwui8gptf90v","_id":"ckdnmtten005erwuib5p50hbv"},{"post_id":"ckdnmttde001drwuihy5h2e9z","tag_id":"ckdnmtteh004rrwui4vx2al1d","_id":"ckdnmtten005frwui7bxe8h90"},{"post_id":"ckdnmttde001drwuihy5h2e9z","tag_id":"ckdnmtte40037rwuigsurd5q3","_id":"ckdnmtteo005hrwui55m23dog"},{"post_id":"ckdnmttde001drwuihy5h2e9z","tag_id":"ckdnmttem005crwui3aq1f7z1","_id":"ckdnmtteo005irwui92hlh2mk"},{"post_id":"ckdnmttdg001irwui5s374jr4","tag_id":"ckdnmtte40036rwuidzeb4ruc","_id":"ckdnmttep005mrwui9udzetv6"},{"post_id":"ckdnmttdg001irwui5s374jr4","tag_id":"ckdnmtten005grwuigxki2tum","_id":"ckdnmttep005nrwuic7wbgqew"},{"post_id":"ckdnmttdg001irwui5s374jr4","tag_id":"ckdnmtteo005jrwui719604gq","_id":"ckdnmttep005prwui29bb3ect"},{"post_id":"ckdnmttdg001irwui5s374jr4","tag_id":"ckdnmtte40037rwuigsurd5q3","_id":"ckdnmttep005qrwui2oxq477r"},{"post_id":"ckdnmttdg001irwui5s374jr4","tag_id":"ckdnmttdd0018rwui5nxwh9c9","_id":"ckdnmtteq005srwuiajmdawm7"},{"post_id":"ckdnmttdh001lrwui7r7qcnnv","tag_id":"ckdnmtteg004orwui8gptf90v","_id":"ckdnmtter005vrwui4b1def5n"},{"post_id":"ckdnmttdh001lrwui7r7qcnnv","tag_id":"ckdnmtteh004rrwui4vx2al1d","_id":"ckdnmtter005wrwui8s815n10"},{"post_id":"ckdnmttdh001lrwui7r7qcnnv","tag_id":"ckdnmtte40037rwuigsurd5q3","_id":"ckdnmttes005yrwuigfcvh17d"},{"post_id":"ckdnmttdh001lrwui7r7qcnnv","tag_id":"ckdnmttem005crwui3aq1f7z1","_id":"ckdnmttes005zrwui7g6j3zis"},{"post_id":"ckdnmttdm001qrwuigcrncofx","tag_id":"ckdnmtteg004orwui8gptf90v","_id":"ckdnmttet0064rwui4w3b60zv"},{"post_id":"ckdnmttdm001qrwuigcrncofx","tag_id":"ckdnmtter005xrwui79tw3gkp","_id":"ckdnmttet0065rwuie46qdmsh"},{"post_id":"ckdnmttdm001qrwuigcrncofx","tag_id":"ckdnmtteh004rrwui4vx2al1d","_id":"ckdnmtteu0067rwuifg3q65n8"},{"post_id":"ckdnmttdm001qrwuigcrncofx","tag_id":"ckdnmttes0061rwuifpaefubl","_id":"ckdnmtteu0068rwui35yees9t"},{"post_id":"ckdnmttdm001qrwuigcrncofx","tag_id":"ckdnmttem005crwui3aq1f7z1","_id":"ckdnmtteu006arwuifh64fzii"},{"post_id":"ckdnmttdn001srwuic9dn6x44","tag_id":"ckdnmttet0063rwui5m39e8ho","_id":"ckdnmtteu006brwuic5n7ed9q"},{"post_id":"ckdnmttdq001wrwuih565fnz7","tag_id":"ckdnmtteu0066rwuib39i7tcg","_id":"ckdnmttev006drwui5ys0fpw2"},{"post_id":"ckdnmttdq001wrwuih565fnz7","tag_id":"ckdnmtte2002vrwui0uqcgl7q","_id":"ckdnmttev006erwui6xrw56l4"},{"post_id":"ckdnmttdr001zrwuigbzc5km9","tag_id":"ckdnmtte40037rwuigsurd5q3","_id":"ckdnmttey006jrwui637cac0t"},{"post_id":"ckdnmttdr001zrwuigbzc5km9","tag_id":"ckdnmttds0022rwui1j4x97sw","_id":"ckdnmttey006krwui5fexe1oi"},{"post_id":"ckdnmttdr001zrwuigbzc5km9","tag_id":"ckdnmttew006grwuidh0w0c9w","_id":"ckdnmttey006mrwuih6ly1sxm"},{"post_id":"ckdnmttdr001zrwuigbzc5km9","tag_id":"ckdnmtte2002vrwui0uqcgl7q","_id":"ckdnmttey006nrwuiflrqd7th"},{"post_id":"ckdnmttdt0023rwui5shhb0m0","tag_id":"ckdnmttey006irwui8dskdo7o","_id":"ckdnmttez006prwuiceosg2bo"},{"post_id":"ckdnmttdt0023rwui5shhb0m0","tag_id":"ckdnmttel0055rwui69nsdr4o","_id":"ckdnmttez006qrwui2jx40pjd"},{"post_id":"ckdnmttdt0025rwui9odx01gv","tag_id":"ckdnmtteg004orwui8gptf90v","_id":"ckdnmttf0006trwuib34odepn"},{"post_id":"ckdnmttdt0025rwui9odx01gv","tag_id":"ckdnmttez006rrwui61xoew9f","_id":"ckdnmttf0006urwui56ce9fvx"},{"post_id":"ckdnmttdt0025rwui9odx01gv","tag_id":"ckdnmttcw000crwui87hwf9jf","_id":"ckdnmttf0006wrwui0lcl65vs"},{"post_id":"ckdnmttdu0027rwui2kve6hvs","tag_id":"ckdnmttf0006srwui81qn4864","_id":"ckdnmttf1006yrwuictdb9sik"},{"post_id":"ckdnmttdu0027rwui2kve6hvs","tag_id":"ckdnmtte40037rwuigsurd5q3","_id":"ckdnmttf1006zrwuigaf0epvo"},{"post_id":"ckdnmttdw002arwui3i2u5hxr","tag_id":"ckdnmttf0006xrwui3gdf6pik","_id":"ckdnmttf20074rwui9ias54ow"},{"post_id":"ckdnmttdw002arwui3i2u5hxr","tag_id":"ckdnmttds0022rwui1j4x97sw","_id":"ckdnmttf20075rwui58ezdp93"},{"post_id":"ckdnmttdw002arwui3i2u5hxr","tag_id":"ckdnmttez006rrwui61xoew9f","_id":"ckdnmttf20077rwuih5c99692"},{"post_id":"ckdnmttdw002arwui3i2u5hxr","tag_id":"ckdnmttf10071rwui33ez12mi","_id":"ckdnmttf30078rwui5hc69zvt"},{"post_id":"ckdnmttdw002arwui3i2u5hxr","tag_id":"ckdnmtte6003hrwui4iu23rv6","_id":"ckdnmttf3007arwui2utygsae"},{"post_id":"ckdnmttdx002crwuifwt6dr4y","tag_id":"ckdnmttf20073rwui4v8ybgpp","_id":"ckdnmttf3007brwuihmrd9tat"},{"post_id":"ckdnmttdx002crwuifwt6dr4y","tag_id":"ckdnmttdd0018rwui5nxwh9c9","_id":"ckdnmttf3007drwui6o4x8glt"},{"post_id":"ckdnmttdy002frwuidu2bf252","tag_id":"ckdnmttf20076rwui64g2huuy","_id":"ckdnmttf3007erwuiclwbgn1c"},{"post_id":"ckdnmttdy002frwuidu2bf252","tag_id":"ckdnmttds0022rwui1j4x97sw","_id":"ckdnmttf4007grwuidfaidp9g"},{"post_id":"ckdnmttdy002frwuidu2bf252","tag_id":"ckdnmtte2002zrwui0gejcuwe","_id":"ckdnmttf4007hrwui0icehxr5"},{"post_id":"ckdnmttdz002irwuic72v0r5b","tag_id":"ckdnmttf3007crwuif5rf00ka","_id":"ckdnmttf4007krwui4kgvdib5"},{"post_id":"ckdnmttdz002irwuic72v0r5b","tag_id":"ckdnmttds0022rwui1j4x97sw","_id":"ckdnmttf6007lrwuiccxxaj2l"},{"post_id":"ckdnmttdz002irwuic72v0r5b","tag_id":"ckdnmtte2002zrwui0gejcuwe","_id":"ckdnmttf6007nrwui8i2q0qnf"},{"post_id":"ckdnmttdz002irwuic72v0r5b","tag_id":"ckdnmtte40036rwuidzeb4ruc","_id":"ckdnmttf6007orwuig0i99ef6"},{"post_id":"ckdnmtte0002mrwuibsp2ckng","tag_id":"ckdnmttf4007jrwuibme2bck6","_id":"ckdnmttf6007prwuicdhkbl2a"},{"post_id":"ckdnmtte0002mrwuibsp2ckng","tag_id":"ckdnmttds0022rwui1j4x97sw","_id":"ckdnmttf6007qrwuibkx3e8mh"},{"post_id":"ckdnmtte0002mrwuibsp2ckng","tag_id":"ckdnmtte2002zrwui0gejcuwe","_id":"ckdnmttf6007rrwui8ceyfzrk"}],"Tag":[{"name":"firebase","_id":"ckdnmttcs0005rwuiafbgcw1u"},{"name":"database","_id":"ckdnmttcw000crwui87hwf9jf"},{"name":"web","_id":"ckdnmttd2000hrwuia1v66gvi"},{"name":"firestore","_id":"ckdnmttd5000mrwui595168cc"},{"name":"cloudstorage","_id":"ckdnmttd7000srwuifxfzgh9b"},{"name":"笔记","_id":"ckdnmttda0010rwuicgumavx3"},{"name":"javascript","_id":"ckdnmttdd0018rwui5nxwh9c9"},{"name":"git","_id":"ckdnmttdl001orwui7mi669ex"},{"name":"react","_id":"ckdnmttds0022rwui1j4x97sw"},{"name":"react-router","_id":"ckdnmttdv0029rwui4lno2nqu"},{"name":"JavaScript","_id":"ckdnmtte0002lrwui163076sj"},{"name":"Sass","_id":"ckdnmtte1002qrwuidtix91ea"},{"name":"css","_id":"ckdnmtte2002vrwui0uqcgl7q"},{"name":"note","_id":"ckdnmtte2002zrwui0gejcuwe"},{"name":"tsx","_id":"ckdnmtte30033rwuieg44acfs"},{"name":"typescript","_id":"ckdnmtte40035rwuidq0gcdzn"},{"name":"front-end","_id":"ckdnmtte40036rwuidzeb4ruc"},{"name":"notes","_id":"ckdnmtte40037rwuigsurd5q3"},{"name":"npm","_id":"ckdnmtte6003grwui9ygo5htt"},{"name":"node","_id":"ckdnmtte6003hrwui4iu23rv6"},{"name":"windows","_id":"ckdnmtte7003irwuig7yk3g6n"},{"name":"powershell","_id":"ckdnmtte7003lrwui03tq2xnq"},{"name":"terminal","_id":"ckdnmtte8003orwui8swzf67y"},{"name":"es6","_id":"ckdnmtte9003trwui9nvk3udf"},{"name":"powerlifting","_id":"ckdnmtte9003wrwui4oq04y30"},{"name":"routine","_id":"ckdnmttea003zrwui9iqgdr56"},{"name":"Big three","_id":"ckdnmttea0041rwui0f3jdvdf"},{"name":"rogue","_id":"ckdnmttea0042rwuicvov8n9p"},{"name":"algorithim","_id":"ckdnmtteb0043rwuiaol37cu4"},{"name":"framework","_id":"ckdnmttec004crwuihvwd6pep"},{"name":"react-hooks","_id":"ckdnmtted004erwuidr31gkkm"},{"name":"regular expression","_id":"ckdnmttee004grwui94zn5iqw"},{"name":"learning everyday","_id":"ckdnmtteg004mrwuib15a5kyc"},{"name":"python","_id":"ckdnmtteg004orwui8gptf90v"},{"name":"web crawler","_id":"ckdnmtteh004rrwui4vx2al1d"},{"name":"data communication","_id":"ckdnmttej004urwui6hg4ep0b"},{"name":"BCIT","_id":"ckdnmttek004xrwui0cg4eov1"},{"name":"vuepress","_id":"ckdnmttek0050rwui3k7hdu3k"},{"name":"documentation","_id":"ckdnmttel0053rwuihiio8jkb"},{"name":"articles","_id":"ckdnmttel0055rwui69nsdr4o"},{"name":"python-crawler-series","_id":"ckdnmttem005crwui3aq1f7z1"},{"name":"frameword","_id":"ckdnmtten005grwuigxki2tum"},{"name":"angular","_id":"ckdnmtteo005jrwui719604gq"},{"name":"article","_id":"ckdnmtter005xrwui79tw3gkp"},{"name":"fiddler","_id":"ckdnmttes0061rwuifpaefubl"},{"name":"reflection","_id":"ckdnmttet0063rwui5m39e8ho"},{"name":"sass","_id":"ckdnmtteu0066rwuib39i7tcg"},{"name":"styled-components","_id":"ckdnmttew006grwuidh0w0c9w"},{"name":"hexo","_id":"ckdnmttey006irwui8dskdo7o"},{"name":"mongoDB","_id":"ckdnmttez006rrwui61xoew9f"},{"name":"editor","_id":"ckdnmttf0006srwui81qn4864"},{"name":"MERN","_id":"ckdnmttf0006xrwui3gdf6pik"},{"name":"express","_id":"ckdnmttf10071rwui33ez12mi"},{"name":"API","_id":"ckdnmttf20073rwui4v8ybgpp"},{"name":"data visiualization","_id":"ckdnmttf20076rwui64g2huuy"},{"name":"redux","_id":"ckdnmttf3007crwuif5rf00ka"},{"name":"react-native","_id":"ckdnmttf4007jrwuibme2bck6"}]}}